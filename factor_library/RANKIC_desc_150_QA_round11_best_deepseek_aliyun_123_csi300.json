{
  "metadata": {
    "created_at": "2026-01-21T17:23:46.770770",
    "last_updated": "2026-01-21T17:23:46.770781",
    "total_factors": 150,
    "version": "1.0",
    "note": "Extracted 150 factors from all_factors_library_QA_round11_best_deepseek_aliyun_123_csi300.json using RANKIC (desc)",
    "source_version": "1.0"
  },
  "factors": {
    "2e455b91fc94e600": {
      "factor_id": "2e455b91fc94e600",
      "factor_name": "Liquidity_Exhaustion_Reversal_5D",
      "factor_expression": "TS_MEAN(($high - $low) / ($volume + 1e-8), 5) * RANK(TS_MEAN(($close - $open) - ($high - $low), 3))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_MEAN(($high - $low) / ($volume + 1e-8), 5) * RANK(TS_MEAN(($close - $open) - ($high - $low), 3))\" # Your output factor expression will be filled in here\n    name = \"Liquidity_Exhaustion_Reversal_5D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies 'liquidity holes' by multiplying the 5-day average Amihud Illiquidity (price range per unit volume) with the 3-day rank of price-move skewness. High values indicate price movements are occurring on low volume with extreme directional bias, signaling an unsustainable exhaustion phase prone to mean reversion.",
      "factor_formulation": "\\text{TS_MEAN}(\\frac{\\text{high} - \\text{low}}{\\text{volume} + 1e-8}, 5) \\times \\text{RANK}(\\text{TS_MEAN}((\\text{close} - \\text{open}) - (\\text{high} - \\text{low}), 3))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 3,
        "evolution_phase": "mutation",
        "trajectory_id": "1f9a6895026f",
        "parent_trajectory_ids": [
          "74ba6f865315"
        ],
        "hypothesis": "Hypothesis: The 'Mean-Reverting Liquidity Exhaustion' factor, defined as the product of the 5-day Amihud Illiquidity spike and the 3-day negative skewness of intraday price moves, predicts a price reversal by identifying 'liquidity holes' where extreme price impact occurs on diminishing volume.\n                Concise Observation: The parent strategy successfully captured linear institutional trends (high R-squared), but failed to account for volatile, non-linear exhaustion phases where high price impact on low volume signals a trend climax.\n                Concise Justification: High Amihud illiquidity values indicate that price is moving with little resistance (volume), which is unsustainable; combining this with intraday skewness identifies whether the exhaustion is driven by a panic spike or a blow-off top, both of which are prone to reversal.\n                Concise Knowledge: If a stock experiences a sharp increase in price impact (high range per unit volume) alongside extreme intraday return skewness, then the current price trend is likely driven by liquidity exhaustion rather than fundamental accumulation; When liquidity is depleted, even small orders cause large price swings, leading to imminent mean reversion.\n                concise Specification: The factor is calculated by multiplying the 5-day average of (High-Low)/Volume (Amihud Illiquidity) by the 3-day cross-sectional rank of the difference between (Close-Open) and (High-Low), focused on identifying the top and bottom deciles of price-volume divergence.\n                ",
        "initial_direction": "Identify 'Trend Exhaustion' by interacting RSQR10 with RESI5: high R-squared combined with high positive residuals suggests an overextended trend prone to mean reversion.",
        "planning_direction": "Identify 'Trend Exhaustion' by interacting RSQR10 with RESI5: high R-squared combined with high positive residuals suggests an overextended trend prone to mean reversion.",
        "created_at": "2026-01-21T00:52:10.878486"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.106851988486651,
        "ICIR": 0.0518391002221613,
        "1day.excess_return_without_cost.std": 0.0043105468268725,
        "1day.excess_return_with_cost.annualized_return": 0.0223127153066194,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002920736228151,
        "1day.excess_return_without_cost.annualized_return": 0.0695135222300141,
        "1day.excess_return_with_cost.std": 0.0043110089652004,
        "Rank IC": 0.0290231985222443,
        "IC": 0.0075625015355698,
        "1day.excess_return_without_cost.max_drawdown": -0.0960676329713959,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.045318047952014,
        "1day.pa": 0.0,
        "l2.valid": 0.9965456526037726,
        "Rank ICIR": 0.1999253123015704,
        "l2.train": 0.9937230665674384,
        "1day.excess_return_with_cost.information_ratio": 0.3354942024259427,
        "1day.excess_return_with_cost.mean": 9.37509046496614e-05
      },
      "feedback": {
        "observations": "The current iteration focused on the 'Mean-Reverting Liquidity Exhaustion' framework, testing three variations: a product of Amihud illiquidity and price-move skewness, a Z-scored divergence model, and a time-series rank-based spike index. The results show a significant improvement in predictive power, with the Information Ratio (IR) increasing from 0.97 to 1.04 and the Annualized Return rising from 5.2% to 6.95%. The IC also improved to 0.0075. However, this came at the cost of a higher Max Drawdown (-0.096 vs -0.072), suggesting that while the signal is stronger, it may be more volatile or concentrated in specific market regimes.",
        "hypothesis_evaluation": "The hypothesis that 'liquidity holes' (high price impact on low volume) signal mean reversion is strongly supported by the improved IC and Annualized Return. Specifically, the 'Exhaustion_Spike_Index_10D' approach, which uses TS_RANK to normalize illiquidity, appears to be a robust way to isolate extreme events. The use of price-range skewness as a secondary filter effectively separates sustainable trends from exhausted 'spikes'.",
        "decision": true,
        "reason": "While the current iteration successfully used raw price ranges, it did not account for the baseline volatility environment. By normalizing the Amihud Illiquidity by a measure of volatility (like a 10-day ATR or standard deviation), we can better distinguish between a stock moving because of high market volatility versus a stock moving because of a genuine 'liquidity hole'. This should help reduce the Max Drawdown observed in the current SOTA by filtering out high-beta noise."
      }
    },
    "878ab4273913229b": {
      "factor_id": "878ab4273913229b",
      "factor_name": "Amihud_Skew_Divergence_8D",
      "factor_expression": "ZSCORE(TS_MEAN(($high - $low) / ($volume + 1e-8), 8)) * ZSCORE(TS_MEAN(($close - $open) / ($high - $low + 1e-8), 5))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"ZSCORE(TS_MEAN(($high - $low) / ($volume + 1e-8), 8)) * ZSCORE(TS_MEAN(($close - $open) / ($high - $low + 1e-8), 5))\" # Your output factor expression will be filled in here\n    name = \"Amihud_Skew_Divergence_8D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A variation of the liquidity exhaustion hypothesis focusing on the divergence between price impact and volume-weighted movement. It uses a longer 8-day window for illiquidity and a 5-day window for price-range skewness to capture slower-building exhaustion phases in larger-cap instruments.",
      "factor_formulation": "\\text{ZSCORE}(\\text{TS_MEAN}(\\frac{\\text{high} - \\text{low}}{\\text{volume} + 1e-8}, 8)) \\times \\text{ZSCORE}(\\text{TS_MEAN}(\\frac{\\text{close} - \\text{open}}{\\text{high} - \\text{low} + 1e-8}, 5))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 3,
        "evolution_phase": "mutation",
        "trajectory_id": "1f9a6895026f",
        "parent_trajectory_ids": [
          "74ba6f865315"
        ],
        "hypothesis": "Hypothesis: The 'Mean-Reverting Liquidity Exhaustion' factor, defined as the product of the 5-day Amihud Illiquidity spike and the 3-day negative skewness of intraday price moves, predicts a price reversal by identifying 'liquidity holes' where extreme price impact occurs on diminishing volume.\n                Concise Observation: The parent strategy successfully captured linear institutional trends (high R-squared), but failed to account for volatile, non-linear exhaustion phases where high price impact on low volume signals a trend climax.\n                Concise Justification: High Amihud illiquidity values indicate that price is moving with little resistance (volume), which is unsustainable; combining this with intraday skewness identifies whether the exhaustion is driven by a panic spike or a blow-off top, both of which are prone to reversal.\n                Concise Knowledge: If a stock experiences a sharp increase in price impact (high range per unit volume) alongside extreme intraday return skewness, then the current price trend is likely driven by liquidity exhaustion rather than fundamental accumulation; When liquidity is depleted, even small orders cause large price swings, leading to imminent mean reversion.\n                concise Specification: The factor is calculated by multiplying the 5-day average of (High-Low)/Volume (Amihud Illiquidity) by the 3-day cross-sectional rank of the difference between (Close-Open) and (High-Low), focused on identifying the top and bottom deciles of price-volume divergence.\n                ",
        "initial_direction": "Identify 'Trend Exhaustion' by interacting RSQR10 with RESI5: high R-squared combined with high positive residuals suggests an overextended trend prone to mean reversion.",
        "planning_direction": "Identify 'Trend Exhaustion' by interacting RSQR10 with RESI5: high R-squared combined with high positive residuals suggests an overextended trend prone to mean reversion.",
        "created_at": "2026-01-21T00:52:10.878486"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.106851988486651,
        "ICIR": 0.0518391002221613,
        "1day.excess_return_without_cost.std": 0.0043105468268725,
        "1day.excess_return_with_cost.annualized_return": 0.0223127153066194,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002920736228151,
        "1day.excess_return_without_cost.annualized_return": 0.0695135222300141,
        "1day.excess_return_with_cost.std": 0.0043110089652004,
        "Rank IC": 0.0290231985222443,
        "IC": 0.0075625015355698,
        "1day.excess_return_without_cost.max_drawdown": -0.0960676329713959,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.045318047952014,
        "1day.pa": 0.0,
        "l2.valid": 0.9965456526037726,
        "Rank ICIR": 0.1999253123015704,
        "l2.train": 0.9937230665674384,
        "1day.excess_return_with_cost.information_ratio": 0.3354942024259427,
        "1day.excess_return_with_cost.mean": 9.37509046496614e-05
      },
      "feedback": {
        "observations": "The current iteration focused on the 'Mean-Reverting Liquidity Exhaustion' framework, testing three variations: a product of Amihud illiquidity and price-move skewness, a Z-scored divergence model, and a time-series rank-based spike index. The results show a significant improvement in predictive power, with the Information Ratio (IR) increasing from 0.97 to 1.04 and the Annualized Return rising from 5.2% to 6.95%. The IC also improved to 0.0075. However, this came at the cost of a higher Max Drawdown (-0.096 vs -0.072), suggesting that while the signal is stronger, it may be more volatile or concentrated in specific market regimes.",
        "hypothesis_evaluation": "The hypothesis that 'liquidity holes' (high price impact on low volume) signal mean reversion is strongly supported by the improved IC and Annualized Return. Specifically, the 'Exhaustion_Spike_Index_10D' approach, which uses TS_RANK to normalize illiquidity, appears to be a robust way to isolate extreme events. The use of price-range skewness as a secondary filter effectively separates sustainable trends from exhausted 'spikes'.",
        "decision": true,
        "reason": "While the current iteration successfully used raw price ranges, it did not account for the baseline volatility environment. By normalizing the Amihud Illiquidity by a measure of volatility (like a 10-day ATR or standard deviation), we can better distinguish between a stock moving because of high market volatility versus a stock moving because of a genuine 'liquidity hole'. This should help reduce the Max Drawdown observed in the current SOTA by filtering out high-beta noise."
      }
    },
    "819998aa99966a39": {
      "factor_id": "819998aa99966a39",
      "factor_name": "Exhaustion_Spike_Index_10D",
      "factor_expression": "TS_RANK(($high - $low) / ($volume + 1e-8), 10) * RANK(($high - $low) / (TS_MEAN($high - $low, 10) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_RANK(($high - $low) / ($volume + 1e-8), 10) * RANK(($high - $low) / (TS_MEAN($high - $low, 10) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Exhaustion_Spike_Index_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor captures extreme liquidity exhaustion by comparing the current Amihud Illiquidity to its 10-day historical range, weighted by the cross-sectional rank of the intraday price range. It isolates stocks where the price impact per unit of volume is at a recent extreme.",
      "factor_formulation": "\\text{TS_RANK}(\\frac{\\text{high} - \\text{low}}{\\text{volume} + 1e-8}, 10) \\times \\text{RANK}(\\frac{\\text{high} - \\text{low}}{\\text{TS_MEAN}(\\text{high} - \\text{low}, 10)})",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 3,
        "evolution_phase": "mutation",
        "trajectory_id": "1f9a6895026f",
        "parent_trajectory_ids": [
          "74ba6f865315"
        ],
        "hypothesis": "Hypothesis: The 'Mean-Reverting Liquidity Exhaustion' factor, defined as the product of the 5-day Amihud Illiquidity spike and the 3-day negative skewness of intraday price moves, predicts a price reversal by identifying 'liquidity holes' where extreme price impact occurs on diminishing volume.\n                Concise Observation: The parent strategy successfully captured linear institutional trends (high R-squared), but failed to account for volatile, non-linear exhaustion phases where high price impact on low volume signals a trend climax.\n                Concise Justification: High Amihud illiquidity values indicate that price is moving with little resistance (volume), which is unsustainable; combining this with intraday skewness identifies whether the exhaustion is driven by a panic spike or a blow-off top, both of which are prone to reversal.\n                Concise Knowledge: If a stock experiences a sharp increase in price impact (high range per unit volume) alongside extreme intraday return skewness, then the current price trend is likely driven by liquidity exhaustion rather than fundamental accumulation; When liquidity is depleted, even small orders cause large price swings, leading to imminent mean reversion.\n                concise Specification: The factor is calculated by multiplying the 5-day average of (High-Low)/Volume (Amihud Illiquidity) by the 3-day cross-sectional rank of the difference between (Close-Open) and (High-Low), focused on identifying the top and bottom deciles of price-volume divergence.\n                ",
        "initial_direction": "Identify 'Trend Exhaustion' by interacting RSQR10 with RESI5: high R-squared combined with high positive residuals suggests an overextended trend prone to mean reversion.",
        "planning_direction": "Identify 'Trend Exhaustion' by interacting RSQR10 with RESI5: high R-squared combined with high positive residuals suggests an overextended trend prone to mean reversion.",
        "created_at": "2026-01-21T00:52:10.878486"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.106851988486651,
        "ICIR": 0.0518391002221613,
        "1day.excess_return_without_cost.std": 0.0043105468268725,
        "1day.excess_return_with_cost.annualized_return": 0.0223127153066194,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002920736228151,
        "1day.excess_return_without_cost.annualized_return": 0.0695135222300141,
        "1day.excess_return_with_cost.std": 0.0043110089652004,
        "Rank IC": 0.0290231985222443,
        "IC": 0.0075625015355698,
        "1day.excess_return_without_cost.max_drawdown": -0.0960676329713959,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.045318047952014,
        "1day.pa": 0.0,
        "l2.valid": 0.9965456526037726,
        "Rank ICIR": 0.1999253123015704,
        "l2.train": 0.9937230665674384,
        "1day.excess_return_with_cost.information_ratio": 0.3354942024259427,
        "1day.excess_return_with_cost.mean": 9.37509046496614e-05
      },
      "feedback": {
        "observations": "The current iteration focused on the 'Mean-Reverting Liquidity Exhaustion' framework, testing three variations: a product of Amihud illiquidity and price-move skewness, a Z-scored divergence model, and a time-series rank-based spike index. The results show a significant improvement in predictive power, with the Information Ratio (IR) increasing from 0.97 to 1.04 and the Annualized Return rising from 5.2% to 6.95%. The IC also improved to 0.0075. However, this came at the cost of a higher Max Drawdown (-0.096 vs -0.072), suggesting that while the signal is stronger, it may be more volatile or concentrated in specific market regimes.",
        "hypothesis_evaluation": "The hypothesis that 'liquidity holes' (high price impact on low volume) signal mean reversion is strongly supported by the improved IC and Annualized Return. Specifically, the 'Exhaustion_Spike_Index_10D' approach, which uses TS_RANK to normalize illiquidity, appears to be a robust way to isolate extreme events. The use of price-range skewness as a secondary filter effectively separates sustainable trends from exhausted 'spikes'.",
        "decision": true,
        "reason": "While the current iteration successfully used raw price ranges, it did not account for the baseline volatility environment. By normalizing the Amihud Illiquidity by a measure of volatility (like a 10-day ATR or standard deviation), we can better distinguish between a stock moving because of high market volatility versus a stock moving because of a genuine 'liquidity hole'. This should help reduce the Max Drawdown observed in the current SOTA by filtering out high-beta noise."
      }
    },
    "7e8736acb6fd01b3": {
      "factor_id": "7e8736acb6fd01b3",
      "factor_name": "EVIB_Institutional_Breakout_5D",
      "factor_expression": "(($open / DELAY($close, 1)) - 1) * INV(ABS(TS_ZSCORE($return, 5)) + 1) * ($volume / (TS_MEDIAN($volume, 20) + 1e-8)) * (TS_RANK(TS_STD($return, 15), 252) < 0.25 ? 1 : 0.1)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(($open / DELAY($close, 1)) - 1) * INV(ABS(TS_SKEW(TS_PCTCHANGE($close, 1), 5)) + 1) * ($volume / TS_MEDIAN($volume, 20)) * (TS_RANK(TS_STD(TS_PCTCHANGE($close, 1), 15), 252) < 0.25 ? 1 : 0)\" # Your output factor expression will be filled in here\n    name = \"EVIB_Institutional_Breakout_5D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies institutional breakouts by combining overnight price gaps with liquidity exhaustion (low volume-weighted price skewness) and volatility compression. It scales the gap by the inverse of 5-day return skewness and relative turnover, filtered by low historical volatility.",
      "factor_formulation": "\\text{Gap} = \\frac{\\text{open}_t}{\\text{close}_{t-1}} - 1, \\quad \\text{EVIB} = \\text{Gap} \\times \\frac{1}{\\text{ABS}(\\text{TS\\_SKEW}(\\text{return}, 5)) + 1} \\times \\frac{\\text{volume}}{\\text{TS\\_MEDIAN}(\\text{volume}, 20)} \\times (\\text{TS\\_RANK}(\\text{TS\\_STD}(\\text{return}, 15), 252) < 0.25)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "ebfe41514a99",
        "parent_trajectory_ids": [
          "de18e34ed544",
          "061e5ede53d0"
        ],
        "hypothesis": "Hypothesis: The 'Exhaustion-Validated Institutional Breakout' (EVIB) factor, defined as the product of a 15-day price volatility compression measure and a 5-day liquidity exhaustion skew, identifies high-alpha entries when an overnight price gap occurs following a period of retail volume depletion.\n                Concise Observation: Parent 1 successfully used volume-weighted skewness to find exhaustion points (RankIC 0.024), while Parent 2 identified that overnight gaps from low-volatility states signal institutional conviction (RankIC 0.023); combining them addresses the false-positive breakouts occurring in high-retail-activity environments.\n                Concise Justification: Institutional investors often accumulate during periods of low retail interest; by requiring both a volatility compression (Parent 2) and a liquidity exhaustion signal (Parent 1), we isolate the transition from retail-driven mean reversion to institutional-driven momentum.\n                Concise Knowledge: If a stock experiences a price gap after a period of low volatility and high volume skewness (liquidity exhaustion), it indicates an institutional 'hand-off' from retail sellers; when turnover is low relative to its 20-day median during this gap, the breakout is more likely to be sustainable due to the absence of retail noise.\n                concise Specification: The factor is calculated as the 1-day overnight gap ($open / $close[t-1] - 1) multiplied by the inverse of the 5-day volume-weighted price skewness, further scaled by the ratio of current turnover to its 20-day median, provided the 15-day standard deviation of returns is in the bottom quartile.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T11:26:32.206272"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1153064310351635,
        "ICIR": 0.0532393699022779,
        "1day.excess_return_without_cost.std": 0.0046290026694689,
        "1day.excess_return_with_cost.annualized_return": 0.025903155381319,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003055980717475,
        "1day.excess_return_without_cost.annualized_return": 0.0727323410759241,
        "1day.excess_return_with_cost.std": 0.0046299850554595,
        "Rank IC": 0.0286981642132419,
        "IC": 0.0080598492546855,
        "1day.excess_return_without_cost.max_drawdown": -0.1055193428945952,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.018478010804184,
        "1day.pa": 0.0,
        "l2.valid": 0.9966245869172796,
        "Rank ICIR": 0.1986200325705366,
        "l2.train": 0.994278442406578,
        "1day.excess_return_with_cost.information_ratio": 0.362647429069398,
        "1day.excess_return_with_cost.mean": 0.0001088367873164
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Exhaustion-Validated Institutional Breakout' (EVIB) hypothesis. The current results show a significant improvement in predictive power and risk-adjusted returns compared to the previous SOTA. Specifically, the Information Ratio (IR) increased from 0.97 to 1.02, and the Annualized Return rose from 5.2% to 7.27%. The Information Coefficient (IC) also saw a healthy jump from 0.0058 to 0.0081. However, the Max Drawdown deepened from -0.072 to -0.105, suggesting that while the signal is stronger, it may introduce higher tail risk or sensitivity to specific market regimes.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that combining overnight price gaps with volatility compression and liquidity exhaustion (low skewness/volume depletion) captures alpha. The 'EVIB_Institutional_Breakout_5D' implementation, which uses a binary filter for volatility rank and scales gaps by inverse skewness, appears to be the most effective driver. The interaction between price gaps and 'quiet' market states (low volatility/low skew) effectively filters out noise from retail-driven volatility.",
        "decision": true,
        "reason": "The current best factor uses a binary filter (TS_RANK < 0.25), which can create 'cliff effects' and ignore valuable information just outside the threshold. By shifting to a continuous efficiency ratio (e.g., (High-Low)/Volume) and incorporating a decay function on the liquidity exhaustion component, we can capture the 'quality' of the breakout more granularly. This should help mitigate the increased Max Drawdown observed in the current results by providing a smoother signal and better risk-weighting."
      }
    },
    "3f3fea20993f0d3b": {
      "factor_id": "3f3fea20993f0d3b",
      "factor_name": "Liquidity_Exhaustion_Gap_10D",
      "factor_expression": "RANK(($open / DELAY($close, 1)) - 1) * RANK(INV(TS_STD($return, 15) + 1e-8)) * RANK(TS_MEDIAN($volume, 20) / ($volume + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(($open / DELAY($close, 1)) - 1) * RANK(INV(TS_STD($close / DELAY($close, 1) - 1, 15) + 0.000001)) * RANK(TS_MEDIAN($volume, 20) / ($volume + 0.000001))\" # Your output factor expression will be filled in here\n    name = \"Liquidity_Exhaustion_Gap_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "Simplified version of the EVIB hypothesis focusing on the interaction between overnight gaps and volume-weighted price stability. It identifies entries where price gaps occur during periods of low volatility relative to recent history, suggesting a shift from retail to institutional control.",
      "factor_formulation": "\\text{Factor} = \\text{RANK}(\\frac{\\text{open}}{\\text{close}_{t-1}} - 1) \\times \\text{RANK}(\\frac{1}{\\text{TS\\_STD}(\\text{close}, 15)}) \\times \\text{RANK}(\\frac{\\text{TS\\_MEDIAN}(\\text{volume}, 20)}{\\text{volume}})",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "ebfe41514a99",
        "parent_trajectory_ids": [
          "de18e34ed544",
          "061e5ede53d0"
        ],
        "hypothesis": "Hypothesis: The 'Exhaustion-Validated Institutional Breakout' (EVIB) factor, defined as the product of a 15-day price volatility compression measure and a 5-day liquidity exhaustion skew, identifies high-alpha entries when an overnight price gap occurs following a period of retail volume depletion.\n                Concise Observation: Parent 1 successfully used volume-weighted skewness to find exhaustion points (RankIC 0.024), while Parent 2 identified that overnight gaps from low-volatility states signal institutional conviction (RankIC 0.023); combining them addresses the false-positive breakouts occurring in high-retail-activity environments.\n                Concise Justification: Institutional investors often accumulate during periods of low retail interest; by requiring both a volatility compression (Parent 2) and a liquidity exhaustion signal (Parent 1), we isolate the transition from retail-driven mean reversion to institutional-driven momentum.\n                Concise Knowledge: If a stock experiences a price gap after a period of low volatility and high volume skewness (liquidity exhaustion), it indicates an institutional 'hand-off' from retail sellers; when turnover is low relative to its 20-day median during this gap, the breakout is more likely to be sustainable due to the absence of retail noise.\n                concise Specification: The factor is calculated as the 1-day overnight gap ($open / $close[t-1] - 1) multiplied by the inverse of the 5-day volume-weighted price skewness, further scaled by the ratio of current turnover to its 20-day median, provided the 15-day standard deviation of returns is in the bottom quartile.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T11:26:32.206272"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1153064310351635,
        "ICIR": 0.0532393699022779,
        "1day.excess_return_without_cost.std": 0.0046290026694689,
        "1day.excess_return_with_cost.annualized_return": 0.025903155381319,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003055980717475,
        "1day.excess_return_without_cost.annualized_return": 0.0727323410759241,
        "1day.excess_return_with_cost.std": 0.0046299850554595,
        "Rank IC": 0.0286981642132419,
        "IC": 0.0080598492546855,
        "1day.excess_return_without_cost.max_drawdown": -0.1055193428945952,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.018478010804184,
        "1day.pa": 0.0,
        "l2.valid": 0.9966245869172796,
        "Rank ICIR": 0.1986200325705366,
        "l2.train": 0.994278442406578,
        "1day.excess_return_with_cost.information_ratio": 0.362647429069398,
        "1day.excess_return_with_cost.mean": 0.0001088367873164
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Exhaustion-Validated Institutional Breakout' (EVIB) hypothesis. The current results show a significant improvement in predictive power and risk-adjusted returns compared to the previous SOTA. Specifically, the Information Ratio (IR) increased from 0.97 to 1.02, and the Annualized Return rose from 5.2% to 7.27%. The Information Coefficient (IC) also saw a healthy jump from 0.0058 to 0.0081. However, the Max Drawdown deepened from -0.072 to -0.105, suggesting that while the signal is stronger, it may introduce higher tail risk or sensitivity to specific market regimes.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that combining overnight price gaps with volatility compression and liquidity exhaustion (low skewness/volume depletion) captures alpha. The 'EVIB_Institutional_Breakout_5D' implementation, which uses a binary filter for volatility rank and scales gaps by inverse skewness, appears to be the most effective driver. The interaction between price gaps and 'quiet' market states (low volatility/low skew) effectively filters out noise from retail-driven volatility.",
        "decision": true,
        "reason": "The current best factor uses a binary filter (TS_RANK < 0.25), which can create 'cliff effects' and ignore valuable information just outside the threshold. By shifting to a continuous efficiency ratio (e.g., (High-Low)/Volume) and incorporating a decay function on the liquidity exhaustion component, we can capture the 'quality' of the breakout more granularly. This should help mitigate the increased Max Drawdown observed in the current results by providing a smoother signal and better risk-weighting."
      }
    },
    "93168839dc70f19a": {
      "factor_id": "93168839dc70f19a",
      "factor_name": "Volatility_Compression_Skew_Factor",
      "factor_expression": "(($open / DELAY($close, 1)) - 1) / ( (TS_STD($return, 15) / (TS_MIN(TS_STD($return, 15), 60) + 1e-8)) + ABS(TS_ZSCORE($return, 5)) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(($open / DELAY($close, 1)) - 1) / ((TS_STD(($close / DELAY($close, 1)) - 1, 15) / (TS_MIN(TS_STD(($close / DELAY($close, 1)) - 1, 15), 60) + 0.000001)) + ABS(TS_ZSCORE(($close / DELAY($close, 1)) - 1, 5)) + 0.000001)\" # Your output factor expression will be filled in here\n    name = \"Volatility_Compression_Skew_Factor\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor targets the 'institutional hand-off' by looking for price gaps that happen when 15-day volatility is at a local minimum and price skewness is low, indicating a lack of retail-driven directional extremes.",
      "factor_formulation": "\\text{Factor} = ((\\text{open} / \\text{close}_{t-1}) - 1) / (\\text{TS\\_STD}(\\text{return}, 15) / \\text{TS\\_MIN}(\\text{TS\\_STD}(\\text{return}, 15), 60) + \\text{ABS}(TS\\_ZSCORE(\\$return, 5)))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "ebfe41514a99",
        "parent_trajectory_ids": [
          "de18e34ed544",
          "061e5ede53d0"
        ],
        "hypothesis": "Hypothesis: The 'Exhaustion-Validated Institutional Breakout' (EVIB) factor, defined as the product of a 15-day price volatility compression measure and a 5-day liquidity exhaustion skew, identifies high-alpha entries when an overnight price gap occurs following a period of retail volume depletion.\n                Concise Observation: Parent 1 successfully used volume-weighted skewness to find exhaustion points (RankIC 0.024), while Parent 2 identified that overnight gaps from low-volatility states signal institutional conviction (RankIC 0.023); combining them addresses the false-positive breakouts occurring in high-retail-activity environments.\n                Concise Justification: Institutional investors often accumulate during periods of low retail interest; by requiring both a volatility compression (Parent 2) and a liquidity exhaustion signal (Parent 1), we isolate the transition from retail-driven mean reversion to institutional-driven momentum.\n                Concise Knowledge: If a stock experiences a price gap after a period of low volatility and high volume skewness (liquidity exhaustion), it indicates an institutional 'hand-off' from retail sellers; when turnover is low relative to its 20-day median during this gap, the breakout is more likely to be sustainable due to the absence of retail noise.\n                concise Specification: The factor is calculated as the 1-day overnight gap ($open / $close[t-1] - 1) multiplied by the inverse of the 5-day volume-weighted price skewness, further scaled by the ratio of current turnover to its 20-day median, provided the 15-day standard deviation of returns is in the bottom quartile.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T11:26:32.206272"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1153064310351635,
        "ICIR": 0.0532393699022779,
        "1day.excess_return_without_cost.std": 0.0046290026694689,
        "1day.excess_return_with_cost.annualized_return": 0.025903155381319,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003055980717475,
        "1day.excess_return_without_cost.annualized_return": 0.0727323410759241,
        "1day.excess_return_with_cost.std": 0.0046299850554595,
        "Rank IC": 0.0286981642132419,
        "IC": 0.0080598492546855,
        "1day.excess_return_without_cost.max_drawdown": -0.1055193428945952,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.018478010804184,
        "1day.pa": 0.0,
        "l2.valid": 0.9966245869172796,
        "Rank ICIR": 0.1986200325705366,
        "l2.train": 0.994278442406578,
        "1day.excess_return_with_cost.information_ratio": 0.362647429069398,
        "1day.excess_return_with_cost.mean": 0.0001088367873164
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Exhaustion-Validated Institutional Breakout' (EVIB) hypothesis. The current results show a significant improvement in predictive power and risk-adjusted returns compared to the previous SOTA. Specifically, the Information Ratio (IR) increased from 0.97 to 1.02, and the Annualized Return rose from 5.2% to 7.27%. The Information Coefficient (IC) also saw a healthy jump from 0.0058 to 0.0081. However, the Max Drawdown deepened from -0.072 to -0.105, suggesting that while the signal is stronger, it may introduce higher tail risk or sensitivity to specific market regimes.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that combining overnight price gaps with volatility compression and liquidity exhaustion (low skewness/volume depletion) captures alpha. The 'EVIB_Institutional_Breakout_5D' implementation, which uses a binary filter for volatility rank and scales gaps by inverse skewness, appears to be the most effective driver. The interaction between price gaps and 'quiet' market states (low volatility/low skew) effectively filters out noise from retail-driven volatility.",
        "decision": true,
        "reason": "The current best factor uses a binary filter (TS_RANK < 0.25), which can create 'cliff effects' and ignore valuable information just outside the threshold. By shifting to a continuous efficiency ratio (e.g., (High-Low)/Volume) and incorporating a decay function on the liquidity exhaustion component, we can capture the 'quality' of the breakout more granularly. This should help mitigate the increased Max Drawdown observed in the current results by providing a smoother signal and better risk-weighting."
      }
    },
    "d0a7d95b2a05c02f": {
      "factor_id": "d0a7d95b2a05c02f",
      "factor_name": "ILE_Liquidity_Exhaustion_20D",
      "factor_expression": "TS_ZSCORE(($high - $low) / $close, 20) * TS_MEAN(ABS($close / TS_MEAN($close, 20) - 1), 5) / (TS_STD($volume / TS_MEAN($volume, 20) - 1, 20) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_ZSCORE(($high - $low) / $close, 20) * TS_MEAN(ABS($close / TS_MEAN($close, 20) - 1), 5) / (TS_STD($volume / TS_MEAN($volume, 20) - 1, 20) + 1e-8)\" # Your output factor expression will be filled in here\n    name = \"ILE_Liquidity_Exhaustion_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies 'Intraday Liquidity Exhaustion' by combining the Z-score of the intraday price range with the deviation from the 20-day mean, normalized by volume volatility. High values suggest price overextension driven by noise rather than institutional conviction, signaling potential mean-reversion.",
      "factor_formulation": "ILE = \\text{TS_ZSCORE}(\\frac{high - low}{close}, 20) \\times \\frac{\\text{TS_MEAN}(\\text{ABS}(\\frac{close - \\text{TS_MEAN}(close, 20)}{\\text{TS_MEAN}(close, 20)}), 5)}{\\text{TS_STD}(\\frac{volume - \\text{TS_MEAN}(volume, 20)}{\\text{TS_MEAN}(volume, 20)}, 20)}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 7,
        "evolution_phase": "mutation",
        "trajectory_id": "ccaea98db513",
        "parent_trajectory_ids": [
          "d7fcd1bf6e67"
        ],
        "hypothesis": "Hypothesis: The 'Intraday Liquidity Exhaustion' (ILE) factor predicts mean-reversion by identifying assets where price dispersion (High-Low range) significantly exceeds its 20-day average while volume-weighted price efficiency (VWAP-to-Close proximity) collapses, signaling noise-driven price extension.\n                Concise Observation: The parent strategy focuses on institutional 'entry' through gaps and floors, but fails to capture alpha from price overextensions where high volatility occurs on fragmented, non-institutional volume.\n                Concise Justification: Institutional conviction typically narrows the gap between VWAP and Close; a wide intraday range coupled with a large deviation from the 20-day mean price suggests an unsustainable liquidity shock rather than a fundamental trend shift.\n                Concise Knowledge: If intraday price range expands without a proportional increase in volume-weighted price stability, the movement is likely driven by liquidity vacuums; when noise-trader activity dominates, prices tend to mean-revert to their 20-day moving average.\n                concise Specification: The factor is defined as the product of the 20-day Z-score of the (High-Low)/Close ratio and the 5-day average of the absolute percentage difference between the Close and the 20-day Moving Average, normalized by volume volatility.\n                ",
        "initial_direction": "Detect 'Institutional Absorption' by identifying periods of high RSQR10 and low WVMA5: a steady price climb on low relative volume-weighted volatility indicates efficient, non-disruptive buying.",
        "planning_direction": "Detect 'Institutional Absorption' by identifying periods of high RSQR10 and low WVMA5: a steady price climb on low relative volume-weighted volatility indicates efficient, non-disruptive buying.",
        "created_at": "2026-01-21T09:39:14.602306"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1199255189300831,
        "ICIR": 0.0688690523525118,
        "1day.excess_return_without_cost.std": 0.0043374703473274,
        "1day.excess_return_with_cost.annualized_return": 0.0280418779763214,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003165802795771,
        "1day.excess_return_without_cost.annualized_return": 0.0753461065393688,
        "1day.excess_return_with_cost.std": 0.0043376160749288,
        "Rank IC": 0.0285430951709135,
        "IC": 0.0095150406915281,
        "1day.excess_return_without_cost.max_drawdown": -0.104283226245933,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.125993330284545,
        "1day.pa": 0.0,
        "l2.valid": 0.9963627958065904,
        "Rank ICIR": 0.2130055796981595,
        "l2.train": 0.992977300521778,
        "1day.excess_return_with_cost.information_ratio": 0.4190516035918447,
        "1day.excess_return_with_cost.mean": 0.0001178230167072
      },
      "feedback": {
        "observations": "The current iteration focused on three variations of the 'Intraday Liquidity Exhaustion' hypothesis: a complex volatility-normalized version (ILE), a rank-based efficiency collapse version (ECR), and a Z-score noise dispersion version (NDD). The results show a significant improvement in Information Ratio (1.126 vs 0.973), Annualized Return (7.53% vs 5.20%), and IC (0.0095 vs 0.0058) compared to the SOTA. However, the Max Drawdown has worsened (-0.104 vs -0.073), suggesting that while the predictive power (IC) and risk-adjusted returns (IR) have increased, the strategy may be exposed to higher tail risks or regime sensitivity.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that identifying price dispersion relative to historical norms (High-Low range) combined with price stretching (distance from mean) can predict mean-reversion. The 'Noise_Driven_Dispersion_Z' and 'ILE_Liquidity_Exhaustion_20D' implementations demonstrate that normalizing intraday range by volume or volume-volatility effectively isolates 'exhaustion' points. The increase in IC suggests the core logic of capturing noise-driven overextension is valid.",
        "decision": true,
        "reason": "The current ILE factor (SL > 300 potentially in formulation logic) is becoming complex. By using 'Relative Volume' as a denominator for the price range, we create a 'Price-Volume Efficiency' metric. If a large price range occurs on low relative volume, it is more likely to be noise-driven. Additionally, adding a 'Range Position' component (where the close sits relative to the high-low) helps distinguish between a strong trend close and a 'pin bar' reversal, which should improve the Max Drawdown by filtering out strong momentum days."
      }
    },
    "587097b4cb566b0a": {
      "factor_id": "587097b4cb566b0a",
      "factor_name": "Efficiency_Collapse_Reversion_15D",
      "factor_expression": "RANK(($high - $low) / (TS_MEAN($high - $low, 15) + 1e-8)) * RANK(ABS($close / TS_MEAN($close, 15) - 1))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(($high - $low) / (TS_MEAN($high - $low, 15) + 1e-8)) * RANK(ABS($close / TS_MEAN($close, 15) - 1))\" # Your output factor expression will be filled in here\n    name = \"Efficiency_Collapse_Reversion_15D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A simplified measure of liquidity-driven overextension. It captures the ratio of the intraday range to the historical average range, weighted by the distance from the long-term mean, specifically targeting periods where price dispersion is high relative to volume stability.",
      "factor_formulation": "ECR = \\text{RANK}(\\frac{high - low}{\\text{TS_MEAN}(high - low, 15)}) \\times \\text{RANK}(\\text{ABS}(\\frac{close}{\\text{TS_MEAN}(close, 15)} - 1))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 7,
        "evolution_phase": "mutation",
        "trajectory_id": "ccaea98db513",
        "parent_trajectory_ids": [
          "d7fcd1bf6e67"
        ],
        "hypothesis": "Hypothesis: The 'Intraday Liquidity Exhaustion' (ILE) factor predicts mean-reversion by identifying assets where price dispersion (High-Low range) significantly exceeds its 20-day average while volume-weighted price efficiency (VWAP-to-Close proximity) collapses, signaling noise-driven price extension.\n                Concise Observation: The parent strategy focuses on institutional 'entry' through gaps and floors, but fails to capture alpha from price overextensions where high volatility occurs on fragmented, non-institutional volume.\n                Concise Justification: Institutional conviction typically narrows the gap between VWAP and Close; a wide intraday range coupled with a large deviation from the 20-day mean price suggests an unsustainable liquidity shock rather than a fundamental trend shift.\n                Concise Knowledge: If intraday price range expands without a proportional increase in volume-weighted price stability, the movement is likely driven by liquidity vacuums; when noise-trader activity dominates, prices tend to mean-revert to their 20-day moving average.\n                concise Specification: The factor is defined as the product of the 20-day Z-score of the (High-Low)/Close ratio and the 5-day average of the absolute percentage difference between the Close and the 20-day Moving Average, normalized by volume volatility.\n                ",
        "initial_direction": "Detect 'Institutional Absorption' by identifying periods of high RSQR10 and low WVMA5: a steady price climb on low relative volume-weighted volatility indicates efficient, non-disruptive buying.",
        "planning_direction": "Detect 'Institutional Absorption' by identifying periods of high RSQR10 and low WVMA5: a steady price climb on low relative volume-weighted volatility indicates efficient, non-disruptive buying.",
        "created_at": "2026-01-21T09:39:14.602306"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1199255189300831,
        "ICIR": 0.0688690523525118,
        "1day.excess_return_without_cost.std": 0.0043374703473274,
        "1day.excess_return_with_cost.annualized_return": 0.0280418779763214,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003165802795771,
        "1day.excess_return_without_cost.annualized_return": 0.0753461065393688,
        "1day.excess_return_with_cost.std": 0.0043376160749288,
        "Rank IC": 0.0285430951709135,
        "IC": 0.0095150406915281,
        "1day.excess_return_without_cost.max_drawdown": -0.104283226245933,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.125993330284545,
        "1day.pa": 0.0,
        "l2.valid": 0.9963627958065904,
        "Rank ICIR": 0.2130055796981595,
        "l2.train": 0.992977300521778,
        "1day.excess_return_with_cost.information_ratio": 0.4190516035918447,
        "1day.excess_return_with_cost.mean": 0.0001178230167072
      },
      "feedback": {
        "observations": "The current iteration focused on three variations of the 'Intraday Liquidity Exhaustion' hypothesis: a complex volatility-normalized version (ILE), a rank-based efficiency collapse version (ECR), and a Z-score noise dispersion version (NDD). The results show a significant improvement in Information Ratio (1.126 vs 0.973), Annualized Return (7.53% vs 5.20%), and IC (0.0095 vs 0.0058) compared to the SOTA. However, the Max Drawdown has worsened (-0.104 vs -0.073), suggesting that while the predictive power (IC) and risk-adjusted returns (IR) have increased, the strategy may be exposed to higher tail risks or regime sensitivity.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that identifying price dispersion relative to historical norms (High-Low range) combined with price stretching (distance from mean) can predict mean-reversion. The 'Noise_Driven_Dispersion_Z' and 'ILE_Liquidity_Exhaustion_20D' implementations demonstrate that normalizing intraday range by volume or volume-volatility effectively isolates 'exhaustion' points. The increase in IC suggests the core logic of capturing noise-driven overextension is valid.",
        "decision": true,
        "reason": "The current ILE factor (SL > 300 potentially in formulation logic) is becoming complex. By using 'Relative Volume' as a denominator for the price range, we create a 'Price-Volume Efficiency' metric. If a large price range occurs on low relative volume, it is more likely to be noise-driven. Additionally, adding a 'Range Position' component (where the close sits relative to the high-low) helps distinguish between a strong trend close and a 'pin bar' reversal, which should improve the Max Drawdown by filtering out strong momentum days."
      }
    },
    "70182b5b650b1bab": {
      "factor_id": "70182b5b650b1bab",
      "factor_name": "Noise_Driven_Dispersion_Z",
      "factor_expression": "TS_ZSCORE(($high - $low) / ($volume + 1e-8), 20) + TS_ZSCORE(ABS($close - TS_MEAN($close, 20)), 20)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_ZSCORE(($high - $low) / ($volume + 1e-8), 20) + TS_ZSCORE(ABS($close - TS_MEAN($close, 20)), 20)\" # Your output factor expression will be filled in here\n    name = \"Noise_Driven_Dispersion_Z\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor targets noise-driven price extensions by identifying days where the intraday range (normalized by volume) deviates significantly from its 20-day norm, while the price is stretched away from its 20-day moving average.",
      "factor_formulation": "NDD = \\text{TS_ZSCORE}(\\frac{high - low}{volume + 1}, 20) + \\text{TS_ZSCORE}(ABS(close - \\text{TS_MEAN}(close, 20)), 20)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 7,
        "evolution_phase": "mutation",
        "trajectory_id": "ccaea98db513",
        "parent_trajectory_ids": [
          "d7fcd1bf6e67"
        ],
        "hypothesis": "Hypothesis: The 'Intraday Liquidity Exhaustion' (ILE) factor predicts mean-reversion by identifying assets where price dispersion (High-Low range) significantly exceeds its 20-day average while volume-weighted price efficiency (VWAP-to-Close proximity) collapses, signaling noise-driven price extension.\n                Concise Observation: The parent strategy focuses on institutional 'entry' through gaps and floors, but fails to capture alpha from price overextensions where high volatility occurs on fragmented, non-institutional volume.\n                Concise Justification: Institutional conviction typically narrows the gap between VWAP and Close; a wide intraday range coupled with a large deviation from the 20-day mean price suggests an unsustainable liquidity shock rather than a fundamental trend shift.\n                Concise Knowledge: If intraday price range expands without a proportional increase in volume-weighted price stability, the movement is likely driven by liquidity vacuums; when noise-trader activity dominates, prices tend to mean-revert to their 20-day moving average.\n                concise Specification: The factor is defined as the product of the 20-day Z-score of the (High-Low)/Close ratio and the 5-day average of the absolute percentage difference between the Close and the 20-day Moving Average, normalized by volume volatility.\n                ",
        "initial_direction": "Detect 'Institutional Absorption' by identifying periods of high RSQR10 and low WVMA5: a steady price climb on low relative volume-weighted volatility indicates efficient, non-disruptive buying.",
        "planning_direction": "Detect 'Institutional Absorption' by identifying periods of high RSQR10 and low WVMA5: a steady price climb on low relative volume-weighted volatility indicates efficient, non-disruptive buying.",
        "created_at": "2026-01-21T09:39:14.602306"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1199255189300831,
        "ICIR": 0.0688690523525118,
        "1day.excess_return_without_cost.std": 0.0043374703473274,
        "1day.excess_return_with_cost.annualized_return": 0.0280418779763214,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003165802795771,
        "1day.excess_return_without_cost.annualized_return": 0.0753461065393688,
        "1day.excess_return_with_cost.std": 0.0043376160749288,
        "Rank IC": 0.0285430951709135,
        "IC": 0.0095150406915281,
        "1day.excess_return_without_cost.max_drawdown": -0.104283226245933,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.125993330284545,
        "1day.pa": 0.0,
        "l2.valid": 0.9963627958065904,
        "Rank ICIR": 0.2130055796981595,
        "l2.train": 0.992977300521778,
        "1day.excess_return_with_cost.information_ratio": 0.4190516035918447,
        "1day.excess_return_with_cost.mean": 0.0001178230167072
      },
      "feedback": {
        "observations": "The current iteration focused on three variations of the 'Intraday Liquidity Exhaustion' hypothesis: a complex volatility-normalized version (ILE), a rank-based efficiency collapse version (ECR), and a Z-score noise dispersion version (NDD). The results show a significant improvement in Information Ratio (1.126 vs 0.973), Annualized Return (7.53% vs 5.20%), and IC (0.0095 vs 0.0058) compared to the SOTA. However, the Max Drawdown has worsened (-0.104 vs -0.073), suggesting that while the predictive power (IC) and risk-adjusted returns (IR) have increased, the strategy may be exposed to higher tail risks or regime sensitivity.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that identifying price dispersion relative to historical norms (High-Low range) combined with price stretching (distance from mean) can predict mean-reversion. The 'Noise_Driven_Dispersion_Z' and 'ILE_Liquidity_Exhaustion_20D' implementations demonstrate that normalizing intraday range by volume or volume-volatility effectively isolates 'exhaustion' points. The increase in IC suggests the core logic of capturing noise-driven overextension is valid.",
        "decision": true,
        "reason": "The current ILE factor (SL > 300 potentially in formulation logic) is becoming complex. By using 'Relative Volume' as a denominator for the price range, we create a 'Price-Volume Efficiency' metric. If a large price range occurs on low relative volume, it is more likely to be noise-driven. Additionally, adding a 'Range Position' component (where the close sits relative to the high-low) helps distinguish between a strong trend close and a 'pin bar' reversal, which should improve the Max Drawdown by filtering out strong momentum days."
      }
    },
    "208aea9912ae16e6": {
      "factor_id": "208aea9912ae16e6",
      "factor_name": "LVSB_Efficiency_Factor_20D",
      "factor_expression": "(($open - DELAY($close, 1)) / ($high - $low + 1e-8)) * ($volume / (TS_MEAN($volume, 20) + 1e-8)) - TS_ZSCORE($high - $low, 20)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(($open - DELAY($close, 1)) / ($high - $low + 1e-8)) * ($volume / (TS_MEAN($volume, 20) + 1e-8)) - TS_ZSCORE($high - $low, 20)\" # Your output factor expression will be filled in here\n    name = \"LVSB_Efficiency_Factor_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies high-conviction breakouts by calculating the ratio of the overnight gap to the intraday range, scaled by relative volume and penalized by recent volatility expansion. It rewards stocks where a gap is supported by high volume and tight intraday price action (low dispersion).",
      "factor_formulation": "LVSB = \\frac{$open - \\text{DELAY}($close, 1)}{($high - $low) + 1e-8} \\times \\frac{$volume}{\\text{TS_MEAN}($volume, 20)} - \\text{TS_ZSCORE}($high - $low, 20)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "83429d02e7a4",
        "parent_trajectory_ids": [
          "328dbeb0c242",
          "0febcaea0735"
        ],
        "hypothesis": "Hypothesis: The 'Liquidity-Validated Structural Breakout' (LVSB) factor identifies high-conviction institutional entries by selecting stocks with a significant overnight gap that is subsequently supported by high volume and low intraday price dispersion, while penalizing those with high-volatility exhaustion signatures.\n                Concise Observation: Parent 1 (ILE) successfully captures mean-reversion via high dispersion (RankIC=0.0285), while Parent 2 (IAB) captures momentum via overnight gaps (RankIC=0.0214); however, neither distinguishes between high-quality institutional breakouts and low-quality volatility spikes.\n                Concise Justification: By combining the overnight gap signal with a volume-weighted price efficiency metric, we can filter out 'noisy' volatility that leads to exhaustion, ensuring the factor only rewards breakouts where the intraday price action remains tight and liquid.\n                Concise Knowledge: If a positive overnight gap is followed by high volume and low price dispersion, it indicates institutional absorption and trend continuation; conversely, if a gap is accompanied by extreme price dispersion relative to volume, it signifies retail-driven exhaustion and likely mean-reversion.\n                concise Specification: The factor is calculated as the ratio of the Overnight Gap (Close[t-1] to Open[t]) to the Intraday Range (High-Low), multiplied by the ratio of Volume to its 20-day average, then penalized by the 20-day rolling Z-score of the High-Low range.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T10:05:11.867863"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1081249528506243,
        "ICIR": 0.0579463354585472,
        "1day.excess_return_without_cost.std": 0.0040139541076409,
        "1day.excess_return_with_cost.annualized_return": 0.0108404437147842,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002437985558976,
        "1day.excess_return_without_cost.annualized_return": 0.0580240563036302,
        "1day.excess_return_with_cost.std": 0.0040145989171416,
        "Rank IC": 0.0274559579331133,
        "IC": 0.0079929222089182,
        "1day.excess_return_without_cost.max_drawdown": -0.0905515232058431,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.9370164267702088,
        "1day.pa": 0.0,
        "l2.valid": 0.9965338220479508,
        "Rank ICIR": 0.2036564853945049,
        "l2.train": 0.9934091827710494,
        "1day.excess_return_with_cost.information_ratio": 0.1750315816326627,
        "1day.excess_return_with_cost.mean": 4.554808283522773e-05
      },
      "feedback": {
        "observations": "The current iteration of the 'Liquidity-Validated Structural Breakout' (LVSB) framework has successfully improved the Information Coefficient (IC) and Annualized Return compared to the previous SOTA. Specifically, the IC increased from 0.0058 to 0.0079, and the Annualized Return rose from 5.2% to 5.8%. However, this gain in return came at the cost of higher risk, as evidenced by a higher Max Drawdown (-0.090 vs -0.072) and a slightly lower Information Ratio (0.937 vs 0.972). The factors implementedLVSB_Efficiency_Factor, Institutional_Absorption_Ratio, and Breakout_Quality_Scoreeffectively capture the interaction between overnight gaps and intraday liquidity, but the increased drawdown suggests the current formulations might be sensitive to market-wide volatility shocks.",
        "hypothesis_evaluation": "The results support the hypothesis that combining overnight gaps with intraday price dispersion and volume validation provides predictive power. The improvement in IC suggests that the 'cleanliness' of a breakout (gap / intraday range) is a valid signal for institutional entry. However, the 'volatility exhaustion' penalty (TS_ZSCORE of range) in the current factors might be too reactive or improperly scaled, leading to the observed increase in drawdown. The 'Institutional_Absorption_Ratio' using RANK appears robust, but the linear combination in other factors may be introducing noise.",
        "decision": true,
        "reason": "The current factors use relatively short windows (10-20 days) for volatility normalization, which likely caused the higher drawdown during regime shifts. By extending the volatility anchor to 60 days and refining the interaction between volume and range (Volume / (High-Low)), we can more precisely isolate 'absorption' (high volume, small price movement) versus 'exhaustion' (high volume, wide price movement). This should maintain the high IC while improving the Information Ratio and reducing Drawdown."
      }
    },
    "ce5d517e1781dd6e": {
      "factor_id": "ce5d517e1781dd6e",
      "factor_name": "Institutional_Absorption_Ratio_15D",
      "factor_expression": "RANK(($open - DELAY($close, 1)) / ($high - $low + 1e-8)) * RANK($volume / (TS_STD($close, 15) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(($open - DELAY($close, 1)) / ($high - $low + 1e-8)) * RANK($volume / (TS_STD($close, 15) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Institutional_Absorption_Ratio_15D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A simplified version of the LVSB hypothesis focusing on the 'Absorption' signature. It measures the overnight gap relative to the intraday range, multiplied by the volume-to-volatility ratio to identify liquid, low-dispersion breakouts.",
      "factor_formulation": "IAR = \\text{RANK}(\\frac{$open - \\text{DELAY}($close, 1)}{$high - $low + 1e-8}) \\times \\text{RANK}(\\frac{$volume}{\\text{TS_STD}($close, 15) + 1e-8})",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "83429d02e7a4",
        "parent_trajectory_ids": [
          "328dbeb0c242",
          "0febcaea0735"
        ],
        "hypothesis": "Hypothesis: The 'Liquidity-Validated Structural Breakout' (LVSB) factor identifies high-conviction institutional entries by selecting stocks with a significant overnight gap that is subsequently supported by high volume and low intraday price dispersion, while penalizing those with high-volatility exhaustion signatures.\n                Concise Observation: Parent 1 (ILE) successfully captures mean-reversion via high dispersion (RankIC=0.0285), while Parent 2 (IAB) captures momentum via overnight gaps (RankIC=0.0214); however, neither distinguishes between high-quality institutional breakouts and low-quality volatility spikes.\n                Concise Justification: By combining the overnight gap signal with a volume-weighted price efficiency metric, we can filter out 'noisy' volatility that leads to exhaustion, ensuring the factor only rewards breakouts where the intraday price action remains tight and liquid.\n                Concise Knowledge: If a positive overnight gap is followed by high volume and low price dispersion, it indicates institutional absorption and trend continuation; conversely, if a gap is accompanied by extreme price dispersion relative to volume, it signifies retail-driven exhaustion and likely mean-reversion.\n                concise Specification: The factor is calculated as the ratio of the Overnight Gap (Close[t-1] to Open[t]) to the Intraday Range (High-Low), multiplied by the ratio of Volume to its 20-day average, then penalized by the 20-day rolling Z-score of the High-Low range.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T10:05:11.867863"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1081249528506243,
        "ICIR": 0.0579463354585472,
        "1day.excess_return_without_cost.std": 0.0040139541076409,
        "1day.excess_return_with_cost.annualized_return": 0.0108404437147842,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002437985558976,
        "1day.excess_return_without_cost.annualized_return": 0.0580240563036302,
        "1day.excess_return_with_cost.std": 0.0040145989171416,
        "Rank IC": 0.0274559579331133,
        "IC": 0.0079929222089182,
        "1day.excess_return_without_cost.max_drawdown": -0.0905515232058431,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.9370164267702088,
        "1day.pa": 0.0,
        "l2.valid": 0.9965338220479508,
        "Rank ICIR": 0.2036564853945049,
        "l2.train": 0.9934091827710494,
        "1day.excess_return_with_cost.information_ratio": 0.1750315816326627,
        "1day.excess_return_with_cost.mean": 4.554808283522773e-05
      },
      "feedback": {
        "observations": "The current iteration of the 'Liquidity-Validated Structural Breakout' (LVSB) framework has successfully improved the Information Coefficient (IC) and Annualized Return compared to the previous SOTA. Specifically, the IC increased from 0.0058 to 0.0079, and the Annualized Return rose from 5.2% to 5.8%. However, this gain in return came at the cost of higher risk, as evidenced by a higher Max Drawdown (-0.090 vs -0.072) and a slightly lower Information Ratio (0.937 vs 0.972). The factors implementedLVSB_Efficiency_Factor, Institutional_Absorption_Ratio, and Breakout_Quality_Scoreeffectively capture the interaction between overnight gaps and intraday liquidity, but the increased drawdown suggests the current formulations might be sensitive to market-wide volatility shocks.",
        "hypothesis_evaluation": "The results support the hypothesis that combining overnight gaps with intraday price dispersion and volume validation provides predictive power. The improvement in IC suggests that the 'cleanliness' of a breakout (gap / intraday range) is a valid signal for institutional entry. However, the 'volatility exhaustion' penalty (TS_ZSCORE of range) in the current factors might be too reactive or improperly scaled, leading to the observed increase in drawdown. The 'Institutional_Absorption_Ratio' using RANK appears robust, but the linear combination in other factors may be introducing noise.",
        "decision": true,
        "reason": "The current factors use relatively short windows (10-20 days) for volatility normalization, which likely caused the higher drawdown during regime shifts. By extending the volatility anchor to 60 days and refining the interaction between volume and range (Volume / (High-Low)), we can more precisely isolate 'absorption' (high volume, small price movement) versus 'exhaustion' (high volume, wide price movement). This should maintain the high IC while improving the Information Ratio and reducing Drawdown."
      }
    },
    "0f9fa07bf2e5714b": {
      "factor_id": "0f9fa07bf2e5714b",
      "factor_name": "Breakout_Quality_Score_10D",
      "factor_expression": "(($open / DELAY($close, 1)) - 1) / (1 + TS_ZSCORE($high - $low, 10) + 1e-8) * ($volume / TS_MEAN($volume, 10))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(($open / DELAY($close, 1)) - 1) / (1 + TS_ZSCORE($high - $low, 10))\" # Your output factor expression will be filled in here\n    name = \"Breakout_Quality_Score_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor evaluates the quality of a breakout by comparing the overnight return to the intraday volatility (High-Low). It uses a 10-day window to penalize stocks with high historical price dispersion, favoring 'clean' structural breaks.",
      "factor_formulation": "BQS = \\frac{\\text{TS_PCTCHANGE}($close, 1) - \\text{TS_PCTCHANGE}($close, 1) \\text{ (intraday portion)}}{1 + \\text{TS_ZSCORE}(\\text{range}, 10)}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "83429d02e7a4",
        "parent_trajectory_ids": [
          "328dbeb0c242",
          "0febcaea0735"
        ],
        "hypothesis": "Hypothesis: The 'Liquidity-Validated Structural Breakout' (LVSB) factor identifies high-conviction institutional entries by selecting stocks with a significant overnight gap that is subsequently supported by high volume and low intraday price dispersion, while penalizing those with high-volatility exhaustion signatures.\n                Concise Observation: Parent 1 (ILE) successfully captures mean-reversion via high dispersion (RankIC=0.0285), while Parent 2 (IAB) captures momentum via overnight gaps (RankIC=0.0214); however, neither distinguishes between high-quality institutional breakouts and low-quality volatility spikes.\n                Concise Justification: By combining the overnight gap signal with a volume-weighted price efficiency metric, we can filter out 'noisy' volatility that leads to exhaustion, ensuring the factor only rewards breakouts where the intraday price action remains tight and liquid.\n                Concise Knowledge: If a positive overnight gap is followed by high volume and low price dispersion, it indicates institutional absorption and trend continuation; conversely, if a gap is accompanied by extreme price dispersion relative to volume, it signifies retail-driven exhaustion and likely mean-reversion.\n                concise Specification: The factor is calculated as the ratio of the Overnight Gap (Close[t-1] to Open[t]) to the Intraday Range (High-Low), multiplied by the ratio of Volume to its 20-day average, then penalized by the 20-day rolling Z-score of the High-Low range.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T10:05:11.867863"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1081249528506243,
        "ICIR": 0.0579463354585472,
        "1day.excess_return_without_cost.std": 0.0040139541076409,
        "1day.excess_return_with_cost.annualized_return": 0.0108404437147842,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002437985558976,
        "1day.excess_return_without_cost.annualized_return": 0.0580240563036302,
        "1day.excess_return_with_cost.std": 0.0040145989171416,
        "Rank IC": 0.0274559579331133,
        "IC": 0.0079929222089182,
        "1day.excess_return_without_cost.max_drawdown": -0.0905515232058431,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.9370164267702088,
        "1day.pa": 0.0,
        "l2.valid": 0.9965338220479508,
        "Rank ICIR": 0.2036564853945049,
        "l2.train": 0.9934091827710494,
        "1day.excess_return_with_cost.information_ratio": 0.1750315816326627,
        "1day.excess_return_with_cost.mean": 4.554808283522773e-05
      },
      "feedback": {
        "observations": "The current iteration of the 'Liquidity-Validated Structural Breakout' (LVSB) framework has successfully improved the Information Coefficient (IC) and Annualized Return compared to the previous SOTA. Specifically, the IC increased from 0.0058 to 0.0079, and the Annualized Return rose from 5.2% to 5.8%. However, this gain in return came at the cost of higher risk, as evidenced by a higher Max Drawdown (-0.090 vs -0.072) and a slightly lower Information Ratio (0.937 vs 0.972). The factors implementedLVSB_Efficiency_Factor, Institutional_Absorption_Ratio, and Breakout_Quality_Scoreeffectively capture the interaction between overnight gaps and intraday liquidity, but the increased drawdown suggests the current formulations might be sensitive to market-wide volatility shocks.",
        "hypothesis_evaluation": "The results support the hypothesis that combining overnight gaps with intraday price dispersion and volume validation provides predictive power. The improvement in IC suggests that the 'cleanliness' of a breakout (gap / intraday range) is a valid signal for institutional entry. However, the 'volatility exhaustion' penalty (TS_ZSCORE of range) in the current factors might be too reactive or improperly scaled, leading to the observed increase in drawdown. The 'Institutional_Absorption_Ratio' using RANK appears robust, but the linear combination in other factors may be introducing noise.",
        "decision": true,
        "reason": "The current factors use relatively short windows (10-20 days) for volatility normalization, which likely caused the higher drawdown during regime shifts. By extending the volatility anchor to 60 days and refining the interaction between volume and range (Volume / (High-Low)), we can more precisely isolate 'absorption' (high volume, small price movement) versus 'exhaustion' (high volume, wide price movement). This should maintain the high IC while improving the Information Ratio and reducing Drawdown."
      }
    },
    "a4dc54dfc38597a5": {
      "factor_id": "a4dc54dfc38597a5",
      "factor_name": "ISP_Stealth_Breakout_Factor",
      "factor_expression": "RANK(TS_MEAN((($high + $low + $close) / 3 - ($open + $close) / 2), 10)) * RANK(($open - DELAY($close, 1)) / (TS_MEAN($high - $low, 5) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(TS_MEAN((($high + $low + $close) / 3 - ($open + $close) / 2), 10)) * RANK(($open - DELAY($close, 1)) / (TS_MEAN($high - $low, 5) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"ISP_Stealth_Breakout_Factor\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies Informed Structural Pre-emption by combining a 10-day stealth accumulation score with a 1-day breakout efficiency score. The stealth component uses the divergence between the average price (approximated by (H+L+C)/3) and the time-weighted average (open/close proxy) during low-volume periods. The breakout component normalizes the overnight gap by the recent intraday range.",
      "factor_formulation": "\\text{ISP} = \\text{RANK}(\\text{TS_MEAN}((($high + $low + $close)/3 - ($open + $close)/2), 10)) * \\text{RANK}(($open - \\text{DELAY}($close, 1)) / (\\text{TS_MEAN}($high - $low, 5) + 1e-8))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 10,
        "evolution_phase": "crossover",
        "trajectory_id": "d7204bd90464",
        "parent_trajectory_ids": [
          "51d281e76291",
          "8d9bd5be78a0"
        ],
        "hypothesis": "Hypothesis: The Informed Structural Pre-emption (ISP) factor identifies stocks by multiplying a 10-day stealth accumulation score (low-volume divergence between price-weighted and time-weighted averages) by a 1-day breakout efficiency score (overnight gap normalized by intraday volatility).\n                Concise Observation: Parent 1 (AID) captures early signals but lacks timing, while Parent 2 (LVSB) captures momentum but suffers from false breakouts; combining them targets the transition from quiet positioning to active price discovery.\n                Concise Justification: The interaction between information decay (setup) and gap efficiency (trigger) creates a non-linear filter that requires both prior hidden demand and current market validation, reducing noise from retail-driven volatility.\n                Concise Knowledge: If stealth accumulation by informed actors precedes a price breakout, the subsequent price move is more sustainable; when low-volume price-time divergence is followed by a high-efficiency overnight gap, the probability of a high-conviction institutional trend increases.\n                concise Specification: Define AID as the 10-day mean of (VWAP - TWAP) during low-volume periods; define LVSB as (Open - Prev_Close) divided by the 5-day average intraday range; the final ISP factor is the product of these two metrics.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T13:37:56.729630"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1181062109795754,
        "ICIR": 0.049588885020752,
        "1day.excess_return_without_cost.std": 0.0041557530030952,
        "1day.excess_return_with_cost.annualized_return": 0.0118769886272772,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002475769761354,
        "1day.excess_return_without_cost.annualized_return": 0.0589233203202325,
        "1day.excess_return_with_cost.std": 0.0041553580966072,
        "Rank IC": 0.0271742342497613,
        "IC": 0.006922327091659,
        "1day.excess_return_without_cost.max_drawdown": -0.0948400043707983,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.919070878543165,
        "1day.pa": 0.0,
        "l2.valid": 0.9963171462588418,
        "Rank ICIR": 0.1980746999492646,
        "l2.train": 0.9933581287159392,
        "1day.excess_return_with_cost.information_ratio": 0.1852718363568608,
        "1day.excess_return_with_cost.mean": 4.9903313559988514e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the Informed Structural Pre-emption (ISP) hypothesis. The current result, primarily driven by the 'ISP_Stealth_Breakout_Factor' and its counterparts, shows a significant improvement in Information Coefficient (IC) from 0.0058 to 0.0069 and an increase in Annualized Return from 0.052 to 0.0589. However, this comes at the cost of a higher Max Drawdown (-0.0948 vs -0.0726) and a slightly lower Information Ratio (0.919 vs 0.972). The IC improvement suggests that the interaction between stealth accumulation and breakout efficiency captures meaningful predictive signal.",
        "hypothesis_evaluation": "The results support the hypothesis that combining a multi-day stealth accumulation metric with a 1-day breakout efficiency score provides a superior predictive signal compared to single-dimension factors. The 'ISP_Stealth_Breakout_Factor' successfully identifies a lead-lag relationship between quiet positioning and price discovery. However, the increased drawdown suggests that the 'breakout' component might be sensitive to market volatility, requiring better normalization or a more robust definition of 'stealth'.",
        "decision": true,
        "reason": "The current 'stealth' component uses a simple price difference which may be scale-dependent. By using the 'volume-weighted price spread' (as seen in SGZ) but refining it to focus on 'negative volume-return correlation' (quiet accumulation often happens on low volume or price-volume divergence), we can better isolate informed buying. Furthermore, the 1-day gap should be compared against the cross-section rather than just its own history to ensure the 'breakout' is idiosyncratic rather than a market-wide gap-up, which should improve the Information Ratio and reduce Drawdown."
      }
    },
    "ad9ccae192bc35c8": {
      "factor_id": "ad9ccae192bc35c8",
      "factor_name": "Informed_Accumulation_Efficiency",
      "factor_expression": "RANK($open / DELAY($close, 1) - 1) / (RANK(TS_CORR($return, $volume, 10)) + 1.1)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(($open / DELAY($close, 1)) - 1) / (RANK(TS_CORR($close / DELAY($close, 1) - 1, $volume, 10)) + 1.1)\" # Your output factor expression will be filled in here\n    name = \"Informed_Accumulation_Efficiency\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A simplified version of the ISP hypothesis focusing on the interaction between price-volume divergence and gap momentum. It captures stocks where the current overnight gap is high relative to its 10-day price-volume correlation, identifying high-conviction institutional moves following quiet accumulation.",
      "factor_formulation": "\\text{IAE} = \\frac{\\text{RANK}($open / \\text{DELAY}($close, 1) - 1)}{\\text{RANK}(\\text{TS_CORR}($return, $volume, 10)) + 1.1}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 10,
        "evolution_phase": "crossover",
        "trajectory_id": "d7204bd90464",
        "parent_trajectory_ids": [
          "51d281e76291",
          "8d9bd5be78a0"
        ],
        "hypothesis": "Hypothesis: The Informed Structural Pre-emption (ISP) factor identifies stocks by multiplying a 10-day stealth accumulation score (low-volume divergence between price-weighted and time-weighted averages) by a 1-day breakout efficiency score (overnight gap normalized by intraday volatility).\n                Concise Observation: Parent 1 (AID) captures early signals but lacks timing, while Parent 2 (LVSB) captures momentum but suffers from false breakouts; combining them targets the transition from quiet positioning to active price discovery.\n                Concise Justification: The interaction between information decay (setup) and gap efficiency (trigger) creates a non-linear filter that requires both prior hidden demand and current market validation, reducing noise from retail-driven volatility.\n                Concise Knowledge: If stealth accumulation by informed actors precedes a price breakout, the subsequent price move is more sustainable; when low-volume price-time divergence is followed by a high-efficiency overnight gap, the probability of a high-conviction institutional trend increases.\n                concise Specification: Define AID as the 10-day mean of (VWAP - TWAP) during low-volume periods; define LVSB as (Open - Prev_Close) divided by the 5-day average intraday range; the final ISP factor is the product of these two metrics.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T13:37:56.729630"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1181062109795754,
        "ICIR": 0.049588885020752,
        "1day.excess_return_without_cost.std": 0.0041557530030952,
        "1day.excess_return_with_cost.annualized_return": 0.0118769886272772,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002475769761354,
        "1day.excess_return_without_cost.annualized_return": 0.0589233203202325,
        "1day.excess_return_with_cost.std": 0.0041553580966072,
        "Rank IC": 0.0271742342497613,
        "IC": 0.006922327091659,
        "1day.excess_return_without_cost.max_drawdown": -0.0948400043707983,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.919070878543165,
        "1day.pa": 0.0,
        "l2.valid": 0.9963171462588418,
        "Rank ICIR": 0.1980746999492646,
        "l2.train": 0.9933581287159392,
        "1day.excess_return_with_cost.information_ratio": 0.1852718363568608,
        "1day.excess_return_with_cost.mean": 4.9903313559988514e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the Informed Structural Pre-emption (ISP) hypothesis. The current result, primarily driven by the 'ISP_Stealth_Breakout_Factor' and its counterparts, shows a significant improvement in Information Coefficient (IC) from 0.0058 to 0.0069 and an increase in Annualized Return from 0.052 to 0.0589. However, this comes at the cost of a higher Max Drawdown (-0.0948 vs -0.0726) and a slightly lower Information Ratio (0.919 vs 0.972). The IC improvement suggests that the interaction between stealth accumulation and breakout efficiency captures meaningful predictive signal.",
        "hypothesis_evaluation": "The results support the hypothesis that combining a multi-day stealth accumulation metric with a 1-day breakout efficiency score provides a superior predictive signal compared to single-dimension factors. The 'ISP_Stealth_Breakout_Factor' successfully identifies a lead-lag relationship between quiet positioning and price discovery. However, the increased drawdown suggests that the 'breakout' component might be sensitive to market volatility, requiring better normalization or a more robust definition of 'stealth'.",
        "decision": true,
        "reason": "The current 'stealth' component uses a simple price difference which may be scale-dependent. By using the 'volume-weighted price spread' (as seen in SGZ) but refining it to focus on 'negative volume-return correlation' (quiet accumulation often happens on low volume or price-volume divergence), we can better isolate informed buying. Furthermore, the 1-day gap should be compared against the cross-section rather than just its own history to ensure the 'breakout' is idiosyncratic rather than a market-wide gap-up, which should improve the Information Ratio and reduce Drawdown."
      }
    },
    "b340b157a57ca9fb": {
      "factor_id": "b340b157a57ca9fb",
      "factor_name": "Stealth_Gap_ZScore_Factor",
      "factor_expression": "RANK(TS_MEAN(($close - $open) / ($volume + 1e-8), 10)) * TS_ZSCORE($open - DELAY($close, 1), 20)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(TS_MEAN(($close - $open) / ($volume + 1e-8), 10)) * TS_ZSCORE($open - DELAY($close, 1), 20)\" # Your output factor expression will be filled in here\n    name = \"Stealth_Gap_ZScore_Factor\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor targets the 'transition from quiet positioning to active price discovery' by multiplying the 10-day inverse volume-weighted price spread (stealth) by the Z-score of the overnight gap. It uses cross-sectional ranking to ensure the factor is robust against market-wide volatility shifts.",
      "factor_formulation": "\\text{SGZ} = \\text{RANK}(\\text{TS_MEAN}(($close - $open) * (1 / $volume), 10)) * \\text{TS_ZSCORE}($open - \\text{DELAY}($close, 1), 20)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 10,
        "evolution_phase": "crossover",
        "trajectory_id": "d7204bd90464",
        "parent_trajectory_ids": [
          "51d281e76291",
          "8d9bd5be78a0"
        ],
        "hypothesis": "Hypothesis: The Informed Structural Pre-emption (ISP) factor identifies stocks by multiplying a 10-day stealth accumulation score (low-volume divergence between price-weighted and time-weighted averages) by a 1-day breakout efficiency score (overnight gap normalized by intraday volatility).\n                Concise Observation: Parent 1 (AID) captures early signals but lacks timing, while Parent 2 (LVSB) captures momentum but suffers from false breakouts; combining them targets the transition from quiet positioning to active price discovery.\n                Concise Justification: The interaction between information decay (setup) and gap efficiency (trigger) creates a non-linear filter that requires both prior hidden demand and current market validation, reducing noise from retail-driven volatility.\n                Concise Knowledge: If stealth accumulation by informed actors precedes a price breakout, the subsequent price move is more sustainable; when low-volume price-time divergence is followed by a high-efficiency overnight gap, the probability of a high-conviction institutional trend increases.\n                concise Specification: Define AID as the 10-day mean of (VWAP - TWAP) during low-volume periods; define LVSB as (Open - Prev_Close) divided by the 5-day average intraday range; the final ISP factor is the product of these two metrics.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T13:37:56.729630"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1181062109795754,
        "ICIR": 0.049588885020752,
        "1day.excess_return_without_cost.std": 0.0041557530030952,
        "1day.excess_return_with_cost.annualized_return": 0.0118769886272772,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002475769761354,
        "1day.excess_return_without_cost.annualized_return": 0.0589233203202325,
        "1day.excess_return_with_cost.std": 0.0041553580966072,
        "Rank IC": 0.0271742342497613,
        "IC": 0.006922327091659,
        "1day.excess_return_without_cost.max_drawdown": -0.0948400043707983,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.919070878543165,
        "1day.pa": 0.0,
        "l2.valid": 0.9963171462588418,
        "Rank ICIR": 0.1980746999492646,
        "l2.train": 0.9933581287159392,
        "1day.excess_return_with_cost.information_ratio": 0.1852718363568608,
        "1day.excess_return_with_cost.mean": 4.9903313559988514e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the Informed Structural Pre-emption (ISP) hypothesis. The current result, primarily driven by the 'ISP_Stealth_Breakout_Factor' and its counterparts, shows a significant improvement in Information Coefficient (IC) from 0.0058 to 0.0069 and an increase in Annualized Return from 0.052 to 0.0589. However, this comes at the cost of a higher Max Drawdown (-0.0948 vs -0.0726) and a slightly lower Information Ratio (0.919 vs 0.972). The IC improvement suggests that the interaction between stealth accumulation and breakout efficiency captures meaningful predictive signal.",
        "hypothesis_evaluation": "The results support the hypothesis that combining a multi-day stealth accumulation metric with a 1-day breakout efficiency score provides a superior predictive signal compared to single-dimension factors. The 'ISP_Stealth_Breakout_Factor' successfully identifies a lead-lag relationship between quiet positioning and price discovery. However, the increased drawdown suggests that the 'breakout' component might be sensitive to market volatility, requiring better normalization or a more robust definition of 'stealth'.",
        "decision": true,
        "reason": "The current 'stealth' component uses a simple price difference which may be scale-dependent. By using the 'volume-weighted price spread' (as seen in SGZ) but refining it to focus on 'negative volume-return correlation' (quiet accumulation often happens on low volume or price-volume divergence), we can better isolate informed buying. Furthermore, the 1-day gap should be compared against the cross-section rather than just its own history to ensure the 'breakout' is idiosyncratic rather than a market-wide gap-up, which should improve the Information Ratio and reduce Drawdown."
      }
    },
    "00087213527f6415": {
      "factor_id": "00087213527f6415",
      "factor_name": "Price_Trend_Volume_Divergence_10_20",
      "factor_expression": "(POW(REGBETA($close, SEQUENCE(10), 10), 2) * TS_VAR(SEQUENCE(10), 10) / (TS_VAR($close, 10) + 1e-8)) * (-1 * TS_CORR(DELTA($close, 1), DELTA($volume, 1), 20))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(POW(TS_CORR($close, SEQUENCE(10), 10), 2)) * (-1 * TS_CORR(TS_PCTCHANGE($close, 1), TS_PCTCHANGE($volume, 1), 20))\" # Your output factor expression will be filled in here\n    name = \"Price_Trend_Volume_Divergence_10_20\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies trend exhaustion by multiplying the 10-day R-squared of price trends (linear persistence) with the negative correlation between price changes and volume changes over 20 days. High values suggest a 'hollowing out' where price continues to move despite thinning volume synchronization, signaling a potential mean-reverting reversal.",
      "factor_formulation": "\\text{R2} = \\frac{\\text{REGBETA}(\\text{close}, \\text{SEQ}(10), 10)^2 \\times \\text{TS\\_VAR}(\\text{SEQ}(10), 10)}{\\text{TS\\_VAR}(\\text{close}, 10)}, \\text{Factor} = \\text{R2} \\times (-\\text{TS\\_CORR}(\\text{DELTA}(\\text{close}, 1), \\text{DELTA}(\\text{volume}, 1), 20))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 3,
        "evolution_phase": "mutation",
        "trajectory_id": "26decffb305f",
        "parent_trajectory_ids": [
          "3f240b40faa8"
        ],
        "hypothesis": "Hypothesis: The 'Intraday Volume-Price Convexity' factor, calculated as the interaction between the 10-day R-squared of price trends and the 20-day correlation between price and volume, identifies trend exhaustion where high price-trend persistence coupled with declining volume synchronization predicts a mean-reverting reversal.\n                Concise Observation: While overnight gaps and daily ranges capture sentiment persistence, they fail to identify the 'hollowing out' of a trend where price continues to move on thinning volume, a classic signal of intraday micro-structure fragility.\n                Concise Justification: High R-squared indicates a 'crowded' consensus trend, but if the correlation with volume drops, it suggests that aggressive market participants are no longer supporting the move, leading to a price-volume divergence that precedes a snapback.\n                Concise Knowledge: If a price trend maintains high linear persistence (R-squared) while its correlation with volume (CORR) diminishes, the trend is likely driven by liquidity exhaustion rather than fundamental conviction; When these two metrics diverge, a mean-reversion event is more probable than trend continuation.\n                concise Specification: The factor is defined as the product of the 10-day R-squared of daily close prices and the negative of the 20-day correlation between daily price changes and volume changes, targeting stocks in the tails of the distribution for reversal trading.\n                ",
        "initial_direction": "Assess 'Volume-Price Divergence' by interacting CORR20 with RSQR10: a high R-squared trend that loses its correlation with volume often precedes a trend reversal or consolidation.",
        "planning_direction": "Assess 'Volume-Price Divergence' by interacting CORR20 with RSQR10: a high R-squared trend that loses its correlation with volume often precedes a trend reversal or consolidation.",
        "created_at": "2026-01-21T02:10:37.186892"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0935860491614755,
        "ICIR": 0.0594403241815171,
        "1day.excess_return_without_cost.std": 0.004610138450364,
        "1day.excess_return_with_cost.annualized_return": 0.035880373183991,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003484822065891,
        "1day.excess_return_without_cost.annualized_return": 0.0829387651682274,
        "1day.excess_return_with_cost.std": 0.0046099594242177,
        "Rank IC": 0.0267266356796945,
        "IC": 0.0085134675652138,
        "1day.excess_return_without_cost.max_drawdown": -0.0823575250518681,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.166151884323961,
        "1day.pa": 0.0,
        "l2.valid": 0.9966177286820284,
        "Rank ICIR": 0.1902967834545223,
        "l2.train": 0.9935286608601288,
        "1day.excess_return_with_cost.information_ratio": 0.5045118483716564,
        "1day.excess_return_with_cost.mean": 0.0001507578705209
      },
      "feedback": {
        "observations": "The current iteration focused on the 'Intraday Volume-Price Convexity' hypothesis by testing three variations of price-trend persistence and volume divergence. The results show a significant improvement over the previous SOTA, particularly in the Information Ratio (1.166 vs 0.973) and Annualized Return (0.0829 vs 0.0520). The IC also improved from 0.0058 to 0.0085. While the Max Drawdown slightly increased, the overall risk-adjusted performance (IR) is substantially higher, suggesting that capturing the 'hollowing out' of price trends with volume divergence is a robust alpha source.",
        "hypothesis_evaluation": "The hypothesis that high price-trend persistence coupled with declining volume synchronization predicts mean-reversion is strongly supported. The 'Trend_Persistence_Volume_Decay' and 'Price_Trend_Volume_Divergence_10_20' implementations effectively capture the exhaustion phase. Specifically, using R-squared or TS_RANK to define the 'strength' of the trend and multiplying it by a negative correlation with volume successfully identifies fragile price moves. The success of the simpler 'Trend_Persistence_Volume_Decay' suggests that rank-based persistence is more robust than raw regression-based R-squared.",
        "decision": true,
        "reason": "Current results show that volume divergence is key. However, price trends often end with a 'blow-off top' or 'panic bottom' characterized by increased volatility. By incorporating the ratio of Volatility to Volume Growth into the existing trend-persistence framework, we can better distinguish between a healthy consolidation and a true exhaustion. This follows the principle of maintaining low complexity (few base features) while refining the mathematical representation of 'fragility'."
      }
    },
    "4216ba35ab3fa4b2": {
      "factor_id": "4216ba35ab3fa4b2",
      "factor_name": "Volume_Exhaustion_Convexity_Z",
      "factor_expression": "RANK(TS_CORR($close, SEQUENCE(10), 10)) * RANK(-1 * TS_CORR(TS_STD($close, 5), TS_PCTCHANGE($volume, 1), 20))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(TS_CORR($close, SEQUENCE(10), 10)) * RANK(-1 * TS_CORR(TS_STD($close, 5), TS_PCTCHANGE($volume, 1), 20))\" # Your output factor expression will be filled in here\n    name = \"Volume_Exhaustion_Convexity_Z\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A simplified version of the price-volume convexity hypothesis. It measures the product of price trend strength (via 10-day price-time correlation) and the 20-day inverse relationship between price volatility and volume growth. It aims to capture micro-structure fragility when price volatility increases but volume support wanes.",
      "factor_formulation": "\\text{Factor} = \\text{RANK}(\\text{TS\\_CORR}(\\text{close}, \\text{SEQ}(10), 10)) \\times \\text{RANK}(-\\text{TS\\_CORR}(\\text{TS\\_STD}(\\text{close}, 5), \\text{TS\\_PCTCHANGE}(\\text{volume}, 1), 20))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 3,
        "evolution_phase": "mutation",
        "trajectory_id": "26decffb305f",
        "parent_trajectory_ids": [
          "3f240b40faa8"
        ],
        "hypothesis": "Hypothesis: The 'Intraday Volume-Price Convexity' factor, calculated as the interaction between the 10-day R-squared of price trends and the 20-day correlation between price and volume, identifies trend exhaustion where high price-trend persistence coupled with declining volume synchronization predicts a mean-reverting reversal.\n                Concise Observation: While overnight gaps and daily ranges capture sentiment persistence, they fail to identify the 'hollowing out' of a trend where price continues to move on thinning volume, a classic signal of intraday micro-structure fragility.\n                Concise Justification: High R-squared indicates a 'crowded' consensus trend, but if the correlation with volume drops, it suggests that aggressive market participants are no longer supporting the move, leading to a price-volume divergence that precedes a snapback.\n                Concise Knowledge: If a price trend maintains high linear persistence (R-squared) while its correlation with volume (CORR) diminishes, the trend is likely driven by liquidity exhaustion rather than fundamental conviction; When these two metrics diverge, a mean-reversion event is more probable than trend continuation.\n                concise Specification: The factor is defined as the product of the 10-day R-squared of daily close prices and the negative of the 20-day correlation between daily price changes and volume changes, targeting stocks in the tails of the distribution for reversal trading.\n                ",
        "initial_direction": "Assess 'Volume-Price Divergence' by interacting CORR20 with RSQR10: a high R-squared trend that loses its correlation with volume often precedes a trend reversal or consolidation.",
        "planning_direction": "Assess 'Volume-Price Divergence' by interacting CORR20 with RSQR10: a high R-squared trend that loses its correlation with volume often precedes a trend reversal or consolidation.",
        "created_at": "2026-01-21T02:10:37.186892"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0935860491614755,
        "ICIR": 0.0594403241815171,
        "1day.excess_return_without_cost.std": 0.004610138450364,
        "1day.excess_return_with_cost.annualized_return": 0.035880373183991,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003484822065891,
        "1day.excess_return_without_cost.annualized_return": 0.0829387651682274,
        "1day.excess_return_with_cost.std": 0.0046099594242177,
        "Rank IC": 0.0267266356796945,
        "IC": 0.0085134675652138,
        "1day.excess_return_without_cost.max_drawdown": -0.0823575250518681,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.166151884323961,
        "1day.pa": 0.0,
        "l2.valid": 0.9966177286820284,
        "Rank ICIR": 0.1902967834545223,
        "l2.train": 0.9935286608601288,
        "1day.excess_return_with_cost.information_ratio": 0.5045118483716564,
        "1day.excess_return_with_cost.mean": 0.0001507578705209
      },
      "feedback": {
        "observations": "The current iteration focused on the 'Intraday Volume-Price Convexity' hypothesis by testing three variations of price-trend persistence and volume divergence. The results show a significant improvement over the previous SOTA, particularly in the Information Ratio (1.166 vs 0.973) and Annualized Return (0.0829 vs 0.0520). The IC also improved from 0.0058 to 0.0085. While the Max Drawdown slightly increased, the overall risk-adjusted performance (IR) is substantially higher, suggesting that capturing the 'hollowing out' of price trends with volume divergence is a robust alpha source.",
        "hypothesis_evaluation": "The hypothesis that high price-trend persistence coupled with declining volume synchronization predicts mean-reversion is strongly supported. The 'Trend_Persistence_Volume_Decay' and 'Price_Trend_Volume_Divergence_10_20' implementations effectively capture the exhaustion phase. Specifically, using R-squared or TS_RANK to define the 'strength' of the trend and multiplying it by a negative correlation with volume successfully identifies fragile price moves. The success of the simpler 'Trend_Persistence_Volume_Decay' suggests that rank-based persistence is more robust than raw regression-based R-squared.",
        "decision": true,
        "reason": "Current results show that volume divergence is key. However, price trends often end with a 'blow-off top' or 'panic bottom' characterized by increased volatility. By incorporating the ratio of Volatility to Volume Growth into the existing trend-persistence framework, we can better distinguish between a healthy consolidation and a true exhaustion. This follows the principle of maintaining low complexity (few base features) while refining the mathematical representation of 'fragility'."
      }
    },
    "c5c4e4a9eded132c": {
      "factor_id": "c5c4e4a9eded132c",
      "factor_name": "Trend_Persistence_Volume_Decay",
      "factor_expression": "TS_RANK($close, 10) * (-1 * TS_CORR($return, $volume, 20))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_RANK($close, 10) * (-1 * TS_CORR(TS_PCTCHANGE($close, 1), $volume, 20))\" # Your output factor expression will be filled in here\n    name = \"Trend_Persistence_Volume_Decay\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor targets stocks where price momentum is high but volume-weighted support is declining. It uses the 10-day time-series rank of price to define trend persistence and multiplies it by the negative 20-day correlation between price returns and volume to identify divergence.",
      "factor_formulation": "\\text{Factor} = \\text{TS\\_RANK}(\\text{close}, 10) \\times (-\\text{TS\\_CORR}(\\text{return}, \\text{volume}, 20))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 3,
        "evolution_phase": "mutation",
        "trajectory_id": "26decffb305f",
        "parent_trajectory_ids": [
          "3f240b40faa8"
        ],
        "hypothesis": "Hypothesis: The 'Intraday Volume-Price Convexity' factor, calculated as the interaction between the 10-day R-squared of price trends and the 20-day correlation between price and volume, identifies trend exhaustion where high price-trend persistence coupled with declining volume synchronization predicts a mean-reverting reversal.\n                Concise Observation: While overnight gaps and daily ranges capture sentiment persistence, they fail to identify the 'hollowing out' of a trend where price continues to move on thinning volume, a classic signal of intraday micro-structure fragility.\n                Concise Justification: High R-squared indicates a 'crowded' consensus trend, but if the correlation with volume drops, it suggests that aggressive market participants are no longer supporting the move, leading to a price-volume divergence that precedes a snapback.\n                Concise Knowledge: If a price trend maintains high linear persistence (R-squared) while its correlation with volume (CORR) diminishes, the trend is likely driven by liquidity exhaustion rather than fundamental conviction; When these two metrics diverge, a mean-reversion event is more probable than trend continuation.\n                concise Specification: The factor is defined as the product of the 10-day R-squared of daily close prices and the negative of the 20-day correlation between daily price changes and volume changes, targeting stocks in the tails of the distribution for reversal trading.\n                ",
        "initial_direction": "Assess 'Volume-Price Divergence' by interacting CORR20 with RSQR10: a high R-squared trend that loses its correlation with volume often precedes a trend reversal or consolidation.",
        "planning_direction": "Assess 'Volume-Price Divergence' by interacting CORR20 with RSQR10: a high R-squared trend that loses its correlation with volume often precedes a trend reversal or consolidation.",
        "created_at": "2026-01-21T02:10:37.186892"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0935860491614755,
        "ICIR": 0.0594403241815171,
        "1day.excess_return_without_cost.std": 0.004610138450364,
        "1day.excess_return_with_cost.annualized_return": 0.035880373183991,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003484822065891,
        "1day.excess_return_without_cost.annualized_return": 0.0829387651682274,
        "1day.excess_return_with_cost.std": 0.0046099594242177,
        "Rank IC": 0.0267266356796945,
        "IC": 0.0085134675652138,
        "1day.excess_return_without_cost.max_drawdown": -0.0823575250518681,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.166151884323961,
        "1day.pa": 0.0,
        "l2.valid": 0.9966177286820284,
        "Rank ICIR": 0.1902967834545223,
        "l2.train": 0.9935286608601288,
        "1day.excess_return_with_cost.information_ratio": 0.5045118483716564,
        "1day.excess_return_with_cost.mean": 0.0001507578705209
      },
      "feedback": {
        "observations": "The current iteration focused on the 'Intraday Volume-Price Convexity' hypothesis by testing three variations of price-trend persistence and volume divergence. The results show a significant improvement over the previous SOTA, particularly in the Information Ratio (1.166 vs 0.973) and Annualized Return (0.0829 vs 0.0520). The IC also improved from 0.0058 to 0.0085. While the Max Drawdown slightly increased, the overall risk-adjusted performance (IR) is substantially higher, suggesting that capturing the 'hollowing out' of price trends with volume divergence is a robust alpha source.",
        "hypothesis_evaluation": "The hypothesis that high price-trend persistence coupled with declining volume synchronization predicts mean-reversion is strongly supported. The 'Trend_Persistence_Volume_Decay' and 'Price_Trend_Volume_Divergence_10_20' implementations effectively capture the exhaustion phase. Specifically, using R-squared or TS_RANK to define the 'strength' of the trend and multiplying it by a negative correlation with volume successfully identifies fragile price moves. The success of the simpler 'Trend_Persistence_Volume_Decay' suggests that rank-based persistence is more robust than raw regression-based R-squared.",
        "decision": true,
        "reason": "Current results show that volume divergence is key. However, price trends often end with a 'blow-off top' or 'panic bottom' characterized by increased volatility. By incorporating the ratio of Volatility to Volume Growth into the existing trend-persistence framework, we can better distinguish between a healthy consolidation and a true exhaustion. This follows the principle of maintaining low complexity (few base features) while refining the mathematical representation of 'fragility'."
      }
    },
    "b14dfd17ba39b38a": {
      "factor_id": "b14dfd17ba39b38a",
      "factor_name": "Liquidity_Vacuum_RVR_10D",
      "factor_expression": "TS_RANK(($high - $low) / (WMA($volume, 5) + 1e-8), 10)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_RANK(($high - $low) / (WMA($volume, 5) + 1e-8), 10)\" # Your output factor expression will be filled in here\n    name = \"Liquidity_Vacuum_RVR_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies 'hollow' price moves by calculating the ratio of the daily high-low range to the 5-day weighted volume moving average. High values indicate price discovery occurring on low relative liquidity, which is prone to mean-reversion. The result is ranked over a 10-day window to capture extreme liquidity gaps.",
      "factor_formulation": "\\text{TS_RANK}(\\frac{\\text{high} - \\text{low}}{\\text{WMA}(\\text{volume}, 5)}, 10)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 3,
        "evolution_phase": "mutation",
        "trajectory_id": "b3debaa6ebd8",
        "parent_trajectory_ids": [
          "849c0b2b23a0"
        ],
        "hypothesis": "Hypothesis: The 'Mean-Reverting Liquidity Vacuum' factor, defined as the ratio of the daily high-low range to the 5-day weighted volume moving average, identifies price moves driven by liquidity gaps that are likely to mean-revert due to lack of institutional support.\n                Concise Observation: While the parent strategy found success in volume-confirmed gaps, market data shows that extreme price dispersion (High-Low) without corresponding volume peaks often leads to immediate price retracement rather than trend continuation.\n                Concise Justification: Price discovery requires volume to validate new levels; a high Range-to-Volume Ratio (RVR) signifies high transaction costs and low depth, suggesting the price move is a transient noise event rather than a structural shift.\n                Concise Knowledge: If a wide intraday price range occurs on declining or low relative volume, it indicates a liquidity vacuum where small trades cause large price shifts; such 'hollow' volatility typically reverts as market makers stabilize the spread.\n                concise Specification: The factor is calculated as the daily ($high - $low) divided by the 5-day WMA of $volume, then transformed via a 10-day descending rank to capture the most 'hollow' price expansions for mean-reversion prediction.\n                ",
        "initial_direction": "Examine 'Volatility Quality' by conditioning KLEN on WVMA5: high intraday range with low price-volume resonance may indicate noise, whereas high resonance suggests institutional participation.",
        "planning_direction": "Examine 'Volatility Quality' by conditioning KLEN on WVMA5: high intraday range with low price-volume resonance may indicate noise, whereas high resonance suggests institutional participation.",
        "created_at": "2026-01-21T00:55:39.379050"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1147655005400539,
        "ICIR": 0.0433370589635048,
        "1day.excess_return_without_cost.std": 0.0040708890250533,
        "1day.excess_return_with_cost.annualized_return": 0.0116254462492635,
        "1day.ffr": 0.9998945481387748,
        "1day.excess_return_without_cost.mean": 0.0002466588309439,
        "1day.excess_return_without_cost.annualized_return": 0.0587048017646532,
        "1day.excess_return_with_cost.std": 0.0040710037306153,
        "Rank IC": 0.0266563656043839,
        "IC": 0.0061719608470284,
        "1day.excess_return_without_cost.max_drawdown": -0.0859844045825237,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.9347508826709212,
        "1day.pa": 0.0,
        "l2.valid": 0.9964702388668738,
        "Rank ICIR": 0.1925215625082049,
        "l2.train": 0.9932514352244038,
        "1day.excess_return_with_cost.information_ratio": 0.1851056409026963,
        "1day.excess_return_with_cost.mean": 4.884641281203189e-05
      },
      "feedback": {
        "observations": "The current experiment iteration shows an improvement in both the Information Coefficient (IC) and the Annualized Return compared to the previous SOTA. Specifically, the IC increased from 0.005798 to 0.006172, and the Annualized Return rose from 0.052010 to 0.058705. However, the Information Ratio (IR) slightly decreased, and the Max Drawdown (MDD) worsened from -0.072585 to -0.085984. The factors testedparticularly the 'Decay_Weighted_Liquidity_Gap' and 'Cross_Sectional_Hollow_Volatility'successfully captured the 'hollow' price moves described in the hypothesis. The improvement in IC suggests that the relationship between liquidity-deprived price expansion and subsequent returns is statistically significant.",
        "hypothesis_evaluation": "The results support the 'Mean-Reverting Liquidity Vacuum' hypothesis. The use of a decay-weighted volume (DECAYLINEAR) and cross-sectional normalization (ZSCORE) appears to be more effective than a simple time-series rank (TS_RANK). The increase in IC indicates that the divergence between price range and volume is a valid predictor of short-term returns. However, the increased drawdown suggests that while the signal is more predictive on average, it may be subject to higher volatility or 'tail risk' during specific market regimes where liquidity gaps do not immediately mean-revert.",
        "decision": true,
        "reason": "The current SOTA uses a 20-day standard deviation of the range for normalization, which helped improve the annualized return. To further refine this, we should consider that a 'liquidity vacuum' is most meaningful relative to the stock's own historical 'normal' liquidity-to-volatility ratio. By incorporating a double-normalization (normalizing the range by volume, then normalizing that ratio by its own historical volatility), we can better isolate truly anomalous 'hollow' moves from standard high-volatility trading. This should help reduce the Max Drawdown observed in the current iteration."
      }
    },
    "b128705915ddff0d": {
      "factor_id": "b128705915ddff0d",
      "factor_name": "Cross_Sectional_Hollow_Volatility",
      "factor_expression": "ZSCORE(($high - $low) / (TS_MEAN($volume, 5) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"ZSCORE(($high - $low) / (TS_MEAN($volume, 5) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Cross_Sectional_Hollow_Volatility\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor measures the cross-sectional intensity of price expansion relative to volume support. By taking the Z-score of the range-to-volume ratio, it identifies stocks experiencing abnormal price dispersion without institutional volume backing, signaling a potential mean-reverting liquidity vacuum.",
      "factor_formulation": "\\text{ZSCORE}(\\frac{\\text{high} - \\text{low}}{\\text{TS_MEAN}(\\text{volume}, 5)})",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 3,
        "evolution_phase": "mutation",
        "trajectory_id": "b3debaa6ebd8",
        "parent_trajectory_ids": [
          "849c0b2b23a0"
        ],
        "hypothesis": "Hypothesis: The 'Mean-Reverting Liquidity Vacuum' factor, defined as the ratio of the daily high-low range to the 5-day weighted volume moving average, identifies price moves driven by liquidity gaps that are likely to mean-revert due to lack of institutional support.\n                Concise Observation: While the parent strategy found success in volume-confirmed gaps, market data shows that extreme price dispersion (High-Low) without corresponding volume peaks often leads to immediate price retracement rather than trend continuation.\n                Concise Justification: Price discovery requires volume to validate new levels; a high Range-to-Volume Ratio (RVR) signifies high transaction costs and low depth, suggesting the price move is a transient noise event rather than a structural shift.\n                Concise Knowledge: If a wide intraday price range occurs on declining or low relative volume, it indicates a liquidity vacuum where small trades cause large price shifts; such 'hollow' volatility typically reverts as market makers stabilize the spread.\n                concise Specification: The factor is calculated as the daily ($high - $low) divided by the 5-day WMA of $volume, then transformed via a 10-day descending rank to capture the most 'hollow' price expansions for mean-reversion prediction.\n                ",
        "initial_direction": "Examine 'Volatility Quality' by conditioning KLEN on WVMA5: high intraday range with low price-volume resonance may indicate noise, whereas high resonance suggests institutional participation.",
        "planning_direction": "Examine 'Volatility Quality' by conditioning KLEN on WVMA5: high intraday range with low price-volume resonance may indicate noise, whereas high resonance suggests institutional participation.",
        "created_at": "2026-01-21T00:55:39.379050"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1147655005400539,
        "ICIR": 0.0433370589635048,
        "1day.excess_return_without_cost.std": 0.0040708890250533,
        "1day.excess_return_with_cost.annualized_return": 0.0116254462492635,
        "1day.ffr": 0.9998945481387748,
        "1day.excess_return_without_cost.mean": 0.0002466588309439,
        "1day.excess_return_without_cost.annualized_return": 0.0587048017646532,
        "1day.excess_return_with_cost.std": 0.0040710037306153,
        "Rank IC": 0.0266563656043839,
        "IC": 0.0061719608470284,
        "1day.excess_return_without_cost.max_drawdown": -0.0859844045825237,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.9347508826709212,
        "1day.pa": 0.0,
        "l2.valid": 0.9964702388668738,
        "Rank ICIR": 0.1925215625082049,
        "l2.train": 0.9932514352244038,
        "1day.excess_return_with_cost.information_ratio": 0.1851056409026963,
        "1day.excess_return_with_cost.mean": 4.884641281203189e-05
      },
      "feedback": {
        "observations": "The current experiment iteration shows an improvement in both the Information Coefficient (IC) and the Annualized Return compared to the previous SOTA. Specifically, the IC increased from 0.005798 to 0.006172, and the Annualized Return rose from 0.052010 to 0.058705. However, the Information Ratio (IR) slightly decreased, and the Max Drawdown (MDD) worsened from -0.072585 to -0.085984. The factors testedparticularly the 'Decay_Weighted_Liquidity_Gap' and 'Cross_Sectional_Hollow_Volatility'successfully captured the 'hollow' price moves described in the hypothesis. The improvement in IC suggests that the relationship between liquidity-deprived price expansion and subsequent returns is statistically significant.",
        "hypothesis_evaluation": "The results support the 'Mean-Reverting Liquidity Vacuum' hypothesis. The use of a decay-weighted volume (DECAYLINEAR) and cross-sectional normalization (ZSCORE) appears to be more effective than a simple time-series rank (TS_RANK). The increase in IC indicates that the divergence between price range and volume is a valid predictor of short-term returns. However, the increased drawdown suggests that while the signal is more predictive on average, it may be subject to higher volatility or 'tail risk' during specific market regimes where liquidity gaps do not immediately mean-revert.",
        "decision": true,
        "reason": "The current SOTA uses a 20-day standard deviation of the range for normalization, which helped improve the annualized return. To further refine this, we should consider that a 'liquidity vacuum' is most meaningful relative to the stock's own historical 'normal' liquidity-to-volatility ratio. By incorporating a double-normalization (normalizing the range by volume, then normalizing that ratio by its own historical volatility), we can better isolate truly anomalous 'hollow' moves from standard high-volatility trading. This should help reduce the Max Drawdown observed in the current iteration."
      }
    },
    "84e7270f720d91fc": {
      "factor_id": "84e7270f720d91fc",
      "factor_name": "Decay_Weighted_Liquidity_Gap",
      "factor_expression": "(($high - $low) / (DECAYLINEAR($volume, 5) + 1e-8)) / (TS_STD($high - $low, 20) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(($high - $low) / (DECAYLINEAR($volume, 5) + 1e-8)) / (TS_STD($high - $low, 20) + 1e-8)\" # Your output factor expression will be filled in here\n    name = \"Decay_Weighted_Liquidity_Gap\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A variation of the liquidity vacuum hypothesis using a linearly decaying volume weight to emphasize recent volume trends. It captures the divergence between price volatility (High-Low) and recent volume depth, normalized by the 20-day standard deviation of the range.",
      "factor_formulation": "\\frac{(\\text{high} - \\text{low}) / \\text{DECAYLINEAR}(\\text{volume}, 5)}{\\text{TS_STD}(\\text{high} - \\text{low}, 20)}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 3,
        "evolution_phase": "mutation",
        "trajectory_id": "b3debaa6ebd8",
        "parent_trajectory_ids": [
          "849c0b2b23a0"
        ],
        "hypothesis": "Hypothesis: The 'Mean-Reverting Liquidity Vacuum' factor, defined as the ratio of the daily high-low range to the 5-day weighted volume moving average, identifies price moves driven by liquidity gaps that are likely to mean-revert due to lack of institutional support.\n                Concise Observation: While the parent strategy found success in volume-confirmed gaps, market data shows that extreme price dispersion (High-Low) without corresponding volume peaks often leads to immediate price retracement rather than trend continuation.\n                Concise Justification: Price discovery requires volume to validate new levels; a high Range-to-Volume Ratio (RVR) signifies high transaction costs and low depth, suggesting the price move is a transient noise event rather than a structural shift.\n                Concise Knowledge: If a wide intraday price range occurs on declining or low relative volume, it indicates a liquidity vacuum where small trades cause large price shifts; such 'hollow' volatility typically reverts as market makers stabilize the spread.\n                concise Specification: The factor is calculated as the daily ($high - $low) divided by the 5-day WMA of $volume, then transformed via a 10-day descending rank to capture the most 'hollow' price expansions for mean-reversion prediction.\n                ",
        "initial_direction": "Examine 'Volatility Quality' by conditioning KLEN on WVMA5: high intraday range with low price-volume resonance may indicate noise, whereas high resonance suggests institutional participation.",
        "planning_direction": "Examine 'Volatility Quality' by conditioning KLEN on WVMA5: high intraday range with low price-volume resonance may indicate noise, whereas high resonance suggests institutional participation.",
        "created_at": "2026-01-21T00:55:39.379050"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1147655005400539,
        "ICIR": 0.0433370589635048,
        "1day.excess_return_without_cost.std": 0.0040708890250533,
        "1day.excess_return_with_cost.annualized_return": 0.0116254462492635,
        "1day.ffr": 0.9998945481387748,
        "1day.excess_return_without_cost.mean": 0.0002466588309439,
        "1day.excess_return_without_cost.annualized_return": 0.0587048017646532,
        "1day.excess_return_with_cost.std": 0.0040710037306153,
        "Rank IC": 0.0266563656043839,
        "IC": 0.0061719608470284,
        "1day.excess_return_without_cost.max_drawdown": -0.0859844045825237,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.9347508826709212,
        "1day.pa": 0.0,
        "l2.valid": 0.9964702388668738,
        "Rank ICIR": 0.1925215625082049,
        "l2.train": 0.9932514352244038,
        "1day.excess_return_with_cost.information_ratio": 0.1851056409026963,
        "1day.excess_return_with_cost.mean": 4.884641281203189e-05
      },
      "feedback": {
        "observations": "The current experiment iteration shows an improvement in both the Information Coefficient (IC) and the Annualized Return compared to the previous SOTA. Specifically, the IC increased from 0.005798 to 0.006172, and the Annualized Return rose from 0.052010 to 0.058705. However, the Information Ratio (IR) slightly decreased, and the Max Drawdown (MDD) worsened from -0.072585 to -0.085984. The factors testedparticularly the 'Decay_Weighted_Liquidity_Gap' and 'Cross_Sectional_Hollow_Volatility'successfully captured the 'hollow' price moves described in the hypothesis. The improvement in IC suggests that the relationship between liquidity-deprived price expansion and subsequent returns is statistically significant.",
        "hypothesis_evaluation": "The results support the 'Mean-Reverting Liquidity Vacuum' hypothesis. The use of a decay-weighted volume (DECAYLINEAR) and cross-sectional normalization (ZSCORE) appears to be more effective than a simple time-series rank (TS_RANK). The increase in IC indicates that the divergence between price range and volume is a valid predictor of short-term returns. However, the increased drawdown suggests that while the signal is more predictive on average, it may be subject to higher volatility or 'tail risk' during specific market regimes where liquidity gaps do not immediately mean-revert.",
        "decision": true,
        "reason": "The current SOTA uses a 20-day standard deviation of the range for normalization, which helped improve the annualized return. To further refine this, we should consider that a 'liquidity vacuum' is most meaningful relative to the stock's own historical 'normal' liquidity-to-volatility ratio. By incorporating a double-normalization (normalizing the range by volume, then normalizing that ratio by its own historical volatility), we can better isolate truly anomalous 'hollow' moves from standard high-volatility trading. This should help reduce the Max Drawdown observed in the current iteration."
      }
    },
    "70e1dd0b800de0ab": {
      "factor_id": "70e1dd0b800de0ab",
      "factor_name": "Overnight_Sentiment_Persistence_5D",
      "factor_expression": "($open / DELAY($close, 1) - 1) / (TS_MEAN($high - $low, 5) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"($open / DELAY($close, 1) - 1) / (TS_MEAN($high - $low, 5) + 1e-8)\" # Your output factor expression will be filled in here\n    name = \"Overnight_Sentiment_Persistence_5D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor calculates the ratio of the overnight return to the average daily price range over the last 5 days. It identifies stocks where the opening gap is significant relative to recent volatility, suggesting that overnight information is the primary driver of price action and likely to persist.",
      "factor_formulation": "OSP_{5D} = \\frac{(open_t / close_{t-1}) - 1}{TS\\_MEAN(high_t - low_t, 5)}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 1,
        "evolution_phase": "mutation",
        "trajectory_id": "391003c8211b",
        "parent_trajectory_ids": [
          "836034d98a7a"
        ],
        "hypothesis": "Hypothesis: The 'Overnight Sentiment Persistence' factor, defined as the ratio of the overnight price gap to the daily price range, predicts short-term returns because moderate overnight gaps followed by low intraday volatility indicate institutional absorption of sentiment-driven information.\n                Concise Observation: The parent strategy focused on long-term mean reversion from extreme lows, but failed to capture short-term momentum shifts occurring at the market open where overnight information first impacts price discovery.\n                Concise Justification: Overnight gaps represent the accumulation of information while the market is closed; a high ratio of this gap relative to the total high-low range suggests that the opening sentiment dominated the day's price action, signaling a strong conviction that likely persists into the next trading session.\n                Concise Knowledge: If a stock opens with a gap that is small relative to its typical daily volatility, it suggests sustainable sentiment; when this gap is coupled with low intraday price dispersion, it indicates that the overnight information is being systematically integrated into the price rather than being rejected by volatility.\n                concise Specification: The factor is calculated as the overnight return (Open_t / Close_{t-1} - 1) divided by the 5-day moving average of the daily range (High - Low) to normalize for volatility, focusing on the persistence of the 'Opening Drive' over a T+1 horizon.\n                ",
        "initial_direction": "Synthesize a 'Capitulation Index' using ROC60 and KLOW: extreme long-term price declines (ROC60 > 1) paired with increasing lower shadows suggest the formation of a durable bottom.",
        "planning_direction": "Synthesize a 'Capitulation Index' using ROC60 and KLOW: extreme long-term price declines (ROC60 > 1) paired with increasing lower shadows suggest the formation of a durable bottom.",
        "created_at": "2026-01-20T23:19:04.404534"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1063373167514521,
        "ICIR": 0.0530038566796628,
        "1day.excess_return_without_cost.std": 0.0041211109342706,
        "1day.excess_return_with_cost.annualized_return": 0.0087939864620408,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002357856319718,
        "1day.excess_return_without_cost.annualized_return": 0.0561169804093084,
        "1day.excess_return_with_cost.std": 0.0041204558034761,
        "Rank IC": 0.0260288324953588,
        "IC": 0.0070544291446842,
        "1day.excess_return_without_cost.max_drawdown": -0.0968841670226008,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.8826560661914168,
        "1day.pa": 0.0,
        "l2.valid": 0.9963849562548254,
        "Rank ICIR": 0.1976868184220868,
        "l2.train": 0.9938662286612204,
        "1day.excess_return_with_cost.information_ratio": 0.1383413641945455,
        "1day.excess_return_with_cost.mean": 3.694952294975131e-05
      },
      "feedback": {
        "observations": "The current iteration focused on the 'Overnight Sentiment Persistence' hypothesis by testing three variations: a 5-day moving average normalization (OSP_5D), a cross-sectional rank of daily efficiency (NODE), and a relative volatility adjustment (LVGP). The combined results show a significant improvement in Information Coefficient (IC) from 0.005798 to 0.007054 and an increase in Annualized Return from 0.052010 to 0.056117. However, the Information Ratio (IR) decreased slightly and the Max Drawdown worsened, suggesting that while the signal strength (IC) has increased, the volatility of the factor's performance has also risen.",
        "hypothesis_evaluation": "The results generally support the hypothesis that the ratio of overnight gaps to intraday volatility contains predictive power. The increase in IC suggests that the 'institutional absorption' concept (where low intraday volatility following a gap signals persistence) is a valid alpha source. The 'Low_Volatility_Gap_Persistence' (LVGP) implementation, which specifically scales the gap by the inverse of relative intraday range, likely contributed most to the IC improvement by isolating 'quiet' price discovery phases.",
        "decision": true,
        "reason": "While the current factors capture the 'efficiency' of the gap, they do not account for the context of the gap. A gap that continues a 20-day trend is more likely to represent institutional accumulation, whereas an exhausting gap at the end of a trend might lead to a reversal despite low intraday volatility. Integrating a trend filter (e.g., sign of the 20-day moving average) should improve the Information Ratio and reduce Drawdown by filtering out 'trap' gaps."
      }
    },
    "02e3ae3a61deea48": {
      "factor_id": "02e3ae3a61deea48",
      "factor_name": "Normalized_Opening_Drive_Efficiency",
      "factor_expression": "RANK(($open - DELAY($close, 1)) / ($high - $low + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(($open - DELAY($close, 1)) / ($high - $low + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Normalized_Opening_Drive_Efficiency\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "Measures the efficiency of the opening sentiment by dividing the overnight gap by the current day's total range, cross-sectionally ranked to identify stocks where the gap represents a dominant portion of the day's volatility. High values indicate strong institutional absorption of overnight news.",
      "factor_formulation": "NODE = RANK(\\frac{open_t - close_{t-1}}{high_t - low_t + 1e-8})",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 1,
        "evolution_phase": "mutation",
        "trajectory_id": "391003c8211b",
        "parent_trajectory_ids": [
          "836034d98a7a"
        ],
        "hypothesis": "Hypothesis: The 'Overnight Sentiment Persistence' factor, defined as the ratio of the overnight price gap to the daily price range, predicts short-term returns because moderate overnight gaps followed by low intraday volatility indicate institutional absorption of sentiment-driven information.\n                Concise Observation: The parent strategy focused on long-term mean reversion from extreme lows, but failed to capture short-term momentum shifts occurring at the market open where overnight information first impacts price discovery.\n                Concise Justification: Overnight gaps represent the accumulation of information while the market is closed; a high ratio of this gap relative to the total high-low range suggests that the opening sentiment dominated the day's price action, signaling a strong conviction that likely persists into the next trading session.\n                Concise Knowledge: If a stock opens with a gap that is small relative to its typical daily volatility, it suggests sustainable sentiment; when this gap is coupled with low intraday price dispersion, it indicates that the overnight information is being systematically integrated into the price rather than being rejected by volatility.\n                concise Specification: The factor is calculated as the overnight return (Open_t / Close_{t-1} - 1) divided by the 5-day moving average of the daily range (High - Low) to normalize for volatility, focusing on the persistence of the 'Opening Drive' over a T+1 horizon.\n                ",
        "initial_direction": "Synthesize a 'Capitulation Index' using ROC60 and KLOW: extreme long-term price declines (ROC60 > 1) paired with increasing lower shadows suggest the formation of a durable bottom.",
        "planning_direction": "Synthesize a 'Capitulation Index' using ROC60 and KLOW: extreme long-term price declines (ROC60 > 1) paired with increasing lower shadows suggest the formation of a durable bottom.",
        "created_at": "2026-01-20T23:19:04.404534"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1063373167514521,
        "ICIR": 0.0530038566796628,
        "1day.excess_return_without_cost.std": 0.0041211109342706,
        "1day.excess_return_with_cost.annualized_return": 0.0087939864620408,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002357856319718,
        "1day.excess_return_without_cost.annualized_return": 0.0561169804093084,
        "1day.excess_return_with_cost.std": 0.0041204558034761,
        "Rank IC": 0.0260288324953588,
        "IC": 0.0070544291446842,
        "1day.excess_return_without_cost.max_drawdown": -0.0968841670226008,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.8826560661914168,
        "1day.pa": 0.0,
        "l2.valid": 0.9963849562548254,
        "Rank ICIR": 0.1976868184220868,
        "l2.train": 0.9938662286612204,
        "1day.excess_return_with_cost.information_ratio": 0.1383413641945455,
        "1day.excess_return_with_cost.mean": 3.694952294975131e-05
      },
      "feedback": {
        "observations": "The current iteration focused on the 'Overnight Sentiment Persistence' hypothesis by testing three variations: a 5-day moving average normalization (OSP_5D), a cross-sectional rank of daily efficiency (NODE), and a relative volatility adjustment (LVGP). The combined results show a significant improvement in Information Coefficient (IC) from 0.005798 to 0.007054 and an increase in Annualized Return from 0.052010 to 0.056117. However, the Information Ratio (IR) decreased slightly and the Max Drawdown worsened, suggesting that while the signal strength (IC) has increased, the volatility of the factor's performance has also risen.",
        "hypothesis_evaluation": "The results generally support the hypothesis that the ratio of overnight gaps to intraday volatility contains predictive power. The increase in IC suggests that the 'institutional absorption' concept (where low intraday volatility following a gap signals persistence) is a valid alpha source. The 'Low_Volatility_Gap_Persistence' (LVGP) implementation, which specifically scales the gap by the inverse of relative intraday range, likely contributed most to the IC improvement by isolating 'quiet' price discovery phases.",
        "decision": true,
        "reason": "While the current factors capture the 'efficiency' of the gap, they do not account for the context of the gap. A gap that continues a 20-day trend is more likely to represent institutional accumulation, whereas an exhausting gap at the end of a trend might lead to a reversal despite low intraday volatility. Integrating a trend filter (e.g., sign of the 20-day moving average) should improve the Information Ratio and reduce Drawdown by filtering out 'trap' gaps."
      }
    },
    "2e43bd6bbe11d39e": {
      "factor_id": "2e43bd6bbe11d39e",
      "factor_name": "Low_Volatility_Gap_Persistence",
      "factor_expression": "(($open - DELAY($close, 1)) / DELAY($close, 1)) * (TS_MEAN($high - $low, 10) / ($high - $low + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(($open - DELAY($close, 1)) / DELAY($close, 1)) * (TS_MEAN($high - $low, 10) / ($high - $low + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Low_Volatility_Gap_Persistence\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor targets the 'institutional absorption' hypothesis by multiplying the overnight return by the inverse of the intraday range relative to its 10-day average. It rewards stocks with a clear overnight direction and low subsequent intraday volatility.",
      "factor_formulation": "LVGP = \\frac{open_t - close_{t-1}}{close_{t-1}} * \\frac{TS\\_MEAN(high - low, 10)}{high_t - low_t + 1e-8}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 1,
        "evolution_phase": "mutation",
        "trajectory_id": "391003c8211b",
        "parent_trajectory_ids": [
          "836034d98a7a"
        ],
        "hypothesis": "Hypothesis: The 'Overnight Sentiment Persistence' factor, defined as the ratio of the overnight price gap to the daily price range, predicts short-term returns because moderate overnight gaps followed by low intraday volatility indicate institutional absorption of sentiment-driven information.\n                Concise Observation: The parent strategy focused on long-term mean reversion from extreme lows, but failed to capture short-term momentum shifts occurring at the market open where overnight information first impacts price discovery.\n                Concise Justification: Overnight gaps represent the accumulation of information while the market is closed; a high ratio of this gap relative to the total high-low range suggests that the opening sentiment dominated the day's price action, signaling a strong conviction that likely persists into the next trading session.\n                Concise Knowledge: If a stock opens with a gap that is small relative to its typical daily volatility, it suggests sustainable sentiment; when this gap is coupled with low intraday price dispersion, it indicates that the overnight information is being systematically integrated into the price rather than being rejected by volatility.\n                concise Specification: The factor is calculated as the overnight return (Open_t / Close_{t-1} - 1) divided by the 5-day moving average of the daily range (High - Low) to normalize for volatility, focusing on the persistence of the 'Opening Drive' over a T+1 horizon.\n                ",
        "initial_direction": "Synthesize a 'Capitulation Index' using ROC60 and KLOW: extreme long-term price declines (ROC60 > 1) paired with increasing lower shadows suggest the formation of a durable bottom.",
        "planning_direction": "Synthesize a 'Capitulation Index' using ROC60 and KLOW: extreme long-term price declines (ROC60 > 1) paired with increasing lower shadows suggest the formation of a durable bottom.",
        "created_at": "2026-01-20T23:19:04.404534"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1063373167514521,
        "ICIR": 0.0530038566796628,
        "1day.excess_return_without_cost.std": 0.0041211109342706,
        "1day.excess_return_with_cost.annualized_return": 0.0087939864620408,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002357856319718,
        "1day.excess_return_without_cost.annualized_return": 0.0561169804093084,
        "1day.excess_return_with_cost.std": 0.0041204558034761,
        "Rank IC": 0.0260288324953588,
        "IC": 0.0070544291446842,
        "1day.excess_return_without_cost.max_drawdown": -0.0968841670226008,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.8826560661914168,
        "1day.pa": 0.0,
        "l2.valid": 0.9963849562548254,
        "Rank ICIR": 0.1976868184220868,
        "l2.train": 0.9938662286612204,
        "1day.excess_return_with_cost.information_ratio": 0.1383413641945455,
        "1day.excess_return_with_cost.mean": 3.694952294975131e-05
      },
      "feedback": {
        "observations": "The current iteration focused on the 'Overnight Sentiment Persistence' hypothesis by testing three variations: a 5-day moving average normalization (OSP_5D), a cross-sectional rank of daily efficiency (NODE), and a relative volatility adjustment (LVGP). The combined results show a significant improvement in Information Coefficient (IC) from 0.005798 to 0.007054 and an increase in Annualized Return from 0.052010 to 0.056117. However, the Information Ratio (IR) decreased slightly and the Max Drawdown worsened, suggesting that while the signal strength (IC) has increased, the volatility of the factor's performance has also risen.",
        "hypothesis_evaluation": "The results generally support the hypothesis that the ratio of overnight gaps to intraday volatility contains predictive power. The increase in IC suggests that the 'institutional absorption' concept (where low intraday volatility following a gap signals persistence) is a valid alpha source. The 'Low_Volatility_Gap_Persistence' (LVGP) implementation, which specifically scales the gap by the inverse of relative intraday range, likely contributed most to the IC improvement by isolating 'quiet' price discovery phases.",
        "decision": true,
        "reason": "While the current factors capture the 'efficiency' of the gap, they do not account for the context of the gap. A gap that continues a 20-day trend is more likely to represent institutional accumulation, whereas an exhausting gap at the end of a trend might lead to a reversal despite low intraday volatility. Integrating a trend filter (e.g., sign of the 20-day moving average) should improve the Information Ratio and reduce Drawdown by filtering out 'trap' gaps."
      }
    },
    "6390924c514e7e94": {
      "factor_id": "6390924c514e7e94",
      "factor_name": "Fractal_Exhaustion_Synergy_10D",
      "factor_expression": "(POW(TS_CORR($close, SEQUENCE(10), 10), 2) * RANK(($high - $low) / ($close + 1e-8))) / (TS_CORR($return, $volume, 5) + 1.1)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(POW(TS_CORR($close, SEQUENCE(10), 10), 2) * RANK(($high - $low) / ($close + 1e-8))) / (TS_CORR(TS_PCTCHANGE($close, 1), $volume, 5) + 1.1)\" # Your output factor expression will be filled in here\n    name = \"Fractal_Exhaustion_Synergy_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies potential price reversals by combining trend linearity (R-squared of price over time), intraday dispersion (High-Low range), and volume-price support breakdown. High linearity and dispersion coupled with low volume-return correlation indicate a terminal exhaustion phase.",
      "factor_formulation": "FES = \\frac{R^2(\\text{close}, 10) \\times \\text{RANK}(\\frac{\\text{high}-\\text{low}}{\\text{close}})}{\\text{TS\\_CORR}(\\text{return}, \\text{volume}, 5) + 1.1}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "6c544e135be8",
        "parent_trajectory_ids": [
          "328dbeb0c242",
          "3074579fb242"
        ],
        "hypothesis": "Hypothesis: The 'Fractal Exhaustion Synergy' (FES) factor predicts price reversals by identifying assets where high multi-day trend linearity (R-squared) coincides with extreme intraday price dispersion (High-Low range) and a breakdown in volume-price support.\n                Concise Observation: Parent 1's intraday dispersion (RankIC 0.0285) captures tactical exhaustion, while Parent 2's structural R-squared (RankIC 0.0222) identifies trend maturity; combining them addresses the failure of dispersion signals in strong, volume-supported trends.\n                Concise Justification: The fusion logic assumes that the most reliable reversals occur when a 'blow-off' intraday move (Parent 1) happens at the end of a long-term linear trend (Parent 2) that no longer has the institutional volume backing to sustain its trajectory.\n                Concise Knowledge: If a price trend exhibits high geometric linearity but experiences a sudden spike in intraday volatility coupled with declining volume-price correlation, then the trend is likely entering a terminal exhaustion phase; When structural persistence meets liquidity voids, mean-reversion probability increases.\n                concise Specification: The factor is defined as the product of the 10-day price-time R-squared and the 20-day normalized High-Low range, divided by the 5-day rolling correlation between price returns and volume, focusing on the top decile of dispersion and linearity.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T10:01:59.078591"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1001546538198187,
        "ICIR": 0.0410009823626141,
        "1day.excess_return_without_cost.std": 0.0043155308273293,
        "1day.excess_return_with_cost.annualized_return": 0.0410431365262001,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003721546358341,
        "1day.excess_return_without_cost.annualized_return": 0.0885728033285212,
        "1day.excess_return_with_cost.std": 0.0043174605851991,
        "Rank IC": 0.0259523213357421,
        "IC": 0.0056860530088302,
        "1day.excess_return_without_cost.max_drawdown": -0.0921949183384688,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.3303860688334168,
        "1day.pa": 0.0,
        "l2.valid": 0.9965652592482478,
        "Rank ICIR": 0.1880754011340366,
        "l2.train": 0.9939190675352984,
        "1day.excess_return_with_cost.information_ratio": 0.6162028210227557,
        "1day.excess_return_with_cost.mean": 0.0001724501534714
      },
      "feedback": {
        "observations": "The experiment tested two variations of the 'Fractal Exhaustion Synergy' (FES) hypothesis. The current results show a significant improvement in risk-adjusted performance metrics compared to the previous SOTA. Specifically, the Information Ratio increased from 0.97 to 1.33, and the Annualized Return rose from 5.2% to 8.8%. Although the IC is slightly lower (0.0056 vs 0.0058) and the Max Drawdown increased, the substantial gain in excess return and IR suggests that the core logic of combining trend linearity with volume-price divergence is capturing high-conviction reversal signals effectively.",
        "hypothesis_evaluation": "The hypothesis that high trend linearity (R-squared) combined with intraday dispersion and volume-price breakdown predicts reversals is strongly supported. The 'Linear_Dispersion_Volume_Reversal' (LDVR) implementation, which uses a rank-based additive structure, appears more robust than the multiplicative FES_10D version. The additive structure likely prevents extreme values from a single component from skewing the factor, leading to better generalization and a much higher Information Ratio.",
        "decision": true,
        "reason": "While the current LDVR factor is successful, it relies on static window sizes (10D/20D). The next iteration should focus on 'acceleration' of exhaustion. By replacing the simple intraday range with a measure of range expansion relative to volume (Liquidity Gap), we can better identify 'blow-off tops' or 'panic bottoms'. Furthermore, the current factor uses 5 base features; maintaining this efficiency while refining the mathematical representation of 'exhaustion' (e.g., using a ratio of range to volume growth) should improve the IC without increasing complexity."
      }
    },
    "7ca06a3f2fd8a5d9": {
      "factor_id": "7ca06a3f2fd8a5d9",
      "factor_name": "Linear_Dispersion_Volume_Reversal",
      "factor_expression": "RANK(POW(TS_CORR($close, SEQUENCE(10), 10), 2)) + RANK(TS_ZSCORE(($high - $low) / ($close + 1e-8), 20)) - RANK(TS_CORR($return, $volume, 5))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(POW(TS_CORR($close, SEQUENCE(10), 10), 2)) + RANK(TS_ZSCORE(($high - $low) / $close, 20)) - RANK(TS_CORR(TS_PCTCHANGE($close, 1), $volume, 5))\" # Your output factor expression will be filled in here\n    name = \"Linear_Dispersion_Volume_Reversal\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A simplified version of the Fractal Exhaustion Synergy hypothesis. It targets assets where a long-term linear trend (10-day R-squared) meets high relative intraday volatility (20-day Z-score of range) while volume support (5-day return-volume correlation) is weakening.",
      "factor_formulation": "LDVR = \\text{RANK}(R^2(\\text{close}, 10)) + \\text{RANK}(\\text{TS\\_ZSCORE}(\\frac{\\text{high}-\\text{low}}{\\text{close}}, 20)) - \\text{RANK}(\\text{TS\\_CORR}(\\text{return}, \\text{volume}, 5))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "6c544e135be8",
        "parent_trajectory_ids": [
          "328dbeb0c242",
          "3074579fb242"
        ],
        "hypothesis": "Hypothesis: The 'Fractal Exhaustion Synergy' (FES) factor predicts price reversals by identifying assets where high multi-day trend linearity (R-squared) coincides with extreme intraday price dispersion (High-Low range) and a breakdown in volume-price support.\n                Concise Observation: Parent 1's intraday dispersion (RankIC 0.0285) captures tactical exhaustion, while Parent 2's structural R-squared (RankIC 0.0222) identifies trend maturity; combining them addresses the failure of dispersion signals in strong, volume-supported trends.\n                Concise Justification: The fusion logic assumes that the most reliable reversals occur when a 'blow-off' intraday move (Parent 1) happens at the end of a long-term linear trend (Parent 2) that no longer has the institutional volume backing to sustain its trajectory.\n                Concise Knowledge: If a price trend exhibits high geometric linearity but experiences a sudden spike in intraday volatility coupled with declining volume-price correlation, then the trend is likely entering a terminal exhaustion phase; When structural persistence meets liquidity voids, mean-reversion probability increases.\n                concise Specification: The factor is defined as the product of the 10-day price-time R-squared and the 20-day normalized High-Low range, divided by the 5-day rolling correlation between price returns and volume, focusing on the top decile of dispersion and linearity.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T10:01:59.078591"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1001546538198187,
        "ICIR": 0.0410009823626141,
        "1day.excess_return_without_cost.std": 0.0043155308273293,
        "1day.excess_return_with_cost.annualized_return": 0.0410431365262001,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003721546358341,
        "1day.excess_return_without_cost.annualized_return": 0.0885728033285212,
        "1day.excess_return_with_cost.std": 0.0043174605851991,
        "Rank IC": 0.0259523213357421,
        "IC": 0.0056860530088302,
        "1day.excess_return_without_cost.max_drawdown": -0.0921949183384688,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.3303860688334168,
        "1day.pa": 0.0,
        "l2.valid": 0.9965652592482478,
        "Rank ICIR": 0.1880754011340366,
        "l2.train": 0.9939190675352984,
        "1day.excess_return_with_cost.information_ratio": 0.6162028210227557,
        "1day.excess_return_with_cost.mean": 0.0001724501534714
      },
      "feedback": {
        "observations": "The experiment tested two variations of the 'Fractal Exhaustion Synergy' (FES) hypothesis. The current results show a significant improvement in risk-adjusted performance metrics compared to the previous SOTA. Specifically, the Information Ratio increased from 0.97 to 1.33, and the Annualized Return rose from 5.2% to 8.8%. Although the IC is slightly lower (0.0056 vs 0.0058) and the Max Drawdown increased, the substantial gain in excess return and IR suggests that the core logic of combining trend linearity with volume-price divergence is capturing high-conviction reversal signals effectively.",
        "hypothesis_evaluation": "The hypothesis that high trend linearity (R-squared) combined with intraday dispersion and volume-price breakdown predicts reversals is strongly supported. The 'Linear_Dispersion_Volume_Reversal' (LDVR) implementation, which uses a rank-based additive structure, appears more robust than the multiplicative FES_10D version. The additive structure likely prevents extreme values from a single component from skewing the factor, leading to better generalization and a much higher Information Ratio.",
        "decision": true,
        "reason": "While the current LDVR factor is successful, it relies on static window sizes (10D/20D). The next iteration should focus on 'acceleration' of exhaustion. By replacing the simple intraday range with a measure of range expansion relative to volume (Liquidity Gap), we can better identify 'blow-off tops' or 'panic bottoms'. Furthermore, the current factor uses 5 base features; maintaining this efficiency while refining the mathematical representation of 'exhaustion' (e.g., using a ratio of range to volume growth) should improve the IC without increasing complexity."
      }
    },
    "d99cd6ff03752ce7": {
      "factor_id": "d99cd6ff03752ce7",
      "factor_name": "LSEF_Fragility_Reversal_20D",
      "factor_expression": "TS_ZSCORE(($high - $low) / $close, 20) * (TS_MEAN(ABS($return) / ($volume * $close + 1e-8), 5) / (ABS($open / (DELAY($close, 1) + 1e-8) - 1) + 1e-6))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_ZSCORE(($high - $low) / $close, 20) * (TS_MEAN(ABS($close / DELAY($close, 1) - 1) / ($volume * $close + 1e-8), 5) / (ABS($open / (DELAY($close, 1) + 1e-8) - 1) + 1e-6))\" # Your output factor expression will be filled in here\n    name = \"LSEF_Fragility_Reversal_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies 'hollow' price extensions by combining a Z-scored intraday range (exhaustion) with an illiquidity-to-gap ratio (fragility). It targets stocks where large intraday moves occur without institutional volume support and lack overnight gap conviction, signaling a high probability of mean reversion.",
      "factor_formulation": "LSEF = \\text{TS_ZSCORE}(\\frac{high - low}{close}, 20) \\times \\frac{\\text{TS_MEAN}(\\frac{|return|}{volume \\times close}, 5)}{|\\frac{open}{delay(close, 1)} - 1| + 1e-6}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "8c49999739ed",
        "parent_trajectory_ids": [
          "328dbeb0c242",
          "210cf87a55de"
        ],
        "hypothesis": "Hypothesis: The Liquidity-Synchronized Exhaustion & Fragility (LSEF) factor, formulated as the product of the 20-day Z-scored intraday range and the 5-day average Amihud illiquidity divided by the absolute overnight gap, identifies high-probability mean-reversion candidates by isolating 'hollow' price extensions that lack institutional liquidity support.\n                Concise Observation: Parent 1 (ILE) captures price exhaustion but suffers from noise in high-liquidity breakouts, while Parent 2 (LGSF) identifies structural fragility but lacks a trigger; combining them targets the intersection of price stretch and liquidity vacuum.\n                Concise Justification: By multiplying price dispersion (exhaustion) with an illiquidity-to-gap ratio (fragility), the factor amplifies signals where price moves are most disconnected from fundamental volume and sentiment, maximizing the probability of a corrective reversal.\n                Concise Knowledge: If a significant intraday price extension occurs with high Amihud illiquidity and a narrow overnight gap, it indicates a lack of structural conviction; such 'hollow' moves are more likely to mean-revert than high-volume, gap-supported breakouts.\n                concise Specification: The factor is defined as [(High - Low) / Close - MA((High - Low) / Close, 20)] / Std((High - Low) / Close, 20) * (MA(Abs(Return) / (Volume * Close), 5) / (Abs(Open / Close_prev - 1) + 1e-6)), focusing on the top decile of the composite score for short-term reversal prediction.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T10:35:04.829976"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1072142662673837,
        "ICIR": 0.0422716403544326,
        "1day.excess_return_without_cost.std": 0.0045254165564265,
        "1day.excess_return_with_cost.annualized_return": 0.0458483829092523,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003919966020444,
        "1day.excess_return_without_cost.annualized_return": 0.0932951912865809,
        "1day.excess_return_with_cost.std": 0.0045266338671047,
        "Rank IC": 0.0259373863042807,
        "IC": 0.0060125371661244,
        "1day.excess_return_without_cost.max_drawdown": -0.0958714273116896,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.3363253885566175,
        "1day.pa": 0.0,
        "l2.valid": 0.9964040722033288,
        "Rank ICIR": 0.1840490634323747,
        "l2.train": 0.9933380235065068,
        "1day.excess_return_with_cost.information_ratio": 0.6565384652952106,
        "1day.excess_return_with_cost.mean": 0.0001926402643245
      },
      "feedback": {
        "observations": "The experiment successfully tested three variations of the Liquidity-Synchronized Exhaustion & Fragility (LSEF) framework. The primary factor, 'LSEF_Fragility_Reversal_20D', demonstrated superior performance compared to the previous SOTA, particularly in Information Ratio (1.336 vs 0.972) and Annualized Return (0.093 vs 0.052). The IC also showed a marginal improvement. However, the Max Drawdown increased slightly (-0.095 vs -0.072), suggesting that while the 'hollow' price extension signal is more predictive, it may introduce higher tail risk or volatility in specific market regimes.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that combining intraday exhaustion (Z-scored range) with liquidity fragility (Amihud illiquidity/gap ratio) identifies mean-reversion opportunities. The 'LSEF_Fragility_Reversal_20D' factor, which uses the most comprehensive implementation of the theory, outperformed the simplified 'Hollow_Extension_Index_15D' and the cross-sectional 'CSLE'. This suggests that the interaction between time-series exhaustion and liquidity constraints is a more robust signal than simple ranking or raw illiquidity.",
        "decision": true,
        "reason": "While the current LSEF factor is effective, the increase in Max Drawdown suggests it might misidentify high-volume institutional breakouts as 'hollow' extensions. By adjusting the illiquidity measure by recent volatility (e.g., Amihud / TS_STD) and ensuring the volume isn't part of a sustained trend (volume decay), we can better isolate true exhaustion. Additionally, the current formula uses 5 base features ($high, $low, $close, $open, $volume), which is close to the complexity limit; further refinement should focus on mathematical elegance rather than adding more raw data inputs."
      }
    },
    "3c749a4c8d25398c": {
      "factor_id": "3c749a4c8d25398c",
      "factor_name": "Hollow_Extension_Index_15D",
      "factor_expression": "TS_RANK(($high - $low) / $close, 15) * (ABS($return) / ($volume * $close + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_RANK(($high - $low) / $close, 15) * (ABS(TS_PCTCHANGE($close, 1)) / ($volume * $close + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Hollow_Extension_Index_15D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A simplified version of the Liquidity-Synchronized Exhaustion factor. it measures the ratio of the current intraday range relative to its 15-day history, scaled by the Amihud illiquidity measure. High values indicate price stretches on low liquidity, suggesting fragility.",
      "factor_formulation": "HEI = \\text{TS_RANK}(\\frac{high - low}{close}, 15) \\times \\frac{ABS(return)}{volume \\times close + 1e-8}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "8c49999739ed",
        "parent_trajectory_ids": [
          "328dbeb0c242",
          "210cf87a55de"
        ],
        "hypothesis": "Hypothesis: The Liquidity-Synchronized Exhaustion & Fragility (LSEF) factor, formulated as the product of the 20-day Z-scored intraday range and the 5-day average Amihud illiquidity divided by the absolute overnight gap, identifies high-probability mean-reversion candidates by isolating 'hollow' price extensions that lack institutional liquidity support.\n                Concise Observation: Parent 1 (ILE) captures price exhaustion but suffers from noise in high-liquidity breakouts, while Parent 2 (LGSF) identifies structural fragility but lacks a trigger; combining them targets the intersection of price stretch and liquidity vacuum.\n                Concise Justification: By multiplying price dispersion (exhaustion) with an illiquidity-to-gap ratio (fragility), the factor amplifies signals where price moves are most disconnected from fundamental volume and sentiment, maximizing the probability of a corrective reversal.\n                Concise Knowledge: If a significant intraday price extension occurs with high Amihud illiquidity and a narrow overnight gap, it indicates a lack of structural conviction; such 'hollow' moves are more likely to mean-revert than high-volume, gap-supported breakouts.\n                concise Specification: The factor is defined as [(High - Low) / Close - MA((High - Low) / Close, 20)] / Std((High - Low) / Close, 20) * (MA(Abs(Return) / (Volume * Close), 5) / (Abs(Open / Close_prev - 1) + 1e-6)), focusing on the top decile of the composite score for short-term reversal prediction.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T10:35:04.829976"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1072142662673837,
        "ICIR": 0.0422716403544326,
        "1day.excess_return_without_cost.std": 0.0045254165564265,
        "1day.excess_return_with_cost.annualized_return": 0.0458483829092523,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003919966020444,
        "1day.excess_return_without_cost.annualized_return": 0.0932951912865809,
        "1day.excess_return_with_cost.std": 0.0045266338671047,
        "Rank IC": 0.0259373863042807,
        "IC": 0.0060125371661244,
        "1day.excess_return_without_cost.max_drawdown": -0.0958714273116896,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.3363253885566175,
        "1day.pa": 0.0,
        "l2.valid": 0.9964040722033288,
        "Rank ICIR": 0.1840490634323747,
        "l2.train": 0.9933380235065068,
        "1day.excess_return_with_cost.information_ratio": 0.6565384652952106,
        "1day.excess_return_with_cost.mean": 0.0001926402643245
      },
      "feedback": {
        "observations": "The experiment successfully tested three variations of the Liquidity-Synchronized Exhaustion & Fragility (LSEF) framework. The primary factor, 'LSEF_Fragility_Reversal_20D', demonstrated superior performance compared to the previous SOTA, particularly in Information Ratio (1.336 vs 0.972) and Annualized Return (0.093 vs 0.052). The IC also showed a marginal improvement. However, the Max Drawdown increased slightly (-0.095 vs -0.072), suggesting that while the 'hollow' price extension signal is more predictive, it may introduce higher tail risk or volatility in specific market regimes.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that combining intraday exhaustion (Z-scored range) with liquidity fragility (Amihud illiquidity/gap ratio) identifies mean-reversion opportunities. The 'LSEF_Fragility_Reversal_20D' factor, which uses the most comprehensive implementation of the theory, outperformed the simplified 'Hollow_Extension_Index_15D' and the cross-sectional 'CSLE'. This suggests that the interaction between time-series exhaustion and liquidity constraints is a more robust signal than simple ranking or raw illiquidity.",
        "decision": true,
        "reason": "While the current LSEF factor is effective, the increase in Max Drawdown suggests it might misidentify high-volume institutional breakouts as 'hollow' extensions. By adjusting the illiquidity measure by recent volatility (e.g., Amihud / TS_STD) and ensuring the volume isn't part of a sustained trend (volume decay), we can better isolate true exhaustion. Additionally, the current formula uses 5 base features ($high, $low, $close, $open, $volume), which is close to the complexity limit; further refinement should focus on mathematical elegance rather than adding more raw data inputs."
      }
    },
    "94e72ccbbacad582": {
      "factor_id": "94e72ccbbacad582",
      "factor_name": "Cross_Sectional_Liquidity_Exhaustion",
      "factor_expression": "RANK(($high - $low) / (TS_STD($close, 10) + 1e-8)) * RANK(INV(ABS($open / (DELAY($close, 1) + 1e-8) - 1) + 1e-6))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(($high - $low) / (TS_STD($close, 10) + 1e-8)) * RANK(INV(ABS($open / (DELAY($close, 1) + 1e-8) - 1) + 1e-6))\" # Your output factor expression will be filled in here\n    name = \"Cross_Sectional_Liquidity_Exhaustion\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor cross-sectionally ranks stocks based on their intraday volatility normalized by their overnight gap magnitude and volume. It seeks to find outliers that have moved significantly intraday but are 'fragile' due to low volume and narrow gaps relative to the market universe.",
      "factor_formulation": "CSLE = \\text{RANK}(\\frac{high - low}{TS\\_STD(close, 10)}) \\times \\text{RANK}(\\frac{1}{|open/delay(close, 1) - 1| + 1e-6})",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "8c49999739ed",
        "parent_trajectory_ids": [
          "328dbeb0c242",
          "210cf87a55de"
        ],
        "hypothesis": "Hypothesis: The Liquidity-Synchronized Exhaustion & Fragility (LSEF) factor, formulated as the product of the 20-day Z-scored intraday range and the 5-day average Amihud illiquidity divided by the absolute overnight gap, identifies high-probability mean-reversion candidates by isolating 'hollow' price extensions that lack institutional liquidity support.\n                Concise Observation: Parent 1 (ILE) captures price exhaustion but suffers from noise in high-liquidity breakouts, while Parent 2 (LGSF) identifies structural fragility but lacks a trigger; combining them targets the intersection of price stretch and liquidity vacuum.\n                Concise Justification: By multiplying price dispersion (exhaustion) with an illiquidity-to-gap ratio (fragility), the factor amplifies signals where price moves are most disconnected from fundamental volume and sentiment, maximizing the probability of a corrective reversal.\n                Concise Knowledge: If a significant intraday price extension occurs with high Amihud illiquidity and a narrow overnight gap, it indicates a lack of structural conviction; such 'hollow' moves are more likely to mean-revert than high-volume, gap-supported breakouts.\n                concise Specification: The factor is defined as [(High - Low) / Close - MA((High - Low) / Close, 20)] / Std((High - Low) / Close, 20) * (MA(Abs(Return) / (Volume * Close), 5) / (Abs(Open / Close_prev - 1) + 1e-6)), focusing on the top decile of the composite score for short-term reversal prediction.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T10:35:04.829976"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1072142662673837,
        "ICIR": 0.0422716403544326,
        "1day.excess_return_without_cost.std": 0.0045254165564265,
        "1day.excess_return_with_cost.annualized_return": 0.0458483829092523,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003919966020444,
        "1day.excess_return_without_cost.annualized_return": 0.0932951912865809,
        "1day.excess_return_with_cost.std": 0.0045266338671047,
        "Rank IC": 0.0259373863042807,
        "IC": 0.0060125371661244,
        "1day.excess_return_without_cost.max_drawdown": -0.0958714273116896,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.3363253885566175,
        "1day.pa": 0.0,
        "l2.valid": 0.9964040722033288,
        "Rank ICIR": 0.1840490634323747,
        "l2.train": 0.9933380235065068,
        "1day.excess_return_with_cost.information_ratio": 0.6565384652952106,
        "1day.excess_return_with_cost.mean": 0.0001926402643245
      },
      "feedback": {
        "observations": "The experiment successfully tested three variations of the Liquidity-Synchronized Exhaustion & Fragility (LSEF) framework. The primary factor, 'LSEF_Fragility_Reversal_20D', demonstrated superior performance compared to the previous SOTA, particularly in Information Ratio (1.336 vs 0.972) and Annualized Return (0.093 vs 0.052). The IC also showed a marginal improvement. However, the Max Drawdown increased slightly (-0.095 vs -0.072), suggesting that while the 'hollow' price extension signal is more predictive, it may introduce higher tail risk or volatility in specific market regimes.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that combining intraday exhaustion (Z-scored range) with liquidity fragility (Amihud illiquidity/gap ratio) identifies mean-reversion opportunities. The 'LSEF_Fragility_Reversal_20D' factor, which uses the most comprehensive implementation of the theory, outperformed the simplified 'Hollow_Extension_Index_15D' and the cross-sectional 'CSLE'. This suggests that the interaction between time-series exhaustion and liquidity constraints is a more robust signal than simple ranking or raw illiquidity.",
        "decision": true,
        "reason": "While the current LSEF factor is effective, the increase in Max Drawdown suggests it might misidentify high-volume institutional breakouts as 'hollow' extensions. By adjusting the illiquidity measure by recent volatility (e.g., Amihud / TS_STD) and ensuring the volume isn't part of a sustained trend (volume decay), we can better isolate true exhaustion. Additionally, the current formula uses 5 base features ($high, $low, $close, $open, $volume), which is close to the complexity limit; further refinement should focus on mathematical elegance rather than adding more raw data inputs."
      }
    },
    "ff8b30d83cdf54ef": {
      "factor_id": "ff8b30d83cdf54ef",
      "factor_name": "IISV_Stability_Gap_20D",
      "factor_expression": "(ABS($open - DELAY($close, 1)) / ($high - $low + 1e-8)) * (TS_MEAN($volume, 20) / (TS_STD($volume, 20) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(ABS($open - DELAY($close, 1)) / ($high - $low + 1e-8)) * (TS_MEAN($volume, 20) / (TS_STD($volume, 20) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"IISV_Stability_Gap_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "The Institutional Inertia & Structural Validation (IISV) factor identifies high-conviction alpha by multiplying the overnight price gap, normalized by the intraday range, with the 20-day volume stability (the ratio of mean volume to its standard deviation). High values suggest institutional accumulation during stable liquidity regimes.",
      "factor_formulation": "IISV = \\frac{|open_t - close_{t-1}|}{(high_t - low_t) + 1e-8} \\times \\frac{TS\\_MEAN(volume, 20)}{TS\\_STD(volume, 20) + 1e-8}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 10,
        "evolution_phase": "crossover",
        "trajectory_id": "da527933097b",
        "parent_trajectory_ids": [
          "7695cdd33a33",
          "8d9bd5be78a0"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Inertia & Structural Validation' (IISV) factor identifies high-conviction alpha by multiplying the overnight price gap, normalized by intraday range, with the 20-day volume stability (the inverse of the standard deviation of volume over 20 days).\n                Concise Observation: Parent 1 (ICP) shows that volume stability improves momentum reliability (RankIC 0.0249), while Parent 2 (LVSB) shows that overnight gaps normalized by intraday efficiency capture institutional intent (RankIC 0.0274).\n                Concise Justification: Combining the structural breakout signal with a liquidity stability filter reduces 'fake-outs' by ensuring that the price jump occurs within a regime of consistent capital flow rather than erratic retail trading.\n                Concise Knowledge: If an overnight price gap is validated by low intraday price dispersion and high historical volume stability, then the resulting price move is more likely to represent institutional accumulation rather than transient noise.\n                concise Specification: The factor is calculated as (Gap / (High - Low + epsilon)) * (Mean_Volume_20d / Std_Volume_20d), where Gap is the absolute difference between today's open and yesterday's close, using a 20-day lookback for volume stability.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T12:46:38.099876"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1006002189896827,
        "ICIR": 0.0637047946798284,
        "1day.excess_return_without_cost.std": 0.0042740057395895,
        "1day.excess_return_with_cost.annualized_return": 0.031410952509216,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003325193769718,
        "1day.excess_return_without_cost.annualized_return": 0.0791396117192999,
        "1day.excess_return_with_cost.std": 0.0042762629799031,
        "Rank IC": 0.0256647055986261,
        "IC": 0.0085803294117226,
        "1day.excess_return_without_cost.max_drawdown": -0.086991218729221,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.200246188762697,
        "1day.pa": 0.0,
        "l2.valid": 0.9967061978011852,
        "Rank ICIR": 0.1950490737264125,
        "l2.train": 0.9934598426634448,
        "1day.excess_return_with_cost.information_ratio": 0.4761329336498174,
        "1day.excess_return_with_cost.mean": 0.0001319787920555
      },
      "feedback": {
        "observations": "The experiment successfully tested three variations of the 'Institutional Inertia & Structural Validation' (IISV) hypothesis. The results show a significant improvement over the previous SOTA, particularly in predictive power and risk-adjusted returns. The Information Ratio (IR) increased from 0.97 to 1.20, and the IC improved from 0.0058 to 0.0086. While the Max Drawdown slightly worsened, the substantial gain in Annualized Return (7.9% vs 5.2%) indicates that the combination of overnight price gaps and volume stability is a potent alpha source. The Z-score and Ranking approaches appear to have successfully mitigated scale issues across different instruments.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that institutional conviction can be identified by combining overnight price action with volume consistency. The 'Structural Validation' component (volume stability) effectively filters out noise from the 'Institutional Inertia' (overnight gaps). The transition from raw values to cross-sectional Z-scores and Ranks has proven beneficial for the model's ability to generalize across the market universe.",
        "decision": true,
        "reason": "Current iterations use the immediate intraday range to normalize the gap, but they don't account for the broader volatility regime of the stock. A stock with high historical intraday volatility might naturally produce larger gaps that lack institutional 'inertia'. By introducing a short-term volatility lookback (e.g., 5-day range) and maintaining the volume stability (20-day), we can better distinguish between structural shifts and high-beta noise. This maintains the core IISV framework while refining the 'Structural Validation' part with a volatility-regime filter."
      }
    },
    "8e0e48edc2d20afa": {
      "factor_id": "8e0e48edc2d20afa",
      "factor_name": "IISV_Ranked_Validation_20D",
      "factor_expression": "RANK(($open - DELAY($close, 1)) / ($high - $low + 1e-8)) * RANK(TS_MEAN($volume, 20) / (TS_STD($volume, 20) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(($open - DELAY($close, 1)) / ($high - $low + 1e-8)) * RANK(TS_MEAN($volume, 20) / (TS_STD($volume, 20) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"IISV_Ranked_Validation_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A cross-sectionally ranked version of the IISV hypothesis. It captures the relative strength of the overnight gap normalized by intraday volatility, scaled by the 20-day volume coefficient of variation. This ensures the factor is robust to different price and volume scales across the market.",
      "factor_formulation": "IISV_{Ranked} = RANK(\\frac{open_t - close_{t-1}}{high_t - low_t + 1e-8}) \\times RANK(\\frac{TS\\_MEAN(volume, 20)}{TS\\_STD(volume, 20) + 1e-8})",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 10,
        "evolution_phase": "crossover",
        "trajectory_id": "da527933097b",
        "parent_trajectory_ids": [
          "7695cdd33a33",
          "8d9bd5be78a0"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Inertia & Structural Validation' (IISV) factor identifies high-conviction alpha by multiplying the overnight price gap, normalized by intraday range, with the 20-day volume stability (the inverse of the standard deviation of volume over 20 days).\n                Concise Observation: Parent 1 (ICP) shows that volume stability improves momentum reliability (RankIC 0.0249), while Parent 2 (LVSB) shows that overnight gaps normalized by intraday efficiency capture institutional intent (RankIC 0.0274).\n                Concise Justification: Combining the structural breakout signal with a liquidity stability filter reduces 'fake-outs' by ensuring that the price jump occurs within a regime of consistent capital flow rather than erratic retail trading.\n                Concise Knowledge: If an overnight price gap is validated by low intraday price dispersion and high historical volume stability, then the resulting price move is more likely to represent institutional accumulation rather than transient noise.\n                concise Specification: The factor is calculated as (Gap / (High - Low + epsilon)) * (Mean_Volume_20d / Std_Volume_20d), where Gap is the absolute difference between today's open and yesterday's close, using a 20-day lookback for volume stability.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T12:46:38.099876"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1006002189896827,
        "ICIR": 0.0637047946798284,
        "1day.excess_return_without_cost.std": 0.0042740057395895,
        "1day.excess_return_with_cost.annualized_return": 0.031410952509216,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003325193769718,
        "1day.excess_return_without_cost.annualized_return": 0.0791396117192999,
        "1day.excess_return_with_cost.std": 0.0042762629799031,
        "Rank IC": 0.0256647055986261,
        "IC": 0.0085803294117226,
        "1day.excess_return_without_cost.max_drawdown": -0.086991218729221,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.200246188762697,
        "1day.pa": 0.0,
        "l2.valid": 0.9967061978011852,
        "Rank ICIR": 0.1950490737264125,
        "l2.train": 0.9934598426634448,
        "1day.excess_return_with_cost.information_ratio": 0.4761329336498174,
        "1day.excess_return_with_cost.mean": 0.0001319787920555
      },
      "feedback": {
        "observations": "The experiment successfully tested three variations of the 'Institutional Inertia & Structural Validation' (IISV) hypothesis. The results show a significant improvement over the previous SOTA, particularly in predictive power and risk-adjusted returns. The Information Ratio (IR) increased from 0.97 to 1.20, and the IC improved from 0.0058 to 0.0086. While the Max Drawdown slightly worsened, the substantial gain in Annualized Return (7.9% vs 5.2%) indicates that the combination of overnight price gaps and volume stability is a potent alpha source. The Z-score and Ranking approaches appear to have successfully mitigated scale issues across different instruments.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that institutional conviction can be identified by combining overnight price action with volume consistency. The 'Structural Validation' component (volume stability) effectively filters out noise from the 'Institutional Inertia' (overnight gaps). The transition from raw values to cross-sectional Z-scores and Ranks has proven beneficial for the model's ability to generalize across the market universe.",
        "decision": true,
        "reason": "Current iterations use the immediate intraday range to normalize the gap, but they don't account for the broader volatility regime of the stock. A stock with high historical intraday volatility might naturally produce larger gaps that lack institutional 'inertia'. By introducing a short-term volatility lookback (e.g., 5-day range) and maintaining the volume stability (20-day), we can better distinguish between structural shifts and high-beta noise. This maintains the core IISV framework while refining the 'Structural Validation' part with a volatility-regime filter."
      }
    },
    "761d3b9b8cc68fb7": {
      "factor_id": "761d3b9b8cc68fb7",
      "factor_name": "IISV_ZScore_Momentum_20D",
      "factor_expression": "(($open - DELAY($close, 1)) / DELAY($close, 1)) * ZSCORE(TS_MEAN($volume, 20) / (TS_STD($volume, 20) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(($open - DELAY($close, 1)) / DELAY($close, 1)) * ZSCORE(TS_MEAN($volume, 20) / (TS_STD($volume, 20) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"IISV_ZScore_Momentum_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This variation uses the Z-score of the volume stability to isolate stocks with significantly more consistent trading activity than their peers, combined with the normalized overnight gap to filter for structural price jumps.",
      "factor_formulation": "IISV_{ZScore} = \\frac{open_t - close_{t-1}}{close_{t-1}} \\times ZSCORE(\\frac{TS\\_MEAN(volume, 20)}{TS\\_STD(volume, 20) + 1e-8})",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 10,
        "evolution_phase": "crossover",
        "trajectory_id": "da527933097b",
        "parent_trajectory_ids": [
          "7695cdd33a33",
          "8d9bd5be78a0"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Inertia & Structural Validation' (IISV) factor identifies high-conviction alpha by multiplying the overnight price gap, normalized by intraday range, with the 20-day volume stability (the inverse of the standard deviation of volume over 20 days).\n                Concise Observation: Parent 1 (ICP) shows that volume stability improves momentum reliability (RankIC 0.0249), while Parent 2 (LVSB) shows that overnight gaps normalized by intraday efficiency capture institutional intent (RankIC 0.0274).\n                Concise Justification: Combining the structural breakout signal with a liquidity stability filter reduces 'fake-outs' by ensuring that the price jump occurs within a regime of consistent capital flow rather than erratic retail trading.\n                Concise Knowledge: If an overnight price gap is validated by low intraday price dispersion and high historical volume stability, then the resulting price move is more likely to represent institutional accumulation rather than transient noise.\n                concise Specification: The factor is calculated as (Gap / (High - Low + epsilon)) * (Mean_Volume_20d / Std_Volume_20d), where Gap is the absolute difference between today's open and yesterday's close, using a 20-day lookback for volume stability.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T12:46:38.099876"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1006002189896827,
        "ICIR": 0.0637047946798284,
        "1day.excess_return_without_cost.std": 0.0042740057395895,
        "1day.excess_return_with_cost.annualized_return": 0.031410952509216,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003325193769718,
        "1day.excess_return_without_cost.annualized_return": 0.0791396117192999,
        "1day.excess_return_with_cost.std": 0.0042762629799031,
        "Rank IC": 0.0256647055986261,
        "IC": 0.0085803294117226,
        "1day.excess_return_without_cost.max_drawdown": -0.086991218729221,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.200246188762697,
        "1day.pa": 0.0,
        "l2.valid": 0.9967061978011852,
        "Rank ICIR": 0.1950490737264125,
        "l2.train": 0.9934598426634448,
        "1day.excess_return_with_cost.information_ratio": 0.4761329336498174,
        "1day.excess_return_with_cost.mean": 0.0001319787920555
      },
      "feedback": {
        "observations": "The experiment successfully tested three variations of the 'Institutional Inertia & Structural Validation' (IISV) hypothesis. The results show a significant improvement over the previous SOTA, particularly in predictive power and risk-adjusted returns. The Information Ratio (IR) increased from 0.97 to 1.20, and the IC improved from 0.0058 to 0.0086. While the Max Drawdown slightly worsened, the substantial gain in Annualized Return (7.9% vs 5.2%) indicates that the combination of overnight price gaps and volume stability is a potent alpha source. The Z-score and Ranking approaches appear to have successfully mitigated scale issues across different instruments.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that institutional conviction can be identified by combining overnight price action with volume consistency. The 'Structural Validation' component (volume stability) effectively filters out noise from the 'Institutional Inertia' (overnight gaps). The transition from raw values to cross-sectional Z-scores and Ranks has proven beneficial for the model's ability to generalize across the market universe.",
        "decision": true,
        "reason": "Current iterations use the immediate intraday range to normalize the gap, but they don't account for the broader volatility regime of the stock. A stock with high historical intraday volatility might naturally produce larger gaps that lack institutional 'inertia'. By introducing a short-term volatility lookback (e.g., 5-day range) and maintaining the volume stability (20-day), we can better distinguish between structural shifts and high-beta noise. This maintains the core IISV framework while refining the 'Structural Validation' part with a volatility-regime filter."
      }
    },
    "edb6973ddd5760f8": {
      "factor_id": "edb6973ddd5760f8",
      "factor_name": "Liquidity_Vacuum_Reversal_20D",
      "factor_expression": "(TS_MEAN($high - $low, 3) / (TS_MEAN($volume, 20) + 1e-8)) * ($close / TS_MEAN($close, 20) - 1)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(TS_MEAN($high - $low, 3) / (TS_MEAN($volume, 20) + 1e-8)) * ($close / TS_MEAN($close, 20) - 1)\" # Your output factor expression will be filled in here\n    name = \"Liquidity_Vacuum_Reversal_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies 'hollow' price movements where the intraday range expands without significant volume support, indicating a liquidity vacuum. It multiplies this liquidity gap by the 5-day price deviation from its 20-day mean to predict mean reversion. High values suggest an overextended trend likely to reverse.",
      "factor_formulation": "LVR = \\frac{\\text{TS\\_MEAN}(\\text{high} - \\text{low}, 3)}{\\text{TS\\_MEAN}(\\text{volume}, 20) + 1e-8} \\times \\left(\\frac{\\text{close}}{\\text{TS\\_MEAN}(\\text{close}, 20)} - 1\\right)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 3,
        "evolution_phase": "mutation",
        "trajectory_id": "f3ed5e2305aa",
        "parent_trajectory_ids": [
          "817d00660033"
        ],
        "hypothesis": "Hypothesis: The 'Mean-Reverting Liquidity Vacuum' factor, defined as the ratio of the 3-day average price range to the 20-day average volume, multiplied by the 5-day price reversal magnitude, negatively predicts future returns by identifying trend exhaustion caused by liquidity gaps.\n                Concise Observation: While the parent strategy successfully captured alpha through linear, volume-supported trends (IR 1.49), it fails to account for 'hollow' volatility spikes where price range expands without corresponding turnover, often preceding sharp reversals.\n                Concise Justification: High intraday dispersion (High-Low) relative to historical volume suggests that price discovery is being driven by a lack of liquidity rather than high-conviction trading, creating an unstable price level that is susceptible to mean reversion.\n                Concise Knowledge: If a price move occurs with expanding intraday ranges but diminishing volume support, it indicates a liquidity vacuum; when such exhaustion is detected, the price is likely to mean-revert to its 20-day moving average as the trend lacks institutional participation.\n                concise Specification: The factor is calculated as (TS_MEAN($high - $low, 3) / (TS_MEAN($volume, 20) + 1e-8)) * ($close / TS_MEAN($close, 20) - 1), where a high positive value indicates an overextended 'hollow' uptrend ripe for a downward reversal.\n                ",
        "initial_direction": "Evaluate 'Intraday-to-Interday Volatility Shift' by comparing KLEN to STD5: when intraday ranges exceed 5-day realized volatility, it signals a regime shift in market participants' urgency.",
        "planning_direction": "Evaluate 'Intraday-to-Interday Volatility Shift' by comparing KLEN to STD5: when intraday ranges exceed 5-day realized volatility, it signals a regime shift in market participants' urgency.",
        "created_at": "2026-01-21T01:32:01.719967"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.154347233377052,
        "ICIR": 0.0573915026876882,
        "1day.excess_return_without_cost.std": 0.0046124234505751,
        "1day.excess_return_with_cost.annualized_return": 0.0066816040760919,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002294108373371,
        "1day.excess_return_without_cost.annualized_return": 0.0545997792862316,
        "1day.excess_return_with_cost.std": 0.004613250179658,
        "Rank IC": 0.0255656317314589,
        "IC": 0.0082447314136444,
        "1day.excess_return_without_cost.max_drawdown": -0.1214971840253457,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7673142029933999,
        "1day.pa": 0.0,
        "l2.valid": 0.9961831118823028,
        "Rank ICIR": 0.1815980226732771,
        "l2.train": 0.9928342635614305,
        "1day.excess_return_with_cost.information_ratio": 0.0938826309598739,
        "1day.excess_return_with_cost.mean": 2.807396670626852e-05
      },
      "feedback": {
        "observations": "The current iteration focused on the 'Mean-Reverting Liquidity Vacuum' hypothesis by testing three variations: a raw ratio interaction (LVR), a cross-sectional rank interaction (RHVE), and a time-series Z-score approach (ZLGM). The results show a notable improvement in predictive accuracy (IC increased from 0.0058 to 0.0082) and a slight increase in annualized return (0.0546 vs 0.0520). However, the Information Ratio (IR) decreased and the Max Drawdown (MDD) significantly worsened (-0.121 vs -0.072), suggesting that while the signal strength is higher, the volatility or tail risk of the factor has increased.",
        "hypothesis_evaluation": "The hypothesis that liquidity gaps (high range/low volume) coupled with price overextension predict reversals is supported by the improved IC and annualized return. The 'ZScored_Liquidity_Gap_Momentum' and 'Ranked_Hollow_Volatility_Exhaustion' implementations likely contributed to the higher signal capture. The deterioration in MDD suggests that the 'vacuum' effect might be prone to 'gap-and-go' scenarios where the trend continues despite thin liquidity, leading to sharp drawdowns in a mean-reversion strategy.",
        "decision": true,
        "reason": "The current results show high signal (IC) but poor risk-adjusted stability (MDD/IR). By replacing the raw 'high-low' with a volatility-normalized measure, we can better distinguish between a genuine 'liquidity vacuum' and standard high-volatility regimes. Additionally, shortening the volume lookback from 20 days to 5 days will make the factor more responsive to sudden shifts in market depth, potentially reducing the drawdown by exiting or entering positions closer to the actual exhaustion point."
      }
    },
    "0543469557de0c6c": {
      "factor_id": "0543469557de0c6c",
      "factor_name": "Ranked_Hollow_Volatility_Exhaustion",
      "factor_expression": "RANK(TS_MEAN($high - $low, 3) / (TS_MEAN($volume, 20) + 1e-8)) * RANK(TS_PCTCHANGE($close, 5))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(TS_MEAN($high - $low, 3) / (TS_MEAN($volume, 20) + 1e-8)) * RANK(TS_PCTCHANGE($close, 5))\" # Your output factor expression will be filled in here\n    name = \"Ranked_Hollow_Volatility_Exhaustion\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A cross-sectionally ranked version of the liquidity vacuum hypothesis. It measures the intensity of price range expansion relative to volume turnover, weighted by the recent price momentum relative to its 20-day average. It targets stocks where price discovery is thin and likely to snap back.",
      "factor_formulation": "RHVE = \\text{RANK}\\left(\\frac{TS\\_MEAN(high - low, 3)}{TS\\_MEAN(volume, 20) + 1e-8}\\right) \\times \\text{RANK}(TS\\_PCTCHANGE(close, 5))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 3,
        "evolution_phase": "mutation",
        "trajectory_id": "f3ed5e2305aa",
        "parent_trajectory_ids": [
          "817d00660033"
        ],
        "hypothesis": "Hypothesis: The 'Mean-Reverting Liquidity Vacuum' factor, defined as the ratio of the 3-day average price range to the 20-day average volume, multiplied by the 5-day price reversal magnitude, negatively predicts future returns by identifying trend exhaustion caused by liquidity gaps.\n                Concise Observation: While the parent strategy successfully captured alpha through linear, volume-supported trends (IR 1.49), it fails to account for 'hollow' volatility spikes where price range expands without corresponding turnover, often preceding sharp reversals.\n                Concise Justification: High intraday dispersion (High-Low) relative to historical volume suggests that price discovery is being driven by a lack of liquidity rather than high-conviction trading, creating an unstable price level that is susceptible to mean reversion.\n                Concise Knowledge: If a price move occurs with expanding intraday ranges but diminishing volume support, it indicates a liquidity vacuum; when such exhaustion is detected, the price is likely to mean-revert to its 20-day moving average as the trend lacks institutional participation.\n                concise Specification: The factor is calculated as (TS_MEAN($high - $low, 3) / (TS_MEAN($volume, 20) + 1e-8)) * ($close / TS_MEAN($close, 20) - 1), where a high positive value indicates an overextended 'hollow' uptrend ripe for a downward reversal.\n                ",
        "initial_direction": "Evaluate 'Intraday-to-Interday Volatility Shift' by comparing KLEN to STD5: when intraday ranges exceed 5-day realized volatility, it signals a regime shift in market participants' urgency.",
        "planning_direction": "Evaluate 'Intraday-to-Interday Volatility Shift' by comparing KLEN to STD5: when intraday ranges exceed 5-day realized volatility, it signals a regime shift in market participants' urgency.",
        "created_at": "2026-01-21T01:32:01.719967"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.154347233377052,
        "ICIR": 0.0573915026876882,
        "1day.excess_return_without_cost.std": 0.0046124234505751,
        "1day.excess_return_with_cost.annualized_return": 0.0066816040760919,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002294108373371,
        "1day.excess_return_without_cost.annualized_return": 0.0545997792862316,
        "1day.excess_return_with_cost.std": 0.004613250179658,
        "Rank IC": 0.0255656317314589,
        "IC": 0.0082447314136444,
        "1day.excess_return_without_cost.max_drawdown": -0.1214971840253457,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7673142029933999,
        "1day.pa": 0.0,
        "l2.valid": 0.9961831118823028,
        "Rank ICIR": 0.1815980226732771,
        "l2.train": 0.9928342635614305,
        "1day.excess_return_with_cost.information_ratio": 0.0938826309598739,
        "1day.excess_return_with_cost.mean": 2.807396670626852e-05
      },
      "feedback": {
        "observations": "The current iteration focused on the 'Mean-Reverting Liquidity Vacuum' hypothesis by testing three variations: a raw ratio interaction (LVR), a cross-sectional rank interaction (RHVE), and a time-series Z-score approach (ZLGM). The results show a notable improvement in predictive accuracy (IC increased from 0.0058 to 0.0082) and a slight increase in annualized return (0.0546 vs 0.0520). However, the Information Ratio (IR) decreased and the Max Drawdown (MDD) significantly worsened (-0.121 vs -0.072), suggesting that while the signal strength is higher, the volatility or tail risk of the factor has increased.",
        "hypothesis_evaluation": "The hypothesis that liquidity gaps (high range/low volume) coupled with price overextension predict reversals is supported by the improved IC and annualized return. The 'ZScored_Liquidity_Gap_Momentum' and 'Ranked_Hollow_Volatility_Exhaustion' implementations likely contributed to the higher signal capture. The deterioration in MDD suggests that the 'vacuum' effect might be prone to 'gap-and-go' scenarios where the trend continues despite thin liquidity, leading to sharp drawdowns in a mean-reversion strategy.",
        "decision": true,
        "reason": "The current results show high signal (IC) but poor risk-adjusted stability (MDD/IR). By replacing the raw 'high-low' with a volatility-normalized measure, we can better distinguish between a genuine 'liquidity vacuum' and standard high-volatility regimes. Additionally, shortening the volume lookback from 20 days to 5 days will make the factor more responsive to sudden shifts in market depth, potentially reducing the drawdown by exiting or entering positions closer to the actual exhaustion point."
      }
    },
    "4325619929762978": {
      "factor_id": "4325619929762978",
      "factor_name": "ZScored_Liquidity_Gap_Momentum",
      "factor_expression": "TS_ZSCORE(($high - $low) / (TS_MEAN($volume, 20) + 1e-8), 10) * TS_ZSCORE($close, 20)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_ZSCORE(($high - $low) / (TS_MEAN($volume, 20) + 1e-8), 10) * TS_ZSCORE($close, 20)\" # Your output factor expression will be filled in here\n    name = \"ZScored_Liquidity_Gap_Momentum\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor standardizes the ratio of intraday volatility to volume and interacts it with the 20-day price Z-score. It captures extreme price levels that lack institutional volume support, signaling a high probability of trend exhaustion and subsequent reversal.",
      "factor_formulation": "ZLGM = \\text{TS\\_ZSCORE}\\left(\\frac{high - low}{TS\\_MEAN(volume, 20) + 1e-8}, 10\\right) \\times \\text{TS\\_ZSCORE}(close, 20)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 3,
        "evolution_phase": "mutation",
        "trajectory_id": "f3ed5e2305aa",
        "parent_trajectory_ids": [
          "817d00660033"
        ],
        "hypothesis": "Hypothesis: The 'Mean-Reverting Liquidity Vacuum' factor, defined as the ratio of the 3-day average price range to the 20-day average volume, multiplied by the 5-day price reversal magnitude, negatively predicts future returns by identifying trend exhaustion caused by liquidity gaps.\n                Concise Observation: While the parent strategy successfully captured alpha through linear, volume-supported trends (IR 1.49), it fails to account for 'hollow' volatility spikes where price range expands without corresponding turnover, often preceding sharp reversals.\n                Concise Justification: High intraday dispersion (High-Low) relative to historical volume suggests that price discovery is being driven by a lack of liquidity rather than high-conviction trading, creating an unstable price level that is susceptible to mean reversion.\n                Concise Knowledge: If a price move occurs with expanding intraday ranges but diminishing volume support, it indicates a liquidity vacuum; when such exhaustion is detected, the price is likely to mean-revert to its 20-day moving average as the trend lacks institutional participation.\n                concise Specification: The factor is calculated as (TS_MEAN($high - $low, 3) / (TS_MEAN($volume, 20) + 1e-8)) * ($close / TS_MEAN($close, 20) - 1), where a high positive value indicates an overextended 'hollow' uptrend ripe for a downward reversal.\n                ",
        "initial_direction": "Evaluate 'Intraday-to-Interday Volatility Shift' by comparing KLEN to STD5: when intraday ranges exceed 5-day realized volatility, it signals a regime shift in market participants' urgency.",
        "planning_direction": "Evaluate 'Intraday-to-Interday Volatility Shift' by comparing KLEN to STD5: when intraday ranges exceed 5-day realized volatility, it signals a regime shift in market participants' urgency.",
        "created_at": "2026-01-21T01:32:01.719967"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.154347233377052,
        "ICIR": 0.0573915026876882,
        "1day.excess_return_without_cost.std": 0.0046124234505751,
        "1day.excess_return_with_cost.annualized_return": 0.0066816040760919,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002294108373371,
        "1day.excess_return_without_cost.annualized_return": 0.0545997792862316,
        "1day.excess_return_with_cost.std": 0.004613250179658,
        "Rank IC": 0.0255656317314589,
        "IC": 0.0082447314136444,
        "1day.excess_return_without_cost.max_drawdown": -0.1214971840253457,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7673142029933999,
        "1day.pa": 0.0,
        "l2.valid": 0.9961831118823028,
        "Rank ICIR": 0.1815980226732771,
        "l2.train": 0.9928342635614305,
        "1day.excess_return_with_cost.information_ratio": 0.0938826309598739,
        "1day.excess_return_with_cost.mean": 2.807396670626852e-05
      },
      "feedback": {
        "observations": "The current iteration focused on the 'Mean-Reverting Liquidity Vacuum' hypothesis by testing three variations: a raw ratio interaction (LVR), a cross-sectional rank interaction (RHVE), and a time-series Z-score approach (ZLGM). The results show a notable improvement in predictive accuracy (IC increased from 0.0058 to 0.0082) and a slight increase in annualized return (0.0546 vs 0.0520). However, the Information Ratio (IR) decreased and the Max Drawdown (MDD) significantly worsened (-0.121 vs -0.072), suggesting that while the signal strength is higher, the volatility or tail risk of the factor has increased.",
        "hypothesis_evaluation": "The hypothesis that liquidity gaps (high range/low volume) coupled with price overextension predict reversals is supported by the improved IC and annualized return. The 'ZScored_Liquidity_Gap_Momentum' and 'Ranked_Hollow_Volatility_Exhaustion' implementations likely contributed to the higher signal capture. The deterioration in MDD suggests that the 'vacuum' effect might be prone to 'gap-and-go' scenarios where the trend continues despite thin liquidity, leading to sharp drawdowns in a mean-reversion strategy.",
        "decision": true,
        "reason": "The current results show high signal (IC) but poor risk-adjusted stability (MDD/IR). By replacing the raw 'high-low' with a volatility-normalized measure, we can better distinguish between a genuine 'liquidity vacuum' and standard high-volatility regimes. Additionally, shortening the volume lookback from 20 days to 5 days will make the factor more responsive to sudden shifts in market depth, potentially reducing the drawdown by exiting or entering positions closer to the actual exhaustion point."
      }
    },
    "c1b05a7586bb7b8e": {
      "factor_id": "c1b05a7586bb7b8e",
      "factor_name": "LVSR_Factor_Reversion",
      "factor_expression": "TS_ZSCORE(($high - $low) / $close, 20) * (1 / (TS_MEAN(ABS($return) / ($volume * $close + 1e-8), 5) * ABS($open / (DELAY($close, 1) + 1e-8) - 1) + 1e-6))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_ZSCORE(($high - $low) / $close, 20) * INV(TS_MEAN(ABS(($close - DELAY($close, 1)) / DELAY($close, 1)) / ($volume * $close + 1e-8), 5) * ABS(($open - DELAY($close, 1)) / DELAY($close, 1)) + 1e-6)\" # Your output factor expression will be filled in here\n    name = \"LVSR_Factor_Reversion\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "The Liquidity-Validated Structural Reversion (LVSR) factor identifies 'hollow' price moves by scaling the 20-day Z-scored intraday range by the inverse of the 5-day Amihud illiquidity and overnight return magnitude. High values indicate high volatility on low liquidity, suggesting a high probability of mean-reversion.",
      "factor_formulation": "LVSR = \\text{TS_ZSCORE}(\\frac{high - low}{close}, 20) \\times \\frac{1}{\\text{TS_MEAN}(\\frac{|return|}{volume \\times close}, 5) \\times |\\frac{open}{\\text{DELAY}(close, 1)} - 1| + 1e-6}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "c4dc78139b53",
        "parent_trajectory_ids": [
          "328dbeb0c242",
          "fb494dc84807"
        ],
        "hypothesis": "Hypothesis: The 'Liquidity-Validated Structural Reversion' (LVSR) factor, defined as the product of the 20-day Z-scored intraday price range and the inverse of the 5-day average Amihud illiquidity scaled by the absolute overnight return, predicts short-term mean-reversion by identifying 'hollow' price extensions lacking institutional support.\n                Concise Observation: Parent 1 (ILE) captures exhaustion through price range but fails during strong trends; Parent 2 (Institutional Absorption) identifies quality of price moves but lacks a volatility trigger; combining them filters out high-conviction institutional breakouts.\n                Concise Justification: By scaling intraday volatility by the inverse of illiquidity, we isolate 'cheap' volatilitymoves that occur on low relative impactwhich are theoretically more prone to mean-reversion than 'expensive' moves backed by institutional liquidity.\n                Concise Knowledge: If extreme intraday price dispersion occurs alongside low institutional absorption (low volume-to-price-impact ratio and minimal overnight sentiment), the price move is likely a liquidity-driven vacuum rather than information-driven, leading to a higher probability of reversion.\n                concise Specification: The factor is calculated as [(High - Low) / Close - MA((High - Low) / Close, 20)] / Std((High - Low) / Close, 20) multiplied by [1 / (MA(Abs(Return) / (Volume * Close), 5) * Abs(Open / Delay(Close, 1) - 1) + 1e-6)], targeting a 5-day reversion horizon.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T10:13:06.736021"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1258935792347857,
        "ICIR": 0.0390560526366975,
        "1day.excess_return_without_cost.std": 0.0040971998383566,
        "1day.excess_return_with_cost.annualized_return": -0.0010019363489492,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001957757669479,
        "1day.excess_return_without_cost.annualized_return": 0.0465946325336084,
        "1day.excess_return_with_cost.std": 0.0040981858728818,
        "Rank IC": 0.0252550352437647,
        "IC": 0.0055592755095405,
        "1day.excess_return_without_cost.max_drawdown": -0.0904368977392056,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7371574611294541,
        "1day.pa": 0.0,
        "l2.valid": 0.9964368775156224,
        "Rank ICIR": 0.1811824002641607,
        "l2.train": 0.9938609610323432,
        "1day.excess_return_with_cost.information_ratio": -0.0158474723279076,
        "1day.excess_return_with_cost.mean": -4.209816592223806e-06
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Liquidity-Validated Structural Reversion' (LVSR) hypothesis. While the core concept of identifying 'hollow' price moves through the interaction of volatility and liquidity is theoretically sound, the current implementations failed to surpass the SOTA result. The LVSR_Factor_Reversion (the most complex formulation) and its derivatives (IAR, HVR) showed positive IC (0.005559) and IR (0.737157), but were unable to match the SOTA's risk-adjusted performance (IR 0.9725) and drawdown control. The results suggest that while the signal contains predictive power, the current mathematical formulationsparticularly the denominator in the LVSR_Factor_Reversionmight be overly sensitive or noisy.",
        "hypothesis_evaluation": "The hypothesis that 'hollow' price extensions (high range, low liquidity) lead to reversion is partially supported by the positive Information Ratio and IC. However, the complexity of the LVSR_Factor_Reversion (using 5 base features and a multi-component denominator) may be introducing noise. The Institutional_Absorption_Ratio (IAR) attempted to simplify this using RANK, which is a good direction for robustness, but likely lost the specific 'structural' nuance of overnight gaps vs. intraday range. The deterioration in Max Drawdown compared to SOTA suggests the 'reversion' signal might be catching falling knives during high-regime volatility periods.",
        "decision": false,
        "reason": "To improve upon the current results, we need to address two issues: complexity and signal-to-noise. The new hypothesis simplifies the 'Amihud' concept into a 'Range-to-Turnover' ratio, which is more stable. By using a 5-day smoothing for both the numerator (range) and denominator (volume/liquidity) before calculating the Z-score or ratio, we reduce the impact of single-day outliers. Furthermore, focusing on 'Turnover' (Volume/Shares Outstanding, or volume as a proxy) avoids the scale issues of the absolute price in the denominator of the original LVSR formulation. This iteration moves away from the complex overnight-return scaling which likely contributed to the higher drawdown."
      }
    },
    "62fbe950bb141008": {
      "factor_id": "62fbe950bb141008",
      "factor_name": "Institutional_Absorption_Ratio",
      "factor_expression": "RANK(($high - $low) / $close) / (RANK(TS_MEAN($volume, 5) / (TS_STD($close, 5) + 1e-8)) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(($high - $low) / $close) / (RANK(TS_MEAN($volume, 5) / (TS_STD($close, 5) + 1e-8)) + 1e-8)\" # Your output factor expression will be filled in here\n    name = \"Institutional_Absorption_Ratio\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A simplified version of the LVSR logic focusing on the ratio of price dispersion to institutional absorption. It measures the efficiency of price movement relative to volume and overnight sentiment. High values suggest price moves are unsupported by volume, leading to reversion.",
      "factor_formulation": "IAR = \\frac{\\text{RANK}((high - low) / close)}{\\text{RANK}(\\text{TS_MEAN}(volume, 5) / \\text{TS_STD}(close, 5))}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "c4dc78139b53",
        "parent_trajectory_ids": [
          "328dbeb0c242",
          "fb494dc84807"
        ],
        "hypothesis": "Hypothesis: The 'Liquidity-Validated Structural Reversion' (LVSR) factor, defined as the product of the 20-day Z-scored intraday price range and the inverse of the 5-day average Amihud illiquidity scaled by the absolute overnight return, predicts short-term mean-reversion by identifying 'hollow' price extensions lacking institutional support.\n                Concise Observation: Parent 1 (ILE) captures exhaustion through price range but fails during strong trends; Parent 2 (Institutional Absorption) identifies quality of price moves but lacks a volatility trigger; combining them filters out high-conviction institutional breakouts.\n                Concise Justification: By scaling intraday volatility by the inverse of illiquidity, we isolate 'cheap' volatilitymoves that occur on low relative impactwhich are theoretically more prone to mean-reversion than 'expensive' moves backed by institutional liquidity.\n                Concise Knowledge: If extreme intraday price dispersion occurs alongside low institutional absorption (low volume-to-price-impact ratio and minimal overnight sentiment), the price move is likely a liquidity-driven vacuum rather than information-driven, leading to a higher probability of reversion.\n                concise Specification: The factor is calculated as [(High - Low) / Close - MA((High - Low) / Close, 20)] / Std((High - Low) / Close, 20) multiplied by [1 / (MA(Abs(Return) / (Volume * Close), 5) * Abs(Open / Delay(Close, 1) - 1) + 1e-6)], targeting a 5-day reversion horizon.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T10:13:06.736021"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1258935792347857,
        "ICIR": 0.0390560526366975,
        "1day.excess_return_without_cost.std": 0.0040971998383566,
        "1day.excess_return_with_cost.annualized_return": -0.0010019363489492,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001957757669479,
        "1day.excess_return_without_cost.annualized_return": 0.0465946325336084,
        "1day.excess_return_with_cost.std": 0.0040981858728818,
        "Rank IC": 0.0252550352437647,
        "IC": 0.0055592755095405,
        "1day.excess_return_without_cost.max_drawdown": -0.0904368977392056,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7371574611294541,
        "1day.pa": 0.0,
        "l2.valid": 0.9964368775156224,
        "Rank ICIR": 0.1811824002641607,
        "l2.train": 0.9938609610323432,
        "1day.excess_return_with_cost.information_ratio": -0.0158474723279076,
        "1day.excess_return_with_cost.mean": -4.209816592223806e-06
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Liquidity-Validated Structural Reversion' (LVSR) hypothesis. While the core concept of identifying 'hollow' price moves through the interaction of volatility and liquidity is theoretically sound, the current implementations failed to surpass the SOTA result. The LVSR_Factor_Reversion (the most complex formulation) and its derivatives (IAR, HVR) showed positive IC (0.005559) and IR (0.737157), but were unable to match the SOTA's risk-adjusted performance (IR 0.9725) and drawdown control. The results suggest that while the signal contains predictive power, the current mathematical formulationsparticularly the denominator in the LVSR_Factor_Reversionmight be overly sensitive or noisy.",
        "hypothesis_evaluation": "The hypothesis that 'hollow' price extensions (high range, low liquidity) lead to reversion is partially supported by the positive Information Ratio and IC. However, the complexity of the LVSR_Factor_Reversion (using 5 base features and a multi-component denominator) may be introducing noise. The Institutional_Absorption_Ratio (IAR) attempted to simplify this using RANK, which is a good direction for robustness, but likely lost the specific 'structural' nuance of overnight gaps vs. intraday range. The deterioration in Max Drawdown compared to SOTA suggests the 'reversion' signal might be catching falling knives during high-regime volatility periods.",
        "decision": false,
        "reason": "To improve upon the current results, we need to address two issues: complexity and signal-to-noise. The new hypothesis simplifies the 'Amihud' concept into a 'Range-to-Turnover' ratio, which is more stable. By using a 5-day smoothing for both the numerator (range) and denominator (volume/liquidity) before calculating the Z-score or ratio, we reduce the impact of single-day outliers. Furthermore, focusing on 'Turnover' (Volume/Shares Outstanding, or volume as a proxy) avoids the scale issues of the absolute price in the denominator of the original LVSR formulation. This iteration moves away from the complex overnight-return scaling which likely contributed to the higher drawdown."
      }
    },
    "8e24b780310c5566": {
      "factor_id": "8e24b780310c5566",
      "factor_name": "Hollow_Vol_Reversion_5D",
      "factor_expression": "TS_ZSCORE(($high - $low) / ($close + 1e-8), 20) / (EMA(ABS($return) / ($volume + 1e-8), 5) + 1e-6)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_ZSCORE(($high - $low) / $close, 20) / (EMA(ABS(TS_PCTCHANGE($close, 1)) / ($volume + 1e-8), 5) + 1e-8)\" # Your output factor expression will be filled in here\n    name = \"Hollow_Vol_Reversion_5D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor isolates 'cheap' volatility by comparing the current intraday range to its 20-day history, normalized by the 5-day average volume-price impact. It targets short-term reversion when price range expands without a proportional increase in liquidity absorption.",
      "factor_formulation": "HVR = \\text{TS_ZSCORE}(\\frac{high - low}{close}, 20) / \\text{EMA}(\\frac{|return|}{volume + 1}, 5)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "c4dc78139b53",
        "parent_trajectory_ids": [
          "328dbeb0c242",
          "fb494dc84807"
        ],
        "hypothesis": "Hypothesis: The 'Liquidity-Validated Structural Reversion' (LVSR) factor, defined as the product of the 20-day Z-scored intraday price range and the inverse of the 5-day average Amihud illiquidity scaled by the absolute overnight return, predicts short-term mean-reversion by identifying 'hollow' price extensions lacking institutional support.\n                Concise Observation: Parent 1 (ILE) captures exhaustion through price range but fails during strong trends; Parent 2 (Institutional Absorption) identifies quality of price moves but lacks a volatility trigger; combining them filters out high-conviction institutional breakouts.\n                Concise Justification: By scaling intraday volatility by the inverse of illiquidity, we isolate 'cheap' volatilitymoves that occur on low relative impactwhich are theoretically more prone to mean-reversion than 'expensive' moves backed by institutional liquidity.\n                Concise Knowledge: If extreme intraday price dispersion occurs alongside low institutional absorption (low volume-to-price-impact ratio and minimal overnight sentiment), the price move is likely a liquidity-driven vacuum rather than information-driven, leading to a higher probability of reversion.\n                concise Specification: The factor is calculated as [(High - Low) / Close - MA((High - Low) / Close, 20)] / Std((High - Low) / Close, 20) multiplied by [1 / (MA(Abs(Return) / (Volume * Close), 5) * Abs(Open / Delay(Close, 1) - 1) + 1e-6)], targeting a 5-day reversion horizon.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T10:13:06.736021"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1258935792347857,
        "ICIR": 0.0390560526366975,
        "1day.excess_return_without_cost.std": 0.0040971998383566,
        "1day.excess_return_with_cost.annualized_return": -0.0010019363489492,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001957757669479,
        "1day.excess_return_without_cost.annualized_return": 0.0465946325336084,
        "1day.excess_return_with_cost.std": 0.0040981858728818,
        "Rank IC": 0.0252550352437647,
        "IC": 0.0055592755095405,
        "1day.excess_return_without_cost.max_drawdown": -0.0904368977392056,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7371574611294541,
        "1day.pa": 0.0,
        "l2.valid": 0.9964368775156224,
        "Rank ICIR": 0.1811824002641607,
        "l2.train": 0.9938609610323432,
        "1day.excess_return_with_cost.information_ratio": -0.0158474723279076,
        "1day.excess_return_with_cost.mean": -4.209816592223806e-06
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Liquidity-Validated Structural Reversion' (LVSR) hypothesis. While the core concept of identifying 'hollow' price moves through the interaction of volatility and liquidity is theoretically sound, the current implementations failed to surpass the SOTA result. The LVSR_Factor_Reversion (the most complex formulation) and its derivatives (IAR, HVR) showed positive IC (0.005559) and IR (0.737157), but were unable to match the SOTA's risk-adjusted performance (IR 0.9725) and drawdown control. The results suggest that while the signal contains predictive power, the current mathematical formulationsparticularly the denominator in the LVSR_Factor_Reversionmight be overly sensitive or noisy.",
        "hypothesis_evaluation": "The hypothesis that 'hollow' price extensions (high range, low liquidity) lead to reversion is partially supported by the positive Information Ratio and IC. However, the complexity of the LVSR_Factor_Reversion (using 5 base features and a multi-component denominator) may be introducing noise. The Institutional_Absorption_Ratio (IAR) attempted to simplify this using RANK, which is a good direction for robustness, but likely lost the specific 'structural' nuance of overnight gaps vs. intraday range. The deterioration in Max Drawdown compared to SOTA suggests the 'reversion' signal might be catching falling knives during high-regime volatility periods.",
        "decision": false,
        "reason": "To improve upon the current results, we need to address two issues: complexity and signal-to-noise. The new hypothesis simplifies the 'Amihud' concept into a 'Range-to-Turnover' ratio, which is more stable. By using a 5-day smoothing for both the numerator (range) and denominator (volume/liquidity) before calculating the Z-score or ratio, we reduce the impact of single-day outliers. Furthermore, focusing on 'Turnover' (Volume/Shares Outstanding, or volume as a proxy) avoids the scale issues of the absolute price in the denominator of the original LVSR formulation. This iteration moves away from the complex overnight-return scaling which likely contributed to the higher drawdown."
      }
    },
    "4cc042c1753137dd": {
      "factor_id": "4cc042c1753137dd",
      "factor_name": "Intraday_Liquidity_Density_5D",
      "factor_expression": "RANK(TS_MEAN($volume / ($high - $low + 1e-8), 5))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(TS_MEAN($volume / ($high - $low + 1e-8), 5))\" # Your output factor expression will be filled in here\n    name = \"Intraday_Liquidity_Density_5D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies passive institutional accumulation by measuring the volume absorbed within a narrow price range. A high ratio of volume to the high-low spread indicates 'thick' liquidity where large orders are filled with minimal price impact, suggesting trend persistence.",
      "factor_formulation": "\\text{RANK}(\\text{TS_MEAN}(\\frac{\\text{volume}}{(\\text{high} - \\text{low}) + 1e-8}, 5))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 3,
        "evolution_phase": "mutation",
        "trajectory_id": "e577188a4605",
        "parent_trajectory_ids": [
          "e9d36ddaaa29"
        ],
        "hypothesis": "Hypothesis: The 'Intraday Liquidity Density' factor predicts positive alpha by identifying stocks where high volume is absorbed within a narrow price range, calculated as the ratio of daily volume to the intraday high-low spread, signaling passive institutional accumulation.\n                Concise Observation: The parent strategy focused on high-volatility capitulation and gaps (RankIC 0.0170), but failed to capture 'quiet' accumulation phases where price remains stable despite high turnover, leading to missed opportunities in steady uptrends.\n                Concise Justification: Passive buyers (institutions) often use algorithms to minimize market impact, resulting in high volume at specific price levels; a high ratio of volume to the high-low range (Illiquidity Inverse) quantifies this absorption capacity, distinguishing it from volatile retail-driven price moves.\n                Concise Knowledge: If a stock maintains a high volume-to-range ratio (Liquidity Density), it indicates that large orders are being filled without significant price impact; when this density increases, it suggests a 'thick' liquidity environment that supports trend persistence rather than mean reversion.\n                concise Specification: The factor is defined as the daily $volume divided by the difference between $high and $low (plus a small epsilon), smoothed over a 5-day moving average to ensure the persistence of the liquidity density signal.\n                ",
        "initial_direction": "Analyze 'Support Integrity' under stress by crossing KLOW with VSTD5: strong lower shadows accompanied by low volume volatility indicate stable accumulation at price floors.",
        "planning_direction": "Analyze 'Support Integrity' under stress by crossing KLOW with VSTD5: strong lower shadows accompanied by low volume volatility indicate stable accumulation at price floors.",
        "created_at": "2026-01-21T00:58:32.913525"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1362601306661477,
        "ICIR": 0.0502080951274213,
        "1day.excess_return_without_cost.std": 0.0041010451510472,
        "1day.excess_return_with_cost.annualized_return": -0.0037783411027358,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.000183432131502,
        "1day.excess_return_without_cost.annualized_return": 0.04365684729748,
        "1day.excess_return_with_cost.std": 0.0041025974131203,
        "Rank IC": 0.0249574479872754,
        "IC": 0.0071448048450948,
        "1day.excess_return_without_cost.max_drawdown": -0.0950145060273637,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.6900321731290484,
        "1day.pa": 0.0,
        "l2.valid": 0.9964339789122232,
        "Rank ICIR": 0.1809935552467677,
        "l2.train": 0.9928669595623976,
        "1day.excess_return_with_cost.information_ratio": -0.0596971753506952,
        "1day.excess_return_with_cost.mean": -1.5875382784604286e-05
      },
      "feedback": {
        "observations": "The current iteration focused on 'Intraday Liquidity Density' and its variations. While the IC (Information Coefficient) improved from 0.005798 to 0.007145, indicating a stronger linear relationship between the factor and future returns, the portfolio-based metrics (Annualized Return, Information Ratio, and Max Drawdown) underperformed compared to the SOTA. Specifically, the Annualized Return dropped from 5.2% to 4.37%, and the Information Ratio saw a significant decline. This suggests that while the raw predictive power (IC) increased, the signal's stability or its interaction with the tail of the distribution (which drives portfolio performance) weakened.",
        "hypothesis_evaluation": "The hypothesis that high volume absorbed in a narrow range signals institutional accumulation is partially supported by the improved IC. However, the 'Density_Weighted_Return_Momentum_5D' and 'Relative_Liquidity_Absorption_10D' might be introducing noise or overfitting to short-term volatility. The current implementation of 'Liquidity Density' (volume/spread) is sensitive to price levels; a stock with a low price will naturally have a smaller absolute spread, potentially biasing the factor toward low-priced stocks rather than actual 'thick' liquidity.",
        "decision": false,
        "reason": "1. **Price Level Neutrality**: Dividing (High-Low) by the Open price ensures the 'spread' is relative, preventing bias toward low-priced stocks. 2. **Robustness**: Using TS_MEDIAN instead of TS_MEAN or TS_ZSCORE reduces the influence of extreme single-day outliers (e.g., flash crashes or news-driven volume spikes) that don't represent sustained institutional accumulation. 3. **Complexity Control**: The current factors use 4-5 base features; the new approach maintains this efficiency while improving the mathematical representation of 'density'. 4. **Directionality**: Pure density is directionless; multiplying by the sign of the daily return or a short-term trend ensures we capture 'accumulation' rather than 'distribution' at high density."
      }
    },
    "afb49baadf5af4e9": {
      "factor_id": "afb49baadf5af4e9",
      "factor_name": "Relative_Liquidity_Absorption_10D",
      "factor_expression": "RANK(TS_ZSCORE($volume / ($high - $low + 1e-8), 10))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(TS_ZSCORE($volume / ($high - $low + 1e-8), 10))\" # Your output factor expression will be filled in here\n    name = \"Relative_Liquidity_Absorption_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor refines the liquidity density concept by comparing the current volume-to-range ratio against its historical 10-day volatility. It highlights periods where volume is significantly higher than usual relative to the price movement, signaling a shift toward passive accumulation.",
      "factor_formulation": "\\text{RANK}(\\text{TS_ZSCORE}(\\frac{\\text{volume}}{(\\text{high} - \\text{low}) + 1e-8}, 10))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 3,
        "evolution_phase": "mutation",
        "trajectory_id": "e577188a4605",
        "parent_trajectory_ids": [
          "e9d36ddaaa29"
        ],
        "hypothesis": "Hypothesis: The 'Intraday Liquidity Density' factor predicts positive alpha by identifying stocks where high volume is absorbed within a narrow price range, calculated as the ratio of daily volume to the intraday high-low spread, signaling passive institutional accumulation.\n                Concise Observation: The parent strategy focused on high-volatility capitulation and gaps (RankIC 0.0170), but failed to capture 'quiet' accumulation phases where price remains stable despite high turnover, leading to missed opportunities in steady uptrends.\n                Concise Justification: Passive buyers (institutions) often use algorithms to minimize market impact, resulting in high volume at specific price levels; a high ratio of volume to the high-low range (Illiquidity Inverse) quantifies this absorption capacity, distinguishing it from volatile retail-driven price moves.\n                Concise Knowledge: If a stock maintains a high volume-to-range ratio (Liquidity Density), it indicates that large orders are being filled without significant price impact; when this density increases, it suggests a 'thick' liquidity environment that supports trend persistence rather than mean reversion.\n                concise Specification: The factor is defined as the daily $volume divided by the difference between $high and $low (plus a small epsilon), smoothed over a 5-day moving average to ensure the persistence of the liquidity density signal.\n                ",
        "initial_direction": "Analyze 'Support Integrity' under stress by crossing KLOW with VSTD5: strong lower shadows accompanied by low volume volatility indicate stable accumulation at price floors.",
        "planning_direction": "Analyze 'Support Integrity' under stress by crossing KLOW with VSTD5: strong lower shadows accompanied by low volume volatility indicate stable accumulation at price floors.",
        "created_at": "2026-01-21T00:58:32.913525"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1362601306661477,
        "ICIR": 0.0502080951274213,
        "1day.excess_return_without_cost.std": 0.0041010451510472,
        "1day.excess_return_with_cost.annualized_return": -0.0037783411027358,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.000183432131502,
        "1day.excess_return_without_cost.annualized_return": 0.04365684729748,
        "1day.excess_return_with_cost.std": 0.0041025974131203,
        "Rank IC": 0.0249574479872754,
        "IC": 0.0071448048450948,
        "1day.excess_return_without_cost.max_drawdown": -0.0950145060273637,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.6900321731290484,
        "1day.pa": 0.0,
        "l2.valid": 0.9964339789122232,
        "Rank ICIR": 0.1809935552467677,
        "l2.train": 0.9928669595623976,
        "1day.excess_return_with_cost.information_ratio": -0.0596971753506952,
        "1day.excess_return_with_cost.mean": -1.5875382784604286e-05
      },
      "feedback": {
        "observations": "The current iteration focused on 'Intraday Liquidity Density' and its variations. While the IC (Information Coefficient) improved from 0.005798 to 0.007145, indicating a stronger linear relationship between the factor and future returns, the portfolio-based metrics (Annualized Return, Information Ratio, and Max Drawdown) underperformed compared to the SOTA. Specifically, the Annualized Return dropped from 5.2% to 4.37%, and the Information Ratio saw a significant decline. This suggests that while the raw predictive power (IC) increased, the signal's stability or its interaction with the tail of the distribution (which drives portfolio performance) weakened.",
        "hypothesis_evaluation": "The hypothesis that high volume absorbed in a narrow range signals institutional accumulation is partially supported by the improved IC. However, the 'Density_Weighted_Return_Momentum_5D' and 'Relative_Liquidity_Absorption_10D' might be introducing noise or overfitting to short-term volatility. The current implementation of 'Liquidity Density' (volume/spread) is sensitive to price levels; a stock with a low price will naturally have a smaller absolute spread, potentially biasing the factor toward low-priced stocks rather than actual 'thick' liquidity.",
        "decision": false,
        "reason": "1. **Price Level Neutrality**: Dividing (High-Low) by the Open price ensures the 'spread' is relative, preventing bias toward low-priced stocks. 2. **Robustness**: Using TS_MEDIAN instead of TS_MEAN or TS_ZSCORE reduces the influence of extreme single-day outliers (e.g., flash crashes or news-driven volume spikes) that don't represent sustained institutional accumulation. 3. **Complexity Control**: The current factors use 4-5 base features; the new approach maintains this efficiency while improving the mathematical representation of 'density'. 4. **Directionality**: Pure density is directionless; multiplying by the sign of the daily return or a short-term trend ensures we capture 'accumulation' rather than 'distribution' at high density."
      }
    },
    "c69664fdb082f11b": {
      "factor_id": "c69664fdb082f11b",
      "factor_name": "Density_Weighted_Return_Momentum_5D",
      "factor_expression": "TS_SUM($return * ($volume / ($high - $low + 1e-8)), 5)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_SUM((($close / DELAY($close, 1)) - 1) * ($volume / ($high - $low + 1e-8)), 5)\" # Your output factor expression will be filled in here\n    name = \"Density_Weighted_Return_Momentum_5D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor combines liquidity density with price direction. It weights the daily return by the liquidity density (volume/range), emphasizing price moves that occur during high-absorption phases, which are more likely to be driven by institutional flow than retail volatility.",
      "factor_formulation": "\\text{TS_SUM}(\\text{return} * \\frac{\\text{volume}}{(\\text{high} - \\text{low}) + 1e-8}, 5)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 3,
        "evolution_phase": "mutation",
        "trajectory_id": "e577188a4605",
        "parent_trajectory_ids": [
          "e9d36ddaaa29"
        ],
        "hypothesis": "Hypothesis: The 'Intraday Liquidity Density' factor predicts positive alpha by identifying stocks where high volume is absorbed within a narrow price range, calculated as the ratio of daily volume to the intraday high-low spread, signaling passive institutional accumulation.\n                Concise Observation: The parent strategy focused on high-volatility capitulation and gaps (RankIC 0.0170), but failed to capture 'quiet' accumulation phases where price remains stable despite high turnover, leading to missed opportunities in steady uptrends.\n                Concise Justification: Passive buyers (institutions) often use algorithms to minimize market impact, resulting in high volume at specific price levels; a high ratio of volume to the high-low range (Illiquidity Inverse) quantifies this absorption capacity, distinguishing it from volatile retail-driven price moves.\n                Concise Knowledge: If a stock maintains a high volume-to-range ratio (Liquidity Density), it indicates that large orders are being filled without significant price impact; when this density increases, it suggests a 'thick' liquidity environment that supports trend persistence rather than mean reversion.\n                concise Specification: The factor is defined as the daily $volume divided by the difference between $high and $low (plus a small epsilon), smoothed over a 5-day moving average to ensure the persistence of the liquidity density signal.\n                ",
        "initial_direction": "Analyze 'Support Integrity' under stress by crossing KLOW with VSTD5: strong lower shadows accompanied by low volume volatility indicate stable accumulation at price floors.",
        "planning_direction": "Analyze 'Support Integrity' under stress by crossing KLOW with VSTD5: strong lower shadows accompanied by low volume volatility indicate stable accumulation at price floors.",
        "created_at": "2026-01-21T00:58:32.913525"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1362601306661477,
        "ICIR": 0.0502080951274213,
        "1day.excess_return_without_cost.std": 0.0041010451510472,
        "1day.excess_return_with_cost.annualized_return": -0.0037783411027358,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.000183432131502,
        "1day.excess_return_without_cost.annualized_return": 0.04365684729748,
        "1day.excess_return_with_cost.std": 0.0041025974131203,
        "Rank IC": 0.0249574479872754,
        "IC": 0.0071448048450948,
        "1day.excess_return_without_cost.max_drawdown": -0.0950145060273637,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.6900321731290484,
        "1day.pa": 0.0,
        "l2.valid": 0.9964339789122232,
        "Rank ICIR": 0.1809935552467677,
        "l2.train": 0.9928669595623976,
        "1day.excess_return_with_cost.information_ratio": -0.0596971753506952,
        "1day.excess_return_with_cost.mean": -1.5875382784604286e-05
      },
      "feedback": {
        "observations": "The current iteration focused on 'Intraday Liquidity Density' and its variations. While the IC (Information Coefficient) improved from 0.005798 to 0.007145, indicating a stronger linear relationship between the factor and future returns, the portfolio-based metrics (Annualized Return, Information Ratio, and Max Drawdown) underperformed compared to the SOTA. Specifically, the Annualized Return dropped from 5.2% to 4.37%, and the Information Ratio saw a significant decline. This suggests that while the raw predictive power (IC) increased, the signal's stability or its interaction with the tail of the distribution (which drives portfolio performance) weakened.",
        "hypothesis_evaluation": "The hypothesis that high volume absorbed in a narrow range signals institutional accumulation is partially supported by the improved IC. However, the 'Density_Weighted_Return_Momentum_5D' and 'Relative_Liquidity_Absorption_10D' might be introducing noise or overfitting to short-term volatility. The current implementation of 'Liquidity Density' (volume/spread) is sensitive to price levels; a stock with a low price will naturally have a smaller absolute spread, potentially biasing the factor toward low-priced stocks rather than actual 'thick' liquidity.",
        "decision": false,
        "reason": "1. **Price Level Neutrality**: Dividing (High-Low) by the Open price ensures the 'spread' is relative, preventing bias toward low-priced stocks. 2. **Robustness**: Using TS_MEDIAN instead of TS_MEAN or TS_ZSCORE reduces the influence of extreme single-day outliers (e.g., flash crashes or news-driven volume spikes) that don't represent sustained institutional accumulation. 3. **Complexity Control**: The current factors use 4-5 base features; the new approach maintains this efficiency while improving the mathematical representation of 'density'. 4. **Directionality**: Pure density is directionless; multiplying by the sign of the daily return or a short-term trend ensures we capture 'accumulation' rather than 'distribution' at high density."
      }
    },
    "83ed6baf586b4405": {
      "factor_id": "83ed6baf586b4405",
      "factor_name": "ICP_SignalToNoise_20D",
      "factor_expression": "TS_PCTCHANGE($close, 20) * (TS_MEAN($volume, 20) / (TS_STD($volume, 20) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_PCTCHANGE($close, 20) * (TS_MEAN($volume, 20) / (TS_STD($volume, 20) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"ICP_SignalToNoise_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "The Inertial Capital Persistence (ICP) factor identifies sustainable trend regimes by scaling the 20-day price momentum by the signal-to-noise ratio of trading volume. High values indicate strong price trends supported by stable, low-variance volume profiles, suggesting institutional accumulation.",
      "factor_formulation": "ICP_{20D} = \\text{TS_PCTCHANGE}(\\text{close}, 20) \\times \\frac{\\text{TS_MEAN}(\\text{volume}, 20)}{\\text{TS_STD}(\\text{volume}, 20)}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 9,
        "evolution_phase": "mutation",
        "trajectory_id": "bfa914caa408",
        "parent_trajectory_ids": [
          "b1dcd5e9d4ae"
        ],
        "hypothesis": "Hypothesis: The Inertial Capital Persistence (ICP) factor identifies sustainable trend regimes by scaling the 20-day price momentum by the inverse of volume volatility, specifically targeting periods where price direction is reinforced by stable, low-entropy transaction density.\n                Concise Observation: Parent strategies focusing on price-volume decoupling (residuals) effectively capture short-term mean-reversion but fail to distinguish between noise-driven spikes and the steady, low-variance volume profiles characteristic of institutional trend-building.\n                Concise Justification: Stable volume growth suggests a consensus among market participants and a steady absorption of liquidity, which reduces the probability of immediate price reversals and supports the continuation of the current trend direction.\n                Concise Knowledge: If price momentum is accompanied by a decreasing coefficient of variation in volume, the trend is more likely to persist; when volume variance is high during a price move, the trend is likely driven by noise or transient liquidity shocks rather than informed institutional accumulation.\n                concise Specification: The factor is defined as the 20-day price return multiplied by the ratio of the 20-day mean volume to the 20-day standard deviation of volume, capturing the 'signal-to-noise' ratio of capital flows.\n                ",
        "initial_direction": "Evaluate 'Intraday-to-Interday Volatility Shift' by comparing KLEN to STD5: when intraday ranges exceed 5-day realized volatility, it signals a regime shift in market participants' urgency.",
        "planning_direction": "Evaluate 'Intraday-to-Interday Volatility Shift' by comparing KLEN to STD5: when intraday ranges exceed 5-day realized volatility, it signals a regime shift in market participants' urgency.",
        "created_at": "2026-01-21T12:04:15.776054"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1000213090885694,
        "ICIR": 0.0490687748135292,
        "1day.excess_return_without_cost.std": 0.0050181549718496,
        "1day.excess_return_with_cost.annualized_return": 0.0298963457217139,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003255778311365,
        "1day.excess_return_without_cost.annualized_return": 0.0774875238104972,
        "1day.excess_return_with_cost.std": 0.0050194877707238,
        "Rank IC": 0.0249354043859447,
        "IC": 0.0072988821492799,
        "1day.excess_return_without_cost.max_drawdown": -0.0927217215098744,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.000919695476993,
        "1day.pa": 0.0,
        "l2.valid": 0.9968629670012896,
        "Rank ICIR": 0.1691117987058406,
        "l2.train": 0.9939532734287198,
        "1day.excess_return_with_cost.information_ratio": 0.3860737091630212,
        "1day.excess_return_with_cost.mean": 0.0001256148979903
      },
      "feedback": {
        "observations": "The experiment successfully tested three variations of the Inertial Capital Persistence (ICP) hypothesis. The results show a significant improvement in predictive power and risk-adjusted returns compared to the previous SOTA. Specifically, the Information Ratio (IR) increased from 0.97 to 1.00, and the Annualized Return saw a substantial jump from 5.2% to 7.7%. The Information Coefficient (IC) also improved from 0.0058 to 0.0073. While the Max Drawdown slightly worsened (-0.092 vs -0.072), the overall return-to-risk profile is superior. The use of volume stability (Mean/Std) as a scaling factor for price momentum appears to be a robust signal for identifying high-conviction trends.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that scaling 20-day momentum by the inverse of volume volatility (signal-to-noise ratio) identifies sustainable trend regimes. The transition from raw momentum to a rank-based and z-score-based combination (as seen in ICP_Rank_Stability and ICP_ZScore_Persistence) likely contributed to the improved IC and Annualized Return by normalizing the signal across the cross-section, reducing the impact of outliers while capturing 'orderly' capital flows.",
        "decision": true,
        "reason": "While the current ICP factor uses volume stability (Mean/Std) as a static multiplier, it doesn't account for the 'direction' of volume changes relative to price. Adding a term that rewards positive price-volume correlation (convergence) while penalizing divergence should further filter out 'exhaustion' moves where volume is stable but no longer supporting price direction. This maintains the core 'low-entropy' concept but adds a dynamic confirmation layer."
      }
    },
    "31839f0b35d6cc76": {
      "factor_id": "31839f0b35d6cc76",
      "factor_name": "ICP_Rank_Stability_20D",
      "factor_expression": "RANK(DELTA($close, 20) / ($close - DELTA($close, 20) + 1e-8)) * RANK(TS_MEAN($volume, 20) / (TS_STD($volume, 20) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(DELTA($close, 20) / ($close - DELTA($close, 20) + 1e-8)) * RANK(TS_MEAN($volume, 20) / (TS_STD($volume, 20) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"ICP_Rank_Stability_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A cross-sectionally ranked version of the Inertial Capital Persistence factor. It captures the relative strength of the price trend adjusted by the inverse coefficient of variation of volume, highlighting assets with the most 'orderly' capital inflows relative to the market.",
      "factor_formulation": "ICP\\_Rank_{20D} = \\text{RANK}(\\frac{\\text{close} - \\text{DELAY}(\\text{close}, 20)}{\\text{DELAY}(\\text{close}, 20)}) \\times \\text{RANK}(\\frac{\\text{TS_MEAN}(\\text{volume}, 20)}{\\text{TS_STD}(\\text{volume}, 20)})",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 9,
        "evolution_phase": "mutation",
        "trajectory_id": "bfa914caa408",
        "parent_trajectory_ids": [
          "b1dcd5e9d4ae"
        ],
        "hypothesis": "Hypothesis: The Inertial Capital Persistence (ICP) factor identifies sustainable trend regimes by scaling the 20-day price momentum by the inverse of volume volatility, specifically targeting periods where price direction is reinforced by stable, low-entropy transaction density.\n                Concise Observation: Parent strategies focusing on price-volume decoupling (residuals) effectively capture short-term mean-reversion but fail to distinguish between noise-driven spikes and the steady, low-variance volume profiles characteristic of institutional trend-building.\n                Concise Justification: Stable volume growth suggests a consensus among market participants and a steady absorption of liquidity, which reduces the probability of immediate price reversals and supports the continuation of the current trend direction.\n                Concise Knowledge: If price momentum is accompanied by a decreasing coefficient of variation in volume, the trend is more likely to persist; when volume variance is high during a price move, the trend is likely driven by noise or transient liquidity shocks rather than informed institutional accumulation.\n                concise Specification: The factor is defined as the 20-day price return multiplied by the ratio of the 20-day mean volume to the 20-day standard deviation of volume, capturing the 'signal-to-noise' ratio of capital flows.\n                ",
        "initial_direction": "Evaluate 'Intraday-to-Interday Volatility Shift' by comparing KLEN to STD5: when intraday ranges exceed 5-day realized volatility, it signals a regime shift in market participants' urgency.",
        "planning_direction": "Evaluate 'Intraday-to-Interday Volatility Shift' by comparing KLEN to STD5: when intraday ranges exceed 5-day realized volatility, it signals a regime shift in market participants' urgency.",
        "created_at": "2026-01-21T12:04:15.776054"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1000213090885694,
        "ICIR": 0.0490687748135292,
        "1day.excess_return_without_cost.std": 0.0050181549718496,
        "1day.excess_return_with_cost.annualized_return": 0.0298963457217139,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003255778311365,
        "1day.excess_return_without_cost.annualized_return": 0.0774875238104972,
        "1day.excess_return_with_cost.std": 0.0050194877707238,
        "Rank IC": 0.0249354043859447,
        "IC": 0.0072988821492799,
        "1day.excess_return_without_cost.max_drawdown": -0.0927217215098744,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.000919695476993,
        "1day.pa": 0.0,
        "l2.valid": 0.9968629670012896,
        "Rank ICIR": 0.1691117987058406,
        "l2.train": 0.9939532734287198,
        "1day.excess_return_with_cost.information_ratio": 0.3860737091630212,
        "1day.excess_return_with_cost.mean": 0.0001256148979903
      },
      "feedback": {
        "observations": "The experiment successfully tested three variations of the Inertial Capital Persistence (ICP) hypothesis. The results show a significant improvement in predictive power and risk-adjusted returns compared to the previous SOTA. Specifically, the Information Ratio (IR) increased from 0.97 to 1.00, and the Annualized Return saw a substantial jump from 5.2% to 7.7%. The Information Coefficient (IC) also improved from 0.0058 to 0.0073. While the Max Drawdown slightly worsened (-0.092 vs -0.072), the overall return-to-risk profile is superior. The use of volume stability (Mean/Std) as a scaling factor for price momentum appears to be a robust signal for identifying high-conviction trends.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that scaling 20-day momentum by the inverse of volume volatility (signal-to-noise ratio) identifies sustainable trend regimes. The transition from raw momentum to a rank-based and z-score-based combination (as seen in ICP_Rank_Stability and ICP_ZScore_Persistence) likely contributed to the improved IC and Annualized Return by normalizing the signal across the cross-section, reducing the impact of outliers while capturing 'orderly' capital flows.",
        "decision": true,
        "reason": "While the current ICP factor uses volume stability (Mean/Std) as a static multiplier, it doesn't account for the 'direction' of volume changes relative to price. Adding a term that rewards positive price-volume correlation (convergence) while penalizing divergence should further filter out 'exhaustion' moves where volume is stable but no longer supporting price direction. This maintains the core 'low-entropy' concept but adds a dynamic confirmation layer."
      }
    },
    "a37a86117b6c227c": {
      "factor_id": "a37a86117b6c227c",
      "factor_name": "ICP_ZScore_Persistence_20D",
      "factor_expression": "ZSCORE(TS_SUM($return, 20)) * (TS_MEAN($volume, 20) / (TS_STD($volume, 20) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"ZSCORE(TS_PCTCHANGE($close, 20)) * (TS_MEAN($volume, 20) / (TS_STD($volume, 20) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"ICP_ZScore_Persistence_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor measures the persistence of a trend by multiplying the 20-day price return z-score by the volume stability (mean/std). It identifies regimes where price momentum is statistically significant and volume volatility is low, indicating a high-conviction trend.",
      "factor_formulation": "ICP\\_ZScore_{20D} = \\text{ZSCORE}(\\text{TS_SUM}(\\text{return}, 20)) \\times (\\frac{\\text{TS_MEAN}(\\text{volume}, 20)}{\\text{TS_STD}(\\text{volume}, 20)})",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 9,
        "evolution_phase": "mutation",
        "trajectory_id": "bfa914caa408",
        "parent_trajectory_ids": [
          "b1dcd5e9d4ae"
        ],
        "hypothesis": "Hypothesis: The Inertial Capital Persistence (ICP) factor identifies sustainable trend regimes by scaling the 20-day price momentum by the inverse of volume volatility, specifically targeting periods where price direction is reinforced by stable, low-entropy transaction density.\n                Concise Observation: Parent strategies focusing on price-volume decoupling (residuals) effectively capture short-term mean-reversion but fail to distinguish between noise-driven spikes and the steady, low-variance volume profiles characteristic of institutional trend-building.\n                Concise Justification: Stable volume growth suggests a consensus among market participants and a steady absorption of liquidity, which reduces the probability of immediate price reversals and supports the continuation of the current trend direction.\n                Concise Knowledge: If price momentum is accompanied by a decreasing coefficient of variation in volume, the trend is more likely to persist; when volume variance is high during a price move, the trend is likely driven by noise or transient liquidity shocks rather than informed institutional accumulation.\n                concise Specification: The factor is defined as the 20-day price return multiplied by the ratio of the 20-day mean volume to the 20-day standard deviation of volume, capturing the 'signal-to-noise' ratio of capital flows.\n                ",
        "initial_direction": "Evaluate 'Intraday-to-Interday Volatility Shift' by comparing KLEN to STD5: when intraday ranges exceed 5-day realized volatility, it signals a regime shift in market participants' urgency.",
        "planning_direction": "Evaluate 'Intraday-to-Interday Volatility Shift' by comparing KLEN to STD5: when intraday ranges exceed 5-day realized volatility, it signals a regime shift in market participants' urgency.",
        "created_at": "2026-01-21T12:04:15.776054"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1000213090885694,
        "ICIR": 0.0490687748135292,
        "1day.excess_return_without_cost.std": 0.0050181549718496,
        "1day.excess_return_with_cost.annualized_return": 0.0298963457217139,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003255778311365,
        "1day.excess_return_without_cost.annualized_return": 0.0774875238104972,
        "1day.excess_return_with_cost.std": 0.0050194877707238,
        "Rank IC": 0.0249354043859447,
        "IC": 0.0072988821492799,
        "1day.excess_return_without_cost.max_drawdown": -0.0927217215098744,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.000919695476993,
        "1day.pa": 0.0,
        "l2.valid": 0.9968629670012896,
        "Rank ICIR": 0.1691117987058406,
        "l2.train": 0.9939532734287198,
        "1day.excess_return_with_cost.information_ratio": 0.3860737091630212,
        "1day.excess_return_with_cost.mean": 0.0001256148979903
      },
      "feedback": {
        "observations": "The experiment successfully tested three variations of the Inertial Capital Persistence (ICP) hypothesis. The results show a significant improvement in predictive power and risk-adjusted returns compared to the previous SOTA. Specifically, the Information Ratio (IR) increased from 0.97 to 1.00, and the Annualized Return saw a substantial jump from 5.2% to 7.7%. The Information Coefficient (IC) also improved from 0.0058 to 0.0073. While the Max Drawdown slightly worsened (-0.092 vs -0.072), the overall return-to-risk profile is superior. The use of volume stability (Mean/Std) as a scaling factor for price momentum appears to be a robust signal for identifying high-conviction trends.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that scaling 20-day momentum by the inverse of volume volatility (signal-to-noise ratio) identifies sustainable trend regimes. The transition from raw momentum to a rank-based and z-score-based combination (as seen in ICP_Rank_Stability and ICP_ZScore_Persistence) likely contributed to the improved IC and Annualized Return by normalizing the signal across the cross-section, reducing the impact of outliers while capturing 'orderly' capital flows.",
        "decision": true,
        "reason": "While the current ICP factor uses volume stability (Mean/Std) as a static multiplier, it doesn't account for the 'direction' of volume changes relative to price. Adding a term that rewards positive price-volume correlation (convergence) while penalizing divergence should further filter out 'exhaustion' moves where volume is stable but no longer supporting price direction. This maintains the core 'low-entropy' concept but adds a dynamic confirmation layer."
      }
    },
    "3c5aabb076f3e31e": {
      "factor_id": "3c5aabb076f3e31e",
      "factor_name": "Institutional_Absorption_RSQR_Factor",
      "factor_expression": "POW(TS_CORR($close, SEQUENCE(10), 10), 2) / (1 + TS_MEAN(($high - $low) / ($close * $volume + 1e-8), 5))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"POW(TS_CORR($close, SEQUENCE(10), 10), 2) / (1 + TS_MEAN(($high - $low) / ($close * $volume + 1e-8), 5))\" # Your output factor expression will be filled in here\n    name = \"Institutional_Absorption_RSQR_Factor\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies institutional accumulation by measuring price trend linearity (RSQR) and volume-weighted volatility. RSQR is calculated as the square of the correlation between price and time. High linearity combined with low volume-weighted price range indicates stealthy buying pressure.",
      "factor_formulation": "RSQR10 = TS\\_CORR(close, SEQUENCE(10), 10)^2, WVMA5 = TS\\_MEAN(\\frac{high-low}{close \\cdot volume}, 5), Factor = \\frac{RSQR10}{1 + WVMA5}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 0,
        "evolution_phase": "original",
        "trajectory_id": "f342699c166b",
        "parent_trajectory_ids": [],
        "hypothesis": "Hypothesis: The 'Institutional Absorption' factor, defined as the product of the 10-day price trend linearity (RSQR10) and the inverse of the 5-day volume-weighted price volatility (WVMA5), predicts positive future returns by identifying stealthy accumulation phases.\n                Concise Observation: Market participants often overlook steady, low-volatility price trends in favor of high-volume breakouts, yet these 'quiet' trends frequently represent more sustainable buying pressure from informed actors.\n                Concise Justification: Institutional investors use execution algorithms to minimize market impact, leading to price paths that are statistically 'smoother' (high RSQR) and less volatile relative to volume (low WVMA) than retail-driven speculative spikes.\n                Concise Knowledge: If a stock exhibits a highly linear price increase (high R-squared) while simultaneously maintaining low volume-weighted volatility, it signifies institutional accumulation that avoids triggering liquidity-seeking algorithms; such periods often precede further price appreciation as supply is absorbed.\n                concise Specification: Calculate RSQR10 as the R-squared of $close over a 10-day linear regression against time, and WVMA5 as the 5-day moving average of the ratio between (high-low)/close and volume; the final factor is RSQR10 divided by (1 + WVMA5).\n                ",
        "initial_direction": "Detect 'Institutional Absorption' by identifying periods of high RSQR10 and low WVMA5: a steady price climb on low relative volume-weighted volatility indicates efficient, non-disruptive buying.",
        "planning_direction": "Detect 'Institutional Absorption' by identifying periods of high RSQR10 and low WVMA5: a steady price climb on low relative volume-weighted volatility indicates efficient, non-disruptive buying.",
        "created_at": "2026-01-20T22:02:53.274315"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1156092444232029,
        "ICIR": 0.0427503408864524,
        "1day.excess_return_without_cost.std": 0.0046946942750529,
        "1day.excess_return_with_cost.annualized_return": -0.0016267993637364,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001920442455047,
        "1day.excess_return_without_cost.annualized_return": 0.0457065304301312,
        "1day.excess_return_with_cost.std": 0.0046972723110519,
        "Rank IC": 0.0248104417101632,
        "IC": 0.0064235342383618,
        "1day.excess_return_without_cost.max_drawdown": -0.098395177543724,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.6310771581633398,
        "1day.pa": 0.0,
        "l2.valid": 0.9963454906016967,
        "Rank ICIR": 0.1691871762746937,
        "l2.train": 0.9937834605149448,
        "1day.excess_return_with_cost.information_ratio": -0.0224491435713705,
        "1day.excess_return_with_cost.mean": -6.83529144427091e-06
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Institutional Absorption' hypothesis. The current results show a significant improvement in the Information Coefficient (IC) reaching 0.006424, which is higher than the SOTA result of 0.005798. However, the risk-adjusted returns (Information Ratio) and the Max Drawdown have deteriorated compared to the SOTA. This suggests that while the signal's predictive correlation with future returns has improved, the stability and tail risk of the resulting portfolio have worsened, likely due to the increased noise or volatility in the current factor implementations.",
        "hypothesis_evaluation": "The hypothesis that price trend linearity (RSQR) combined with low volume-weighted volatility predicts positive returns is partially supported by the improved IC. However, the deterioration in Information Ratio (0.631 vs 0.972) and Max Drawdown (-0.098 vs -0.072) suggests that the current mathematical formulations (specifically the division by volume or the raw Z-score subtraction) might be introducing instability. The 'Institutional_Smoothness_Index' and 'Stealth_Accumulation_Linearity_Z' involve multiple raw features (close, high, low, volume), approaching the complexity limit (ER=4), and the linear combination of Z-scores may be too simplistic for the underlying non-linear distribution of volume.",
        "decision": false,
        "reason": "The current factors suffer from high drawdown, possibly because dividing by volume or using raw volume in the denominator creates extreme values during low-liquidity periods. By shifting to 'Path Efficiency' (e.g., Abs(Close-Close[10]) / Sum(Abs(Close-Close[1]))) and using a rank-based or capped volume adjustment, we can capture the 'stealth' nature of the trend without the mathematical instability of the current formulations. This maintains the core concept of 'smooth trends' while improving the Information Ratio and reducing drawdown through better complexity control and normalization."
      }
    },
    "bc5d49829722cdfb": {
      "factor_id": "bc5d49829722cdfb",
      "factor_name": "Stealth_Accumulation_Linearity_Z",
      "factor_expression": "TS_ZSCORE(TS_CORR($close, SEQUENCE(10), 10), 10) - TS_ZSCORE(($high - $low) / (TS_MEAN($volume, 5) + 1e-8), 10)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_ZSCORE(TS_CORR($close, SEQUENCE(10), 10), 10) - TS_ZSCORE(($high - $low) / (TS_MEAN($volume, 5) + 1e-8), 10)\" # Your output factor expression will be filled in here\n    name = \"Stealth_Accumulation_Linearity_Z\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A variation of the institutional absorption hypothesis that uses Z-scored price trend linearity and inverse volatility. It focuses on the statistical significance of the 'smoothness' of the price path relative to the intensity of price fluctuations per unit of volume.",
      "factor_formulation": "Linearity = TS\\_CORR(close, SEQUENCE(10), 10), RangeVol = \\frac{high-low}{TS\\_MEAN(volume, 5)}, Factor = TS\\_ZSCORE(Linearity, 10) - TS\\_ZSCORE(RangeVol, 10)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 0,
        "evolution_phase": "original",
        "trajectory_id": "f342699c166b",
        "parent_trajectory_ids": [],
        "hypothesis": "Hypothesis: The 'Institutional Absorption' factor, defined as the product of the 10-day price trend linearity (RSQR10) and the inverse of the 5-day volume-weighted price volatility (WVMA5), predicts positive future returns by identifying stealthy accumulation phases.\n                Concise Observation: Market participants often overlook steady, low-volatility price trends in favor of high-volume breakouts, yet these 'quiet' trends frequently represent more sustainable buying pressure from informed actors.\n                Concise Justification: Institutional investors use execution algorithms to minimize market impact, leading to price paths that are statistically 'smoother' (high RSQR) and less volatile relative to volume (low WVMA) than retail-driven speculative spikes.\n                Concise Knowledge: If a stock exhibits a highly linear price increase (high R-squared) while simultaneously maintaining low volume-weighted volatility, it signifies institutional accumulation that avoids triggering liquidity-seeking algorithms; such periods often precede further price appreciation as supply is absorbed.\n                concise Specification: Calculate RSQR10 as the R-squared of $close over a 10-day linear regression against time, and WVMA5 as the 5-day moving average of the ratio between (high-low)/close and volume; the final factor is RSQR10 divided by (1 + WVMA5).\n                ",
        "initial_direction": "Detect 'Institutional Absorption' by identifying periods of high RSQR10 and low WVMA5: a steady price climb on low relative volume-weighted volatility indicates efficient, non-disruptive buying.",
        "planning_direction": "Detect 'Institutional Absorption' by identifying periods of high RSQR10 and low WVMA5: a steady price climb on low relative volume-weighted volatility indicates efficient, non-disruptive buying.",
        "created_at": "2026-01-20T22:02:53.274315"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1156092444232029,
        "ICIR": 0.0427503408864524,
        "1day.excess_return_without_cost.std": 0.0046946942750529,
        "1day.excess_return_with_cost.annualized_return": -0.0016267993637364,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001920442455047,
        "1day.excess_return_without_cost.annualized_return": 0.0457065304301312,
        "1day.excess_return_with_cost.std": 0.0046972723110519,
        "Rank IC": 0.0248104417101632,
        "IC": 0.0064235342383618,
        "1day.excess_return_without_cost.max_drawdown": -0.098395177543724,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.6310771581633398,
        "1day.pa": 0.0,
        "l2.valid": 0.9963454906016967,
        "Rank ICIR": 0.1691871762746937,
        "l2.train": 0.9937834605149448,
        "1day.excess_return_with_cost.information_ratio": -0.0224491435713705,
        "1day.excess_return_with_cost.mean": -6.83529144427091e-06
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Institutional Absorption' hypothesis. The current results show a significant improvement in the Information Coefficient (IC) reaching 0.006424, which is higher than the SOTA result of 0.005798. However, the risk-adjusted returns (Information Ratio) and the Max Drawdown have deteriorated compared to the SOTA. This suggests that while the signal's predictive correlation with future returns has improved, the stability and tail risk of the resulting portfolio have worsened, likely due to the increased noise or volatility in the current factor implementations.",
        "hypothesis_evaluation": "The hypothesis that price trend linearity (RSQR) combined with low volume-weighted volatility predicts positive returns is partially supported by the improved IC. However, the deterioration in Information Ratio (0.631 vs 0.972) and Max Drawdown (-0.098 vs -0.072) suggests that the current mathematical formulations (specifically the division by volume or the raw Z-score subtraction) might be introducing instability. The 'Institutional_Smoothness_Index' and 'Stealth_Accumulation_Linearity_Z' involve multiple raw features (close, high, low, volume), approaching the complexity limit (ER=4), and the linear combination of Z-scores may be too simplistic for the underlying non-linear distribution of volume.",
        "decision": false,
        "reason": "The current factors suffer from high drawdown, possibly because dividing by volume or using raw volume in the denominator creates extreme values during low-liquidity periods. By shifting to 'Path Efficiency' (e.g., Abs(Close-Close[10]) / Sum(Abs(Close-Close[1]))) and using a rank-based or capped volume adjustment, we can capture the 'stealth' nature of the trend without the mathematical instability of the current formulations. This maintains the core concept of 'smooth trends' while improving the Information Ratio and reducing drawdown through better complexity control and normalization."
      }
    },
    "6f62f68be5d1ff49": {
      "factor_id": "6f62f68be5d1ff49",
      "factor_name": "Institutional_Smoothness_Index",
      "factor_expression": "REGBETA($close, SEQUENCE(10), 10) / (TS_MEAN(($high - $low) / ($close + 1e-8), 10) * TS_MEAN($volume, 10) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"REGBETA($close, SEQUENCE(10), 10) / (TS_MEAN(($high - $low) / ($close + 1e-8), 10) * TS_MEAN($volume, 10) + 1e-8)\" # Your output factor expression will be filled in here\n    name = \"Institutional_Smoothness_Index\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor measures the ratio of trend strength (captured by the regression beta of price against time) to the average intraday volatility, adjusted for volume. High values suggest a strong, controlled trend characteristic of algorithmic execution.",
      "factor_formulation": "Trend = REGBETA(close, SEQUENCE(10), 10), Volatility = TS\\_MEAN(\\frac{high-low}{close}, 10), Factor = \\frac{Trend}{Volatility \\cdot TS\\_MEAN(volume, 10)}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 0,
        "evolution_phase": "original",
        "trajectory_id": "f342699c166b",
        "parent_trajectory_ids": [],
        "hypothesis": "Hypothesis: The 'Institutional Absorption' factor, defined as the product of the 10-day price trend linearity (RSQR10) and the inverse of the 5-day volume-weighted price volatility (WVMA5), predicts positive future returns by identifying stealthy accumulation phases.\n                Concise Observation: Market participants often overlook steady, low-volatility price trends in favor of high-volume breakouts, yet these 'quiet' trends frequently represent more sustainable buying pressure from informed actors.\n                Concise Justification: Institutional investors use execution algorithms to minimize market impact, leading to price paths that are statistically 'smoother' (high RSQR) and less volatile relative to volume (low WVMA) than retail-driven speculative spikes.\n                Concise Knowledge: If a stock exhibits a highly linear price increase (high R-squared) while simultaneously maintaining low volume-weighted volatility, it signifies institutional accumulation that avoids triggering liquidity-seeking algorithms; such periods often precede further price appreciation as supply is absorbed.\n                concise Specification: Calculate RSQR10 as the R-squared of $close over a 10-day linear regression against time, and WVMA5 as the 5-day moving average of the ratio between (high-low)/close and volume; the final factor is RSQR10 divided by (1 + WVMA5).\n                ",
        "initial_direction": "Detect 'Institutional Absorption' by identifying periods of high RSQR10 and low WVMA5: a steady price climb on low relative volume-weighted volatility indicates efficient, non-disruptive buying.",
        "planning_direction": "Detect 'Institutional Absorption' by identifying periods of high RSQR10 and low WVMA5: a steady price climb on low relative volume-weighted volatility indicates efficient, non-disruptive buying.",
        "created_at": "2026-01-20T22:02:53.274315"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1156092444232029,
        "ICIR": 0.0427503408864524,
        "1day.excess_return_without_cost.std": 0.0046946942750529,
        "1day.excess_return_with_cost.annualized_return": -0.0016267993637364,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001920442455047,
        "1day.excess_return_without_cost.annualized_return": 0.0457065304301312,
        "1day.excess_return_with_cost.std": 0.0046972723110519,
        "Rank IC": 0.0248104417101632,
        "IC": 0.0064235342383618,
        "1day.excess_return_without_cost.max_drawdown": -0.098395177543724,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.6310771581633398,
        "1day.pa": 0.0,
        "l2.valid": 0.9963454906016967,
        "Rank ICIR": 0.1691871762746937,
        "l2.train": 0.9937834605149448,
        "1day.excess_return_with_cost.information_ratio": -0.0224491435713705,
        "1day.excess_return_with_cost.mean": -6.83529144427091e-06
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Institutional Absorption' hypothesis. The current results show a significant improvement in the Information Coefficient (IC) reaching 0.006424, which is higher than the SOTA result of 0.005798. However, the risk-adjusted returns (Information Ratio) and the Max Drawdown have deteriorated compared to the SOTA. This suggests that while the signal's predictive correlation with future returns has improved, the stability and tail risk of the resulting portfolio have worsened, likely due to the increased noise or volatility in the current factor implementations.",
        "hypothesis_evaluation": "The hypothesis that price trend linearity (RSQR) combined with low volume-weighted volatility predicts positive returns is partially supported by the improved IC. However, the deterioration in Information Ratio (0.631 vs 0.972) and Max Drawdown (-0.098 vs -0.072) suggests that the current mathematical formulations (specifically the division by volume or the raw Z-score subtraction) might be introducing instability. The 'Institutional_Smoothness_Index' and 'Stealth_Accumulation_Linearity_Z' involve multiple raw features (close, high, low, volume), approaching the complexity limit (ER=4), and the linear combination of Z-scores may be too simplistic for the underlying non-linear distribution of volume.",
        "decision": false,
        "reason": "The current factors suffer from high drawdown, possibly because dividing by volume or using raw volume in the denominator creates extreme values during low-liquidity periods. By shifting to 'Path Efficiency' (e.g., Abs(Close-Close[10]) / Sum(Abs(Close-Close[1]))) and using a rank-based or capped volume adjustment, we can capture the 'stealth' nature of the trend without the mathematical instability of the current formulations. This maintains the core concept of 'smooth trends' while improving the Information Ratio and reducing drawdown through better complexity control and normalization."
      }
    },
    "5d44c8d9c98b0822": {
      "factor_id": "5d44c8d9c98b0822",
      "factor_name": "Overnight_Gap_Volume_Normalized_5D",
      "factor_expression": "(($open / DELAY($close, 1)) - 1) / (TS_MEAN($volume, 5) / ($volume + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(($open / DELAY($close, 1)) - 1) / (TS_MEAN($volume, 5) / ($volume + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Overnight_Gap_Volume_Normalized_5D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor captures the overnight sentiment gap normalized by the 5-day average volume. Large price gaps occurring on relatively low liquidity are hypothesized to be noise-driven and prone to mean-reversion. A higher value (positive gap with low volume) suggests a stronger reversal signal.",
      "factor_formulation": "OGVN = \\frac{($open / \\text{DELAY}($close, 1)) - 1}{\\text{TS_MEAN}($volume, 5) / $volume}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 1,
        "evolution_phase": "mutation",
        "trajectory_id": "0a41548897e3",
        "parent_trajectory_ids": [
          "7c72861cebb3"
        ],
        "hypothesis": "Hypothesis: The 'Overnight Sentiment Gap Reversion' factor, defined as the opening gap normalized by the 5-day average volume, negatively predicts future returns as liquidity-driven overnight price jumps tend to mean-revert when not supported by significant volume.\n                Concise Observation: The parent strategy focused on daily low-price support and volume stability (Support Integrity), whereas overnight gaps often exhibit short-term reversal patterns that are independent of intraday shadow formations.\n                Concise Justification: Overnight gaps represent a period of non-continuous trading where small order imbalances can cause disproportionate price moves; normalizing this gap by recent volume helps distinguish between fundamental news-driven gaps and mean-reverting sentiment noise.\n                Concise Knowledge: If a price gap occurs on low relative volume, it is likely driven by noise or retail sentiment; when such gaps are extreme relative to historical volatility, they tend to revert as institutional liquidity providers stabilize the price.\n                concise Specification: The factor is calculated as the gap (Open / PrevClose - 1) divided by the 5-day rolling average volume; it expects a negative correlation with next-day returns, particularly when the gap magnitude is high and volume is low.\n                ",
        "initial_direction": "Analyze 'Support Integrity' under stress by crossing KLOW with VSTD5: strong lower shadows accompanied by low volume volatility indicate stable accumulation at price floors.",
        "planning_direction": "Analyze 'Support Integrity' under stress by crossing KLOW with VSTD5: strong lower shadows accompanied by low volume volatility indicate stable accumulation at price floors.",
        "created_at": "2026-01-20T22:27:43.048238"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0999026815970509,
        "ICIR": 0.0613443692253477,
        "1day.excess_return_without_cost.std": 0.004291502317299,
        "1day.excess_return_with_cost.annualized_return": 0.0205821872947682,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002837513491183,
        "1day.excess_return_without_cost.annualized_return": 0.0675328210901718,
        "1day.excess_return_with_cost.std": 0.0042927164759873,
        "Rank IC": 0.0244192754056584,
        "IC": 0.0080146497251399,
        "1day.excess_return_without_cost.max_drawdown": -0.0903249510880372,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.0200396704010748,
        "1day.pa": 0.0,
        "l2.valid": 0.9962354646623854,
        "Rank ICIR": 0.1892736201080559,
        "l2.train": 0.9935016590262278,
        "1day.excess_return_with_cost.information_ratio": 0.310792723394301,
        "1day.excess_return_with_cost.mean": 8.647977854944641e-05
      },
      "feedback": {
        "observations": "The current iteration focused on the 'Overnight Sentiment Gap Reversion' framework, testing three variations: a direct volume-normalized gap, a volatility-adjusted version, and a cross-sectional rank-based interaction. The results show a significant improvement in predictive power, with the Information Ratio (IR) increasing from 0.97 to 1.02 and the IC rising from 0.0058 to 0.0080. The annualized return also saw a healthy boost to 6.75%. While the Max Drawdown slightly deepened, the overall risk-adjusted performance and signal strength (IC) indicate that the interaction between price gaps and relative volume is a robust alpha source.",
        "hypothesis_evaluation": "The results strongly support the hypothesis. The 'Ranked_Overnight_Sentiment_Reversal' factor likely contributed most to the performance by isolating stocks where the price jump is most disconnected from liquidity (high rank in gap, high rank in 'low-volume intensity'). This confirms that overnight sentiment without volume support is prone to mean-reversion. The inclusion of volatility adjustment in one of the factors also likely helped in filtering out noise in high-beta stocks.",
        "decision": true,
        "reason": "Current results show that volume-normalized gaps work well. However, price action theory suggests that a 'gap-up' against a 'down-trend' (exhaustion) is more likely to revert than a 'gap-up' following a strong 'up-trend' (continuation). By incorporating the sign of the previous day's intraday return and scaling by a longer-term volatility window (e.g., 20 days), we can better distinguish between 'breakout' gaps and 'exhaustion' gaps, reducing the drawdown seen in the current iteration."
      }
    },
    "cdb1fd95589346d1": {
      "factor_id": "cdb1fd95589346d1",
      "factor_name": "Gap_Reversion_Volatility_Adjusted",
      "factor_expression": "(($open / DELAY($close, 1)) - 1) / (TS_STD($return, 20) * (TS_MEAN($volume, 5) / ($volume + 1e-8)) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"-(($open / DELAY($close, 1)) - 1) / ((TS_STD(TS_PCTCHANGE($close, 1), 20) + 1e-8) * (TS_MEAN($volume, 5) / ($volume + 1e-8)))\" # Your output factor expression will be filled in here\n    name = \"Gap_Reversion_Volatility_Adjusted\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies overnight gaps that are extreme relative to historical price volatility and normalized by volume turnover. It targets mean-reversion by highlighting gaps that lack the volume support necessary to sustain the price jump.",
      "factor_formulation": "GRVA = \\frac{($open - \\text{DELAY}($close, 1)) / \\text{DELAY}($close, 1)}{\\text{TS_STD}($return, 20) * (\\text{TS_MEAN}($volume, 5) / $volume)}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 1,
        "evolution_phase": "mutation",
        "trajectory_id": "0a41548897e3",
        "parent_trajectory_ids": [
          "7c72861cebb3"
        ],
        "hypothesis": "Hypothesis: The 'Overnight Sentiment Gap Reversion' factor, defined as the opening gap normalized by the 5-day average volume, negatively predicts future returns as liquidity-driven overnight price jumps tend to mean-revert when not supported by significant volume.\n                Concise Observation: The parent strategy focused on daily low-price support and volume stability (Support Integrity), whereas overnight gaps often exhibit short-term reversal patterns that are independent of intraday shadow formations.\n                Concise Justification: Overnight gaps represent a period of non-continuous trading where small order imbalances can cause disproportionate price moves; normalizing this gap by recent volume helps distinguish between fundamental news-driven gaps and mean-reverting sentiment noise.\n                Concise Knowledge: If a price gap occurs on low relative volume, it is likely driven by noise or retail sentiment; when such gaps are extreme relative to historical volatility, they tend to revert as institutional liquidity providers stabilize the price.\n                concise Specification: The factor is calculated as the gap (Open / PrevClose - 1) divided by the 5-day rolling average volume; it expects a negative correlation with next-day returns, particularly when the gap magnitude is high and volume is low.\n                ",
        "initial_direction": "Analyze 'Support Integrity' under stress by crossing KLOW with VSTD5: strong lower shadows accompanied by low volume volatility indicate stable accumulation at price floors.",
        "planning_direction": "Analyze 'Support Integrity' under stress by crossing KLOW with VSTD5: strong lower shadows accompanied by low volume volatility indicate stable accumulation at price floors.",
        "created_at": "2026-01-20T22:27:43.048238"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0999026815970509,
        "ICIR": 0.0613443692253477,
        "1day.excess_return_without_cost.std": 0.004291502317299,
        "1day.excess_return_with_cost.annualized_return": 0.0205821872947682,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002837513491183,
        "1day.excess_return_without_cost.annualized_return": 0.0675328210901718,
        "1day.excess_return_with_cost.std": 0.0042927164759873,
        "Rank IC": 0.0244192754056584,
        "IC": 0.0080146497251399,
        "1day.excess_return_without_cost.max_drawdown": -0.0903249510880372,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.0200396704010748,
        "1day.pa": 0.0,
        "l2.valid": 0.9962354646623854,
        "Rank ICIR": 0.1892736201080559,
        "l2.train": 0.9935016590262278,
        "1day.excess_return_with_cost.information_ratio": 0.310792723394301,
        "1day.excess_return_with_cost.mean": 8.647977854944641e-05
      },
      "feedback": {
        "observations": "The current iteration focused on the 'Overnight Sentiment Gap Reversion' framework, testing three variations: a direct volume-normalized gap, a volatility-adjusted version, and a cross-sectional rank-based interaction. The results show a significant improvement in predictive power, with the Information Ratio (IR) increasing from 0.97 to 1.02 and the IC rising from 0.0058 to 0.0080. The annualized return also saw a healthy boost to 6.75%. While the Max Drawdown slightly deepened, the overall risk-adjusted performance and signal strength (IC) indicate that the interaction between price gaps and relative volume is a robust alpha source.",
        "hypothesis_evaluation": "The results strongly support the hypothesis. The 'Ranked_Overnight_Sentiment_Reversal' factor likely contributed most to the performance by isolating stocks where the price jump is most disconnected from liquidity (high rank in gap, high rank in 'low-volume intensity'). This confirms that overnight sentiment without volume support is prone to mean-reversion. The inclusion of volatility adjustment in one of the factors also likely helped in filtering out noise in high-beta stocks.",
        "decision": true,
        "reason": "Current results show that volume-normalized gaps work well. However, price action theory suggests that a 'gap-up' against a 'down-trend' (exhaustion) is more likely to revert than a 'gap-up' following a strong 'up-trend' (continuation). By incorporating the sign of the previous day's intraday return and scaling by a longer-term volatility window (e.g., 20 days), we can better distinguish between 'breakout' gaps and 'exhaustion' gaps, reducing the drawdown seen in the current iteration."
      }
    },
    "3825ed24e8166cb7": {
      "factor_id": "3825ed24e8166cb7",
      "factor_name": "Ranked_Overnight_Sentiment_Reversal",
      "factor_expression": "RANK(($open / DELAY($close, 1)) - 1) * RANK(TS_MEAN($volume, 5) / ($volume + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(($open / DELAY($close, 1)) - 1) * RANK(TS_MEAN($volume, 5) / ($volume + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Ranked_Overnight_Sentiment_Reversal\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A cross-sectional factor that ranks the overnight gap and divides it by the relative volume intensity. It identifies stocks with the most 'fragile' gaps (high price change, low relative volume) across the universe to predict short-term negative returns.",
      "factor_formulation": "ROSR = \\text{RANK}(($open / \\text{DELAY}($close, 1)) - 1) * \\text{RANK}(\\text{TS_MEAN}($volume, 5) / $volume)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 1,
        "evolution_phase": "mutation",
        "trajectory_id": "0a41548897e3",
        "parent_trajectory_ids": [
          "7c72861cebb3"
        ],
        "hypothesis": "Hypothesis: The 'Overnight Sentiment Gap Reversion' factor, defined as the opening gap normalized by the 5-day average volume, negatively predicts future returns as liquidity-driven overnight price jumps tend to mean-revert when not supported by significant volume.\n                Concise Observation: The parent strategy focused on daily low-price support and volume stability (Support Integrity), whereas overnight gaps often exhibit short-term reversal patterns that are independent of intraday shadow formations.\n                Concise Justification: Overnight gaps represent a period of non-continuous trading where small order imbalances can cause disproportionate price moves; normalizing this gap by recent volume helps distinguish between fundamental news-driven gaps and mean-reverting sentiment noise.\n                Concise Knowledge: If a price gap occurs on low relative volume, it is likely driven by noise or retail sentiment; when such gaps are extreme relative to historical volatility, they tend to revert as institutional liquidity providers stabilize the price.\n                concise Specification: The factor is calculated as the gap (Open / PrevClose - 1) divided by the 5-day rolling average volume; it expects a negative correlation with next-day returns, particularly when the gap magnitude is high and volume is low.\n                ",
        "initial_direction": "Analyze 'Support Integrity' under stress by crossing KLOW with VSTD5: strong lower shadows accompanied by low volume volatility indicate stable accumulation at price floors.",
        "planning_direction": "Analyze 'Support Integrity' under stress by crossing KLOW with VSTD5: strong lower shadows accompanied by low volume volatility indicate stable accumulation at price floors.",
        "created_at": "2026-01-20T22:27:43.048238"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0999026815970509,
        "ICIR": 0.0613443692253477,
        "1day.excess_return_without_cost.std": 0.004291502317299,
        "1day.excess_return_with_cost.annualized_return": 0.0205821872947682,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002837513491183,
        "1day.excess_return_without_cost.annualized_return": 0.0675328210901718,
        "1day.excess_return_with_cost.std": 0.0042927164759873,
        "Rank IC": 0.0244192754056584,
        "IC": 0.0080146497251399,
        "1day.excess_return_without_cost.max_drawdown": -0.0903249510880372,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.0200396704010748,
        "1day.pa": 0.0,
        "l2.valid": 0.9962354646623854,
        "Rank ICIR": 0.1892736201080559,
        "l2.train": 0.9935016590262278,
        "1day.excess_return_with_cost.information_ratio": 0.310792723394301,
        "1day.excess_return_with_cost.mean": 8.647977854944641e-05
      },
      "feedback": {
        "observations": "The current iteration focused on the 'Overnight Sentiment Gap Reversion' framework, testing three variations: a direct volume-normalized gap, a volatility-adjusted version, and a cross-sectional rank-based interaction. The results show a significant improvement in predictive power, with the Information Ratio (IR) increasing from 0.97 to 1.02 and the IC rising from 0.0058 to 0.0080. The annualized return also saw a healthy boost to 6.75%. While the Max Drawdown slightly deepened, the overall risk-adjusted performance and signal strength (IC) indicate that the interaction between price gaps and relative volume is a robust alpha source.",
        "hypothesis_evaluation": "The results strongly support the hypothesis. The 'Ranked_Overnight_Sentiment_Reversal' factor likely contributed most to the performance by isolating stocks where the price jump is most disconnected from liquidity (high rank in gap, high rank in 'low-volume intensity'). This confirms that overnight sentiment without volume support is prone to mean-reversion. The inclusion of volatility adjustment in one of the factors also likely helped in filtering out noise in high-beta stocks.",
        "decision": true,
        "reason": "Current results show that volume-normalized gaps work well. However, price action theory suggests that a 'gap-up' against a 'down-trend' (exhaustion) is more likely to revert than a 'gap-up' following a strong 'up-trend' (continuation). By incorporating the sign of the previous day's intraday return and scaling by a longer-term volatility window (e.g., 20 days), we can better distinguish between 'breakout' gaps and 'exhaustion' gaps, reducing the drawdown seen in the current iteration."
      }
    },
    "0016abc35f0b7a77": {
      "factor_id": "0016abc35f0b7a77",
      "factor_name": "MSIA_Resonance_10D",
      "factor_expression": "RANK(TS_CORR($return, $volume, 10)) * (1.0 - RANK(TS_MEAN(($high - $low) / ($close + 1e-8), 10)))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(TS_CORR(TS_PCTCHANGE($close, 1), $volume, 10)) * (1.0 - RANK(TS_MEAN(($high - $low) / ($close + 0.00001), 10)))\" # Your output factor expression will be filled in here\n    name = \"MSIA_Resonance_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies informed accumulation by combining low intraday price dispersion with high price-volume correlation. It targets stocks where price range is compressed relative to the close price (signaling low impact) while volume strongly supports the direction of price changes (signaling informed trading).",
      "factor_formulation": "\\text{RANK}(\\text{TS\\_CORR}(\\text{return}, \\text{volume}, 10)) * (1 - \\text{RANK}(\\text{TS\\_MEAN}(\\frac{\\text{high} - \\text{low}}{\\text{close}}, 10)))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 9,
        "evolution_phase": "mutation",
        "trajectory_id": "31b253f3f764",
        "parent_trajectory_ids": [
          "387975e43d62"
        ],
        "hypothesis": "Hypothesis: The 'Micro-Structural Information Asymmetry' (MSIA) factor identifies trend incubation by detecting periods where low intraday price dispersion (High-Low range) coincides with high volume-weighted price directionality, signaling informed accumulation before a volatility expansion.\n                Concise Observation: While the parent strategy (FES) successfully captured trend exhaustion via high dispersion and linearity, it failed to identify the quiet accumulation phases where volatility is compressed but volume-price resonance is high.\n                Concise Justification: Informed traders often minimize price impact during accumulation, leading to low intraday volatility (dispersion); however, their presence is revealed through a high correlation between price movement and volume (signed volume), distinguishing 'smart' accumulation from 'noisy' sideways trading.\n                Concise Knowledge: If a stock exhibits low price dispersion alongside high 'signed' volume concentration, it indicates institutional absorption of liquidity; when these conditions are met, the probability of a subsequent directional breakout increases as information asymmetry is resolved.\n                concise Specification: The factor is defined as the product of the inverse Rank of 10-day average intraday range (1/Rank(($high-$low)/$close)) and the 10-day correlation between price change and volume, specifically focusing on the bottom quartile of volatility and top quartile of volume-price resonance.\n                ",
        "initial_direction": "Examine 'Volatility Quality' by conditioning KLEN on WVMA5: high intraday range with low price-volume resonance may indicate noise, whereas high resonance suggests institutional participation.",
        "planning_direction": "Examine 'Volatility Quality' by conditioning KLEN on WVMA5: high intraday range with low price-volume resonance may indicate noise, whereas high resonance suggests institutional participation.",
        "created_at": "2026-01-21T11:38:36.498783"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0962934879318825,
        "ICIR": 0.0489811307563156,
        "1day.excess_return_without_cost.std": 0.0042583474903097,
        "1day.excess_return_with_cost.annualized_return": 0.0260412021184194,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003056281209863,
        "1day.excess_return_without_cost.annualized_return": 0.07273949279475,
        "1day.excess_return_with_cost.std": 0.0042595346928909,
        "Rank IC": 0.0242970025498205,
        "IC": 0.0069688891293137,
        "1day.excess_return_without_cost.max_drawdown": -0.07674656553098,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.1072372601378095,
        "1day.pa": 0.0,
        "l2.valid": 0.9965089813588252,
        "Rank ICIR": 0.1784864229840788,
        "l2.train": 0.9938712873526044,
        "1day.excess_return_with_cost.information_ratio": 0.3962875148571084,
        "1day.excess_return_with_cost.mean": 0.0001094168156236
      },
      "feedback": {
        "observations": "The current iteration of the 'Micro-Structural Information Asymmetry' (MSIA) framework has yielded significant performance gains. Specifically, the MSIA_Directional_Efficiency_10D factor (or the combined ensemble) has achieved an annualized return of 7.27% compared to the SOTA's 5.20%, and an Information Ratio (IR) of 1.11 compared to 0.97. The IC has also improved to 0.0069. While the maximum drawdown increased slightly (-0.076 vs -0.072), the risk-adjusted return profile is substantially stronger. The use of a ratio-based approach in MSIA_Directional_Efficiency_10D appears more effective at capturing the 'efficiency' of price movement than the additive Z-score or multiplicative Rank methods used in previous tasks.",
        "hypothesis_evaluation": "The results strongly support the MSIA hypothesis. The core ideathat low intraday dispersion coupled with high price-volume correlation signals informed accumulationis validated by the improved IC and IR. The 'Efficiency' formulation (Correlation / Range) suggests that the relationship is non-linear and that the compression of the denominator (volatility) exponentially magnifies the signal of the numerator (informed volume directionality).",
        "decision": true,
        "reason": "While the current 10-day efficiency ratio is strong, it may be susceptible to short-term noise. By introducing a 'Stability' component (e.g., the inverse of the standard deviation of volume over the same period), we can filter for stocks where the accumulation is steady. Furthermore, replacing the simple price range with a 'Volatility-Adjusted Range' (Range / ATR) could normalize the factor across different market regimes, improving the Max Drawdown which slightly deteriorated in this run."
      }
    },
    "a0b9064d7871b56c": {
      "factor_id": "a0b9064d7871b56c",
      "factor_name": "MSIA_Accumulation_ZScore_20D",
      "factor_expression": "TS_ZSCORE(TS_CORR($return, $volume, 20), 20) - TS_ZSCORE(($high - $low) / ($close + 1e-8), 20)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_ZSCORE(TS_CORR(TS_PCTCHANGE($close, 1), $volume, 20), 20) - TS_ZSCORE(($high - $low) / ($close + 0.00000001), 20)\" # Your output factor expression will be filled in here\n    name = \"MSIA_Accumulation_ZScore_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A refined version of the MSIA hypothesis using Z-scores to identify extreme divergence between price volatility and volume-price resonance. It captures the 'quiet accumulation' phase by looking for high directional volume intensity during periods of below-average price dispersion over a 20-day window.",
      "factor_formulation": "\\text{TS\\_ZSCORE}(\\text{TS\\_CORR}(\\text{return}, \\text{volume}, 20), 20) - \\text{TS\\_ZSCORE}(\\frac{\\text{high} - \\text{low}}{\\text{close}}, 20)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 9,
        "evolution_phase": "mutation",
        "trajectory_id": "31b253f3f764",
        "parent_trajectory_ids": [
          "387975e43d62"
        ],
        "hypothesis": "Hypothesis: The 'Micro-Structural Information Asymmetry' (MSIA) factor identifies trend incubation by detecting periods where low intraday price dispersion (High-Low range) coincides with high volume-weighted price directionality, signaling informed accumulation before a volatility expansion.\n                Concise Observation: While the parent strategy (FES) successfully captured trend exhaustion via high dispersion and linearity, it failed to identify the quiet accumulation phases where volatility is compressed but volume-price resonance is high.\n                Concise Justification: Informed traders often minimize price impact during accumulation, leading to low intraday volatility (dispersion); however, their presence is revealed through a high correlation between price movement and volume (signed volume), distinguishing 'smart' accumulation from 'noisy' sideways trading.\n                Concise Knowledge: If a stock exhibits low price dispersion alongside high 'signed' volume concentration, it indicates institutional absorption of liquidity; when these conditions are met, the probability of a subsequent directional breakout increases as information asymmetry is resolved.\n                concise Specification: The factor is defined as the product of the inverse Rank of 10-day average intraday range (1/Rank(($high-$low)/$close)) and the 10-day correlation between price change and volume, specifically focusing on the bottom quartile of volatility and top quartile of volume-price resonance.\n                ",
        "initial_direction": "Examine 'Volatility Quality' by conditioning KLEN on WVMA5: high intraday range with low price-volume resonance may indicate noise, whereas high resonance suggests institutional participation.",
        "planning_direction": "Examine 'Volatility Quality' by conditioning KLEN on WVMA5: high intraday range with low price-volume resonance may indicate noise, whereas high resonance suggests institutional participation.",
        "created_at": "2026-01-21T11:38:36.498783"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0962934879318825,
        "ICIR": 0.0489811307563156,
        "1day.excess_return_without_cost.std": 0.0042583474903097,
        "1day.excess_return_with_cost.annualized_return": 0.0260412021184194,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003056281209863,
        "1day.excess_return_without_cost.annualized_return": 0.07273949279475,
        "1day.excess_return_with_cost.std": 0.0042595346928909,
        "Rank IC": 0.0242970025498205,
        "IC": 0.0069688891293137,
        "1day.excess_return_without_cost.max_drawdown": -0.07674656553098,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.1072372601378095,
        "1day.pa": 0.0,
        "l2.valid": 0.9965089813588252,
        "Rank ICIR": 0.1784864229840788,
        "l2.train": 0.9938712873526044,
        "1day.excess_return_with_cost.information_ratio": 0.3962875148571084,
        "1day.excess_return_with_cost.mean": 0.0001094168156236
      },
      "feedback": {
        "observations": "The current iteration of the 'Micro-Structural Information Asymmetry' (MSIA) framework has yielded significant performance gains. Specifically, the MSIA_Directional_Efficiency_10D factor (or the combined ensemble) has achieved an annualized return of 7.27% compared to the SOTA's 5.20%, and an Information Ratio (IR) of 1.11 compared to 0.97. The IC has also improved to 0.0069. While the maximum drawdown increased slightly (-0.076 vs -0.072), the risk-adjusted return profile is substantially stronger. The use of a ratio-based approach in MSIA_Directional_Efficiency_10D appears more effective at capturing the 'efficiency' of price movement than the additive Z-score or multiplicative Rank methods used in previous tasks.",
        "hypothesis_evaluation": "The results strongly support the MSIA hypothesis. The core ideathat low intraday dispersion coupled with high price-volume correlation signals informed accumulationis validated by the improved IC and IR. The 'Efficiency' formulation (Correlation / Range) suggests that the relationship is non-linear and that the compression of the denominator (volatility) exponentially magnifies the signal of the numerator (informed volume directionality).",
        "decision": true,
        "reason": "While the current 10-day efficiency ratio is strong, it may be susceptible to short-term noise. By introducing a 'Stability' component (e.g., the inverse of the standard deviation of volume over the same period), we can filter for stocks where the accumulation is steady. Furthermore, replacing the simple price range with a 'Volatility-Adjusted Range' (Range / ATR) could normalize the factor across different market regimes, improving the Max Drawdown which slightly deteriorated in this run."
      }
    },
    "e09f77241280cb3a": {
      "factor_id": "e09f77241280cb3a",
      "factor_name": "MSIA_Directional_Efficiency_10D",
      "factor_expression": "TS_CORR($return, $volume, 10) / (TS_MEAN(($high - $low) / ($close + 1e-8), 10) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_CORR(TS_PCTCHANGE($close, 1), $volume, 10) / (TS_MEAN(($high - $low) / ($close + 0.000001), 10) + 0.000001)\" # Your output factor expression will be filled in here\n    name = \"MSIA_Directional_Efficiency_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor measures 'Micro-Structural Information Asymmetry' by calculating the ratio of price-volume resonance to the average intraday range. High values indicate that volume is efficiently driving price direction with minimal intraday volatility, a hallmark of institutional absorption.",
      "factor_formulation": "\\frac{\\text{TS\\_CORR}(\\text{return}, \\text{volume}, 10)}{\\text{TS\\_MEAN}(\\frac{\\text{high} - \\text{low}}{\\text{close}}, 10)}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 9,
        "evolution_phase": "mutation",
        "trajectory_id": "31b253f3f764",
        "parent_trajectory_ids": [
          "387975e43d62"
        ],
        "hypothesis": "Hypothesis: The 'Micro-Structural Information Asymmetry' (MSIA) factor identifies trend incubation by detecting periods where low intraday price dispersion (High-Low range) coincides with high volume-weighted price directionality, signaling informed accumulation before a volatility expansion.\n                Concise Observation: While the parent strategy (FES) successfully captured trend exhaustion via high dispersion and linearity, it failed to identify the quiet accumulation phases where volatility is compressed but volume-price resonance is high.\n                Concise Justification: Informed traders often minimize price impact during accumulation, leading to low intraday volatility (dispersion); however, their presence is revealed through a high correlation between price movement and volume (signed volume), distinguishing 'smart' accumulation from 'noisy' sideways trading.\n                Concise Knowledge: If a stock exhibits low price dispersion alongside high 'signed' volume concentration, it indicates institutional absorption of liquidity; when these conditions are met, the probability of a subsequent directional breakout increases as information asymmetry is resolved.\n                concise Specification: The factor is defined as the product of the inverse Rank of 10-day average intraday range (1/Rank(($high-$low)/$close)) and the 10-day correlation between price change and volume, specifically focusing on the bottom quartile of volatility and top quartile of volume-price resonance.\n                ",
        "initial_direction": "Examine 'Volatility Quality' by conditioning KLEN on WVMA5: high intraday range with low price-volume resonance may indicate noise, whereas high resonance suggests institutional participation.",
        "planning_direction": "Examine 'Volatility Quality' by conditioning KLEN on WVMA5: high intraday range with low price-volume resonance may indicate noise, whereas high resonance suggests institutional participation.",
        "created_at": "2026-01-21T11:38:36.498783"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0962934879318825,
        "ICIR": 0.0489811307563156,
        "1day.excess_return_without_cost.std": 0.0042583474903097,
        "1day.excess_return_with_cost.annualized_return": 0.0260412021184194,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003056281209863,
        "1day.excess_return_without_cost.annualized_return": 0.07273949279475,
        "1day.excess_return_with_cost.std": 0.0042595346928909,
        "Rank IC": 0.0242970025498205,
        "IC": 0.0069688891293137,
        "1day.excess_return_without_cost.max_drawdown": -0.07674656553098,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.1072372601378095,
        "1day.pa": 0.0,
        "l2.valid": 0.9965089813588252,
        "Rank ICIR": 0.1784864229840788,
        "l2.train": 0.9938712873526044,
        "1day.excess_return_with_cost.information_ratio": 0.3962875148571084,
        "1day.excess_return_with_cost.mean": 0.0001094168156236
      },
      "feedback": {
        "observations": "The current iteration of the 'Micro-Structural Information Asymmetry' (MSIA) framework has yielded significant performance gains. Specifically, the MSIA_Directional_Efficiency_10D factor (or the combined ensemble) has achieved an annualized return of 7.27% compared to the SOTA's 5.20%, and an Information Ratio (IR) of 1.11 compared to 0.97. The IC has also improved to 0.0069. While the maximum drawdown increased slightly (-0.076 vs -0.072), the risk-adjusted return profile is substantially stronger. The use of a ratio-based approach in MSIA_Directional_Efficiency_10D appears more effective at capturing the 'efficiency' of price movement than the additive Z-score or multiplicative Rank methods used in previous tasks.",
        "hypothesis_evaluation": "The results strongly support the MSIA hypothesis. The core ideathat low intraday dispersion coupled with high price-volume correlation signals informed accumulationis validated by the improved IC and IR. The 'Efficiency' formulation (Correlation / Range) suggests that the relationship is non-linear and that the compression of the denominator (volatility) exponentially magnifies the signal of the numerator (informed volume directionality).",
        "decision": true,
        "reason": "While the current 10-day efficiency ratio is strong, it may be susceptible to short-term noise. By introducing a 'Stability' component (e.g., the inverse of the standard deviation of volume over the same period), we can filter for stocks where the accumulation is steady. Furthermore, replacing the simple price range with a 'Volatility-Adjusted Range' (Range / ATR) could normalize the factor across different market regimes, improving the Max Drawdown which slightly deteriorated in this run."
      }
    },
    "9ba52248ff595679": {
      "factor_id": "9ba52248ff595679",
      "factor_name": "Inst_Gap_Stability_5D",
      "factor_expression": "(($open - DELAY($close, 1)) / ($high - $low + 1e-8)) * ((MIN($open, $close) - $low) / (TS_STD($volume, 5) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(($open - DELAY($close, 1)) / ($high - $low + 1e-8)) * ((MIN($open, $close) - $low) / (TS_STD($volume, 5) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Inst_Gap_Stability_5D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies sentiment-driven price jumps supported by intraday price floors. It combines the overnight gap (normalized by the day's range) with the lower shadow length adjusted by the 5-day volume volatility. A high value suggests that an upward gap is being defended by buyers with stable volume support.",
      "factor_formulation": "\\text{GapRatio} = \\frac{\\text{open} - \\text{delay}(\\text{close}, 1)}{\\text{high} - \\text{low} + 1e-8}, \\text{Support} = \\frac{\\min(\\text{open}, \\text{close}) - \\text{low}}{\\text{TS\\_STD}(\\text{volume}, 5) + 1e-8}, \\text{Factor} = \\text{GapRatio} \\times \\text{Support}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 2,
        "evolution_phase": "crossover",
        "trajectory_id": "ace9ffb9ea95",
        "parent_trajectory_ids": [
          "7c72861cebb3",
          "8ab08cc6ed35"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Gap Stability' factor, calculated as the product of the overnight gap ratio and the ratio of lower shadow length to 5-day volume volatility, positively predicts returns by identifying sentiment-driven price jumps that are structurally supported by intraday price floors.\n                Concise Observation: Parent 1 (RankIC 0.0217) shows that lower shadow integrity relative to volume churn signals price floors, while Parent 2 (RankIC 0.0260) shows that overnight gaps capture sentiment; combining them addresses the weakness of gaps failing due to lack of intraday support.\n                Concise Justification: The overnight gap represents the initial sentiment shock, while the 'Support Integrity' component acts as a confirmation signal that the new price level is being defended by buyers, filtering out 'hollow' gaps that lack structural backing.\n                Concise Knowledge: If an overnight price gap is followed by a trading session where the lower shadow is large relative to volume volatility, then the gap is likely driven by institutional absorption rather than retail exhaustion; when volume volatility is low, price support levels are more reliable indicators of trend persistence.\n                concise Specification: The factor is defined as [(Open - Prev_Close) / (High - Low + epsilon)] * [ (min(Open, Close) - Low) / (StdDev(Volume, 5) + epsilon) ], where the first term captures normalized gap sentiment and the second term captures volatility-adjusted support integrity.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T00:44:04.816332"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0832111906411441,
        "ICIR": 0.0626501831897188,
        "1day.excess_return_without_cost.std": 0.0039203208856371,
        "1day.excess_return_with_cost.annualized_return": 0.0254192231282865,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003043158033165,
        "1day.excess_return_without_cost.annualized_return": 0.0724271611893351,
        "1day.excess_return_with_cost.std": 0.0039213971624383,
        "Rank IC": 0.024265989738822,
        "IC": 0.0080450223217622,
        "1day.excess_return_without_cost.max_drawdown": -0.0714717535346067,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.1975436944777005,
        "1day.pa": 0.0,
        "l2.valid": 0.9964330725614846,
        "Rank ICIR": 0.1929867599511263,
        "l2.train": 0.9934493153689355,
        "1day.excess_return_with_cost.information_ratio": 0.4201776662508015,
        "1day.excess_return_with_cost.mean": 0.0001068034585222
      },
      "feedback": {
        "observations": "The current iteration focused on refining the 'Institutional Gap Stability' hypothesis by testing different normalization techniques (Day Range normalization, Cross-sectional Ranking, and Z-scoring) and varying the look-back period for volume volatility. The results show a significant improvement across all key performance metrics compared to the previous SOTA. Specifically, the Information Ratio increased from 0.97 to 1.19, and the Annualized Return rose from 5.2% to 7.2%. The IC also improved from 0.0058 to 0.0080. The ZScored_Institutional_Absorption_5D and Ranked_Gap_Support_Integrity_10D variations appear to have better-captured market-relative sentiment compared to the raw product formulation.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that combining overnight sentiment (gaps) with intraday support (lower shadows) relative to volume volatility predicts future returns. The improvement in metrics suggests that the 'Support' component (lower shadow / volume volatility) acts as an effective filter for identifying high-conviction institutional entries. The transition from a product-based formulation to ranked/z-scored additive structures improved the signal-to-noise ratio, indicating that the relative magnitude of these features across the universe is more predictive than their absolute values.",
        "decision": true,
        "reason": "While the current factors use volume volatility as a denominator to normalize the shadow, the theory of 'absorption' suggests that price support is strongest when volatility is contracting (stabilization). By replacing the raw gap with a volatility-adjusted gap (Gap/ATR) and refining the support measure to penalize high-volatility regimes more strictly, we can better isolate structural floors from random price noise. Additionally, maintaining a low complexity (ER < 6) remains a priority to ensure the 2% gain in annualized return is robust."
      }
    },
    "33c7cc36d38d0eb1": {
      "factor_id": "33c7cc36d38d0eb1",
      "factor_name": "Ranked_Gap_Support_Integrity_10D",
      "factor_expression": "RANK(($open - DELAY($close, 1)) / DELAY($close, 1)) * RANK((MIN($open, $close) - $low) / (TS_STD($volume, 10) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(($open - DELAY($close, 1)) / DELAY($close, 1)) * RANK((MIN($open, $close) - $low) / (TS_STD($volume, 10) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Ranked_Gap_Support_Integrity_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A cross-sectionally ranked version of the gap stability hypothesis. It measures the relative strength of the overnight sentiment shock and the integrity of the intraday price floor, using a 10-day window for volume volatility to ensure more stable institutional signature detection.",
      "factor_formulation": "\\text{Factor} = \\text{RANK}\\left(\\frac{\\text{open} - \\text{delay}(\\text{close}, 1)}{\\text{delay}(\\text{close}, 1)}\\right) \\times \\text{RANK}\\left(\\frac{\\min(\\text{open}, \\text{close}) - \\text{low}}{\\text{TS\\_STD}(\\text{volume}, 10) + 1e-8}\\right)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 2,
        "evolution_phase": "crossover",
        "trajectory_id": "ace9ffb9ea95",
        "parent_trajectory_ids": [
          "7c72861cebb3",
          "8ab08cc6ed35"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Gap Stability' factor, calculated as the product of the overnight gap ratio and the ratio of lower shadow length to 5-day volume volatility, positively predicts returns by identifying sentiment-driven price jumps that are structurally supported by intraday price floors.\n                Concise Observation: Parent 1 (RankIC 0.0217) shows that lower shadow integrity relative to volume churn signals price floors, while Parent 2 (RankIC 0.0260) shows that overnight gaps capture sentiment; combining them addresses the weakness of gaps failing due to lack of intraday support.\n                Concise Justification: The overnight gap represents the initial sentiment shock, while the 'Support Integrity' component acts as a confirmation signal that the new price level is being defended by buyers, filtering out 'hollow' gaps that lack structural backing.\n                Concise Knowledge: If an overnight price gap is followed by a trading session where the lower shadow is large relative to volume volatility, then the gap is likely driven by institutional absorption rather than retail exhaustion; when volume volatility is low, price support levels are more reliable indicators of trend persistence.\n                concise Specification: The factor is defined as [(Open - Prev_Close) / (High - Low + epsilon)] * [ (min(Open, Close) - Low) / (StdDev(Volume, 5) + epsilon) ], where the first term captures normalized gap sentiment and the second term captures volatility-adjusted support integrity.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T00:44:04.816332"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0832111906411441,
        "ICIR": 0.0626501831897188,
        "1day.excess_return_without_cost.std": 0.0039203208856371,
        "1day.excess_return_with_cost.annualized_return": 0.0254192231282865,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003043158033165,
        "1day.excess_return_without_cost.annualized_return": 0.0724271611893351,
        "1day.excess_return_with_cost.std": 0.0039213971624383,
        "Rank IC": 0.024265989738822,
        "IC": 0.0080450223217622,
        "1day.excess_return_without_cost.max_drawdown": -0.0714717535346067,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.1975436944777005,
        "1day.pa": 0.0,
        "l2.valid": 0.9964330725614846,
        "Rank ICIR": 0.1929867599511263,
        "l2.train": 0.9934493153689355,
        "1day.excess_return_with_cost.information_ratio": 0.4201776662508015,
        "1day.excess_return_with_cost.mean": 0.0001068034585222
      },
      "feedback": {
        "observations": "The current iteration focused on refining the 'Institutional Gap Stability' hypothesis by testing different normalization techniques (Day Range normalization, Cross-sectional Ranking, and Z-scoring) and varying the look-back period for volume volatility. The results show a significant improvement across all key performance metrics compared to the previous SOTA. Specifically, the Information Ratio increased from 0.97 to 1.19, and the Annualized Return rose from 5.2% to 7.2%. The IC also improved from 0.0058 to 0.0080. The ZScored_Institutional_Absorption_5D and Ranked_Gap_Support_Integrity_10D variations appear to have better-captured market-relative sentiment compared to the raw product formulation.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that combining overnight sentiment (gaps) with intraday support (lower shadows) relative to volume volatility predicts future returns. The improvement in metrics suggests that the 'Support' component (lower shadow / volume volatility) acts as an effective filter for identifying high-conviction institutional entries. The transition from a product-based formulation to ranked/z-scored additive structures improved the signal-to-noise ratio, indicating that the relative magnitude of these features across the universe is more predictive than their absolute values.",
        "decision": true,
        "reason": "While the current factors use volume volatility as a denominator to normalize the shadow, the theory of 'absorption' suggests that price support is strongest when volatility is contracting (stabilization). By replacing the raw gap with a volatility-adjusted gap (Gap/ATR) and refining the support measure to penalize high-volatility regimes more strictly, we can better isolate structural floors from random price noise. Additionally, maintaining a low complexity (ER < 6) remains a priority to ensure the 2% gain in annualized return is robust."
      }
    },
    "deeab16e9e5cce30": {
      "factor_id": "deeab16e9e5cce30",
      "factor_name": "ZScored_Institutional_Absorption_5D",
      "factor_expression": "ZSCORE($open - DELAY($close, 1)) + ZSCORE((MIN($open, $close) - $low) / (TS_STD($volume, 5) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"ZSCORE($open - DELAY($close, 1)) + ZSCORE((MIN($open, $close) - $low) / (TS_STD($volume, 5) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"ZScored_Institutional_Absorption_5D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor standardizes the gap sentiment and the lower shadow support using cross-sectional Z-scores. It focuses on identifying stocks where the gap is significant and the lower shadow is unusually large relative to volume churn compared to the rest of the market.",
      "factor_formulation": "\\text{Factor} = \\text{ZSCORE}(\\text{open} - \\text{delay}(\\text{close}, 1)) + \\text{ZSCORE}\\left(\\frac{\\min(\\text{open}, \\text{close}) - \\text{low}}{\\text{TS\\_STD}(\\text{volume}, 5) + 1e-8}\\right)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 2,
        "evolution_phase": "crossover",
        "trajectory_id": "ace9ffb9ea95",
        "parent_trajectory_ids": [
          "7c72861cebb3",
          "8ab08cc6ed35"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Gap Stability' factor, calculated as the product of the overnight gap ratio and the ratio of lower shadow length to 5-day volume volatility, positively predicts returns by identifying sentiment-driven price jumps that are structurally supported by intraday price floors.\n                Concise Observation: Parent 1 (RankIC 0.0217) shows that lower shadow integrity relative to volume churn signals price floors, while Parent 2 (RankIC 0.0260) shows that overnight gaps capture sentiment; combining them addresses the weakness of gaps failing due to lack of intraday support.\n                Concise Justification: The overnight gap represents the initial sentiment shock, while the 'Support Integrity' component acts as a confirmation signal that the new price level is being defended by buyers, filtering out 'hollow' gaps that lack structural backing.\n                Concise Knowledge: If an overnight price gap is followed by a trading session where the lower shadow is large relative to volume volatility, then the gap is likely driven by institutional absorption rather than retail exhaustion; when volume volatility is low, price support levels are more reliable indicators of trend persistence.\n                concise Specification: The factor is defined as [(Open - Prev_Close) / (High - Low + epsilon)] * [ (min(Open, Close) - Low) / (StdDev(Volume, 5) + epsilon) ], where the first term captures normalized gap sentiment and the second term captures volatility-adjusted support integrity.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T00:44:04.816332"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0832111906411441,
        "ICIR": 0.0626501831897188,
        "1day.excess_return_without_cost.std": 0.0039203208856371,
        "1day.excess_return_with_cost.annualized_return": 0.0254192231282865,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003043158033165,
        "1day.excess_return_without_cost.annualized_return": 0.0724271611893351,
        "1day.excess_return_with_cost.std": 0.0039213971624383,
        "Rank IC": 0.024265989738822,
        "IC": 0.0080450223217622,
        "1day.excess_return_without_cost.max_drawdown": -0.0714717535346067,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.1975436944777005,
        "1day.pa": 0.0,
        "l2.valid": 0.9964330725614846,
        "Rank ICIR": 0.1929867599511263,
        "l2.train": 0.9934493153689355,
        "1day.excess_return_with_cost.information_ratio": 0.4201776662508015,
        "1day.excess_return_with_cost.mean": 0.0001068034585222
      },
      "feedback": {
        "observations": "The current iteration focused on refining the 'Institutional Gap Stability' hypothesis by testing different normalization techniques (Day Range normalization, Cross-sectional Ranking, and Z-scoring) and varying the look-back period for volume volatility. The results show a significant improvement across all key performance metrics compared to the previous SOTA. Specifically, the Information Ratio increased from 0.97 to 1.19, and the Annualized Return rose from 5.2% to 7.2%. The IC also improved from 0.0058 to 0.0080. The ZScored_Institutional_Absorption_5D and Ranked_Gap_Support_Integrity_10D variations appear to have better-captured market-relative sentiment compared to the raw product formulation.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that combining overnight sentiment (gaps) with intraday support (lower shadows) relative to volume volatility predicts future returns. The improvement in metrics suggests that the 'Support' component (lower shadow / volume volatility) acts as an effective filter for identifying high-conviction institutional entries. The transition from a product-based formulation to ranked/z-scored additive structures improved the signal-to-noise ratio, indicating that the relative magnitude of these features across the universe is more predictive than their absolute values.",
        "decision": true,
        "reason": "While the current factors use volume volatility as a denominator to normalize the shadow, the theory of 'absorption' suggests that price support is strongest when volatility is contracting (stabilization). By replacing the raw gap with a volatility-adjusted gap (Gap/ATR) and refining the support measure to penalize high-volatility regimes more strictly, we can better isolate structural floors from random price noise. Additionally, maintaining a low complexity (ER < 6) remains a priority to ensure the 2% gain in annualized return is robust."
      }
    },
    "79b83c44455b6cbf": {
      "factor_id": "79b83c44455b6cbf",
      "factor_name": "SLVR_Mean_Reversion_Factor",
      "factor_expression": "TS_ZSCORE(($high - $low) / $close, 20) * REGRESI($close, $volume, 5) * (($open / DELAY($close, 1) - 1) / (TS_MEAN(ABS($return) / ($volume + 1e-8), 5) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_ZSCORE(($high - $low) / $close, 20) * REGRESI($close, $volume, 5) * (($open / DELAY($close, 1) - 1) / (TS_MEAN(ABS($close / DELAY($close, 1) - 1) / ($volume + 1e-8), 5) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"SLVR_Mean_Reversion_Factor\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "The Structural Liquidity Vacuum Reversion (SLVR) factor identifies mean-reversion opportunities by combining a 20-day Z-score of price dispersion with the residual of a 5-day price-volume regression, weighted by the ratio of the overnight gap to the Amihud illiquidity measure. This captures price exhaustion unsupported by volume and liquidity.",
      "factor_formulation": "\\text{TS\\_ZSCORE}(\\frac{\\text{high}-\\text{low}}{\\text{close}}, 20) \\times \\text{REGRESI}(\\text{close}, \\text{volume}, 5) \\times \\frac{(\\text{open}/\\text{DELAY}(\\text{close}, 1) - 1)}{\\text{TS\\_MEAN}(\\text{ABS}(\\text{return})/\\text{volume}, 5)}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "59e57460e166",
        "parent_trajectory_ids": [
          "328dbeb0c242",
          "9f76eaf1aee4"
        ],
        "hypothesis": "Hypothesis: The Structural Liquidity Vacuum Reversion (SLVR) factor identifies mean-reversion opportunities by combining a 20-day Z-score of price dispersion with the residual of a 5-day price-volume regression, further weighted by the ratio of overnight gap to the Amihud illiquidity measure.\n                Concise Observation: Parent strategies show that intraday volatility (ILE) and price-volume decoupling (LSSR) both capture exhaustion, but individual signals often suffer from false positives during high-conviction trends where volume actually supports the move.\n                Concise Justification: By multiplying the volatility exhaustion signal (Z-score of range) with a volume-based 'lack of support' residual, we filter out high-conviction trends; adding the overnight gap normalized by illiquidity captures the sentiment-liquidity mismatch necessary for a snap-back.\n                Concise Knowledge: If price dispersion significantly exceeds its historical norm while volume support (regression residual) is lacking, then the price movement is likely noise-driven; when this coincides with an overnight sentiment gap that is disproportionate to the asset's liquidity, a sharp mean-reversion is expected.\n                concise Specification: Calculate the 20-day TS_ZSCORE of (High-Low)/Close; multiply by the residual of a 5-day linear regression of Close on Volume; then multiply by the 1-day overnight gap (Open/PrevClose - 1) divided by the 5-day average Amihud ratio (AbsReturn/Volume).\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T10:31:35.343949"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1265687423718712,
        "ICIR": 0.0482339304091834,
        "1day.excess_return_without_cost.std": 0.0040529819320795,
        "1day.excess_return_with_cost.annualized_return": -0.0028430330893478,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001876002354567,
        "1day.excess_return_without_cost.annualized_return": 0.0446488560387137,
        "1day.excess_return_with_cost.std": 0.0040539879000024,
        "Rank IC": 0.0242647988977528,
        "IC": 0.0064672342129703,
        "1day.excess_return_without_cost.max_drawdown": -0.0884544431698634,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7140805269217989,
        "1day.pa": 0.0,
        "l2.valid": 0.996175390565952,
        "Rank ICIR": 0.1846047904711788,
        "l2.train": 0.9928822625621102,
        "1day.excess_return_with_cost.information_ratio": -0.0454580694406163,
        "1day.excess_return_with_cost.mean": -1.1945517182133794e-05
      },
      "feedback": {
        "observations": "The current experiment tested three variations of the Structural Liquidity Vacuum Reversion (SLVR) framework. The 'SLVR_Mean_Reversion_Factor' provides the most comprehensive implementation of the hypothesis, while the others explore simplified components. The results show a significant improvement in the Information Coefficient (IC) compared to the SOTA (0.006467 vs 0.005798), indicating a stronger linear relationship between the factor and future returns. However, the annualized return and Information Ratio (IR) have deteriorated, and the drawdown has increased. This suggests that while the core signal (IC) is stronger, the current construction might be introducing noise or volatility that degrades risk-adjusted performance.",
        "hypothesis_evaluation": "The hypothesis that a 'Liquidity Vacuum' (price moves unsupported by volume) leads to mean reversion is supported by the improved IC. However, the full SLVR formulation appears overly complex, potentially leading to the observed decay in IR and drawdown. The interaction between the Amihud illiquidity measure and the overnight gap in the denominator of the SLVR factor might be creating extreme values (outliers) that destabilize the portfolio construction.",
        "decision": false,
        "reason": "The current SLVR factor uses a raw ratio of (Gap / Amihud Illiquidity), which can be extremely volatile when volume is very low (the 'vacuum' effect). By applying a cross-sectional RANK to the residual and the gap components separately before multiplication, we can capture the same theoretical 'mismatch' without the instability of raw ratios. Furthermore, reducing the look-back window for price dispersion to 10 days (as seen in the Volume_Decoupled_Dispersion variant) may capture faster mean-reversion cycles more effectively than the 20-day window."
      }
    },
    "f2dad72c3710ec2c": {
      "factor_id": "f2dad72c3710ec2c",
      "factor_name": "Liquidity_Mismatch_Exhaustion_Rank",
      "factor_expression": "RANK(REGRESI($close, $volume, 5)) * RANK(($open - DELAY($close, 1)) / (TS_STD($return, 20) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(REGRESI($close, $volume, 5)) * RANK(($open - DELAY($close, 1)) / (TS_STD(TS_PCTCHANGE($close, 1), 20) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Liquidity_Mismatch_Exhaustion_Rank\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A simplified version of the SLVR hypothesis focusing on the cross-sectional rank of price-volume decoupling and liquidity-normalized gaps. It identifies assets where price moves are extreme relative to their volume support and liquidity profile.",
      "factor_formulation": "\\text{RANK}(\\text{REGRESI}(\\text{close}, \\text{volume}, 5)) \\times \\text{RANK}(\\frac{\\text{open} - \\text{DELAY}(\\text{close}, 1)}{\\text{TS\\_STD}(\\text{return}, 20)})",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "59e57460e166",
        "parent_trajectory_ids": [
          "328dbeb0c242",
          "9f76eaf1aee4"
        ],
        "hypothesis": "Hypothesis: The Structural Liquidity Vacuum Reversion (SLVR) factor identifies mean-reversion opportunities by combining a 20-day Z-score of price dispersion with the residual of a 5-day price-volume regression, further weighted by the ratio of overnight gap to the Amihud illiquidity measure.\n                Concise Observation: Parent strategies show that intraday volatility (ILE) and price-volume decoupling (LSSR) both capture exhaustion, but individual signals often suffer from false positives during high-conviction trends where volume actually supports the move.\n                Concise Justification: By multiplying the volatility exhaustion signal (Z-score of range) with a volume-based 'lack of support' residual, we filter out high-conviction trends; adding the overnight gap normalized by illiquidity captures the sentiment-liquidity mismatch necessary for a snap-back.\n                Concise Knowledge: If price dispersion significantly exceeds its historical norm while volume support (regression residual) is lacking, then the price movement is likely noise-driven; when this coincides with an overnight sentiment gap that is disproportionate to the asset's liquidity, a sharp mean-reversion is expected.\n                concise Specification: Calculate the 20-day TS_ZSCORE of (High-Low)/Close; multiply by the residual of a 5-day linear regression of Close on Volume; then multiply by the 1-day overnight gap (Open/PrevClose - 1) divided by the 5-day average Amihud ratio (AbsReturn/Volume).\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T10:31:35.343949"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1265687423718712,
        "ICIR": 0.0482339304091834,
        "1day.excess_return_without_cost.std": 0.0040529819320795,
        "1day.excess_return_with_cost.annualized_return": -0.0028430330893478,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001876002354567,
        "1day.excess_return_without_cost.annualized_return": 0.0446488560387137,
        "1day.excess_return_with_cost.std": 0.0040539879000024,
        "Rank IC": 0.0242647988977528,
        "IC": 0.0064672342129703,
        "1day.excess_return_without_cost.max_drawdown": -0.0884544431698634,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7140805269217989,
        "1day.pa": 0.0,
        "l2.valid": 0.996175390565952,
        "Rank ICIR": 0.1846047904711788,
        "l2.train": 0.9928822625621102,
        "1day.excess_return_with_cost.information_ratio": -0.0454580694406163,
        "1day.excess_return_with_cost.mean": -1.1945517182133794e-05
      },
      "feedback": {
        "observations": "The current experiment tested three variations of the Structural Liquidity Vacuum Reversion (SLVR) framework. The 'SLVR_Mean_Reversion_Factor' provides the most comprehensive implementation of the hypothesis, while the others explore simplified components. The results show a significant improvement in the Information Coefficient (IC) compared to the SOTA (0.006467 vs 0.005798), indicating a stronger linear relationship between the factor and future returns. However, the annualized return and Information Ratio (IR) have deteriorated, and the drawdown has increased. This suggests that while the core signal (IC) is stronger, the current construction might be introducing noise or volatility that degrades risk-adjusted performance.",
        "hypothesis_evaluation": "The hypothesis that a 'Liquidity Vacuum' (price moves unsupported by volume) leads to mean reversion is supported by the improved IC. However, the full SLVR formulation appears overly complex, potentially leading to the observed decay in IR and drawdown. The interaction between the Amihud illiquidity measure and the overnight gap in the denominator of the SLVR factor might be creating extreme values (outliers) that destabilize the portfolio construction.",
        "decision": false,
        "reason": "The current SLVR factor uses a raw ratio of (Gap / Amihud Illiquidity), which can be extremely volatile when volume is very low (the 'vacuum' effect). By applying a cross-sectional RANK to the residual and the gap components separately before multiplication, we can capture the same theoretical 'mismatch' without the instability of raw ratios. Furthermore, reducing the look-back window for price dispersion to 10 days (as seen in the Volume_Decoupled_Dispersion variant) may capture faster mean-reversion cycles more effectively than the 20-day window."
      }
    },
    "80c1ef6d4bbd149a": {
      "factor_id": "80c1ef6d4bbd149a",
      "factor_name": "Volume_Decoupled_Dispersion",
      "factor_expression": "TS_ZSCORE(($high - $low) / $close, 10) * SIGN(REGRESI($close, $volume, 5))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_ZSCORE(($high - $low) / $close, 10) * SIGN(REGRESI($close, $volume, 5))\" # Your output factor expression will be filled in here\n    name = \"Volume_Decoupled_Dispersion\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor measures the interaction between price dispersion (High-Low range) and the lack of volume support. It uses the residual of price-volume regression to weight the current volatility state, highlighting noise-driven price spikes.",
      "factor_formulation": "\\text{TS\\_ZSCORE}((\\text{high}-\\text{low})/\\text{close}, 10) \\times \\text{SIGN}(\\text{REGRESI}(\\text{close}, \\text{volume}, 5))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "59e57460e166",
        "parent_trajectory_ids": [
          "328dbeb0c242",
          "9f76eaf1aee4"
        ],
        "hypothesis": "Hypothesis: The Structural Liquidity Vacuum Reversion (SLVR) factor identifies mean-reversion opportunities by combining a 20-day Z-score of price dispersion with the residual of a 5-day price-volume regression, further weighted by the ratio of overnight gap to the Amihud illiquidity measure.\n                Concise Observation: Parent strategies show that intraday volatility (ILE) and price-volume decoupling (LSSR) both capture exhaustion, but individual signals often suffer from false positives during high-conviction trends where volume actually supports the move.\n                Concise Justification: By multiplying the volatility exhaustion signal (Z-score of range) with a volume-based 'lack of support' residual, we filter out high-conviction trends; adding the overnight gap normalized by illiquidity captures the sentiment-liquidity mismatch necessary for a snap-back.\n                Concise Knowledge: If price dispersion significantly exceeds its historical norm while volume support (regression residual) is lacking, then the price movement is likely noise-driven; when this coincides with an overnight sentiment gap that is disproportionate to the asset's liquidity, a sharp mean-reversion is expected.\n                concise Specification: Calculate the 20-day TS_ZSCORE of (High-Low)/Close; multiply by the residual of a 5-day linear regression of Close on Volume; then multiply by the 1-day overnight gap (Open/PrevClose - 1) divided by the 5-day average Amihud ratio (AbsReturn/Volume).\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T10:31:35.343949"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1265687423718712,
        "ICIR": 0.0482339304091834,
        "1day.excess_return_without_cost.std": 0.0040529819320795,
        "1day.excess_return_with_cost.annualized_return": -0.0028430330893478,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001876002354567,
        "1day.excess_return_without_cost.annualized_return": 0.0446488560387137,
        "1day.excess_return_with_cost.std": 0.0040539879000024,
        "Rank IC": 0.0242647988977528,
        "IC": 0.0064672342129703,
        "1day.excess_return_without_cost.max_drawdown": -0.0884544431698634,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7140805269217989,
        "1day.pa": 0.0,
        "l2.valid": 0.996175390565952,
        "Rank ICIR": 0.1846047904711788,
        "l2.train": 0.9928822625621102,
        "1day.excess_return_with_cost.information_ratio": -0.0454580694406163,
        "1day.excess_return_with_cost.mean": -1.1945517182133794e-05
      },
      "feedback": {
        "observations": "The current experiment tested three variations of the Structural Liquidity Vacuum Reversion (SLVR) framework. The 'SLVR_Mean_Reversion_Factor' provides the most comprehensive implementation of the hypothesis, while the others explore simplified components. The results show a significant improvement in the Information Coefficient (IC) compared to the SOTA (0.006467 vs 0.005798), indicating a stronger linear relationship between the factor and future returns. However, the annualized return and Information Ratio (IR) have deteriorated, and the drawdown has increased. This suggests that while the core signal (IC) is stronger, the current construction might be introducing noise or volatility that degrades risk-adjusted performance.",
        "hypothesis_evaluation": "The hypothesis that a 'Liquidity Vacuum' (price moves unsupported by volume) leads to mean reversion is supported by the improved IC. However, the full SLVR formulation appears overly complex, potentially leading to the observed decay in IR and drawdown. The interaction between the Amihud illiquidity measure and the overnight gap in the denominator of the SLVR factor might be creating extreme values (outliers) that destabilize the portfolio construction.",
        "decision": false,
        "reason": "The current SLVR factor uses a raw ratio of (Gap / Amihud Illiquidity), which can be extremely volatile when volume is very low (the 'vacuum' effect). By applying a cross-sectional RANK to the residual and the gap components separately before multiplication, we can capture the same theoretical 'mismatch' without the instability of raw ratios. Furthermore, reducing the look-back window for price dispersion to 10 days (as seen in the Volume_Decoupled_Dispersion variant) may capture faster mean-reversion cycles more effectively than the 20-day window."
      }
    },
    "6ff96e558c287e6b": {
      "factor_id": "6ff96e558c287e6b",
      "factor_name": "Quality_Volatility_Resonance_5D",
      "factor_expression": "RANK(($high - $low) / ($close + 1e-8)) * RANK(DELTA(TS_MEAN($close * $volume, 5), 5))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(($high - $low) / ($close + 1e-8)) * RANK(DELTA(TS_MEAN($close * $volume, 5), 5))\" # Your output factor expression will be filled in here\n    name = \"Quality_Volatility_Resonance_5D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies high-quality volatility by interacting the intraday range (KLEN) with the 5-day change in the weighted volume moving average (WVMA). It captures price moves backed by institutional conviction, where high intraday range coincides with strong volume-weighted price trends.",
      "factor_formulation": "\\text{RANK}\\left(\\frac{\\text{high} - \\text{low}}{\\text{close} + 1e-8}\\right) \\times \\text{RANK}\\left(\\text{DELTA}(\\text{TS_MEAN}(\\text{close} \\times \\text{volume}, 5), 5)\\right)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 0,
        "evolution_phase": "original",
        "trajectory_id": "370a9cad520d",
        "parent_trajectory_ids": [],
        "hypothesis": "Hypothesis: The interaction between the Intraday Range (KLEN) and the 5-day Weighted Volume Moving Average (WVMA5) identifies high-quality volatility: specifically, price moves with high intraday ranges and high price-volume resonance (high WVMA5) predict stronger future returns than those with low resonance.\n                Concise Observation: Intraday volatility (High-Low) often fails as a standalone predictor because it conflates informed trading with random noise, but volume-weighted trends (WVMA) can filter for liquidity-backed movements.\n                Concise Justification: Institutional participation requires significant volume to move prices, so 'quality' volatilitythat which persistsshould be positively correlated with the strength of volume-weighted price trends.\n                Concise Knowledge: If a large intraday price range is accompanied by high volume-weighted momentum, it signifies institutional conviction; conversely, high range on low volume resonance represents noise or liquidity gaps.\n                concise Specification: Define KLEN as (High-Low)/Close and WVMA5 as the 5-day moving average of (Close * Volume); the factor is the product of KLEN and the 5-day change in WVMA5.\n                ",
        "initial_direction": "Examine 'Volatility Quality' by conditioning KLEN on WVMA5: high intraday range with low price-volume resonance may indicate noise, whereas high resonance suggests institutional participation.",
        "planning_direction": "Examine 'Volatility Quality' by conditioning KLEN on WVMA5: high intraday range with low price-volume resonance may indicate noise, whereas high resonance suggests institutional participation.",
        "created_at": "2026-01-20T21:18:14.441928"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0739497258439768,
        "ICIR": 0.0472211920492118,
        "1day.excess_return_without_cost.std": 0.0040673776424795,
        "1day.excess_return_with_cost.annualized_return": 0.0251085926817033,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002999465066513,
        "1day.excess_return_without_cost.annualized_return": 0.0713872685830279,
        "1day.excess_return_with_cost.std": 0.0040671490365025,
        "Rank IC": 0.0240167622243152,
        "IC": 0.0063624234303612,
        "1day.excess_return_without_cost.max_drawdown": -0.066761727514072,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.1376738866452547,
        "1day.pa": 0.0,
        "l2.valid": 0.996319489627366,
        "Rank ICIR": 0.1866865990478907,
        "l2.train": 0.9939602273670832,
        "1day.excess_return_with_cost.information_ratio": 0.4001693354082368,
        "1day.excess_return_with_cost.mean": 0.0001054982885785
      },
      "feedback": {
        "observations": "The current iteration focused on refining the 'Quality Volatility Resonance' hypothesis by testing different smoothing methods (EMA vs. TS_MEAN) and normalization techniques (RANK vs. ZSCORE). The results show a significant improvement across all key performance metrics. Specifically, the Information Ratio increased from 0.97 to 1.14, and the Annualized Return rose from 5.2% to 7.1%. The IC also showed a healthy improvement to 0.0063. The use of EMA in 'Smoothed_WVMA_Volatility_Interaction' likely contributed to reducing noise in the volume-weighted price component, while the interaction with intraday range effectively isolated high-conviction price movements.",
        "hypothesis_evaluation": "The results strongly support the hypothesis. The interaction between intraday range (volatility) and volume-weighted price trends (resonance) successfully identifies alpha. The improvement from 'Quality_Volatility_Resonance_5D' to 'Smoothed_WVMA_Volatility_Interaction' suggests that the 'resonance' component is sensitive to noise and benefits from exponential smoothing. The low complexity of the factors (using only 4 base features and minimal parameters) suggests these results are robust and not driven by overfitting.",
        "decision": true,
        "reason": "While the current interaction is effective, 'high intraday range' is a relative concept; a high range in a low-volatility environment is more significant than the same range in a high-volatility environment. Normalizing the range by ATR (Average True Range) should provide a cleaner signal. Furthermore, the current WVMA measures trend strength; incorporating the relationship between volume flow and price direction (e.g., using a modified Chaikin Money Flow or Volume-Price Trend logic) within the resonance framework may better distinguish between retail-driven spikes and institutional accumulation."
      }
    },
    "b1e62f00f99f1d53": {
      "factor_id": "b1e62f00f99f1d53",
      "factor_name": "Institutional_Conviction_Index_10D",
      "factor_expression": "ZSCORE(($high - $low) / ($close + 1e-8)) + ZSCORE(TS_PCTCHANGE(TS_MEAN($close * $volume, 5), 5))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"ZSCORE(($high - $low) / ($close + 1e-8)) + ZSCORE(TS_PCTCHANGE(TS_MEAN($close * $volume, 5), 5))\" # Your output factor expression will be filled in here\n    name = \"Institutional_Conviction_Index_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A refined version of the quality volatility hypothesis focusing on the cross-sectional strength of volume-weighted momentum relative to intraday range. It uses Z-scores to normalize the interaction between the intraday price spread and the trend in volume-weighted price levels over a 10-day window.",
      "factor_formulation": "\\text{ZSCORE}\\left(\\frac{\\text{high} - \\text{low}}{\\text{close}}\\right) + \\text{ZSCORE}(\\text{TS_PCTCHANGE}(\\text{TS_MEAN}(\\text{close} \\times \\text{volume}, 5), 5))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 0,
        "evolution_phase": "original",
        "trajectory_id": "370a9cad520d",
        "parent_trajectory_ids": [],
        "hypothesis": "Hypothesis: The interaction between the Intraday Range (KLEN) and the 5-day Weighted Volume Moving Average (WVMA5) identifies high-quality volatility: specifically, price moves with high intraday ranges and high price-volume resonance (high WVMA5) predict stronger future returns than those with low resonance.\n                Concise Observation: Intraday volatility (High-Low) often fails as a standalone predictor because it conflates informed trading with random noise, but volume-weighted trends (WVMA) can filter for liquidity-backed movements.\n                Concise Justification: Institutional participation requires significant volume to move prices, so 'quality' volatilitythat which persistsshould be positively correlated with the strength of volume-weighted price trends.\n                Concise Knowledge: If a large intraday price range is accompanied by high volume-weighted momentum, it signifies institutional conviction; conversely, high range on low volume resonance represents noise or liquidity gaps.\n                concise Specification: Define KLEN as (High-Low)/Close and WVMA5 as the 5-day moving average of (Close * Volume); the factor is the product of KLEN and the 5-day change in WVMA5.\n                ",
        "initial_direction": "Examine 'Volatility Quality' by conditioning KLEN on WVMA5: high intraday range with low price-volume resonance may indicate noise, whereas high resonance suggests institutional participation.",
        "planning_direction": "Examine 'Volatility Quality' by conditioning KLEN on WVMA5: high intraday range with low price-volume resonance may indicate noise, whereas high resonance suggests institutional participation.",
        "created_at": "2026-01-20T21:18:14.441928"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0739497258439768,
        "ICIR": 0.0472211920492118,
        "1day.excess_return_without_cost.std": 0.0040673776424795,
        "1day.excess_return_with_cost.annualized_return": 0.0251085926817033,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002999465066513,
        "1day.excess_return_without_cost.annualized_return": 0.0713872685830279,
        "1day.excess_return_with_cost.std": 0.0040671490365025,
        "Rank IC": 0.0240167622243152,
        "IC": 0.0063624234303612,
        "1day.excess_return_without_cost.max_drawdown": -0.066761727514072,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.1376738866452547,
        "1day.pa": 0.0,
        "l2.valid": 0.996319489627366,
        "Rank ICIR": 0.1866865990478907,
        "l2.train": 0.9939602273670832,
        "1day.excess_return_with_cost.information_ratio": 0.4001693354082368,
        "1day.excess_return_with_cost.mean": 0.0001054982885785
      },
      "feedback": {
        "observations": "The current iteration focused on refining the 'Quality Volatility Resonance' hypothesis by testing different smoothing methods (EMA vs. TS_MEAN) and normalization techniques (RANK vs. ZSCORE). The results show a significant improvement across all key performance metrics. Specifically, the Information Ratio increased from 0.97 to 1.14, and the Annualized Return rose from 5.2% to 7.1%. The IC also showed a healthy improvement to 0.0063. The use of EMA in 'Smoothed_WVMA_Volatility_Interaction' likely contributed to reducing noise in the volume-weighted price component, while the interaction with intraday range effectively isolated high-conviction price movements.",
        "hypothesis_evaluation": "The results strongly support the hypothesis. The interaction between intraday range (volatility) and volume-weighted price trends (resonance) successfully identifies alpha. The improvement from 'Quality_Volatility_Resonance_5D' to 'Smoothed_WVMA_Volatility_Interaction' suggests that the 'resonance' component is sensitive to noise and benefits from exponential smoothing. The low complexity of the factors (using only 4 base features and minimal parameters) suggests these results are robust and not driven by overfitting.",
        "decision": true,
        "reason": "While the current interaction is effective, 'high intraday range' is a relative concept; a high range in a low-volatility environment is more significant than the same range in a high-volatility environment. Normalizing the range by ATR (Average True Range) should provide a cleaner signal. Furthermore, the current WVMA measures trend strength; incorporating the relationship between volume flow and price direction (e.g., using a modified Chaikin Money Flow or Volume-Price Trend logic) within the resonance framework may better distinguish between retail-driven spikes and institutional accumulation."
      }
    },
    "ca42cea9078e3e20": {
      "factor_id": "ca42cea9078e3e20",
      "factor_name": "Smoothed_WVMA_Volatility_Interaction",
      "factor_expression": "RANK(($high - $low) / ($close + 1e-8)) * RANK(DELTA(EMA($close * $volume, 5), 3))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(($high - $low) / ($close + 1e-8)) * RANK(DELTA(EMA($close * $volume, 5), 3))\" # Your output factor expression will be filled in here\n    name = \"Smoothed_WVMA_Volatility_Interaction\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor uses the Exponential Moving Average (EMA) to smooth the volume-weighted price component, reducing noise in the WVMA calculation. It then multiplies this smoothed trend indicator by the normalized intraday range to highlight stocks with persistent, liquidity-backed volatility.",
      "factor_formulation": "\\text{RANK}\\left(\\frac{\\text{high} - \\text{low}}{\\text{close}}\\right) \\times \\text{RANK}(\\text{DELTA}(\\text{EMA}(\\text{close} \\times \\text{volume}, 5), 3))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 0,
        "evolution_phase": "original",
        "trajectory_id": "370a9cad520d",
        "parent_trajectory_ids": [],
        "hypothesis": "Hypothesis: The interaction between the Intraday Range (KLEN) and the 5-day Weighted Volume Moving Average (WVMA5) identifies high-quality volatility: specifically, price moves with high intraday ranges and high price-volume resonance (high WVMA5) predict stronger future returns than those with low resonance.\n                Concise Observation: Intraday volatility (High-Low) often fails as a standalone predictor because it conflates informed trading with random noise, but volume-weighted trends (WVMA) can filter for liquidity-backed movements.\n                Concise Justification: Institutional participation requires significant volume to move prices, so 'quality' volatilitythat which persistsshould be positively correlated with the strength of volume-weighted price trends.\n                Concise Knowledge: If a large intraday price range is accompanied by high volume-weighted momentum, it signifies institutional conviction; conversely, high range on low volume resonance represents noise or liquidity gaps.\n                concise Specification: Define KLEN as (High-Low)/Close and WVMA5 as the 5-day moving average of (Close * Volume); the factor is the product of KLEN and the 5-day change in WVMA5.\n                ",
        "initial_direction": "Examine 'Volatility Quality' by conditioning KLEN on WVMA5: high intraday range with low price-volume resonance may indicate noise, whereas high resonance suggests institutional participation.",
        "planning_direction": "Examine 'Volatility Quality' by conditioning KLEN on WVMA5: high intraday range with low price-volume resonance may indicate noise, whereas high resonance suggests institutional participation.",
        "created_at": "2026-01-20T21:18:14.441928"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0739497258439768,
        "ICIR": 0.0472211920492118,
        "1day.excess_return_without_cost.std": 0.0040673776424795,
        "1day.excess_return_with_cost.annualized_return": 0.0251085926817033,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002999465066513,
        "1day.excess_return_without_cost.annualized_return": 0.0713872685830279,
        "1day.excess_return_with_cost.std": 0.0040671490365025,
        "Rank IC": 0.0240167622243152,
        "IC": 0.0063624234303612,
        "1day.excess_return_without_cost.max_drawdown": -0.066761727514072,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.1376738866452547,
        "1day.pa": 0.0,
        "l2.valid": 0.996319489627366,
        "Rank ICIR": 0.1866865990478907,
        "l2.train": 0.9939602273670832,
        "1day.excess_return_with_cost.information_ratio": 0.4001693354082368,
        "1day.excess_return_with_cost.mean": 0.0001054982885785
      },
      "feedback": {
        "observations": "The current iteration focused on refining the 'Quality Volatility Resonance' hypothesis by testing different smoothing methods (EMA vs. TS_MEAN) and normalization techniques (RANK vs. ZSCORE). The results show a significant improvement across all key performance metrics. Specifically, the Information Ratio increased from 0.97 to 1.14, and the Annualized Return rose from 5.2% to 7.1%. The IC also showed a healthy improvement to 0.0063. The use of EMA in 'Smoothed_WVMA_Volatility_Interaction' likely contributed to reducing noise in the volume-weighted price component, while the interaction with intraday range effectively isolated high-conviction price movements.",
        "hypothesis_evaluation": "The results strongly support the hypothesis. The interaction between intraday range (volatility) and volume-weighted price trends (resonance) successfully identifies alpha. The improvement from 'Quality_Volatility_Resonance_5D' to 'Smoothed_WVMA_Volatility_Interaction' suggests that the 'resonance' component is sensitive to noise and benefits from exponential smoothing. The low complexity of the factors (using only 4 base features and minimal parameters) suggests these results are robust and not driven by overfitting.",
        "decision": true,
        "reason": "While the current interaction is effective, 'high intraday range' is a relative concept; a high range in a low-volatility environment is more significant than the same range in a high-volatility environment. Normalizing the range by ATR (Average True Range) should provide a cleaner signal. Furthermore, the current WVMA measures trend strength; incorporating the relationship between volume flow and price direction (e.g., using a modified Chaikin Money Flow or Volume-Price Trend logic) within the resonance framework may better distinguish between retail-driven spikes and institutional accumulation."
      }
    },
    "089404eff5915be7": {
      "factor_id": "089404eff5915be7",
      "factor_name": "Liquidity_Exhaustion_Skew_Factor",
      "factor_expression": "RANK(TS_MEAN(POW($return, 3) * $volume, 5) / (TS_MEDIAN($volume, 20) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(TS_MEAN(POW(TS_PCTCHANGE($close, 1), 3) * $volume, 5) / (TS_MEDIAN($volume, 20) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Liquidity_Exhaustion_Skew_Factor\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies potential price reversals by combining volume-weighted price skewness with abnormal turnover. It captures 'blow-off' tops or 'panic' bottoms where extreme liquidity demand leads to price exhaustion. High values suggest a reversal is likely as the liquidity shock subsides.",
      "factor_formulation": "LE\\_Skew = \\text{RANK}\\left( \\frac{\\text{TS\\_MEAN}(\\text{return}^3 \\times \\text{volume}, 5)}{\\text{TS\\_MEDIAN}(\\text{volume}, 20) + 1e-8} \\right)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 7,
        "evolution_phase": "mutation",
        "trajectory_id": "6becae249925",
        "parent_trajectory_ids": [
          "ebb95d0d34c5"
        ],
        "hypothesis": "Hypothesis: The 'Liquidity Exhaustion Reversal' factor, calculated as the product of the 5-day volume-weighted price skewness and the ratio of current turnover to its 20-day median, identifies short-term price peaks or troughs driven by retail-induced liquidity shocks that are likely to mean-revert.\n                Concise Observation: The parent strategy focuses on smooth institutional trends, but market data shows that extreme volume spikes often accompany price 'blow-offs' where price linearity breaks down and volatility expands rapidly before a reversal.\n                Concise Justification: High turnover spikes combined with skewed price action represent 'panic' or 'FOMO' buying/selling; according to the theory of limits to arbitrage, these liquidity-driven price deviations are unsustainable and provide excess returns upon correction.\n                Concise Knowledge: If a stock exhibits high volume-weighted skewness alongside a significant spike in relative turnover, it indicates one-sided trade exhaustion; when such liquidity demand peaks, prices tend to reverse as market makers provide liquidity at a premium.\n                concise Specification: The factor uses a 5-day window for volume-weighted skewness to capture recent imbalance and a 20-day median turnover as a baseline to identify abnormal liquidity events, targeting mean-reversion over a 1-5 day horizon.\n                ",
        "initial_direction": "Evaluate 'Intraday-to-Interday Volatility Shift' by comparing KLEN to STD5: when intraday ranges exceed 5-day realized volatility, it signals a regime shift in market participants' urgency.",
        "planning_direction": "Evaluate 'Intraday-to-Interday Volatility Shift' by comparing KLEN to STD5: when intraday ranges exceed 5-day realized volatility, it signals a regime shift in market participants' urgency.",
        "created_at": "2026-01-21T09:35:47.006991"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1544946790876025,
        "ICIR": 0.0389000770099648,
        "1day.excess_return_without_cost.std": 0.0051997397791481,
        "1day.excess_return_with_cost.annualized_return": 0.00013792845762,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002007259592352,
        "1day.excess_return_without_cost.annualized_return": 0.0477727782979781,
        "1day.excess_return_with_cost.std": 0.0052007682169644,
        "Rank IC": 0.0240130310402388,
        "IC": 0.0060782290173483,
        "1day.excess_return_without_cost.max_drawdown": -0.1138566444260834,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.595539278741646,
        "1day.pa": 0.0,
        "l2.valid": 0.996172786093824,
        "Rank ICIR": 0.1501068871148751,
        "l2.train": 0.9940168138187764,
        "1day.excess_return_with_cost.information_ratio": 0.0017190871825722,
        "1day.excess_return_with_cost.mean": 5.795313345380462e-07
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Liquidity Exhaustion Reversal' hypothesis. The 'Liquidity_Exhaustion_Skew_Factor' achieved a higher IC (0.006078) compared to the SOTA (0.005798), indicating a stronger point-in-time correlation with future returns. However, the portfolio-based metrics (Information Ratio and Annualized Return) underperformed the SOTA, and the Max Drawdown significantly worsened (-0.1138 vs -0.0725). This suggests that while the signal captures some predictive power, it introduces significant volatility or is concentrated in periods/stocks that are difficult to capture in a stable portfolio.",
        "hypothesis_evaluation": "The hypothesis that liquidity shocks driven by volume-weighted skewness lead to reversals is partially supported by the improved IC. However, the current implementation of 'Liquidity_Exhaustion_Skew_Factor' (using return^3 * volume) might be too noisy. The 'Turnover_Spike_Reversal_Factor' and 'Relative_Liquidity_Shock_Index' provide simpler alternatives, but the lack of improvement in annualized return suggests the interaction between skewness and abnormal turnover needs a more robust mathematical formulation to filter out noise.",
        "decision": false,
        "reason": "The previous factors used raw volume or simple medians, which do not account for the varying volatility of different instruments. By using a Z-score for turnover and normalizing the price signal by volatility (Sharpe-like ratio over 5 days), we can better identify 'exhaustion' points that are statistically significant relative to the stock's own history, rather than just cross-sectional extremes. This should improve the Information Ratio and reduce Drawdown by avoiding high-volatility traps."
      }
    },
    "a37e54740f503aac": {
      "factor_id": "a37e54740f503aac",
      "factor_name": "Turnover_Spike_Reversal_Factor",
      "factor_expression": "SIGN(TS_MEAN($return, 5)) * ($volume / (TS_MEDIAN($volume, 20) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(SIGN(TS_MEAN(TS_PCTCHANGE($close, 1), 5)) * ($volume / (TS_MEDIAN($volume, 20) + 1e-8)))\" # Your output factor expression will be filled in here\n    name = \"Turnover_Spike_Reversal_Factor\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor targets mean-reversion by identifying stocks where current volume significantly deviates from its 20-day median, scaled by the direction of recent price volatility. It assumes that extreme turnover relative to the median indicates exhaustion of the current trend.",
      "factor_formulation": "TSR = \\text{SIGN}(\\text{TS\\_MEAN}(\\text{return}, 5)) \\times \\frac{\\text{volume}}{\\text{TS\\_MEDIAN}(\\text{volume}, 20) + 1e-8}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 7,
        "evolution_phase": "mutation",
        "trajectory_id": "6becae249925",
        "parent_trajectory_ids": [
          "ebb95d0d34c5"
        ],
        "hypothesis": "Hypothesis: The 'Liquidity Exhaustion Reversal' factor, calculated as the product of the 5-day volume-weighted price skewness and the ratio of current turnover to its 20-day median, identifies short-term price peaks or troughs driven by retail-induced liquidity shocks that are likely to mean-revert.\n                Concise Observation: The parent strategy focuses on smooth institutional trends, but market data shows that extreme volume spikes often accompany price 'blow-offs' where price linearity breaks down and volatility expands rapidly before a reversal.\n                Concise Justification: High turnover spikes combined with skewed price action represent 'panic' or 'FOMO' buying/selling; according to the theory of limits to arbitrage, these liquidity-driven price deviations are unsustainable and provide excess returns upon correction.\n                Concise Knowledge: If a stock exhibits high volume-weighted skewness alongside a significant spike in relative turnover, it indicates one-sided trade exhaustion; when such liquidity demand peaks, prices tend to reverse as market makers provide liquidity at a premium.\n                concise Specification: The factor uses a 5-day window for volume-weighted skewness to capture recent imbalance and a 20-day median turnover as a baseline to identify abnormal liquidity events, targeting mean-reversion over a 1-5 day horizon.\n                ",
        "initial_direction": "Evaluate 'Intraday-to-Interday Volatility Shift' by comparing KLEN to STD5: when intraday ranges exceed 5-day realized volatility, it signals a regime shift in market participants' urgency.",
        "planning_direction": "Evaluate 'Intraday-to-Interday Volatility Shift' by comparing KLEN to STD5: when intraday ranges exceed 5-day realized volatility, it signals a regime shift in market participants' urgency.",
        "created_at": "2026-01-21T09:35:47.006991"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1544946790876025,
        "ICIR": 0.0389000770099648,
        "1day.excess_return_without_cost.std": 0.0051997397791481,
        "1day.excess_return_with_cost.annualized_return": 0.00013792845762,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002007259592352,
        "1day.excess_return_without_cost.annualized_return": 0.0477727782979781,
        "1day.excess_return_with_cost.std": 0.0052007682169644,
        "Rank IC": 0.0240130310402388,
        "IC": 0.0060782290173483,
        "1day.excess_return_without_cost.max_drawdown": -0.1138566444260834,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.595539278741646,
        "1day.pa": 0.0,
        "l2.valid": 0.996172786093824,
        "Rank ICIR": 0.1501068871148751,
        "l2.train": 0.9940168138187764,
        "1day.excess_return_with_cost.information_ratio": 0.0017190871825722,
        "1day.excess_return_with_cost.mean": 5.795313345380462e-07
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Liquidity Exhaustion Reversal' hypothesis. The 'Liquidity_Exhaustion_Skew_Factor' achieved a higher IC (0.006078) compared to the SOTA (0.005798), indicating a stronger point-in-time correlation with future returns. However, the portfolio-based metrics (Information Ratio and Annualized Return) underperformed the SOTA, and the Max Drawdown significantly worsened (-0.1138 vs -0.0725). This suggests that while the signal captures some predictive power, it introduces significant volatility or is concentrated in periods/stocks that are difficult to capture in a stable portfolio.",
        "hypothesis_evaluation": "The hypothesis that liquidity shocks driven by volume-weighted skewness lead to reversals is partially supported by the improved IC. However, the current implementation of 'Liquidity_Exhaustion_Skew_Factor' (using return^3 * volume) might be too noisy. The 'Turnover_Spike_Reversal_Factor' and 'Relative_Liquidity_Shock_Index' provide simpler alternatives, but the lack of improvement in annualized return suggests the interaction between skewness and abnormal turnover needs a more robust mathematical formulation to filter out noise.",
        "decision": false,
        "reason": "The previous factors used raw volume or simple medians, which do not account for the varying volatility of different instruments. By using a Z-score for turnover and normalizing the price signal by volatility (Sharpe-like ratio over 5 days), we can better identify 'exhaustion' points that are statistically significant relative to the stock's own history, rather than just cross-sectional extremes. This should improve the Information Ratio and reduce Drawdown by avoiding high-volatility traps."
      }
    },
    "1e0e100fb608c931": {
      "factor_id": "1e0e100fb608c931",
      "factor_name": "Relative_Liquidity_Shock_Index",
      "factor_expression": "RANK(SKEW($return)) * RANK($volume / (TS_MEDIAN($volume, 20) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK($volume / TS_MEDIAN($volume, 20)) * RANK(SKEW(TS_PCTCHANGE($close, 1)))\" # Your output factor expression will be filled in here\n    name = \"Relative_Liquidity_Shock_Index\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A simplified version of the liquidity exhaustion hypothesis that uses the ratio of current volume to historical median volume, interacted with the cross-sectional rank of price skewness to find outliers in liquidity demand.",
      "factor_formulation": "RLSI = \\text{RANK}(\\text{SKEW}(\\text{return})) \\times \\text{RANK}\\left(\\frac{\\text{volume}}{\\text{TS\\_MEDIAN}(\\text{volume}, 20) + 1e-8}\\right)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 7,
        "evolution_phase": "mutation",
        "trajectory_id": "6becae249925",
        "parent_trajectory_ids": [
          "ebb95d0d34c5"
        ],
        "hypothesis": "Hypothesis: The 'Liquidity Exhaustion Reversal' factor, calculated as the product of the 5-day volume-weighted price skewness and the ratio of current turnover to its 20-day median, identifies short-term price peaks or troughs driven by retail-induced liquidity shocks that are likely to mean-revert.\n                Concise Observation: The parent strategy focuses on smooth institutional trends, but market data shows that extreme volume spikes often accompany price 'blow-offs' where price linearity breaks down and volatility expands rapidly before a reversal.\n                Concise Justification: High turnover spikes combined with skewed price action represent 'panic' or 'FOMO' buying/selling; according to the theory of limits to arbitrage, these liquidity-driven price deviations are unsustainable and provide excess returns upon correction.\n                Concise Knowledge: If a stock exhibits high volume-weighted skewness alongside a significant spike in relative turnover, it indicates one-sided trade exhaustion; when such liquidity demand peaks, prices tend to reverse as market makers provide liquidity at a premium.\n                concise Specification: The factor uses a 5-day window for volume-weighted skewness to capture recent imbalance and a 20-day median turnover as a baseline to identify abnormal liquidity events, targeting mean-reversion over a 1-5 day horizon.\n                ",
        "initial_direction": "Evaluate 'Intraday-to-Interday Volatility Shift' by comparing KLEN to STD5: when intraday ranges exceed 5-day realized volatility, it signals a regime shift in market participants' urgency.",
        "planning_direction": "Evaluate 'Intraday-to-Interday Volatility Shift' by comparing KLEN to STD5: when intraday ranges exceed 5-day realized volatility, it signals a regime shift in market participants' urgency.",
        "created_at": "2026-01-21T09:35:47.006991"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1544946790876025,
        "ICIR": 0.0389000770099648,
        "1day.excess_return_without_cost.std": 0.0051997397791481,
        "1day.excess_return_with_cost.annualized_return": 0.00013792845762,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002007259592352,
        "1day.excess_return_without_cost.annualized_return": 0.0477727782979781,
        "1day.excess_return_with_cost.std": 0.0052007682169644,
        "Rank IC": 0.0240130310402388,
        "IC": 0.0060782290173483,
        "1day.excess_return_without_cost.max_drawdown": -0.1138566444260834,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.595539278741646,
        "1day.pa": 0.0,
        "l2.valid": 0.996172786093824,
        "Rank ICIR": 0.1501068871148751,
        "l2.train": 0.9940168138187764,
        "1day.excess_return_with_cost.information_ratio": 0.0017190871825722,
        "1day.excess_return_with_cost.mean": 5.795313345380462e-07
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Liquidity Exhaustion Reversal' hypothesis. The 'Liquidity_Exhaustion_Skew_Factor' achieved a higher IC (0.006078) compared to the SOTA (0.005798), indicating a stronger point-in-time correlation with future returns. However, the portfolio-based metrics (Information Ratio and Annualized Return) underperformed the SOTA, and the Max Drawdown significantly worsened (-0.1138 vs -0.0725). This suggests that while the signal captures some predictive power, it introduces significant volatility or is concentrated in periods/stocks that are difficult to capture in a stable portfolio.",
        "hypothesis_evaluation": "The hypothesis that liquidity shocks driven by volume-weighted skewness lead to reversals is partially supported by the improved IC. However, the current implementation of 'Liquidity_Exhaustion_Skew_Factor' (using return^3 * volume) might be too noisy. The 'Turnover_Spike_Reversal_Factor' and 'Relative_Liquidity_Shock_Index' provide simpler alternatives, but the lack of improvement in annualized return suggests the interaction between skewness and abnormal turnover needs a more robust mathematical formulation to filter out noise.",
        "decision": false,
        "reason": "The previous factors used raw volume or simple medians, which do not account for the varying volatility of different instruments. By using a Z-score for turnover and normalizing the price signal by volatility (Sharpe-like ratio over 5 days), we can better identify 'exhaustion' points that are statistically significant relative to the stock's own history, rather than just cross-sectional extremes. This should improve the Information Ratio and reduce Drawdown by avoiding high-volatility traps."
      }
    },
    "cf69c46a7831b882": {
      "factor_id": "cf69c46a7831b882",
      "factor_name": "EVB_Exhaustion_Score_20D",
      "factor_expression": "(($open - DELAY($close, 1)) / DELAY($close, 1)) * (($high - $low) / (TS_MEAN($high - $low, 20) + 1e-8)) / (TS_STD($close, 15) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(($open - DELAY($close, 1)) / DELAY($close, 1)) * (($high - $low) / (TS_MEAN($high - $low, 20) + 1e-8)) / (TS_STD($close, 15) + 1e-8)\" # Your output factor expression will be filled in here\n    name = \"EVB_Exhaustion_Score_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies assets where a structural breakout (overnight gap) follows a period of low volatility, confirmed by high intraday price dispersion. It captures the 'Exhaustion-Validated Breakout' by multiplying the gap magnitude with the ratio of current intraday range to its 20-day average, inversely weighted by historical volatility.",
      "factor_formulation": "\\text{EVB} = \\frac{(\\text{open} - \\text{prev\\_close})}{\\text{prev\\_close}} \\times \\frac{(\\text{high} - \\text{low})}{\\text{TS\\_MEAN}(\\text{high} - \\text{low}, 20)} \\times \\frac{1}{\\text{TS\\_STD}(\\text{close}, 15)}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "06375b2caf72",
        "parent_trajectory_ids": [
          "328dbeb0c242",
          "061e5ede53d0"
        ],
        "hypothesis": "Hypothesis: The 'Exhaustion-Validated Breakout' (EVB) factor identifies superior entry points by detecting assets where an overnight price gap following a 15-day low-volatility period is subsequently 'stress-tested' by high intraday price dispersion (High-Low range) relative to its 20-day average, signaling that 'dumb money' volatility has been absorbed by institutional support.\n                Concise Observation: Parent 1 (ILE) captured mean-reversion via liquidity exhaustion (RankIC 0.0285), while Parent 2 (ICCG) captured institutional conviction via gaps (RankIC 0.0229); combining them addresses the false-breakout problem in trend-following and the timing problem in mean-reversion.\n                Concise Justification: High intraday price dispersion relative to historical norms, when occurring after a volatility-compressed gap, serves as a 'filter' that separates high-conviction institutional moves from speculative noise, as the exhaustion of intraday sellers at the gap level provides a high-probability support zone.\n                Concise Knowledge: If a structural breakout (overnight gap) occurs after a volatility compression, its sustainability is confirmed when high intraday noise (price dispersion) fails to reverse the trend, indicating liquidity exhaustion of counter-trend participants.\n                concise Specification: Define 'Compression' as 15-day std of close; 'Gap' as (Open - PrevClose) / PrevClose; 'Exhaustion' as (High - Low) / 20-day moving average of (High - Low). The factor combines these by selecting assets with low 15-day volatility, a positive overnight gap, and an intraday range significantly higher than its 20-day mean.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T09:48:37.145278"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0915459030702278,
        "ICIR": 0.0427183631987282,
        "1day.excess_return_without_cost.std": 0.0039868313033292,
        "1day.excess_return_with_cost.annualized_return": 3.153279764522561e-05,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001981999306096,
        "1day.excess_return_without_cost.annualized_return": 0.0471715834850993,
        "1day.excess_return_with_cost.std": 0.0039879486144452,
        "Rank IC": 0.0240013419644914,
        "IC": 0.0056665695019102,
        "1day.excess_return_without_cost.max_drawdown": -0.0713281509109673,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7669448174383438,
        "1day.pa": 0.0,
        "l2.valid": 0.9964473314653822,
        "Rank ICIR": 0.1842832950710088,
        "l2.train": 0.993766809216322,
        "1day.excess_return_with_cost.information_ratio": 0.0005125361137707,
        "1day.excess_return_with_cost.mean": 1.3249074640851096e-07
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Exhaustion-Validated Breakout' (EVB) hypothesis. While the current iteration achieved a slightly better Max Drawdown (-0.0713 vs -0.0725), it failed to surpass the SOTA in Information Ratio, Annualized Return, and IC. The EVB_Exhaustion_Score_20D factor effectively combines overnight gaps, intraday range expansion, and historical volatility, but the multiplicative structure might be creating extreme outliers that degrade the Information Ratio. The IC remains positive but slightly lower than the SOTA, suggesting that while the signal direction is correct, the magnitude or ranking of the signal needs refinement.",
        "hypothesis_evaluation": "The hypothesis that 'dumb money' volatility is absorbed by institutional support following a breakout is partially supported by the positive IC and improved Max Drawdown. However, the drop in Information Ratio (0.767 vs 0.973) suggests that the current mathematical representation (multiplicative interaction of three distinct signals) might be too noisy. The 'Exhaustion' component (intraday range) and the 'Compression' component (15-day volatility) are likely the primary drivers, but their interaction with the 'Gap' component needs better normalization.",
        "decision": false,
        "reason": "The current EVB_Exhaustion_Score_20D uses a raw ratio of (High-Low) to its mean, which can be highly unstable. By switching to a Z-Score for the range and incorporating volume (e.g., volume relative to a 20-day moving average), we can better distinguish between 'exhaustion' (high volume, high range) and simple 'noise'. Furthermore, reducing the complexity by using additive RANK-based combinations instead of raw multiplicative scores (as hinted by the EVB_Binary_Filter_Factor) may improve the Information Ratio by reducing the impact of outliers."
      }
    },
    "2ee20dab51b2c8e6": {
      "factor_id": "2ee20dab51b2c8e6",
      "factor_name": "EVB_Binary_Filter_Factor",
      "factor_expression": "RANK(($open - DELAY($close, 1)) / DELAY($close, 1)) + RANK(($high - $low) / (TS_MEAN($high - $low, 20) + 1e-8)) - RANK(TS_STD($close, 15))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(($open - DELAY($close, 1)) / DELAY($close, 1)) + RANK(($high - $low) / (TS_MEAN($high - $low, 20) + 1e-8)) - RANK(TS_STD($close, 15))\" # Your output factor expression will be filled in here\n    name = \"EVB_Binary_Filter_Factor\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A conditional factor that flags stocks meeting the Exhaustion-Validated Breakout criteria: 15-day volatility compression, a positive overnight gap, and intraday range expansion. It uses RANK to normalize the components cross-sectionally.",
      "factor_formulation": "\\text{EVB\\_Filter} = \\text{RANK}(\\text{Gap}) + \\text{RANK}(\\frac{\\text{Range}}{\\text{TS\\_MEAN}(\\text{Range}, 20)}) - \\text{RANK}(\\text{TS\\_STD}(\\text{close}, 15))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "06375b2caf72",
        "parent_trajectory_ids": [
          "328dbeb0c242",
          "061e5ede53d0"
        ],
        "hypothesis": "Hypothesis: The 'Exhaustion-Validated Breakout' (EVB) factor identifies superior entry points by detecting assets where an overnight price gap following a 15-day low-volatility period is subsequently 'stress-tested' by high intraday price dispersion (High-Low range) relative to its 20-day average, signaling that 'dumb money' volatility has been absorbed by institutional support.\n                Concise Observation: Parent 1 (ILE) captured mean-reversion via liquidity exhaustion (RankIC 0.0285), while Parent 2 (ICCG) captured institutional conviction via gaps (RankIC 0.0229); combining them addresses the false-breakout problem in trend-following and the timing problem in mean-reversion.\n                Concise Justification: High intraday price dispersion relative to historical norms, when occurring after a volatility-compressed gap, serves as a 'filter' that separates high-conviction institutional moves from speculative noise, as the exhaustion of intraday sellers at the gap level provides a high-probability support zone.\n                Concise Knowledge: If a structural breakout (overnight gap) occurs after a volatility compression, its sustainability is confirmed when high intraday noise (price dispersion) fails to reverse the trend, indicating liquidity exhaustion of counter-trend participants.\n                concise Specification: Define 'Compression' as 15-day std of close; 'Gap' as (Open - PrevClose) / PrevClose; 'Exhaustion' as (High - Low) / 20-day moving average of (High - Low). The factor combines these by selecting assets with low 15-day volatility, a positive overnight gap, and an intraday range significantly higher than its 20-day mean.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T09:48:37.145278"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0915459030702278,
        "ICIR": 0.0427183631987282,
        "1day.excess_return_without_cost.std": 0.0039868313033292,
        "1day.excess_return_with_cost.annualized_return": 3.153279764522561e-05,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001981999306096,
        "1day.excess_return_without_cost.annualized_return": 0.0471715834850993,
        "1day.excess_return_with_cost.std": 0.0039879486144452,
        "Rank IC": 0.0240013419644914,
        "IC": 0.0056665695019102,
        "1day.excess_return_without_cost.max_drawdown": -0.0713281509109673,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7669448174383438,
        "1day.pa": 0.0,
        "l2.valid": 0.9964473314653822,
        "Rank ICIR": 0.1842832950710088,
        "l2.train": 0.993766809216322,
        "1day.excess_return_with_cost.information_ratio": 0.0005125361137707,
        "1day.excess_return_with_cost.mean": 1.3249074640851096e-07
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Exhaustion-Validated Breakout' (EVB) hypothesis. While the current iteration achieved a slightly better Max Drawdown (-0.0713 vs -0.0725), it failed to surpass the SOTA in Information Ratio, Annualized Return, and IC. The EVB_Exhaustion_Score_20D factor effectively combines overnight gaps, intraday range expansion, and historical volatility, but the multiplicative structure might be creating extreme outliers that degrade the Information Ratio. The IC remains positive but slightly lower than the SOTA, suggesting that while the signal direction is correct, the magnitude or ranking of the signal needs refinement.",
        "hypothesis_evaluation": "The hypothesis that 'dumb money' volatility is absorbed by institutional support following a breakout is partially supported by the positive IC and improved Max Drawdown. However, the drop in Information Ratio (0.767 vs 0.973) suggests that the current mathematical representation (multiplicative interaction of three distinct signals) might be too noisy. The 'Exhaustion' component (intraday range) and the 'Compression' component (15-day volatility) are likely the primary drivers, but their interaction with the 'Gap' component needs better normalization.",
        "decision": false,
        "reason": "The current EVB_Exhaustion_Score_20D uses a raw ratio of (High-Low) to its mean, which can be highly unstable. By switching to a Z-Score for the range and incorporating volume (e.g., volume relative to a 20-day moving average), we can better distinguish between 'exhaustion' (high volume, high range) and simple 'noise'. Furthermore, reducing the complexity by using additive RANK-based combinations instead of raw multiplicative scores (as hinted by the EVB_Binary_Filter_Factor) may improve the Information Ratio by reducing the impact of outliers."
      }
    },
    "3d36617005cc5524": {
      "factor_id": "3d36617005cc5524",
      "factor_name": "Intraday_Absorption_Ratio",
      "factor_expression": "TS_ZSCORE($high - $low, 20) / (TS_STD($close, 15) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_ZSCORE($high - $low, 20) / (TS_STD($close, 15) + 1e-8)\" # Your output factor expression will be filled in here\n    name = \"Intraday_Absorption_Ratio\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor focuses on the 'Exhaustion' component of the EVB hypothesis. It measures the current day's price dispersion relative to its recent history, specifically looking for high-dispersion days that occur after low-volatility regimes to identify institutional absorption.",
      "factor_formulation": "\\text{IAR} = \\frac{\\text{TS\\_ZSCORE}(\\text{high} - \\text{low}, 20)}{\\text{TS\\_STD}(\\text{close}, 15)}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "06375b2caf72",
        "parent_trajectory_ids": [
          "328dbeb0c242",
          "061e5ede53d0"
        ],
        "hypothesis": "Hypothesis: The 'Exhaustion-Validated Breakout' (EVB) factor identifies superior entry points by detecting assets where an overnight price gap following a 15-day low-volatility period is subsequently 'stress-tested' by high intraday price dispersion (High-Low range) relative to its 20-day average, signaling that 'dumb money' volatility has been absorbed by institutional support.\n                Concise Observation: Parent 1 (ILE) captured mean-reversion via liquidity exhaustion (RankIC 0.0285), while Parent 2 (ICCG) captured institutional conviction via gaps (RankIC 0.0229); combining them addresses the false-breakout problem in trend-following and the timing problem in mean-reversion.\n                Concise Justification: High intraday price dispersion relative to historical norms, when occurring after a volatility-compressed gap, serves as a 'filter' that separates high-conviction institutional moves from speculative noise, as the exhaustion of intraday sellers at the gap level provides a high-probability support zone.\n                Concise Knowledge: If a structural breakout (overnight gap) occurs after a volatility compression, its sustainability is confirmed when high intraday noise (price dispersion) fails to reverse the trend, indicating liquidity exhaustion of counter-trend participants.\n                concise Specification: Define 'Compression' as 15-day std of close; 'Gap' as (Open - PrevClose) / PrevClose; 'Exhaustion' as (High - Low) / 20-day moving average of (High - Low). The factor combines these by selecting assets with low 15-day volatility, a positive overnight gap, and an intraday range significantly higher than its 20-day mean.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T09:48:37.145278"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0915459030702278,
        "ICIR": 0.0427183631987282,
        "1day.excess_return_without_cost.std": 0.0039868313033292,
        "1day.excess_return_with_cost.annualized_return": 3.153279764522561e-05,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001981999306096,
        "1day.excess_return_without_cost.annualized_return": 0.0471715834850993,
        "1day.excess_return_with_cost.std": 0.0039879486144452,
        "Rank IC": 0.0240013419644914,
        "IC": 0.0056665695019102,
        "1day.excess_return_without_cost.max_drawdown": -0.0713281509109673,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7669448174383438,
        "1day.pa": 0.0,
        "l2.valid": 0.9964473314653822,
        "Rank ICIR": 0.1842832950710088,
        "l2.train": 0.993766809216322,
        "1day.excess_return_with_cost.information_ratio": 0.0005125361137707,
        "1day.excess_return_with_cost.mean": 1.3249074640851096e-07
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Exhaustion-Validated Breakout' (EVB) hypothesis. While the current iteration achieved a slightly better Max Drawdown (-0.0713 vs -0.0725), it failed to surpass the SOTA in Information Ratio, Annualized Return, and IC. The EVB_Exhaustion_Score_20D factor effectively combines overnight gaps, intraday range expansion, and historical volatility, but the multiplicative structure might be creating extreme outliers that degrade the Information Ratio. The IC remains positive but slightly lower than the SOTA, suggesting that while the signal direction is correct, the magnitude or ranking of the signal needs refinement.",
        "hypothesis_evaluation": "The hypothesis that 'dumb money' volatility is absorbed by institutional support following a breakout is partially supported by the positive IC and improved Max Drawdown. However, the drop in Information Ratio (0.767 vs 0.973) suggests that the current mathematical representation (multiplicative interaction of three distinct signals) might be too noisy. The 'Exhaustion' component (intraday range) and the 'Compression' component (15-day volatility) are likely the primary drivers, but their interaction with the 'Gap' component needs better normalization.",
        "decision": false,
        "reason": "The current EVB_Exhaustion_Score_20D uses a raw ratio of (High-Low) to its mean, which can be highly unstable. By switching to a Z-Score for the range and incorporating volume (e.g., volume relative to a 20-day moving average), we can better distinguish between 'exhaustion' (high volume, high range) and simple 'noise'. Furthermore, reducing the complexity by using additive RANK-based combinations instead of raw multiplicative scores (as hinted by the EVB_Binary_Filter_Factor) may improve the Information Ratio by reducing the impact of outliers."
      }
    },
    "ed001b0f1ff58ebf": {
      "factor_id": "ed001b0f1ff58ebf",
      "factor_name": "ILC_Informed_Liquidity_Capture_10D",
      "factor_expression": "ZSCORE((TS_MEAN($close * $volume, 10) / (TS_MEAN($volume, 10) + 1e-8)) - TS_MEAN($close, 10)) * (TS_STD($volume, 5) / (TS_MAX($high, 15) - TS_MIN($low, 15) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"ZSCORE((TS_MEAN($close * $volume, 10) / (TS_MEAN($volume, 10) + 1e-8)) - TS_MEAN($close, 10)) * (TS_STD($volume, 5) / (TS_MAX($high, 15) - TS_MIN($low, 15) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"ILC_Informed_Liquidity_Capture_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "The Informed Liquidity Capture (ILC) factor identifies institutional entries by combining an Asymmetric Information Decay (AID) score with a Volatility-Liquidity Compression (VLC) trigger. AID measures the divergence between volume-weighted and time-weighted prices over 10 days, while VLC captures price range contraction relative to volume stability over 5 days.",
      "factor_formulation": "ILC = ZSCORE(\\frac{TS\\_MEAN(close \\cdot volume, 10)}{TS\\_MEAN(volume, 10)} - TS\\_MEAN(close, 10)) \\cdot \\frac{TS\\_STD(volume, 5)}{TS\\_MAX(high, 15) - TS\\_MIN(low, 15)}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 10,
        "evolution_phase": "crossover",
        "trajectory_id": "5fa4813ff432",
        "parent_trajectory_ids": [
          "51d281e76291",
          "15343411702f"
        ],
        "hypothesis": "Hypothesis: The 'Informed Liquidity Capture' (ILC) factor identifies high-conviction institutional entries by multiplying a 10-day Asymmetric Information Decay (AID) scoremeasuring the divergence between price-weighted and time-weighted averageswith a 5-day Volatility-Liquidity Compression (VLC) trigger.\n                Concise Observation: Parent 1 (AID) captures early positioning but lacks timing precision (RankIC 0.023), while Parent 2 (EVIB) identifies explosive breakouts but suffers from false signals (RankIC 0.028); both rely on low-volume regimes to signal institutional dominance.\n                Concise Justification: The fusion uses AID as a quality filter to ensure the breakout identified by VLC is backed by prior informed positioning, reducing 'fake-outs' caused by random retail noise or temporary liquidity gaps.\n                Concise Knowledge: If stealth institutional accumulation (AID) is validated by a regime of extreme liquidity exhaustion and volatility compression, then the subsequent price breakout is more likely to be persistent; when retail participation is low, institutional flows exert a disproportionate impact on price discovery.\n                concise Specification: Calculate AID as (mean($close * $volume) / mean($volume)) - mean($close) over 10 days; calculate VLC as the inverse of (15-day price range / 5-day volume std); the final factor is the product of Z-scored AID and VLC.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T12:49:36.045609"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1464951525904688,
        "ICIR": 0.0462264064691406,
        "1day.excess_return_without_cost.std": 0.0048558753352584,
        "1day.excess_return_with_cost.annualized_return": -0.0124405956915143,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001478378988452,
        "1day.excess_return_without_cost.annualized_return": 0.0351854199251635,
        "1day.excess_return_with_cost.std": 0.0048573660157832,
        "Rank IC": 0.0239522573739457,
        "IC": 0.006782042392544,
        "1day.excess_return_without_cost.max_drawdown": -0.1252697331476359,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.4696850441079855,
        "1day.pa": 0.0,
        "l2.valid": 0.9964999011476624,
        "Rank ICIR": 0.1662924338659375,
        "l2.train": 0.9940839710932244,
        "1day.excess_return_with_cost.information_ratio": -0.1660167346715036,
        "1day.excess_return_with_cost.mean": -5.227141046854785e-05
      },
      "feedback": {
        "observations": "The experiment tested the 'Informed Liquidity Capture' (ILC) framework by evaluating the combined factor and its two components (AID and VLC) individually. The current result achieved a higher Information Coefficient (IC) of 0.006782 compared to the SOTA's 0.005798, indicating a stronger point-in-time predictive correlation. However, the portfolio-based metrics (Annualized Return, Information Ratio, and Max Drawdown) significantly underperformed the SOTA, suggesting that while the signal has predictive power, its volatility or turnover characteristics lead to poorer risk-adjusted returns in a backtest environment.",
        "hypothesis_evaluation": "The hypothesis that combining AID and VLC identifies high-conviction entries is partially supported by the improved IC, which suggests the interaction between volume-weighted price divergence and liquidity compression contains alpha. However, the high Max Drawdown (-0.125) and lower IR (0.469) suggest the current formulation of the VLC triggerspecifically using the 15-day price range in the denominatormight be too sensitive to outliers or market-wide volatility, leading to unstable signals.",
        "decision": false,
        "reason": "The current VLC component uses 'TS_MAX(high, 15) - TS_MIN(low, 15)', which can expand drastically during flash crashes or idiosyncratic spikes, diluting the factor value. Using a standardized volatility measure like Average True Range (ATR) or a simple standard deviation of returns would provide a more consistent scaling. Furthermore, the product of a Z-score and a raw ratio can create extreme outliers; mapping the components to a uniform distribution (RANK) before multiplication will likely improve the Information Ratio and reduce Drawdown."
      }
    },
    "083c2b7e640797ea": {
      "factor_id": "083c2b7e640797ea",
      "factor_name": "VLC_Compression_Trigger_5D",
      "factor_expression": "RANK(TS_STD($volume, 5) / (TS_MAX($high, 15) - TS_MIN($low, 15) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(TS_STD($volume, 5) / (TS_MAX($high, 15) - TS_MIN($low, 15) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"VLC_Compression_Trigger_5D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A standalone Volatility-Liquidity Compression (VLC) factor that identifies regimes of extreme liquidity exhaustion. It calculates the ratio of volume volatility over the 15-day price range. High values indicate that volume is fluctuating while price remains range-bound, often preceding institutional breakouts.",
      "factor_formulation": "VLC = RANK(\\frac{TS\\_STD(volume, 5)}{TS\\_MAX(high, 15) - TS\\_MIN(low, 15)})",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 10,
        "evolution_phase": "crossover",
        "trajectory_id": "5fa4813ff432",
        "parent_trajectory_ids": [
          "51d281e76291",
          "15343411702f"
        ],
        "hypothesis": "Hypothesis: The 'Informed Liquidity Capture' (ILC) factor identifies high-conviction institutional entries by multiplying a 10-day Asymmetric Information Decay (AID) scoremeasuring the divergence between price-weighted and time-weighted averageswith a 5-day Volatility-Liquidity Compression (VLC) trigger.\n                Concise Observation: Parent 1 (AID) captures early positioning but lacks timing precision (RankIC 0.023), while Parent 2 (EVIB) identifies explosive breakouts but suffers from false signals (RankIC 0.028); both rely on low-volume regimes to signal institutional dominance.\n                Concise Justification: The fusion uses AID as a quality filter to ensure the breakout identified by VLC is backed by prior informed positioning, reducing 'fake-outs' caused by random retail noise or temporary liquidity gaps.\n                Concise Knowledge: If stealth institutional accumulation (AID) is validated by a regime of extreme liquidity exhaustion and volatility compression, then the subsequent price breakout is more likely to be persistent; when retail participation is low, institutional flows exert a disproportionate impact on price discovery.\n                concise Specification: Calculate AID as (mean($close * $volume) / mean($volume)) - mean($close) over 10 days; calculate VLC as the inverse of (15-day price range / 5-day volume std); the final factor is the product of Z-scored AID and VLC.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T12:49:36.045609"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1464951525904688,
        "ICIR": 0.0462264064691406,
        "1day.excess_return_without_cost.std": 0.0048558753352584,
        "1day.excess_return_with_cost.annualized_return": -0.0124405956915143,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001478378988452,
        "1day.excess_return_without_cost.annualized_return": 0.0351854199251635,
        "1day.excess_return_with_cost.std": 0.0048573660157832,
        "Rank IC": 0.0239522573739457,
        "IC": 0.006782042392544,
        "1day.excess_return_without_cost.max_drawdown": -0.1252697331476359,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.4696850441079855,
        "1day.pa": 0.0,
        "l2.valid": 0.9964999011476624,
        "Rank ICIR": 0.1662924338659375,
        "l2.train": 0.9940839710932244,
        "1day.excess_return_with_cost.information_ratio": -0.1660167346715036,
        "1day.excess_return_with_cost.mean": -5.227141046854785e-05
      },
      "feedback": {
        "observations": "The experiment tested the 'Informed Liquidity Capture' (ILC) framework by evaluating the combined factor and its two components (AID and VLC) individually. The current result achieved a higher Information Coefficient (IC) of 0.006782 compared to the SOTA's 0.005798, indicating a stronger point-in-time predictive correlation. However, the portfolio-based metrics (Annualized Return, Information Ratio, and Max Drawdown) significantly underperformed the SOTA, suggesting that while the signal has predictive power, its volatility or turnover characteristics lead to poorer risk-adjusted returns in a backtest environment.",
        "hypothesis_evaluation": "The hypothesis that combining AID and VLC identifies high-conviction entries is partially supported by the improved IC, which suggests the interaction between volume-weighted price divergence and liquidity compression contains alpha. However, the high Max Drawdown (-0.125) and lower IR (0.469) suggest the current formulation of the VLC triggerspecifically using the 15-day price range in the denominatormight be too sensitive to outliers or market-wide volatility, leading to unstable signals.",
        "decision": false,
        "reason": "The current VLC component uses 'TS_MAX(high, 15) - TS_MIN(low, 15)', which can expand drastically during flash crashes or idiosyncratic spikes, diluting the factor value. Using a standardized volatility measure like Average True Range (ATR) or a simple standard deviation of returns would provide a more consistent scaling. Furthermore, the product of a Z-score and a raw ratio can create extreme outliers; mapping the components to a uniform distribution (RANK) before multiplication will likely improve the Information Ratio and reduce Drawdown."
      }
    },
    "b516d5d364127ec9": {
      "factor_id": "b516d5d364127ec9",
      "factor_name": "AID_Institutional_Accumulation_10D",
      "factor_expression": "ZSCORE((TS_MEAN($close * $volume, 10) / (TS_MEAN($volume, 10) + 1e-8)) - TS_MEAN($close, 10))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"ZSCORE((TS_MEAN($close * $volume, 10) / (TS_MEAN($volume, 10) + 1e-8)) - TS_MEAN($close, 10))\" # Your output factor expression will be filled in here\n    name = \"AID_Institutional_Accumulation_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "The Asymmetric Information Decay (AID) factor measures the alpha generated by volume-weighted price deviations. A positive divergence suggests that high-volume trades are occurring at prices above the simple average, signaling stealth institutional accumulation.",
      "factor_formulation": "AID = ZSCORE(\\frac{TS\\_MEAN(close \\cdot volume, 10)}{TS\\_MEAN(volume, 10)} - TS\\_MEAN(close, 10))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 10,
        "evolution_phase": "crossover",
        "trajectory_id": "5fa4813ff432",
        "parent_trajectory_ids": [
          "51d281e76291",
          "15343411702f"
        ],
        "hypothesis": "Hypothesis: The 'Informed Liquidity Capture' (ILC) factor identifies high-conviction institutional entries by multiplying a 10-day Asymmetric Information Decay (AID) scoremeasuring the divergence between price-weighted and time-weighted averageswith a 5-day Volatility-Liquidity Compression (VLC) trigger.\n                Concise Observation: Parent 1 (AID) captures early positioning but lacks timing precision (RankIC 0.023), while Parent 2 (EVIB) identifies explosive breakouts but suffers from false signals (RankIC 0.028); both rely on low-volume regimes to signal institutional dominance.\n                Concise Justification: The fusion uses AID as a quality filter to ensure the breakout identified by VLC is backed by prior informed positioning, reducing 'fake-outs' caused by random retail noise or temporary liquidity gaps.\n                Concise Knowledge: If stealth institutional accumulation (AID) is validated by a regime of extreme liquidity exhaustion and volatility compression, then the subsequent price breakout is more likely to be persistent; when retail participation is low, institutional flows exert a disproportionate impact on price discovery.\n                concise Specification: Calculate AID as (mean($close * $volume) / mean($volume)) - mean($close) over 10 days; calculate VLC as the inverse of (15-day price range / 5-day volume std); the final factor is the product of Z-scored AID and VLC.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T12:49:36.045609"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1464951525904688,
        "ICIR": 0.0462264064691406,
        "1day.excess_return_without_cost.std": 0.0048558753352584,
        "1day.excess_return_with_cost.annualized_return": -0.0124405956915143,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001478378988452,
        "1day.excess_return_without_cost.annualized_return": 0.0351854199251635,
        "1day.excess_return_with_cost.std": 0.0048573660157832,
        "Rank IC": 0.0239522573739457,
        "IC": 0.006782042392544,
        "1day.excess_return_without_cost.max_drawdown": -0.1252697331476359,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.4696850441079855,
        "1day.pa": 0.0,
        "l2.valid": 0.9964999011476624,
        "Rank ICIR": 0.1662924338659375,
        "l2.train": 0.9940839710932244,
        "1day.excess_return_with_cost.information_ratio": -0.1660167346715036,
        "1day.excess_return_with_cost.mean": -5.227141046854785e-05
      },
      "feedback": {
        "observations": "The experiment tested the 'Informed Liquidity Capture' (ILC) framework by evaluating the combined factor and its two components (AID and VLC) individually. The current result achieved a higher Information Coefficient (IC) of 0.006782 compared to the SOTA's 0.005798, indicating a stronger point-in-time predictive correlation. However, the portfolio-based metrics (Annualized Return, Information Ratio, and Max Drawdown) significantly underperformed the SOTA, suggesting that while the signal has predictive power, its volatility or turnover characteristics lead to poorer risk-adjusted returns in a backtest environment.",
        "hypothesis_evaluation": "The hypothesis that combining AID and VLC identifies high-conviction entries is partially supported by the improved IC, which suggests the interaction between volume-weighted price divergence and liquidity compression contains alpha. However, the high Max Drawdown (-0.125) and lower IR (0.469) suggest the current formulation of the VLC triggerspecifically using the 15-day price range in the denominatormight be too sensitive to outliers or market-wide volatility, leading to unstable signals.",
        "decision": false,
        "reason": "The current VLC component uses 'TS_MAX(high, 15) - TS_MIN(low, 15)', which can expand drastically during flash crashes or idiosyncratic spikes, diluting the factor value. Using a standardized volatility measure like Average True Range (ATR) or a simple standard deviation of returns would provide a more consistent scaling. Furthermore, the product of a Z-score and a raw ratio can create extreme outliers; mapping the components to a uniform distribution (RANK) before multiplication will likely improve the Information Ratio and reduce Drawdown."
      }
    },
    "4d505c0c56459d17": {
      "factor_id": "4d505c0c56459d17",
      "factor_name": "Intraday_Exhaustion_Reversal_10D",
      "factor_expression": "TS_RANK(($high - $low) / $close, 10) * TS_MEAN(1 / (ABS($close - ($high + $low + $close) / 3) + 1e-8), 5)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_RANK(($high - $low) / $close, 10) * TS_MEAN(1 / (ABS($close - ($high + $low + $close) / 3) + 1e-8), 5)\" # Your output factor expression will be filled in here\n    name = \"Intraday_Exhaustion_Reversal_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies potential trend reversals by interacting the 10-day time-series rank of the intraday range ratio with the inverse distance between the closing price and the daily average price (VWAP approximation). High values suggest high volatility without directional progress, signaling exhaustion.",
      "factor_formulation": "\\text{TS\\_RANK}(\\frac{high - low}{close}, 10) \\times \\text{TS\\_MEAN}(\\frac{1}{\\text{ABS}(close - \\frac{high+low+close}{3}) + 1e-8}, 5)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 7,
        "evolution_phase": "mutation",
        "trajectory_id": "6a56d65b8b1a",
        "parent_trajectory_ids": [
          "fb494dc84807"
        ],
        "hypothesis": "Hypothesis: The 'Intraday Exhaustion Reversal' factor, defined as the product of the 10-day rank of the High-Low range ratio and the inverse of the 5-day price-to-volume-weighted-average-price distance, identifies mean-reversion opportunities where high volatility without price displacement signals trend depletion.\n                Concise Observation: The parent strategy focused on inter-day gaps and low-volatility accumulation, whereas market data reveals that peaks in the High-Low range often coincide with a narrowing gap between the close and the volume-weighted average price, marking a shift from trend persistence to mean reversion.\n                Concise Justification: High intraday ranges indicate intense battle between buyers and sellers, but if the price closes near the VWAP, it suggests that neither side could sustain a breakout, leading to a 'volatility without progress' state that typically precedes a reversal.\n                Concise Knowledge: If intraday price dispersion reaches extreme levels while the closing price converges toward the daily average cost (VWAP), the prevailing trend is likely exhausted; when price volatility is high but net displacement is low, market participants are transitioning from directional aggression to passive liquidity provision.\n                concise Specification: The factor interacts the 10-day relative intraday range (High-Low / Close) with the 5-day proximity of the Close to the VWAP (approximated as (High+Low+Close)/3); high values indicate extreme range with tight VWAP convergence, signaling a high probability of a short-term trend reversal.\n                ",
        "initial_direction": "Assess 'Volume-Price Divergence' by interacting CORR20 with RSQR10: a high R-squared trend that loses its correlation with volume often precedes a trend reversal or consolidation.",
        "planning_direction": "Assess 'Volume-Price Divergence' by interacting CORR20 with RSQR10: a high R-squared trend that loses its correlation with volume often precedes a trend reversal or consolidation.",
        "created_at": "2026-01-21T09:45:32.401384"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1112063441042629,
        "ICIR": 0.0403131468116047,
        "1day.excess_return_without_cost.std": 0.0039390795650048,
        "1day.excess_return_with_cost.annualized_return": -0.0054684005389127,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001761839813554,
        "1day.excess_return_without_cost.annualized_return": 0.0419317875625912,
        "1day.excess_return_with_cost.std": 0.0039388718397868,
        "Rank IC": 0.0238353203951861,
        "IC": 0.0052729275142378,
        "1day.excess_return_without_cost.max_drawdown": -0.1012113134845434,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.6900175633602922,
        "1day.pa": 0.0,
        "l2.valid": 0.9966187875448158,
        "Rank ICIR": 0.1814489347528798,
        "l2.train": 0.9932805025084444,
        "1day.excess_return_with_cost.information_ratio": -0.0899911887305707,
        "1day.excess_return_with_cost.mean": -2.297647285257453e-05
      },
      "feedback": {
        "observations": "The experiment evaluated three variations of the 'Intraday Exhaustion Reversal' hypothesis. The results indicate that while the core concept of using intraday range relative to price displacement has predictive power (positive IC and IR), the current implementations (Intraday_Exhaustion_Reversal_10D, Volatility_Convergence_Reversal_Factor, and Range_VWAP_Efficiency_Ratio) failed to outperform the existing SOTA. The SOTA remains superior across all key metrics, including IC (0.005798 vs 0.005273) and Information Ratio (0.972561 vs 0.690018). The 'Range_VWAP_Efficiency_Ratio' provided a simplified linear approach, but it appears that the interaction between raw volatility and price-to-VWAP distance requires a more robust normalization or a different look-back period to capture the 'exhaustion' signal effectively without being drowned out by absolute price levels.",
        "hypothesis_evaluation": "The hypothesis that high volatility without price displacement signals trend depletion is supported by the positive Information Ratio and IC, suggesting the signal is not noise. However, the current mathematical formulations are likely capturing too much 'level' information (e.g., high-low range in absolute terms) rather than 'relative' exhaustion. The 'Range_VWAP_Efficiency_Ratio' used raw price differences which might introduce scale bias. The use of TS_RANK in the first factor was a step in the right direction for normalization, but the 5-day window for the inverse distance might be too short, leading to high turnover and sensitivity to noise.",
        "decision": false,
        "reason": "Current factors either used raw values (Range_VWAP_Efficiency_Ratio) or mixed ranks with raw means. By using Z-scores for both the 'Volatility' component (High-Low) and the 'Displacement' component (Close-VWAP), we ensure both signals are on the same scale and represent 'abnormal' states. A high Z-score in range combined with a low or negative Z-score in displacement more accurately captures the 'churning' behavior indicative of exhaustion. Extending the displacement window to 10 days to match the range window will also provide a more stable baseline for comparison."
      }
    },
    "8ea5a5bb8514e525": {
      "factor_id": "8ea5a5bb8514e525",
      "factor_name": "Volatility_Convergence_Reversal_Factor",
      "factor_expression": "RANK(TS_MEAN(($high - $low) / $close, 10)) * RANK(1 / (TS_MEAN(ABS($close - ($high + $low + $close) / 3), 5) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(TS_MEAN(($high - $low) / $close, 10)) * RANK(1 / (TS_MEAN(ABS($close - ($high + $low + $close) / 3), 5) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Volatility_Convergence_Reversal_Factor\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor captures mean-reversion signals by measuring the cross-sectional rank of the 10-day average intraday range relative to the proximity of the price to its daily mean. It targets stocks where extreme intraday price dispersion is not resulting in net displacement from the daily average cost.",
      "factor_formulation": "\\text{RANK}(\\text{TS\\_MEAN}(\\frac{high - low}{close}, 10)) \\times \\text{RANK}(\\text{INV}(\\text{TS\\_MEAN}(\\text{ABS}(close - \\frac{high+low+close}{3}), 5) + 1e-8))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 7,
        "evolution_phase": "mutation",
        "trajectory_id": "6a56d65b8b1a",
        "parent_trajectory_ids": [
          "fb494dc84807"
        ],
        "hypothesis": "Hypothesis: The 'Intraday Exhaustion Reversal' factor, defined as the product of the 10-day rank of the High-Low range ratio and the inverse of the 5-day price-to-volume-weighted-average-price distance, identifies mean-reversion opportunities where high volatility without price displacement signals trend depletion.\n                Concise Observation: The parent strategy focused on inter-day gaps and low-volatility accumulation, whereas market data reveals that peaks in the High-Low range often coincide with a narrowing gap between the close and the volume-weighted average price, marking a shift from trend persistence to mean reversion.\n                Concise Justification: High intraday ranges indicate intense battle between buyers and sellers, but if the price closes near the VWAP, it suggests that neither side could sustain a breakout, leading to a 'volatility without progress' state that typically precedes a reversal.\n                Concise Knowledge: If intraday price dispersion reaches extreme levels while the closing price converges toward the daily average cost (VWAP), the prevailing trend is likely exhausted; when price volatility is high but net displacement is low, market participants are transitioning from directional aggression to passive liquidity provision.\n                concise Specification: The factor interacts the 10-day relative intraday range (High-Low / Close) with the 5-day proximity of the Close to the VWAP (approximated as (High+Low+Close)/3); high values indicate extreme range with tight VWAP convergence, signaling a high probability of a short-term trend reversal.\n                ",
        "initial_direction": "Assess 'Volume-Price Divergence' by interacting CORR20 with RSQR10: a high R-squared trend that loses its correlation with volume often precedes a trend reversal or consolidation.",
        "planning_direction": "Assess 'Volume-Price Divergence' by interacting CORR20 with RSQR10: a high R-squared trend that loses its correlation with volume often precedes a trend reversal or consolidation.",
        "created_at": "2026-01-21T09:45:32.401384"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1112063441042629,
        "ICIR": 0.0403131468116047,
        "1day.excess_return_without_cost.std": 0.0039390795650048,
        "1day.excess_return_with_cost.annualized_return": -0.0054684005389127,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001761839813554,
        "1day.excess_return_without_cost.annualized_return": 0.0419317875625912,
        "1day.excess_return_with_cost.std": 0.0039388718397868,
        "Rank IC": 0.0238353203951861,
        "IC": 0.0052729275142378,
        "1day.excess_return_without_cost.max_drawdown": -0.1012113134845434,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.6900175633602922,
        "1day.pa": 0.0,
        "l2.valid": 0.9966187875448158,
        "Rank ICIR": 0.1814489347528798,
        "l2.train": 0.9932805025084444,
        "1day.excess_return_with_cost.information_ratio": -0.0899911887305707,
        "1day.excess_return_with_cost.mean": -2.297647285257453e-05
      },
      "feedback": {
        "observations": "The experiment evaluated three variations of the 'Intraday Exhaustion Reversal' hypothesis. The results indicate that while the core concept of using intraday range relative to price displacement has predictive power (positive IC and IR), the current implementations (Intraday_Exhaustion_Reversal_10D, Volatility_Convergence_Reversal_Factor, and Range_VWAP_Efficiency_Ratio) failed to outperform the existing SOTA. The SOTA remains superior across all key metrics, including IC (0.005798 vs 0.005273) and Information Ratio (0.972561 vs 0.690018). The 'Range_VWAP_Efficiency_Ratio' provided a simplified linear approach, but it appears that the interaction between raw volatility and price-to-VWAP distance requires a more robust normalization or a different look-back period to capture the 'exhaustion' signal effectively without being drowned out by absolute price levels.",
        "hypothesis_evaluation": "The hypothesis that high volatility without price displacement signals trend depletion is supported by the positive Information Ratio and IC, suggesting the signal is not noise. However, the current mathematical formulations are likely capturing too much 'level' information (e.g., high-low range in absolute terms) rather than 'relative' exhaustion. The 'Range_VWAP_Efficiency_Ratio' used raw price differences which might introduce scale bias. The use of TS_RANK in the first factor was a step in the right direction for normalization, but the 5-day window for the inverse distance might be too short, leading to high turnover and sensitivity to noise.",
        "decision": false,
        "reason": "Current factors either used raw values (Range_VWAP_Efficiency_Ratio) or mixed ranks with raw means. By using Z-scores for both the 'Volatility' component (High-Low) and the 'Displacement' component (Close-VWAP), we ensure both signals are on the same scale and represent 'abnormal' states. A high Z-score in range combined with a low or negative Z-score in displacement more accurately captures the 'churning' behavior indicative of exhaustion. Extending the displacement window to 10 days to match the range window will also provide a more stable baseline for comparison."
      }
    },
    "69942eab4c6c0627": {
      "factor_id": "69942eab4c6c0627",
      "factor_name": "Range_VWAP_Efficiency_Ratio",
      "factor_expression": "TS_MEAN($high - $low, 10) / (TS_MEAN(ABS($close - ($high + $low + $close) / 3), 5) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_MEAN($high - $low, 10) / (TS_MEAN(ABS($close - ($high + $low + $close) / 3), 5) + 1e-8)\" # Your output factor expression will be filled in here\n    name = \"Range_VWAP_Efficiency_Ratio\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A refined exhaustion indicator that calculates the ratio of the 10-day average intraday range to the 5-day average deviation from the daily mean. A high ratio indicates that the stock is experiencing significant intraday volatility that is failing to pull the price away from its central daily value.",
      "factor_formulation": "\\frac{\\text{TS\\_MEAN}(high - low, 10)}{\\text{TS\\_MEAN}(\\text{ABS}(close - \\frac{high+low+close}{3}), 5) + 1e-8}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 7,
        "evolution_phase": "mutation",
        "trajectory_id": "6a56d65b8b1a",
        "parent_trajectory_ids": [
          "fb494dc84807"
        ],
        "hypothesis": "Hypothesis: The 'Intraday Exhaustion Reversal' factor, defined as the product of the 10-day rank of the High-Low range ratio and the inverse of the 5-day price-to-volume-weighted-average-price distance, identifies mean-reversion opportunities where high volatility without price displacement signals trend depletion.\n                Concise Observation: The parent strategy focused on inter-day gaps and low-volatility accumulation, whereas market data reveals that peaks in the High-Low range often coincide with a narrowing gap between the close and the volume-weighted average price, marking a shift from trend persistence to mean reversion.\n                Concise Justification: High intraday ranges indicate intense battle between buyers and sellers, but if the price closes near the VWAP, it suggests that neither side could sustain a breakout, leading to a 'volatility without progress' state that typically precedes a reversal.\n                Concise Knowledge: If intraday price dispersion reaches extreme levels while the closing price converges toward the daily average cost (VWAP), the prevailing trend is likely exhausted; when price volatility is high but net displacement is low, market participants are transitioning from directional aggression to passive liquidity provision.\n                concise Specification: The factor interacts the 10-day relative intraday range (High-Low / Close) with the 5-day proximity of the Close to the VWAP (approximated as (High+Low+Close)/3); high values indicate extreme range with tight VWAP convergence, signaling a high probability of a short-term trend reversal.\n                ",
        "initial_direction": "Assess 'Volume-Price Divergence' by interacting CORR20 with RSQR10: a high R-squared trend that loses its correlation with volume often precedes a trend reversal or consolidation.",
        "planning_direction": "Assess 'Volume-Price Divergence' by interacting CORR20 with RSQR10: a high R-squared trend that loses its correlation with volume often precedes a trend reversal or consolidation.",
        "created_at": "2026-01-21T09:45:32.401384"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1112063441042629,
        "ICIR": 0.0403131468116047,
        "1day.excess_return_without_cost.std": 0.0039390795650048,
        "1day.excess_return_with_cost.annualized_return": -0.0054684005389127,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001761839813554,
        "1day.excess_return_without_cost.annualized_return": 0.0419317875625912,
        "1day.excess_return_with_cost.std": 0.0039388718397868,
        "Rank IC": 0.0238353203951861,
        "IC": 0.0052729275142378,
        "1day.excess_return_without_cost.max_drawdown": -0.1012113134845434,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.6900175633602922,
        "1day.pa": 0.0,
        "l2.valid": 0.9966187875448158,
        "Rank ICIR": 0.1814489347528798,
        "l2.train": 0.9932805025084444,
        "1day.excess_return_with_cost.information_ratio": -0.0899911887305707,
        "1day.excess_return_with_cost.mean": -2.297647285257453e-05
      },
      "feedback": {
        "observations": "The experiment evaluated three variations of the 'Intraday Exhaustion Reversal' hypothesis. The results indicate that while the core concept of using intraday range relative to price displacement has predictive power (positive IC and IR), the current implementations (Intraday_Exhaustion_Reversal_10D, Volatility_Convergence_Reversal_Factor, and Range_VWAP_Efficiency_Ratio) failed to outperform the existing SOTA. The SOTA remains superior across all key metrics, including IC (0.005798 vs 0.005273) and Information Ratio (0.972561 vs 0.690018). The 'Range_VWAP_Efficiency_Ratio' provided a simplified linear approach, but it appears that the interaction between raw volatility and price-to-VWAP distance requires a more robust normalization or a different look-back period to capture the 'exhaustion' signal effectively without being drowned out by absolute price levels.",
        "hypothesis_evaluation": "The hypothesis that high volatility without price displacement signals trend depletion is supported by the positive Information Ratio and IC, suggesting the signal is not noise. However, the current mathematical formulations are likely capturing too much 'level' information (e.g., high-low range in absolute terms) rather than 'relative' exhaustion. The 'Range_VWAP_Efficiency_Ratio' used raw price differences which might introduce scale bias. The use of TS_RANK in the first factor was a step in the right direction for normalization, but the 5-day window for the inverse distance might be too short, leading to high turnover and sensitivity to noise.",
        "decision": false,
        "reason": "Current factors either used raw values (Range_VWAP_Efficiency_Ratio) or mixed ranks with raw means. By using Z-scores for both the 'Volatility' component (High-Low) and the 'Displacement' component (Close-VWAP), we ensure both signals are on the same scale and represent 'abnormal' states. A high Z-score in range combined with a low or negative Z-score in displacement more accurately captures the 'churning' behavior indicative of exhaustion. Extending the displacement window to 10 days to match the range window will also provide a more stable baseline for comparison."
      }
    },
    "367865f34f88b9f9": {
      "factor_id": "367865f34f88b9f9",
      "factor_name": "Liquidity_Validated_Sentiment_Efficiency_5D",
      "factor_expression": "(($open / DELAY($close, 1) - 1) / (($high - $low) / $close + 1e-8)) / (TS_MEAN(ABS($return) / ($volume + 1e-8), 5) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(($open / DELAY($close, 1) - 1) / (($high - $low) / $close + 0.000001)) / (TS_MEAN(ABS(($close / DELAY($close, 1) - 1)) / ($volume + 0.000001), 5) + 0.000001)\" # Your output factor expression will be filled in here\n    name = \"Liquidity_Validated_Sentiment_Efficiency_5D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor captures the quality of overnight sentiment by normalizing the price gap by the intraday range and weighting it by the inverse of the Amihud illiquidity. A high value suggests that the price gap is supported by sufficient volume (liquidity), indicating institutional conviction and trend persistence, whereas a low value suggests a liquidity hole prone to reversal.",
      "factor_formulation": "LSE = \\frac{(Open_t / Close_{t-1} - 1) / ((High_t - Low_t) / Close_t + 1e-8)}{\\text{TS_MEAN}(|Return_t| / (Volume_t + 1e-8), 5)}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 4,
        "evolution_phase": "crossover",
        "trajectory_id": "89d3f4d57158",
        "parent_trajectory_ids": [
          "85552c59600c",
          "3f240b40faa8"
        ],
        "hypothesis": "Hypothesis: The 'Liquidity-Validated Sentiment Efficiency' factor, defined as the ratio of the overnight gap (normalized by intraday range) to the 5-day average Amihud illiquidity, predicts that sentiment-driven price gaps are persistent only when supported by high liquidity, while gaps occurring during liquidity exhaustion are prone to reversal.\n                Concise Observation: Parent 1 showed that illiquidity spikes signal exhaustion (RankIC 0.029), while Parent 2 showed that overnight gaps relative to intraday ranges capture sentiment (RankIC 0.021), suggesting their interaction can filter false momentum signals.\n                Concise Justification: Institutional investors require deep liquidity to execute large orders; therefore, a sentiment gap that doesn't trigger an illiquidity spike (Amihud) suggests the market can absorb the move, whereas high illiquidity during a gap suggests a lack of counterparty depth and imminent price collapse.\n                Concise Knowledge: If a price gap is accompanied by low illiquidity (high volume per price move), it indicates institutional conviction and trend persistence; when a gap occurs alongside high illiquidity spikes, it represents a 'liquidity hole' likely to result in mean-reversion.\n                concise Specification: The factor is calculated as [(Open / Prev_Close - 1) / ((High - Low) / Close)] divided by [Mean(Volume / |Return|, 5)]. A high value indicates high-quality sentiment efficiency, while a low or negative value indicates liquidity-starved exhaustion.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T04:13:19.528767"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1107821768974279,
        "ICIR": 0.0462114225566524,
        "1day.excess_return_without_cost.std": 0.0042765972951899,
        "1day.excess_return_with_cost.annualized_return": 0.0226519339170441,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.000293856028294,
        "1day.excess_return_without_cost.annualized_return": 0.0699377347339783,
        "1day.excess_return_with_cost.std": 0.0042764494116135,
        "Rank IC": 0.0237787656792307,
        "IC": 0.0061631532222273,
        "1day.excess_return_without_cost.max_drawdown": -0.1016062599440744,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.060046035252296,
        "1day.pa": 0.0,
        "l2.valid": 0.9963392363304696,
        "Rank ICIR": 0.1815210472333898,
        "l2.train": 0.9936850430846222,
        "1day.excess_return_with_cost.information_ratio": 0.3433471671805804,
        "1day.excess_return_with_cost.mean": 9.517619292875698e-05
      },
      "feedback": {
        "observations": "The current iteration demonstrates a significant improvement in predictive power and risk-adjusted returns compared to the SOTA. The Information Ratio (IR) increased from 0.97 to 1.06, and the Annualized Return rose from 5.2% to 6.99%. The Information Coefficient (IC) also improved, suggesting that the interaction between overnight sentiment (the gap) and liquidity (Amihud/Volume) is a robust signal. However, the Max Drawdown deepened from -0.07 to -0.10, indicating that while the signal is stronger, it may introduce higher tail risk or sensitivity to market regimes.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that sentiment-driven price gaps are more persistent when validated by liquidity. The 'Cross_Sectional_Sentiment_Liquidity_Ratio' and 'Liquidity_Validated_Sentiment_Efficiency_5D' successfully capture the synergy between the magnitude of the gap and the ease of trading. The use of RANK in the cross-sectional version likely helped in neutralizing market-wide liquidity shocks, contributing to the improved IC and IR.",
        "decision": true,
        "reason": "While the current Amihud-based approach is effective, it uses full-day volume which includes the impact of the gap itself. By focusing on the 'Surprise' element (Gap / ATR) and weighting it by a Volume Shock (Current Volume / 20-day Mean Volume), we can better distinguish between institutional positioning and retail-driven noise. This should help address the increased drawdown by filtering out gaps that occur on standard or declining volume, which are more likely to be 'liquidity holes' rather than conviction-driven moves."
      }
    },
    "50ca9d20fa028e6f": {
      "factor_id": "50ca9d20fa028e6f",
      "factor_name": "Cross_Sectional_Sentiment_Liquidity_Ratio",
      "factor_expression": "RANK(($open - DELAY($close, 1)) / DELAY($close, 1)) * RANK(TS_MEAN($volume / (ABS($return) + 1e-8), 10))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(($open - DELAY($close, 1)) / DELAY($close, 1)) * RANK(INV(TS_MEAN(ABS(($close - DELAY($close, 1)) / DELAY($close, 1)) / ($volume + 0.000001), 10)))\" # Your output factor expression will be filled in here\n    name = \"Cross_Sectional_Sentiment_Liquidity_Ratio\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A cross-sectionally normalized version of the sentiment efficiency hypothesis. It ranks the overnight gap relative to volatility and compares it against the ranked liquidity (inverse Amihud). This version uses a 10-day window for liquidity smoothing and applies RANK to ensure cross-sectional comparability, focusing on identifying stocks where sentiment and liquidity are most aligned.",
      "factor_formulation": "CSLR = \\text{RANK}(\\frac{Open_t - Close_{t-1}}{Close_{t-1}}) * \\text{RANK}(\\text{TS_MEAN}(\\frac{Volume_t}{|Return_t| + 1e-8}, 10))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 4,
        "evolution_phase": "crossover",
        "trajectory_id": "89d3f4d57158",
        "parent_trajectory_ids": [
          "85552c59600c",
          "3f240b40faa8"
        ],
        "hypothesis": "Hypothesis: The 'Liquidity-Validated Sentiment Efficiency' factor, defined as the ratio of the overnight gap (normalized by intraday range) to the 5-day average Amihud illiquidity, predicts that sentiment-driven price gaps are persistent only when supported by high liquidity, while gaps occurring during liquidity exhaustion are prone to reversal.\n                Concise Observation: Parent 1 showed that illiquidity spikes signal exhaustion (RankIC 0.029), while Parent 2 showed that overnight gaps relative to intraday ranges capture sentiment (RankIC 0.021), suggesting their interaction can filter false momentum signals.\n                Concise Justification: Institutional investors require deep liquidity to execute large orders; therefore, a sentiment gap that doesn't trigger an illiquidity spike (Amihud) suggests the market can absorb the move, whereas high illiquidity during a gap suggests a lack of counterparty depth and imminent price collapse.\n                Concise Knowledge: If a price gap is accompanied by low illiquidity (high volume per price move), it indicates institutional conviction and trend persistence; when a gap occurs alongside high illiquidity spikes, it represents a 'liquidity hole' likely to result in mean-reversion.\n                concise Specification: The factor is calculated as [(Open / Prev_Close - 1) / ((High - Low) / Close)] divided by [Mean(Volume / |Return|, 5)]. A high value indicates high-quality sentiment efficiency, while a low or negative value indicates liquidity-starved exhaustion.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T04:13:19.528767"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1107821768974279,
        "ICIR": 0.0462114225566524,
        "1day.excess_return_without_cost.std": 0.0042765972951899,
        "1day.excess_return_with_cost.annualized_return": 0.0226519339170441,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.000293856028294,
        "1day.excess_return_without_cost.annualized_return": 0.0699377347339783,
        "1day.excess_return_with_cost.std": 0.0042764494116135,
        "Rank IC": 0.0237787656792307,
        "IC": 0.0061631532222273,
        "1day.excess_return_without_cost.max_drawdown": -0.1016062599440744,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.060046035252296,
        "1day.pa": 0.0,
        "l2.valid": 0.9963392363304696,
        "Rank ICIR": 0.1815210472333898,
        "l2.train": 0.9936850430846222,
        "1day.excess_return_with_cost.information_ratio": 0.3433471671805804,
        "1day.excess_return_with_cost.mean": 9.517619292875698e-05
      },
      "feedback": {
        "observations": "The current iteration demonstrates a significant improvement in predictive power and risk-adjusted returns compared to the SOTA. The Information Ratio (IR) increased from 0.97 to 1.06, and the Annualized Return rose from 5.2% to 6.99%. The Information Coefficient (IC) also improved, suggesting that the interaction between overnight sentiment (the gap) and liquidity (Amihud/Volume) is a robust signal. However, the Max Drawdown deepened from -0.07 to -0.10, indicating that while the signal is stronger, it may introduce higher tail risk or sensitivity to market regimes.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that sentiment-driven price gaps are more persistent when validated by liquidity. The 'Cross_Sectional_Sentiment_Liquidity_Ratio' and 'Liquidity_Validated_Sentiment_Efficiency_5D' successfully capture the synergy between the magnitude of the gap and the ease of trading. The use of RANK in the cross-sectional version likely helped in neutralizing market-wide liquidity shocks, contributing to the improved IC and IR.",
        "decision": true,
        "reason": "While the current Amihud-based approach is effective, it uses full-day volume which includes the impact of the gap itself. By focusing on the 'Surprise' element (Gap / ATR) and weighting it by a Volume Shock (Current Volume / 20-day Mean Volume), we can better distinguish between institutional positioning and retail-driven noise. This should help address the increased drawdown by filtering out gaps that occur on standard or declining volume, which are more likely to be 'liquidity holes' rather than conviction-driven moves."
      }
    },
    "045aaadb78b8a050": {
      "factor_id": "045aaadb78b8a050",
      "factor_name": "Sentiment_Exhaustion_Index_20D",
      "factor_expression": "TS_ZSCORE(($open / DELAY($close, 1) - 1), 20) / (TS_ZSCORE(ABS($return) / ($volume + 1e-8), 20) + 2.0)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_ZSCORE(($open / DELAY($close, 1) - 1), 20) / (TS_ZSCORE(ABS(($close / DELAY($close, 1) - 1)) / ($volume + 1e-8), 20) + 2)\" # Your output factor expression will be filled in here\n    name = \"Sentiment_Exhaustion_Index_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies potential price reversals by detecting 'liquidity-starved' gaps. It calculates the Z-score of the overnight gap and divides it by the Z-score of the Amihud illiquidity over a 20-day period. High values indicate sentiment efficiency, while extreme negative values or divergences suggest exhaustion in a liquidity vacuum.",
      "factor_formulation": "SEI = \\frac{\\text{TS_ZSCORE}(Open_t / Close_{t-1} - 1, 20)}{\\text{TS_ZSCORE}(|Return_t| / (Volume_t + 1e-8), 20) + 2}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 4,
        "evolution_phase": "crossover",
        "trajectory_id": "89d3f4d57158",
        "parent_trajectory_ids": [
          "85552c59600c",
          "3f240b40faa8"
        ],
        "hypothesis": "Hypothesis: The 'Liquidity-Validated Sentiment Efficiency' factor, defined as the ratio of the overnight gap (normalized by intraday range) to the 5-day average Amihud illiquidity, predicts that sentiment-driven price gaps are persistent only when supported by high liquidity, while gaps occurring during liquidity exhaustion are prone to reversal.\n                Concise Observation: Parent 1 showed that illiquidity spikes signal exhaustion (RankIC 0.029), while Parent 2 showed that overnight gaps relative to intraday ranges capture sentiment (RankIC 0.021), suggesting their interaction can filter false momentum signals.\n                Concise Justification: Institutional investors require deep liquidity to execute large orders; therefore, a sentiment gap that doesn't trigger an illiquidity spike (Amihud) suggests the market can absorb the move, whereas high illiquidity during a gap suggests a lack of counterparty depth and imminent price collapse.\n                Concise Knowledge: If a price gap is accompanied by low illiquidity (high volume per price move), it indicates institutional conviction and trend persistence; when a gap occurs alongside high illiquidity spikes, it represents a 'liquidity hole' likely to result in mean-reversion.\n                concise Specification: The factor is calculated as [(Open / Prev_Close - 1) / ((High - Low) / Close)] divided by [Mean(Volume / |Return|, 5)]. A high value indicates high-quality sentiment efficiency, while a low or negative value indicates liquidity-starved exhaustion.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T04:13:19.528767"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1107821768974279,
        "ICIR": 0.0462114225566524,
        "1day.excess_return_without_cost.std": 0.0042765972951899,
        "1day.excess_return_with_cost.annualized_return": 0.0226519339170441,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.000293856028294,
        "1day.excess_return_without_cost.annualized_return": 0.0699377347339783,
        "1day.excess_return_with_cost.std": 0.0042764494116135,
        "Rank IC": 0.0237787656792307,
        "IC": 0.0061631532222273,
        "1day.excess_return_without_cost.max_drawdown": -0.1016062599440744,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.060046035252296,
        "1day.pa": 0.0,
        "l2.valid": 0.9963392363304696,
        "Rank ICIR": 0.1815210472333898,
        "l2.train": 0.9936850430846222,
        "1day.excess_return_with_cost.information_ratio": 0.3433471671805804,
        "1day.excess_return_with_cost.mean": 9.517619292875698e-05
      },
      "feedback": {
        "observations": "The current iteration demonstrates a significant improvement in predictive power and risk-adjusted returns compared to the SOTA. The Information Ratio (IR) increased from 0.97 to 1.06, and the Annualized Return rose from 5.2% to 6.99%. The Information Coefficient (IC) also improved, suggesting that the interaction between overnight sentiment (the gap) and liquidity (Amihud/Volume) is a robust signal. However, the Max Drawdown deepened from -0.07 to -0.10, indicating that while the signal is stronger, it may introduce higher tail risk or sensitivity to market regimes.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that sentiment-driven price gaps are more persistent when validated by liquidity. The 'Cross_Sectional_Sentiment_Liquidity_Ratio' and 'Liquidity_Validated_Sentiment_Efficiency_5D' successfully capture the synergy between the magnitude of the gap and the ease of trading. The use of RANK in the cross-sectional version likely helped in neutralizing market-wide liquidity shocks, contributing to the improved IC and IR.",
        "decision": true,
        "reason": "While the current Amihud-based approach is effective, it uses full-day volume which includes the impact of the gap itself. By focusing on the 'Surprise' element (Gap / ATR) and weighting it by a Volume Shock (Current Volume / 20-day Mean Volume), we can better distinguish between institutional positioning and retail-driven noise. This should help address the increased drawdown by filtering out gaps that occur on standard or declining volume, which are more likely to be 'liquidity holes' rather than conviction-driven moves."
      }
    },
    "eedbe119c143f8ef": {
      "factor_id": "eedbe119c143f8ef",
      "factor_name": "Institutional_Gap_Linearity_10D",
      "factor_expression": "TS_MEAN(($open - DELAY($close, 1)) / ($high - $low + 1e-8), 5) * POW(TS_CORR($close, SEQUENCE(10), 10), 2)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_MEAN(($open - DELAY($close, 1)) / ($high - $low + 1e-8), 5) * POW(TS_CORR($close, SEQUENCE(10), 10), 2)\" # Your output factor expression will be filled in here\n    name = \"Institutional_Gap_Linearity_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies stocks where overnight sentiment (gaps) is validated by institutional accumulation (trend linearity). It multiplies the 5-day average normalized overnight gap by the R-squared of the 10-day price trend. High values indicate a strong catalyst followed by a persistent, low-noise trend.",
      "factor_formulation": "\\text{TS\\_MEAN}(\\frac{\\text{open} - \\text{DELAY}(\\text{close}, 1)}{\\text{high} - \\text{low} + 1e-8}, 5) \\times \\text{POW}(\\text{TS\\_CORR}(\\text{close}, \\text{SEQUENCE}(10), 10), 2)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 2,
        "evolution_phase": "crossover",
        "trajectory_id": "6a4713b851e6",
        "parent_trajectory_ids": [
          "432771960cc4",
          "8ab08cc6ed35"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Gap-Trend Synergy' factor, calculated as the product of the 5-day average overnight gap (normalized by daily range) and the 10-day price trend linearity (R-squared of price against time), predicts positive returns by identifying stocks where initial sentiment is confirmed by steady institutional accumulation.\n                Concise Observation: Parent 1 (RankIC=0.0248) shows that linear trends indicate institutional quality, while Parent 2 (RankIC=0.0260) shows that overnight gaps capture sentiment; however, gaps alone can be noisy and linear trends alone can lack an immediate catalyst.\n                Concise Justification: Combining the overnight gap (sentiment trigger) with 10-day linearity (trend quality) creates a filter that isolates 'high-conviction' moves where information discovery at the open is sustained by consistent buying pressure over a multi-day horizon.\n                Concise Knowledge: If a positive overnight gap is followed by high price linearity (RSQR) and low volatility, the price movement is likely driven by institutional absorption rather than retail noise; when sentiment gaps are validated by structural trends, they are less prone to mean reversion.\n                concise Specification: The factor is defined as (Mean(Gap/Range, 5) * RSQR(Close, 10)), where Gap is (Open - Prev_Close), Range is (High - Low), and RSQR is the coefficient of determination of a linear regression of Close prices over the last 10 days.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-20T23:39:19.544865"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1088123530805505,
        "ICIR": 0.064299186135433,
        "1day.excess_return_without_cost.std": 0.0041740965581993,
        "1day.excess_return_with_cost.annualized_return": 0.017557019914081,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002715694318148,
        "1day.excess_return_without_cost.annualized_return": 0.0646335247719259,
        "1day.excess_return_with_cost.std": 0.0041755587322068,
        "Rank IC": 0.0237131598883217,
        "IC": 0.0084900030832181,
        "1day.excess_return_without_cost.max_drawdown": -0.0791558124501512,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.003706810307638,
        "1day.pa": 0.0,
        "l2.valid": 0.9965092983802222,
        "Rank ICIR": 0.184805525300262,
        "l2.train": 0.9933039624693494,
        "1day.excess_return_with_cost.information_ratio": 0.2725509665330962,
        "1day.excess_return_with_cost.mean": 7.376899123563448e-05
      },
      "feedback": {
        "observations": "The experiment results demonstrate a significant improvement over the SOTA in terms of Information Ratio (1.0037 vs 0.9726), Annualized Return (6.46% vs 5.20%), and Information Coefficient (0.00849 vs 0.00580). The 'Institutional_Accumulation_Signal_10D' and 'Cross_Sectional_Gap_Trend_Synergy' factors successfully captured the interaction between overnight sentiment and intra-day trend persistence. While the Max Drawdown slightly increased (-0.0791 vs -0.0725), the overall risk-adjusted return profile is substantially stronger. The use of regression-based metrics (REGBETA and R-squared) effectively filtered for 'high-quality' trends that likely represent institutional participation rather than retail noise.",
        "hypothesis_evaluation": "The results strongly support the hypothesis. The synergy between the overnight gap (initial sentiment) and trend linearity (institutional accumulation) provides a more robust signal than either component alone. Specifically, the 'Institutional_Accumulation_Signal_10D' implementation, which combines the magnitude of the gap with the slope (beta) and quality (R-squared) of the subsequent trend, appears to be the most effective representation of the core idea.",
        "decision": true,
        "reason": "While price linearity (R-squared) captures the 'smoothness' of a trend, it does not account for the 'effort' (volume) behind the move. Institutional accumulation typically involves sustained volume. By adding a volume-price correlation term (TS_CORR between close and volume) to the existing synergy factor, we can distinguish between low-liquidity drifts and high-conviction institutional buying, potentially improving the IC and reducing the drawdown observed in the current iteration."
      }
    },
    "fd9b10d2cd144dd5": {
      "factor_id": "fd9b10d2cd144dd5",
      "factor_name": "Cross_Sectional_Gap_Trend_Synergy",
      "factor_expression": "RANK(TS_MEAN(($open - DELAY($close, 1)) / (TS_STD($close, 5) + 1e-8), 5)) * RANK(TS_CORR($close, SEQUENCE(10), 10))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(TS_MEAN(($open - DELAY($close, 1)) / (TS_STD($close, 5) + 1e-8), 5)) * RANK(TS_CORR($close, SEQUENCE(10), 10))\" # Your output factor expression will be filled in here\n    name = \"Cross_Sectional_Gap_Trend_Synergy\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A cross-sectionally ranked version of the synergy between overnight gaps and trend consistency. It uses the 5-day average gap normalized by volatility and multiplies it by the 10-day price-time correlation to capture directional conviction.",
      "factor_formulation": "\\text{RANK}(\\text{TS\\_MEAN}(\\frac{\\text{open} - \\text{DELAY}(\\text{close}, 1)}{\\text{TS\\_STD}(\\text{close}, 5) + 1e-8}, 5)) \\times \\text{RANK}(\\text{TS\\_CORR}(\\text{close}, \\text{SEQUENCE}(10), 10))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 2,
        "evolution_phase": "crossover",
        "trajectory_id": "6a4713b851e6",
        "parent_trajectory_ids": [
          "432771960cc4",
          "8ab08cc6ed35"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Gap-Trend Synergy' factor, calculated as the product of the 5-day average overnight gap (normalized by daily range) and the 10-day price trend linearity (R-squared of price against time), predicts positive returns by identifying stocks where initial sentiment is confirmed by steady institutional accumulation.\n                Concise Observation: Parent 1 (RankIC=0.0248) shows that linear trends indicate institutional quality, while Parent 2 (RankIC=0.0260) shows that overnight gaps capture sentiment; however, gaps alone can be noisy and linear trends alone can lack an immediate catalyst.\n                Concise Justification: Combining the overnight gap (sentiment trigger) with 10-day linearity (trend quality) creates a filter that isolates 'high-conviction' moves where information discovery at the open is sustained by consistent buying pressure over a multi-day horizon.\n                Concise Knowledge: If a positive overnight gap is followed by high price linearity (RSQR) and low volatility, the price movement is likely driven by institutional absorption rather than retail noise; when sentiment gaps are validated by structural trends, they are less prone to mean reversion.\n                concise Specification: The factor is defined as (Mean(Gap/Range, 5) * RSQR(Close, 10)), where Gap is (Open - Prev_Close), Range is (High - Low), and RSQR is the coefficient of determination of a linear regression of Close prices over the last 10 days.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-20T23:39:19.544865"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1088123530805505,
        "ICIR": 0.064299186135433,
        "1day.excess_return_without_cost.std": 0.0041740965581993,
        "1day.excess_return_with_cost.annualized_return": 0.017557019914081,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002715694318148,
        "1day.excess_return_without_cost.annualized_return": 0.0646335247719259,
        "1day.excess_return_with_cost.std": 0.0041755587322068,
        "Rank IC": 0.0237131598883217,
        "IC": 0.0084900030832181,
        "1day.excess_return_without_cost.max_drawdown": -0.0791558124501512,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.003706810307638,
        "1day.pa": 0.0,
        "l2.valid": 0.9965092983802222,
        "Rank ICIR": 0.184805525300262,
        "l2.train": 0.9933039624693494,
        "1day.excess_return_with_cost.information_ratio": 0.2725509665330962,
        "1day.excess_return_with_cost.mean": 7.376899123563448e-05
      },
      "feedback": {
        "observations": "The experiment results demonstrate a significant improvement over the SOTA in terms of Information Ratio (1.0037 vs 0.9726), Annualized Return (6.46% vs 5.20%), and Information Coefficient (0.00849 vs 0.00580). The 'Institutional_Accumulation_Signal_10D' and 'Cross_Sectional_Gap_Trend_Synergy' factors successfully captured the interaction between overnight sentiment and intra-day trend persistence. While the Max Drawdown slightly increased (-0.0791 vs -0.0725), the overall risk-adjusted return profile is substantially stronger. The use of regression-based metrics (REGBETA and R-squared) effectively filtered for 'high-quality' trends that likely represent institutional participation rather than retail noise.",
        "hypothesis_evaluation": "The results strongly support the hypothesis. The synergy between the overnight gap (initial sentiment) and trend linearity (institutional accumulation) provides a more robust signal than either component alone. Specifically, the 'Institutional_Accumulation_Signal_10D' implementation, which combines the magnitude of the gap with the slope (beta) and quality (R-squared) of the subsequent trend, appears to be the most effective representation of the core idea.",
        "decision": true,
        "reason": "While price linearity (R-squared) captures the 'smoothness' of a trend, it does not account for the 'effort' (volume) behind the move. Institutional accumulation typically involves sustained volume. By adding a volume-price correlation term (TS_CORR between close and volume) to the existing synergy factor, we can distinguish between low-liquidity drifts and high-conviction institutional buying, potentially improving the IC and reducing the drawdown observed in the current iteration."
      }
    },
    "d6ce1f94b3219378": {
      "factor_id": "d6ce1f94b3219378",
      "factor_name": "Institutional_Accumulation_Signal_10D",
      "factor_expression": "(($open - DELAY($close, 1)) / DELAY($close, 1)) * REGBETA($close, SEQUENCE(10), 10) * POW(TS_CORR($close, SEQUENCE(10), 10), 2)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(($open - DELAY($close, 1)) / DELAY($close, 1)) * REGBETA($close, SEQUENCE(10), 10) * POW(TS_CORR($close, SEQUENCE(10), 10), 2)\" # Your output factor expression will be filled in here\n    name = \"Institutional_Accumulation_Signal_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor focuses on the persistence of the trend following a gap. It uses the regression beta of price against time (trend strength) scaled by the R-squared (trend quality) and the recent gap magnitude.",
      "factor_formulation": "\\frac{\\text{open} - \\text{DELAY}(\\text{close}, 1)}{\\text{DELAY}(\\text{close}, 1)} \\times \\text{REGBETA}(\\text{close}, \\text{SEQUENCE}(10), 10) \\times \\text{POW}(\\text{TS\\_CORR}(\\text{close}, \\text{SEQUENCE}(10), 10), 2)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 2,
        "evolution_phase": "crossover",
        "trajectory_id": "6a4713b851e6",
        "parent_trajectory_ids": [
          "432771960cc4",
          "8ab08cc6ed35"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Gap-Trend Synergy' factor, calculated as the product of the 5-day average overnight gap (normalized by daily range) and the 10-day price trend linearity (R-squared of price against time), predicts positive returns by identifying stocks where initial sentiment is confirmed by steady institutional accumulation.\n                Concise Observation: Parent 1 (RankIC=0.0248) shows that linear trends indicate institutional quality, while Parent 2 (RankIC=0.0260) shows that overnight gaps capture sentiment; however, gaps alone can be noisy and linear trends alone can lack an immediate catalyst.\n                Concise Justification: Combining the overnight gap (sentiment trigger) with 10-day linearity (trend quality) creates a filter that isolates 'high-conviction' moves where information discovery at the open is sustained by consistent buying pressure over a multi-day horizon.\n                Concise Knowledge: If a positive overnight gap is followed by high price linearity (RSQR) and low volatility, the price movement is likely driven by institutional absorption rather than retail noise; when sentiment gaps are validated by structural trends, they are less prone to mean reversion.\n                concise Specification: The factor is defined as (Mean(Gap/Range, 5) * RSQR(Close, 10)), where Gap is (Open - Prev_Close), Range is (High - Low), and RSQR is the coefficient of determination of a linear regression of Close prices over the last 10 days.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-20T23:39:19.544865"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1088123530805505,
        "ICIR": 0.064299186135433,
        "1day.excess_return_without_cost.std": 0.0041740965581993,
        "1day.excess_return_with_cost.annualized_return": 0.017557019914081,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002715694318148,
        "1day.excess_return_without_cost.annualized_return": 0.0646335247719259,
        "1day.excess_return_with_cost.std": 0.0041755587322068,
        "Rank IC": 0.0237131598883217,
        "IC": 0.0084900030832181,
        "1day.excess_return_without_cost.max_drawdown": -0.0791558124501512,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.003706810307638,
        "1day.pa": 0.0,
        "l2.valid": 0.9965092983802222,
        "Rank ICIR": 0.184805525300262,
        "l2.train": 0.9933039624693494,
        "1day.excess_return_with_cost.information_ratio": 0.2725509665330962,
        "1day.excess_return_with_cost.mean": 7.376899123563448e-05
      },
      "feedback": {
        "observations": "The experiment results demonstrate a significant improvement over the SOTA in terms of Information Ratio (1.0037 vs 0.9726), Annualized Return (6.46% vs 5.20%), and Information Coefficient (0.00849 vs 0.00580). The 'Institutional_Accumulation_Signal_10D' and 'Cross_Sectional_Gap_Trend_Synergy' factors successfully captured the interaction between overnight sentiment and intra-day trend persistence. While the Max Drawdown slightly increased (-0.0791 vs -0.0725), the overall risk-adjusted return profile is substantially stronger. The use of regression-based metrics (REGBETA and R-squared) effectively filtered for 'high-quality' trends that likely represent institutional participation rather than retail noise.",
        "hypothesis_evaluation": "The results strongly support the hypothesis. The synergy between the overnight gap (initial sentiment) and trend linearity (institutional accumulation) provides a more robust signal than either component alone. Specifically, the 'Institutional_Accumulation_Signal_10D' implementation, which combines the magnitude of the gap with the slope (beta) and quality (R-squared) of the subsequent trend, appears to be the most effective representation of the core idea.",
        "decision": true,
        "reason": "While price linearity (R-squared) captures the 'smoothness' of a trend, it does not account for the 'effort' (volume) behind the move. Institutional accumulation typically involves sustained volume. By adding a volume-price correlation term (TS_CORR between close and volume) to the existing synergy factor, we can distinguish between low-liquidity drifts and high-conviction institutional buying, potentially improving the IC and reducing the drawdown observed in the current iteration."
      }
    },
    "00cd532f100ed485": {
      "factor_id": "00cd532f100ed485",
      "factor_name": "Liquidity_Absorption_Asymmetry_10D",
      "factor_expression": "SUMIF($volume * DELTA($close, 1), 10, DELTA($close, 1) > 0) / (ABS(SUMIF($volume * DELTA($close, 1), 10, DELTA($close, 1) < 0)) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"SUMIF($volume * DELTA($close, 1), 10, DELTA($close, 1) > 0) / (ABS(SUMIF($volume * DELTA($close, 1), 10, DELTA($close, 1) < 0)) + 1e-8)\" # Your output factor expression will be filled in here\n    name = \"Liquidity_Absorption_Asymmetry_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor calculates the ratio of volume-weighted positive price changes to the absolute volume-weighted negative price changes over a 10-day window. It identifies institutional accumulation by detecting if volume is disproportionately concentrated on up-days compared to down-days.",
      "factor_formulation": "\\frac{\\sum_{i=1}^{10} (\\text{volume}_i \\times \\Delta \\text{close}_i) \\text{ if } \\Delta \\text{close}_i > 0}{\\text{ABS}(\\sum_{i=1}^{10} (\\text{volume}_i \\times \\Delta \\text{close}_i) \\text{ if } \\Delta \\text{close}_i < 0)}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 1,
        "evolution_phase": "mutation",
        "trajectory_id": "d7c2ae4ea3aa",
        "parent_trajectory_ids": [
          "3812681a3ef1"
        ],
        "hypothesis": "Hypothesis: The Liquidity Absorption Asymmetry factor, calculated as the ratio of volume-weighted positive price changes to volume-weighted negative price changes over a 10-day window, positively predicts future returns by identifying subtle institutional accumulation.\n                Concise Observation: While price-based trend stability (like R-squared) captures the 'shape' of a move, it ignores the 'effort' (volume) required to move the price, which often reveals institutional intent before a trend becomes linear.\n                Concise Justification: Institutional investors often use limit orders to accumulate positions, causing price to tick up on high volume but allowing it to drift down on low volume; this volume-price coupling reveals demand that price-only indicators miss.\n                Concise Knowledge: If volume is disproportionately concentrated on positive price movements even when price volatility is low, it indicates strong underlying demand; when this asymmetry is high, future returns tend to be positive as supply is absorbed.\n                concise Specification: The factor is defined as the sum of ($volume * $close_change) for all positive change days divided by the absolute sum of ($volume * $close_change) for all negative change days over a 10-day lookback period.\n                ",
        "initial_direction": "Measure 'Trend Fragility' using the ratio of STD5 to RSQR10: high price volatility relative to trend stability indicates an imminent structural break in the medium-term direction.",
        "planning_direction": "Measure 'Trend Fragility' using the ratio of STD5 to RSQR10: high price volatility relative to trend stability indicates an imminent structural break in the medium-term direction.",
        "created_at": "2026-01-20T22:34:53.502337"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1279642055966109,
        "ICIR": 0.0427664459000318,
        "1day.excess_return_without_cost.std": 0.0050604073234227,
        "1day.excess_return_with_cost.annualized_return": 0.0211820035334379,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002881738411574,
        "1day.excess_return_without_cost.annualized_return": 0.0685853741954832,
        "1day.excess_return_with_cost.std": 0.0050618437964262,
        "Rank IC": 0.0235796300771172,
        "IC": 0.006296084835859,
        "1day.excess_return_without_cost.max_drawdown": -0.0941785817586592,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.8785319460145823,
        "1day.pa": 0.0,
        "l2.valid": 0.9965444971969946,
        "Rank ICIR": 0.1647906276218121,
        "l2.train": 0.9938346929355464,
        "1day.excess_return_with_cost.information_ratio": 0.2712500447438434,
        "1day.excess_return_with_cost.mean": 8.900001484637785e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the Liquidity Absorption Asymmetry hypothesis. The 'Volume_Weighted_Return_Skew_15D' and its siblings have successfully improved the Information Coefficient (IC) and Annualized Return compared to the previous SOTA. Specifically, the IC increased from 0.0058 to 0.0063, and the Annualized Return rose from 5.2% to 6.86%. However, this came at the cost of a higher Max Drawdown (-0.094 vs -0.072) and a slightly lower Information Ratio, suggesting that while the predictive signal is stronger, it may be more volatile or concentrated in specific market regimes.",
        "hypothesis_evaluation": "The results support the hypothesis that volume-weighted price asymmetry is a valid predictor of future returns. The use of a 15-day window in the 'Volume_Weighted_Return_Skew' formulation appears more robust than the initial 10-day ratio, likely because the normalization (dividing by the sum of absolute volume-weighted returns) creates a bounded oscillator (-1 to 1) that is more stable for model training than a raw ratio of sums.",
        "decision": true,
        "reason": "While the current 'Volume_Weighted_Return_Skew_15D' is effective, it may be capturing simple momentum or size effects. By introducing a 'Volume Z-Score' or comparing the asymmetry to a longer-term baseline (e.g., 60 days), we can isolate 'unusual' institutional accumulation from standard trading activity. Furthermore, keeping the mathematical structure simple (avoiding nested Ranks or complex IF conditions) will maintain the current lead in IC while potentially smoothing the drawdown seen in this iteration."
      }
    },
    "1dca08c39affa707": {
      "factor_id": "1dca08c39affa707",
      "factor_name": "Institutional_Accumulation_Intensity_20D",
      "factor_expression": "RANK(SUMIF($volume * $return, 20, $return > 0) / (SUMIF($volume * ABS($return), 20, $return < 0) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(SUMIF($volume * TS_PCTCHANGE($close, 1), 20, TS_PCTCHANGE($close, 1) > 0) / (ABS(SUMIF($volume * TS_PCTCHANGE($close, 1), 20, TS_PCTCHANGE($close, 1) < 0)) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Institutional_Accumulation_Intensity_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A variation of the liquidity absorption hypothesis using daily returns and cross-sectional ranking. It measures the relative intensity of volume-weighted gains versus losses over a 20-day period to capture persistent buying pressure.",
      "factor_formulation": "\\text{RANK}(\\frac{\\sum_{i=1}^{20} (\\text{volume}_i \\times \\text{return}_i) \\text{ if } \\text{return}_i > 0}{\\sum_{i=1}^{20} (\\text{volume}_i \\times \\text{ABS}(\\text{return}_i)) \\text{ if } \\text{return}_i < 0})",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 1,
        "evolution_phase": "mutation",
        "trajectory_id": "d7c2ae4ea3aa",
        "parent_trajectory_ids": [
          "3812681a3ef1"
        ],
        "hypothesis": "Hypothesis: The Liquidity Absorption Asymmetry factor, calculated as the ratio of volume-weighted positive price changes to volume-weighted negative price changes over a 10-day window, positively predicts future returns by identifying subtle institutional accumulation.\n                Concise Observation: While price-based trend stability (like R-squared) captures the 'shape' of a move, it ignores the 'effort' (volume) required to move the price, which often reveals institutional intent before a trend becomes linear.\n                Concise Justification: Institutional investors often use limit orders to accumulate positions, causing price to tick up on high volume but allowing it to drift down on low volume; this volume-price coupling reveals demand that price-only indicators miss.\n                Concise Knowledge: If volume is disproportionately concentrated on positive price movements even when price volatility is low, it indicates strong underlying demand; when this asymmetry is high, future returns tend to be positive as supply is absorbed.\n                concise Specification: The factor is defined as the sum of ($volume * $close_change) for all positive change days divided by the absolute sum of ($volume * $close_change) for all negative change days over a 10-day lookback period.\n                ",
        "initial_direction": "Measure 'Trend Fragility' using the ratio of STD5 to RSQR10: high price volatility relative to trend stability indicates an imminent structural break in the medium-term direction.",
        "planning_direction": "Measure 'Trend Fragility' using the ratio of STD5 to RSQR10: high price volatility relative to trend stability indicates an imminent structural break in the medium-term direction.",
        "created_at": "2026-01-20T22:34:53.502337"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1279642055966109,
        "ICIR": 0.0427664459000318,
        "1day.excess_return_without_cost.std": 0.0050604073234227,
        "1day.excess_return_with_cost.annualized_return": 0.0211820035334379,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002881738411574,
        "1day.excess_return_without_cost.annualized_return": 0.0685853741954832,
        "1day.excess_return_with_cost.std": 0.0050618437964262,
        "Rank IC": 0.0235796300771172,
        "IC": 0.006296084835859,
        "1day.excess_return_without_cost.max_drawdown": -0.0941785817586592,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.8785319460145823,
        "1day.pa": 0.0,
        "l2.valid": 0.9965444971969946,
        "Rank ICIR": 0.1647906276218121,
        "l2.train": 0.9938346929355464,
        "1day.excess_return_with_cost.information_ratio": 0.2712500447438434,
        "1day.excess_return_with_cost.mean": 8.900001484637785e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the Liquidity Absorption Asymmetry hypothesis. The 'Volume_Weighted_Return_Skew_15D' and its siblings have successfully improved the Information Coefficient (IC) and Annualized Return compared to the previous SOTA. Specifically, the IC increased from 0.0058 to 0.0063, and the Annualized Return rose from 5.2% to 6.86%. However, this came at the cost of a higher Max Drawdown (-0.094 vs -0.072) and a slightly lower Information Ratio, suggesting that while the predictive signal is stronger, it may be more volatile or concentrated in specific market regimes.",
        "hypothesis_evaluation": "The results support the hypothesis that volume-weighted price asymmetry is a valid predictor of future returns. The use of a 15-day window in the 'Volume_Weighted_Return_Skew' formulation appears more robust than the initial 10-day ratio, likely because the normalization (dividing by the sum of absolute volume-weighted returns) creates a bounded oscillator (-1 to 1) that is more stable for model training than a raw ratio of sums.",
        "decision": true,
        "reason": "While the current 'Volume_Weighted_Return_Skew_15D' is effective, it may be capturing simple momentum or size effects. By introducing a 'Volume Z-Score' or comparing the asymmetry to a longer-term baseline (e.g., 60 days), we can isolate 'unusual' institutional accumulation from standard trading activity. Furthermore, keeping the mathematical structure simple (avoiding nested Ranks or complex IF conditions) will maintain the current lead in IC while potentially smoothing the drawdown seen in this iteration."
      }
    },
    "79209beabdc629ca": {
      "factor_id": "79209beabdc629ca",
      "factor_name": "Volume_Weighted_Return_Skew_15D",
      "factor_expression": "TS_SUM($volume * $return, 15) / (TS_SUM($volume * ABS($return), 15) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_SUM($volume * TS_PCTCHANGE($close, 1), 15) / (TS_SUM($volume * ABS(TS_PCTCHANGE($close, 1)), 15) + 0.00000001)\" # Your output factor expression will be filled in here\n    name = \"Volume_Weighted_Return_Skew_15D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor captures the asymmetry in volume-weighted price movements by comparing the sum of volume-weighted returns to the total volume-weighted absolute returns. High values indicate that the 'effort' (volume) is resulting in more positive price progress.",
      "factor_formulation": "\\frac{\\sum_{i=1}^{15} (\\text{volume}_i \\times \\text{return}_i)}{\\sum_{i=1}^{15} (\\text{volume}_i \\times |\\text{return}_i|)}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 1,
        "evolution_phase": "mutation",
        "trajectory_id": "d7c2ae4ea3aa",
        "parent_trajectory_ids": [
          "3812681a3ef1"
        ],
        "hypothesis": "Hypothesis: The Liquidity Absorption Asymmetry factor, calculated as the ratio of volume-weighted positive price changes to volume-weighted negative price changes over a 10-day window, positively predicts future returns by identifying subtle institutional accumulation.\n                Concise Observation: While price-based trend stability (like R-squared) captures the 'shape' of a move, it ignores the 'effort' (volume) required to move the price, which often reveals institutional intent before a trend becomes linear.\n                Concise Justification: Institutional investors often use limit orders to accumulate positions, causing price to tick up on high volume but allowing it to drift down on low volume; this volume-price coupling reveals demand that price-only indicators miss.\n                Concise Knowledge: If volume is disproportionately concentrated on positive price movements even when price volatility is low, it indicates strong underlying demand; when this asymmetry is high, future returns tend to be positive as supply is absorbed.\n                concise Specification: The factor is defined as the sum of ($volume * $close_change) for all positive change days divided by the absolute sum of ($volume * $close_change) for all negative change days over a 10-day lookback period.\n                ",
        "initial_direction": "Measure 'Trend Fragility' using the ratio of STD5 to RSQR10: high price volatility relative to trend stability indicates an imminent structural break in the medium-term direction.",
        "planning_direction": "Measure 'Trend Fragility' using the ratio of STD5 to RSQR10: high price volatility relative to trend stability indicates an imminent structural break in the medium-term direction.",
        "created_at": "2026-01-20T22:34:53.502337"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1279642055966109,
        "ICIR": 0.0427664459000318,
        "1day.excess_return_without_cost.std": 0.0050604073234227,
        "1day.excess_return_with_cost.annualized_return": 0.0211820035334379,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002881738411574,
        "1day.excess_return_without_cost.annualized_return": 0.0685853741954832,
        "1day.excess_return_with_cost.std": 0.0050618437964262,
        "Rank IC": 0.0235796300771172,
        "IC": 0.006296084835859,
        "1day.excess_return_without_cost.max_drawdown": -0.0941785817586592,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.8785319460145823,
        "1day.pa": 0.0,
        "l2.valid": 0.9965444971969946,
        "Rank ICIR": 0.1647906276218121,
        "l2.train": 0.9938346929355464,
        "1day.excess_return_with_cost.information_ratio": 0.2712500447438434,
        "1day.excess_return_with_cost.mean": 8.900001484637785e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the Liquidity Absorption Asymmetry hypothesis. The 'Volume_Weighted_Return_Skew_15D' and its siblings have successfully improved the Information Coefficient (IC) and Annualized Return compared to the previous SOTA. Specifically, the IC increased from 0.0058 to 0.0063, and the Annualized Return rose from 5.2% to 6.86%. However, this came at the cost of a higher Max Drawdown (-0.094 vs -0.072) and a slightly lower Information Ratio, suggesting that while the predictive signal is stronger, it may be more volatile or concentrated in specific market regimes.",
        "hypothesis_evaluation": "The results support the hypothesis that volume-weighted price asymmetry is a valid predictor of future returns. The use of a 15-day window in the 'Volume_Weighted_Return_Skew' formulation appears more robust than the initial 10-day ratio, likely because the normalization (dividing by the sum of absolute volume-weighted returns) creates a bounded oscillator (-1 to 1) that is more stable for model training than a raw ratio of sums.",
        "decision": true,
        "reason": "While the current 'Volume_Weighted_Return_Skew_15D' is effective, it may be capturing simple momentum or size effects. By introducing a 'Volume Z-Score' or comparing the asymmetry to a longer-term baseline (e.g., 60 days), we can isolate 'unusual' institutional accumulation from standard trading activity. Furthermore, keeping the mathematical structure simple (avoiding nested Ranks or complex IF conditions) will maintain the current lead in IC while potentially smoothing the drawdown seen in this iteration."
      }
    },
    "ce9a6bdb524aff8b": {
      "factor_id": "ce9a6bdb524aff8b",
      "factor_name": "Capitulation_Reversal_Factor_60D_20D",
      "factor_expression": "TS_PCTCHANGE($close, 60) * TS_CORR($close, $volume, 20)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_PCTCHANGE($close, 60) * TS_CORR($close, $volume, 20)\" # Your output factor expression will be filled in here\n    name = \"Capitulation_Reversal_Factor_60D_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies potential mean-reversion opportunities by multiplying the 60-day price rate of change with the 20-day correlation between price and volume. A high positive value suggests a significant price decline accompanied by a negative price-volume correlation (selling climax), signaling an imminent reversal.",
      "factor_formulation": "CRF = TS\\_PCTCHANGE(close, 60) \\times TS\\_CORR(close, volume, 20)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 0,
        "evolution_phase": "original",
        "trajectory_id": "0b905e4baccd",
        "parent_trajectory_ids": [],
        "hypothesis": "Hypothesis: A 'Long-term Mean Reversion' factor can be constructed by identifying assets where a significant 60-day price decline (ROC60) coincides with a negative 20-day price-volume correlation (CORR20), signaling an exhaustive capitulation phase and an imminent reversal.\n                Concise Observation: Market participants often exhibit panic selling at the end of a prolonged downtrend, leading to high volume at local price bottoms which creates a divergence between price trend and volume sentiment.\n                Concise Justification: Negative correlation between price changes and volume during a downtrend suggests that price drops are being met with high liquidity absorption, often marking the transition from weak-hand sellers to strong-hand buyers.\n                Concise Knowledge: If a long-term price decline is accompanied by increasing volume on down days (negative price-volume correlation), it indicates a 'selling climax' or capitulation; when this occurs, the asset is likely oversold and primed for a mean-reversion bounce.\n                concise Specification: The factor is defined as the product of the 60-day Rate of Change (ROC60) and the 20-day Pearson correlation between daily close price and daily volume (CORR20), where a large positive value (negative ROC * negative CORR) indicates a strong reversal signal.\n                ",
        "initial_direction": "Develop a 'Long-term Mean Reversion' signal by weighting ROC60 with CORR20: a high ROC60 (downtrend) coupled with negative price-volume correlation suggests a capitulation phase.",
        "planning_direction": "Develop a 'Long-term Mean Reversion' signal by weighting ROC60 with CORR20: a high ROC60 (downtrend) coupled with negative price-volume correlation suggests a capitulation phase.",
        "created_at": "2026-01-20T21:26:42.805877"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1105290493078646,
        "ICIR": 0.0439195784524141,
        "1day.excess_return_without_cost.std": 0.0048330436216784,
        "1day.excess_return_with_cost.annualized_return": 0.0382655995505111,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003592290116985,
        "1day.excess_return_without_cost.annualized_return": 0.0854965047842451,
        "1day.excess_return_with_cost.std": 0.0048352393107134,
        "Rank IC": 0.023432169172062,
        "IC": 0.0066239443812915,
        "1day.excess_return_without_cost.max_drawdown": -0.0970875209736863,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.1466718922887986,
        "1day.pa": 0.0,
        "l2.valid": 0.996886175851892,
        "Rank ICIR": 0.1576605159055305,
        "l2.train": 0.9940730344097998,
        "1day.excess_return_with_cost.information_ratio": 0.5129819336478243,
        "1day.excess_return_with_cost.mean": 0.0001607798300441
      },
      "feedback": {
        "observations": "The current iteration focused on refining the 'Long-term Mean Reversion' hypothesis by moving from a simple product of signals to a Z-score-based intensity measure and a cross-sectional ranking approach. The results show a significant improvement across most key performance indicators. Specifically, the Information Ratio (IR) increased from 0.97 to 1.15, the Annualized Return rose from 5.2% to 8.5%, and the Information Coefficient (IC) improved from 0.0058 to 0.0066. Although the Max Drawdown slightly worsened (-0.097 vs -0.072), the overall risk-adjusted return profile is substantially stronger.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that combining a long-term price decline (60-day) with a negative price-volume correlation (20-day) identifies high-probability mean reversion points. The 'Capitulation_Intensity_ZScore' and 'Ranked_Capitulation_Signal_V1' implementations demonstrate that normalizing the magnitude of the decline (via Z-score) or the relative position (via Rank) provides a more robust signal than the raw product used in the initial CRF factor.",
        "decision": true,
        "reason": "While the current factors identify price and volume exhaustion, they do not account for the 'quietness' of the bottom. High volatility at the bottom can often lead to further 'falling knife' scenarios. By requiring the 60-day decline and negative PV correlation to coincide with a 5-day volatility that is low relative to the 20-day average, we can isolate the exact moment where the selling pressure vanishes, leading to a higher quality entry for the reversal."
      }
    },
    "0430473113fff2ac": {
      "factor_id": "0430473113fff2ac",
      "factor_name": "Ranked_Capitulation_Signal_V1",
      "factor_expression": "RANK(0 - TS_PCTCHANGE($close, 60)) + RANK(0 - TS_CORR($close, $volume, 20))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(0 - TS_PCTCHANGE($close, 60)) + RANK(0 - TS_CORR($close, $volume, 20))\" # Your output factor expression will be filled in here\n    name = \"Ranked_Capitulation_Signal_V1\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A cross-sectionally ranked version of the capitulation hypothesis. It focuses on assets with the most extreme negative 60-day returns and the most negative 20-day price-volume correlations. By ranking these components, the factor becomes more robust to market-wide regime shifts.",
      "factor_formulation": "RCS = RANK(-TS\\_PCTCHANGE(close, 60)) + RANK(-TS\\_CORR(close, volume, 20))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 0,
        "evolution_phase": "original",
        "trajectory_id": "0b905e4baccd",
        "parent_trajectory_ids": [],
        "hypothesis": "Hypothesis: A 'Long-term Mean Reversion' factor can be constructed by identifying assets where a significant 60-day price decline (ROC60) coincides with a negative 20-day price-volume correlation (CORR20), signaling an exhaustive capitulation phase and an imminent reversal.\n                Concise Observation: Market participants often exhibit panic selling at the end of a prolonged downtrend, leading to high volume at local price bottoms which creates a divergence between price trend and volume sentiment.\n                Concise Justification: Negative correlation between price changes and volume during a downtrend suggests that price drops are being met with high liquidity absorption, often marking the transition from weak-hand sellers to strong-hand buyers.\n                Concise Knowledge: If a long-term price decline is accompanied by increasing volume on down days (negative price-volume correlation), it indicates a 'selling climax' or capitulation; when this occurs, the asset is likely oversold and primed for a mean-reversion bounce.\n                concise Specification: The factor is defined as the product of the 60-day Rate of Change (ROC60) and the 20-day Pearson correlation between daily close price and daily volume (CORR20), where a large positive value (negative ROC * negative CORR) indicates a strong reversal signal.\n                ",
        "initial_direction": "Develop a 'Long-term Mean Reversion' signal by weighting ROC60 with CORR20: a high ROC60 (downtrend) coupled with negative price-volume correlation suggests a capitulation phase.",
        "planning_direction": "Develop a 'Long-term Mean Reversion' signal by weighting ROC60 with CORR20: a high ROC60 (downtrend) coupled with negative price-volume correlation suggests a capitulation phase.",
        "created_at": "2026-01-20T21:26:42.805877"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1105290493078646,
        "ICIR": 0.0439195784524141,
        "1day.excess_return_without_cost.std": 0.0048330436216784,
        "1day.excess_return_with_cost.annualized_return": 0.0382655995505111,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003592290116985,
        "1day.excess_return_without_cost.annualized_return": 0.0854965047842451,
        "1day.excess_return_with_cost.std": 0.0048352393107134,
        "Rank IC": 0.023432169172062,
        "IC": 0.0066239443812915,
        "1day.excess_return_without_cost.max_drawdown": -0.0970875209736863,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.1466718922887986,
        "1day.pa": 0.0,
        "l2.valid": 0.996886175851892,
        "Rank ICIR": 0.1576605159055305,
        "l2.train": 0.9940730344097998,
        "1day.excess_return_with_cost.information_ratio": 0.5129819336478243,
        "1day.excess_return_with_cost.mean": 0.0001607798300441
      },
      "feedback": {
        "observations": "The current iteration focused on refining the 'Long-term Mean Reversion' hypothesis by moving from a simple product of signals to a Z-score-based intensity measure and a cross-sectional ranking approach. The results show a significant improvement across most key performance indicators. Specifically, the Information Ratio (IR) increased from 0.97 to 1.15, the Annualized Return rose from 5.2% to 8.5%, and the Information Coefficient (IC) improved from 0.0058 to 0.0066. Although the Max Drawdown slightly worsened (-0.097 vs -0.072), the overall risk-adjusted return profile is substantially stronger.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that combining a long-term price decline (60-day) with a negative price-volume correlation (20-day) identifies high-probability mean reversion points. The 'Capitulation_Intensity_ZScore' and 'Ranked_Capitulation_Signal_V1' implementations demonstrate that normalizing the magnitude of the decline (via Z-score) or the relative position (via Rank) provides a more robust signal than the raw product used in the initial CRF factor.",
        "decision": true,
        "reason": "While the current factors identify price and volume exhaustion, they do not account for the 'quietness' of the bottom. High volatility at the bottom can often lead to further 'falling knife' scenarios. By requiring the 60-day decline and negative PV correlation to coincide with a 5-day volatility that is low relative to the 20-day average, we can isolate the exact moment where the selling pressure vanishes, leading to a higher quality entry for the reversal."
      }
    },
    "ccdb6c28bb089f3f": {
      "factor_id": "ccdb6c28bb089f3f",
      "factor_name": "Capitulation_Intensity_ZScore",
      "factor_expression": "TS_ZSCORE(TS_PCTCHANGE($close, 60), 60) * (0 - TS_CORR($close, $volume, 20))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_ZSCORE(TS_PCTCHANGE($close, 60), 60) * (0 - TS_CORR($close, $volume, 20))\" # Your output factor expression will be filled in here\n    name = \"Capitulation_Intensity_ZScore\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor measures the intensity of the capitulation by calculating the Z-score of the 60-day price decline and multiplying it by the sign-inverted 20-day price-volume correlation. It targets stocks that are statistically oversold while exhibiting volume-driven exhaustion.",
      "factor_formulation": "CIZ = TS\\_ZSCORE(TS\\_PCTCHANGE(close, 60), 60) \\times (-TS\\_CORR(close, volume, 20))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 0,
        "evolution_phase": "original",
        "trajectory_id": "0b905e4baccd",
        "parent_trajectory_ids": [],
        "hypothesis": "Hypothesis: A 'Long-term Mean Reversion' factor can be constructed by identifying assets where a significant 60-day price decline (ROC60) coincides with a negative 20-day price-volume correlation (CORR20), signaling an exhaustive capitulation phase and an imminent reversal.\n                Concise Observation: Market participants often exhibit panic selling at the end of a prolonged downtrend, leading to high volume at local price bottoms which creates a divergence between price trend and volume sentiment.\n                Concise Justification: Negative correlation between price changes and volume during a downtrend suggests that price drops are being met with high liquidity absorption, often marking the transition from weak-hand sellers to strong-hand buyers.\n                Concise Knowledge: If a long-term price decline is accompanied by increasing volume on down days (negative price-volume correlation), it indicates a 'selling climax' or capitulation; when this occurs, the asset is likely oversold and primed for a mean-reversion bounce.\n                concise Specification: The factor is defined as the product of the 60-day Rate of Change (ROC60) and the 20-day Pearson correlation between daily close price and daily volume (CORR20), where a large positive value (negative ROC * negative CORR) indicates a strong reversal signal.\n                ",
        "initial_direction": "Develop a 'Long-term Mean Reversion' signal by weighting ROC60 with CORR20: a high ROC60 (downtrend) coupled with negative price-volume correlation suggests a capitulation phase.",
        "planning_direction": "Develop a 'Long-term Mean Reversion' signal by weighting ROC60 with CORR20: a high ROC60 (downtrend) coupled with negative price-volume correlation suggests a capitulation phase.",
        "created_at": "2026-01-20T21:26:42.805877"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1105290493078646,
        "ICIR": 0.0439195784524141,
        "1day.excess_return_without_cost.std": 0.0048330436216784,
        "1day.excess_return_with_cost.annualized_return": 0.0382655995505111,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003592290116985,
        "1day.excess_return_without_cost.annualized_return": 0.0854965047842451,
        "1day.excess_return_with_cost.std": 0.0048352393107134,
        "Rank IC": 0.023432169172062,
        "IC": 0.0066239443812915,
        "1day.excess_return_without_cost.max_drawdown": -0.0970875209736863,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.1466718922887986,
        "1day.pa": 0.0,
        "l2.valid": 0.996886175851892,
        "Rank ICIR": 0.1576605159055305,
        "l2.train": 0.9940730344097998,
        "1day.excess_return_with_cost.information_ratio": 0.5129819336478243,
        "1day.excess_return_with_cost.mean": 0.0001607798300441
      },
      "feedback": {
        "observations": "The current iteration focused on refining the 'Long-term Mean Reversion' hypothesis by moving from a simple product of signals to a Z-score-based intensity measure and a cross-sectional ranking approach. The results show a significant improvement across most key performance indicators. Specifically, the Information Ratio (IR) increased from 0.97 to 1.15, the Annualized Return rose from 5.2% to 8.5%, and the Information Coefficient (IC) improved from 0.0058 to 0.0066. Although the Max Drawdown slightly worsened (-0.097 vs -0.072), the overall risk-adjusted return profile is substantially stronger.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that combining a long-term price decline (60-day) with a negative price-volume correlation (20-day) identifies high-probability mean reversion points. The 'Capitulation_Intensity_ZScore' and 'Ranked_Capitulation_Signal_V1' implementations demonstrate that normalizing the magnitude of the decline (via Z-score) or the relative position (via Rank) provides a more robust signal than the raw product used in the initial CRF factor.",
        "decision": true,
        "reason": "While the current factors identify price and volume exhaustion, they do not account for the 'quietness' of the bottom. High volatility at the bottom can often lead to further 'falling knife' scenarios. By requiring the 60-day decline and negative PV correlation to coincide with a 5-day volatility that is low relative to the 20-day average, we can isolate the exact moment where the selling pressure vanishes, leading to a higher quality entry for the reversal."
      }
    },
    "d590f9fdac94714f": {
      "factor_id": "d590f9fdac94714f",
      "factor_name": "LVSR_Factor_Base",
      "factor_expression": "TS_ZSCORE(($high - $low) / ($close + 1e-8), 20) * TS_MEAN((MIN($open, $close) - $low) / ($high - $low + 1e-8), 5) * (1 / (TS_STD($volume, 5) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_ZSCORE(($high - $low) / ($close + 1e-8), 20) * TS_MEAN((MIN($open, $close) - $low) / ($high - $low + 1e-8), 5) * (1 / (TS_STD($volume, 5) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"LVSR_Factor_Base\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "Liquidity-Validated Structural Rebound factor: Combines intraday price dispersion (20-day Z-score of range), institutional absorption (5-day mean of lower shadow ratio), and inverse volume volatility. It identifies exhaustion points where high noise meets strong buying support.",
      "factor_formulation": "\\text{TS\\_ZSCORE}(\\frac{high-low}{close}, 20) \\times \\text{TS\\_MEAN}(\\frac{\\min(open, close)-low}{high-low}, 5) \\times \\frac{1}{\\text{TS\\_STD}(volume, 5)}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "b8009e9e70de",
        "parent_trajectory_ids": [
          "328dbeb0c242",
          "043474954dbc"
        ],
        "hypothesis": "Hypothesis: The 'Liquidity-Validated Structural Rebound' (LVSR) factor predicts short-term reversals by identifying assets where high intraday price dispersion (noise) is coupled with strong institutional absorption, defined as the product of the 20-day Z-score of the High-Low range and the 5-day average lower-shadow-to-total-range ratio, scaled by the inverse of volume volatility.\n                Concise Observation: Parent 1 captures high-alpha mean-reversion via price dispersion but suffers from 'falling knife' risks, while Parent 2 identifies structural support through shadow ratios but lacks a volatility-based trigger for timing.\n                Concise Justification: Fusing these identifies 'exhaustion' points where selling pressure is spent (high range/low volume conviction) and immediately met by buying support (lower shadows), creating a higher-probability reversal signal than either component alone.\n                Concise Knowledge: If high intraday volatility (dispersion) occurs without a corresponding surge in volume volatility, it indicates market noise; if this noise is accompanied by large lower shadows (absorption), a price reversal is more likely than a continuation.\n                concise Specification: The factor is the product of: (1) the 20-day Z-score of (High-Low)/Close, (2) the 5-day mean of (min(Open, Close)-Low)/(High-Low), and (3) the inverse of the 5-day standard deviation of Volume, all calculated using daily_pv.h5 data.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T10:08:28.656044"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0895790740906607,
        "ICIR": 0.0472620471795279,
        "1day.excess_return_without_cost.std": 0.0038983818085295,
        "1day.excess_return_with_cost.annualized_return": 0.0360745920472733,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003503139706382,
        "1day.excess_return_without_cost.annualized_return": 0.0833747250119079,
        "1day.excess_return_with_cost.std": 0.0038996970574369,
        "Rank IC": 0.0233725195396657,
        "IC": 0.0062690397404904,
        "1day.excess_return_without_cost.max_drawdown": -0.0780516741682955,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.3863138568061828,
        "1day.pa": 0.0,
        "l2.valid": 0.9962661055425046,
        "Rank ICIR": 0.1762123108905118,
        "l2.train": 0.9931667036808288,
        "1day.excess_return_with_cost.information_ratio": 0.5996282415341484,
        "1day.excess_return_with_cost.mean": 0.000151573916165
      },
      "feedback": {
        "observations": "The experiment successfully validated the 'Liquidity-Validated Structural Rebound' (LVSR) framework. The current iteration significantly outperformed the previous SOTA across almost all key performance indicators. Specifically, the Information Ratio (IR) improved from 0.97 to 1.38, and the Annualized Return increased from 5.2% to 8.3%. The IC also showed a healthy improvement to 0.0063. While the Max Drawdown slightly worsened (-0.078 vs -0.072), the substantial gains in risk-adjusted returns (IR) justify the current approach. The 'LVSR_Rank_Stabilized' and 'LVSR_Momentum_Filtered' variations suggest that cross-sectional ranking and simplifying the volume-volatility interaction are effective strategies for capturing the intended market inefficiency.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that combining intraday price dispersion with institutional absorption (proxied by lower shadows) and volume stability predicts short-term reversals. The success of the 'LVSR_Rank_Stabilized' approach indicates that the relationship is more robust when viewed through a relative (cross-sectional) lens rather than absolute values. The 'LVSR_Momentum_Filtered' result suggests that the raw price range (high-low) might be a more direct proxy for dispersion than a complex Z-score when coupled with volume stability.",
        "decision": true,
        "reason": "Current results show that volume stability is a key filter, but absolute standard deviation can be sensitive to regime shifts. Using relative volume intensity (Volume/MA) focuses on liquidity surges accompanying the price tail. Furthermore, the 'lower shadow ratio' often contains noise in mid-range bars; by focusing on the top decile of shadow ratios (non-linear scaling), we can more accurately isolate the 'structural rebound' intended by the hypothesis while maintaining low symbol complexity and feature count."
      }
    },
    "ba727aca0bb9c171": {
      "factor_id": "ba727aca0bb9c171",
      "factor_name": "LVSR_Rank_Stabilized",
      "factor_expression": "RANK(TS_ZSCORE(($high - $low) / ($close + 1e-8), 20)) * RANK((MIN($open, $close) - $low) / ($high - $low + 1e-8)) * RANK(1 / (TS_STD($volume, 5) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(TS_ZSCORE(($high - $low) / ($close + 1e-8), 20)) * RANK((MIN($open, $close) - $low) / ($high - $low + 1e-8)) * RANK(1 / (TS_STD($volume, 5) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"LVSR_Rank_Stabilized\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A cross-sectionally stabilized version of the LVSR factor. It uses RANK to normalize the components of price dispersion, shadow absorption, and volume stability before combining them to ensure robustness against outliers.",
      "factor_formulation": "\\text{RANK}(\\text{TS\\_ZSCORE}(\\frac{high-low}{close}, 20)) \\times \\text{RANK}(\\frac{\\min(open,close)-low}{high-low}) \\times \\text{RANK}(\\frac{1}{\\text{TS\\_STD}(volume, 5)})",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "b8009e9e70de",
        "parent_trajectory_ids": [
          "328dbeb0c242",
          "043474954dbc"
        ],
        "hypothesis": "Hypothesis: The 'Liquidity-Validated Structural Rebound' (LVSR) factor predicts short-term reversals by identifying assets where high intraday price dispersion (noise) is coupled with strong institutional absorption, defined as the product of the 20-day Z-score of the High-Low range and the 5-day average lower-shadow-to-total-range ratio, scaled by the inverse of volume volatility.\n                Concise Observation: Parent 1 captures high-alpha mean-reversion via price dispersion but suffers from 'falling knife' risks, while Parent 2 identifies structural support through shadow ratios but lacks a volatility-based trigger for timing.\n                Concise Justification: Fusing these identifies 'exhaustion' points where selling pressure is spent (high range/low volume conviction) and immediately met by buying support (lower shadows), creating a higher-probability reversal signal than either component alone.\n                Concise Knowledge: If high intraday volatility (dispersion) occurs without a corresponding surge in volume volatility, it indicates market noise; if this noise is accompanied by large lower shadows (absorption), a price reversal is more likely than a continuation.\n                concise Specification: The factor is the product of: (1) the 20-day Z-score of (High-Low)/Close, (2) the 5-day mean of (min(Open, Close)-Low)/(High-Low), and (3) the inverse of the 5-day standard deviation of Volume, all calculated using daily_pv.h5 data.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T10:08:28.656044"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0895790740906607,
        "ICIR": 0.0472620471795279,
        "1day.excess_return_without_cost.std": 0.0038983818085295,
        "1day.excess_return_with_cost.annualized_return": 0.0360745920472733,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003503139706382,
        "1day.excess_return_without_cost.annualized_return": 0.0833747250119079,
        "1day.excess_return_with_cost.std": 0.0038996970574369,
        "Rank IC": 0.0233725195396657,
        "IC": 0.0062690397404904,
        "1day.excess_return_without_cost.max_drawdown": -0.0780516741682955,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.3863138568061828,
        "1day.pa": 0.0,
        "l2.valid": 0.9962661055425046,
        "Rank ICIR": 0.1762123108905118,
        "l2.train": 0.9931667036808288,
        "1day.excess_return_with_cost.information_ratio": 0.5996282415341484,
        "1day.excess_return_with_cost.mean": 0.000151573916165
      },
      "feedback": {
        "observations": "The experiment successfully validated the 'Liquidity-Validated Structural Rebound' (LVSR) framework. The current iteration significantly outperformed the previous SOTA across almost all key performance indicators. Specifically, the Information Ratio (IR) improved from 0.97 to 1.38, and the Annualized Return increased from 5.2% to 8.3%. The IC also showed a healthy improvement to 0.0063. While the Max Drawdown slightly worsened (-0.078 vs -0.072), the substantial gains in risk-adjusted returns (IR) justify the current approach. The 'LVSR_Rank_Stabilized' and 'LVSR_Momentum_Filtered' variations suggest that cross-sectional ranking and simplifying the volume-volatility interaction are effective strategies for capturing the intended market inefficiency.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that combining intraday price dispersion with institutional absorption (proxied by lower shadows) and volume stability predicts short-term reversals. The success of the 'LVSR_Rank_Stabilized' approach indicates that the relationship is more robust when viewed through a relative (cross-sectional) lens rather than absolute values. The 'LVSR_Momentum_Filtered' result suggests that the raw price range (high-low) might be a more direct proxy for dispersion than a complex Z-score when coupled with volume stability.",
        "decision": true,
        "reason": "Current results show that volume stability is a key filter, but absolute standard deviation can be sensitive to regime shifts. Using relative volume intensity (Volume/MA) focuses on liquidity surges accompanying the price tail. Furthermore, the 'lower shadow ratio' often contains noise in mid-range bars; by focusing on the top decile of shadow ratios (non-linear scaling), we can more accurately isolate the 'structural rebound' intended by the hypothesis while maintaining low symbol complexity and feature count."
      }
    },
    "2efcab566629671a": {
      "factor_id": "2efcab566629671a",
      "factor_name": "LVSR_Momentum_Filtered",
      "factor_expression": "(TS_MEAN($high - $low, 20) / (TS_STD($volume, 10) + 1e-8)) * (($close - $low) / ($high - $low + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(TS_MEAN($high - $low, 20) / (TS_STD($volume, 10) + 1e-8)) * (($close - $low) / ($high - $low + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"LVSR_Momentum_Filtered\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This variation of the LVSR factor focuses on the interaction between price range expansion and volume stability, specifically filtering for cases where the lower shadow is significant relative to the daily volatility.",
      "factor_formulation": "\\frac{\\text{TS\\_MEAN}(high-low, 20)}{\\text{TS\\_STD}(volume, 10)} \\times \\frac{close-low}{high-low}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "b8009e9e70de",
        "parent_trajectory_ids": [
          "328dbeb0c242",
          "043474954dbc"
        ],
        "hypothesis": "Hypothesis: The 'Liquidity-Validated Structural Rebound' (LVSR) factor predicts short-term reversals by identifying assets where high intraday price dispersion (noise) is coupled with strong institutional absorption, defined as the product of the 20-day Z-score of the High-Low range and the 5-day average lower-shadow-to-total-range ratio, scaled by the inverse of volume volatility.\n                Concise Observation: Parent 1 captures high-alpha mean-reversion via price dispersion but suffers from 'falling knife' risks, while Parent 2 identifies structural support through shadow ratios but lacks a volatility-based trigger for timing.\n                Concise Justification: Fusing these identifies 'exhaustion' points where selling pressure is spent (high range/low volume conviction) and immediately met by buying support (lower shadows), creating a higher-probability reversal signal than either component alone.\n                Concise Knowledge: If high intraday volatility (dispersion) occurs without a corresponding surge in volume volatility, it indicates market noise; if this noise is accompanied by large lower shadows (absorption), a price reversal is more likely than a continuation.\n                concise Specification: The factor is the product of: (1) the 20-day Z-score of (High-Low)/Close, (2) the 5-day mean of (min(Open, Close)-Low)/(High-Low), and (3) the inverse of the 5-day standard deviation of Volume, all calculated using daily_pv.h5 data.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T10:08:28.656044"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0895790740906607,
        "ICIR": 0.0472620471795279,
        "1day.excess_return_without_cost.std": 0.0038983818085295,
        "1day.excess_return_with_cost.annualized_return": 0.0360745920472733,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003503139706382,
        "1day.excess_return_without_cost.annualized_return": 0.0833747250119079,
        "1day.excess_return_with_cost.std": 0.0038996970574369,
        "Rank IC": 0.0233725195396657,
        "IC": 0.0062690397404904,
        "1day.excess_return_without_cost.max_drawdown": -0.0780516741682955,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.3863138568061828,
        "1day.pa": 0.0,
        "l2.valid": 0.9962661055425046,
        "Rank ICIR": 0.1762123108905118,
        "l2.train": 0.9931667036808288,
        "1day.excess_return_with_cost.information_ratio": 0.5996282415341484,
        "1day.excess_return_with_cost.mean": 0.000151573916165
      },
      "feedback": {
        "observations": "The experiment successfully validated the 'Liquidity-Validated Structural Rebound' (LVSR) framework. The current iteration significantly outperformed the previous SOTA across almost all key performance indicators. Specifically, the Information Ratio (IR) improved from 0.97 to 1.38, and the Annualized Return increased from 5.2% to 8.3%. The IC also showed a healthy improvement to 0.0063. While the Max Drawdown slightly worsened (-0.078 vs -0.072), the substantial gains in risk-adjusted returns (IR) justify the current approach. The 'LVSR_Rank_Stabilized' and 'LVSR_Momentum_Filtered' variations suggest that cross-sectional ranking and simplifying the volume-volatility interaction are effective strategies for capturing the intended market inefficiency.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that combining intraday price dispersion with institutional absorption (proxied by lower shadows) and volume stability predicts short-term reversals. The success of the 'LVSR_Rank_Stabilized' approach indicates that the relationship is more robust when viewed through a relative (cross-sectional) lens rather than absolute values. The 'LVSR_Momentum_Filtered' result suggests that the raw price range (high-low) might be a more direct proxy for dispersion than a complex Z-score when coupled with volume stability.",
        "decision": true,
        "reason": "Current results show that volume stability is a key filter, but absolute standard deviation can be sensitive to regime shifts. Using relative volume intensity (Volume/MA) focuses on liquidity surges accompanying the price tail. Furthermore, the 'lower shadow ratio' often contains noise in mid-range bars; by focusing on the top decile of shadow ratios (non-linear scaling), we can more accurately isolate the 'structural rebound' intended by the hypothesis while maintaining low symbol complexity and feature count."
      }
    },
    "0719633a92b12f68": {
      "factor_id": "0719633a92b12f68",
      "factor_name": "AID_Stealth_Accumulation_10D",
      "factor_expression": "(($high + $low + $close) / 3) / (($high + $low) / 2 + 1e-8) * (TS_MEAN($volume, 10) / ($volume + 1e-8)) * (($high - $low) < TS_MEAN($high - $low, 20) ? 1 : 0)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(($high + $low + $close) / 3) / (($high + $low) / 2 + 1e-8) * (TS_MEAN($volume, 10) / ($volume + 1e-8)) * (($high - $low) < TS_MEAN($high - $low, 20) ? 1 : 0)\" # Your output factor expression will be filled in here\n    name = \"AID_Stealth_Accumulation_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "The Asymmetric Information Decay (AID) factor identifies institutional positioning by measuring the divergence between the typical price (VWAP proxy) and the median price. This divergence is scaled by the inverse of the volume trend and filtered for low-volatility regimes (intraday range below its 20-day average), signaling informed accumulation during quiet periods.",
      "factor_formulation": "AID = \\frac{(High + Low + Close) / 3}{(High + Low) / 2} \\times \\frac{TS\\_MEAN(volume, 10)}{volume} \\times ( (High - Low) < TS\\_MEAN(High - Low, 20) ? 1 : 0 )",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 9,
        "evolution_phase": "mutation",
        "trajectory_id": "b2a1a5b73f18",
        "parent_trajectory_ids": [
          "7412ba9b2323"
        ],
        "hypothesis": "Hypothesis: The 'Asymmetric Information Decay' (AID) factor identifies stealth institutional positioning by measuring the divergence between price-weighted and time-weighted averages during low-volume regimes, where a positive VWAP-to-Median-Price spread on declining volume signals informed accumulation.\n                Concise Observation: The parent strategy (EVB) focused on high-volatility breakouts and gaps, which are often crowded retail signals, whereas market microstructure suggests that institutional 'stealth' orders often create subtle price-volume coupling during quiet periods that precedes major moves.\n                Concise Justification: Informed traders minimize market impact by splitting orders, causing the VWAP to deviate from the simple average price (TWAP proxy) even when the overall range is narrow, creating a 'quiet flow' that is orthogonal to high-volatility breakout signals.\n                Concise Knowledge: If price-weighted averages (VWAP) consistently exceed time-weighted averages (Median) during periods of low volume and low volatility, it indicates informed buyers are executing aggressively within a passive market; when this divergence occurs without price breakouts, it signals a high probability of future upward drift.\n                concise Specification: The AID factor is defined as the ratio of the daily (High+Low+Close)/3 to the (High+Low)/2, scaled by the inverse of the 10-day volume trend, specifically targeting days where the intraday range is below its 20-day moving average.\n                ",
        "initial_direction": "Identify 'Trend Exhaustion' by interacting RSQR10 with RESI5: high R-squared combined with high positive residuals suggests an overextended trend prone to mean reversion.",
        "planning_direction": "Identify 'Trend Exhaustion' by interacting RSQR10 with RESI5: high R-squared combined with high positive residuals suggests an overextended trend prone to mean reversion.",
        "created_at": "2026-01-21T11:32:17.110619"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1072093479093911,
        "ICIR": 0.037928943204933,
        "1day.excess_return_without_cost.std": 0.0042372806570693,
        "1day.excess_return_with_cost.annualized_return": 0.0071946987984656,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002275301706517,
        "1day.excess_return_without_cost.annualized_return": 0.0541521806151281,
        "1day.excess_return_with_cost.std": 0.0042369958631361,
        "Rank IC": 0.0231094315003661,
        "IC": 0.0052456320855065,
        "1day.excess_return_without_cost.max_drawdown": -0.0997414553065788,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.82840028674129,
        "1day.pa": 0.0,
        "l2.valid": 0.9964541965158707,
        "Rank ICIR": 0.1667716639028527,
        "l2.train": 0.9935006785059004,
        "1day.excess_return_with_cost.information_ratio": 0.1100692731748338,
        "1day.excess_return_with_cost.mean": 3.0229826884309665e-05
      },
      "feedback": {
        "observations": "The current iteration of the 'Asymmetric Information Decay' (AID) framework shows mixed results. While the annualized return (0.054152) has surpassed the previous SOTA (0.052010), the Information Ratio (IR) and Information Coefficient (IC) have slightly declined, and the Maximum Drawdown has deepened significantly (-0.099 vs -0.072). This suggests that while the current implementation captures higher magnitude returns, it does so with increased volatility and less consistency across the time series. The use of Z-scores and cross-sectional ranking in the current factors (AID_Z and AID_CS) likely contributed to the higher return but introduced more noise compared to simpler formulations.",
        "hypothesis_evaluation": "The hypothesis that a positive VWAP-to-Median-Price spread on declining volume signals informed accumulation is partially supported by the improvement in annualized returns. However, the drop in IC and IR suggests that the 'low-volume regime' filter might be too restrictive or binary (using 0/1 masks), leading to a loss of predictive signal in transition periods. The divergence between price-weighted and time-weighted averages remains a valid signal, but its interaction with volume requires a smoother mathematical representation than simple thresholding.",
        "decision": true,
        "reason": "The current binary filters (e.g., volume < mean) create sharp discontinuities that hurt the Information Ratio. By moving to a continuous interaction (e.g., dividing the price spread by a volume-volatility ratio), we can maintain the core 'Asymmetric Information' logic while improving the signal-to-noise ratio. Furthermore, reducing the reliance on complex Z-scores (which can be unstable in short windows) in favor of simple ratios will improve the factor's robustness and generalization, addressing the slight deterioration in IC."
      }
    },
    "754803e93cb75a39": {
      "factor_id": "754803e93cb75a39",
      "factor_name": "AID_CrossSectional_Informed_Flow",
      "factor_expression": "RANK(($close - ($high + $low) / 2) / ($high - $low + 1e-8)) * (TS_PCTCHANGE($volume, 5) < 0 ? 1 : 0)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK((($high + $low + $close) / 3) - (($high + $low) / 2)) * (TS_PCTCHANGE($volume, 5) < 0 ? 1 : 0) * (($high - $low) < TS_MEAN($high - $low, 20) ? 1 : 0)\" # Your output factor expression will be filled in here\n    name = \"AID_CrossSectional_Informed_Flow\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor captures the 'quiet flow' of informed traders by calculating the cross-sectional rank of the spread between price-weighted and time-weighted averages, specifically when the volume is decreasing relative to its recent past and volatility is low.",
      "factor_formulation": "AID\\_CS = RANK(\\frac{Close - (High + Low) / 2}{High - Low + 1e-8}) \\times (TS\\_PCTCHANGE(volume, 5) < 0 ? 1 : 0)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 9,
        "evolution_phase": "mutation",
        "trajectory_id": "b2a1a5b73f18",
        "parent_trajectory_ids": [
          "7412ba9b2323"
        ],
        "hypothesis": "Hypothesis: The 'Asymmetric Information Decay' (AID) factor identifies stealth institutional positioning by measuring the divergence between price-weighted and time-weighted averages during low-volume regimes, where a positive VWAP-to-Median-Price spread on declining volume signals informed accumulation.\n                Concise Observation: The parent strategy (EVB) focused on high-volatility breakouts and gaps, which are often crowded retail signals, whereas market microstructure suggests that institutional 'stealth' orders often create subtle price-volume coupling during quiet periods that precedes major moves.\n                Concise Justification: Informed traders minimize market impact by splitting orders, causing the VWAP to deviate from the simple average price (TWAP proxy) even when the overall range is narrow, creating a 'quiet flow' that is orthogonal to high-volatility breakout signals.\n                Concise Knowledge: If price-weighted averages (VWAP) consistently exceed time-weighted averages (Median) during periods of low volume and low volatility, it indicates informed buyers are executing aggressively within a passive market; when this divergence occurs without price breakouts, it signals a high probability of future upward drift.\n                concise Specification: The AID factor is defined as the ratio of the daily (High+Low+Close)/3 to the (High+Low)/2, scaled by the inverse of the 10-day volume trend, specifically targeting days where the intraday range is below its 20-day moving average.\n                ",
        "initial_direction": "Identify 'Trend Exhaustion' by interacting RSQR10 with RESI5: high R-squared combined with high positive residuals suggests an overextended trend prone to mean reversion.",
        "planning_direction": "Identify 'Trend Exhaustion' by interacting RSQR10 with RESI5: high R-squared combined with high positive residuals suggests an overextended trend prone to mean reversion.",
        "created_at": "2026-01-21T11:32:17.110619"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1072093479093911,
        "ICIR": 0.037928943204933,
        "1day.excess_return_without_cost.std": 0.0042372806570693,
        "1day.excess_return_with_cost.annualized_return": 0.0071946987984656,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002275301706517,
        "1day.excess_return_without_cost.annualized_return": 0.0541521806151281,
        "1day.excess_return_with_cost.std": 0.0042369958631361,
        "Rank IC": 0.0231094315003661,
        "IC": 0.0052456320855065,
        "1day.excess_return_without_cost.max_drawdown": -0.0997414553065788,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.82840028674129,
        "1day.pa": 0.0,
        "l2.valid": 0.9964541965158707,
        "Rank ICIR": 0.1667716639028527,
        "l2.train": 0.9935006785059004,
        "1day.excess_return_with_cost.information_ratio": 0.1100692731748338,
        "1day.excess_return_with_cost.mean": 3.0229826884309665e-05
      },
      "feedback": {
        "observations": "The current iteration of the 'Asymmetric Information Decay' (AID) framework shows mixed results. While the annualized return (0.054152) has surpassed the previous SOTA (0.052010), the Information Ratio (IR) and Information Coefficient (IC) have slightly declined, and the Maximum Drawdown has deepened significantly (-0.099 vs -0.072). This suggests that while the current implementation captures higher magnitude returns, it does so with increased volatility and less consistency across the time series. The use of Z-scores and cross-sectional ranking in the current factors (AID_Z and AID_CS) likely contributed to the higher return but introduced more noise compared to simpler formulations.",
        "hypothesis_evaluation": "The hypothesis that a positive VWAP-to-Median-Price spread on declining volume signals informed accumulation is partially supported by the improvement in annualized returns. However, the drop in IC and IR suggests that the 'low-volume regime' filter might be too restrictive or binary (using 0/1 masks), leading to a loss of predictive signal in transition periods. The divergence between price-weighted and time-weighted averages remains a valid signal, but its interaction with volume requires a smoother mathematical representation than simple thresholding.",
        "decision": true,
        "reason": "The current binary filters (e.g., volume < mean) create sharp discontinuities that hurt the Information Ratio. By moving to a continuous interaction (e.g., dividing the price spread by a volume-volatility ratio), we can maintain the core 'Asymmetric Information' logic while improving the signal-to-noise ratio. Furthermore, reducing the reliance on complex Z-scores (which can be unstable in short windows) in favor of simple ratios will improve the factor's robustness and generalization, addressing the slight deterioration in IC."
      }
    },
    "c1d113524fc337ab": {
      "factor_id": "c1d113524fc337ab",
      "factor_name": "AID_Divergence_ZScore_20D",
      "factor_expression": "TS_ZSCORE((($high + $low + $close) / 3) / (($high + $low) / 2 + 1e-8), 20) / (TS_STD($volume / (TS_MEAN($volume, 20) + 1e-8), 10) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_ZSCORE((($high + $low + $close) / 3) / (($high + $low) / 2 + 1e-8), 20) / (TS_STD($volume / (TS_MEAN($volume, 20) + 1e-8), 10) + 1e-8)\" # Your output factor expression will be filled in here\n    name = \"AID_Divergence_ZScore_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "Measures the statistical significance of the divergence between the typical price and the median price using a 20-day Z-score, weighted by the inverse of volume volatility to emphasize periods of steady, low-impact institutional buying.",
      "factor_formulation": "AID\\_Z = TS\\_ZSCORE(\\frac{(High + Low + Close) / 3}{(High + Low) / 2}, 20) / TS\\_STD($volume / TS\\_MEAN($volume, 20), 10)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 9,
        "evolution_phase": "mutation",
        "trajectory_id": "b2a1a5b73f18",
        "parent_trajectory_ids": [
          "7412ba9b2323"
        ],
        "hypothesis": "Hypothesis: The 'Asymmetric Information Decay' (AID) factor identifies stealth institutional positioning by measuring the divergence between price-weighted and time-weighted averages during low-volume regimes, where a positive VWAP-to-Median-Price spread on declining volume signals informed accumulation.\n                Concise Observation: The parent strategy (EVB) focused on high-volatility breakouts and gaps, which are often crowded retail signals, whereas market microstructure suggests that institutional 'stealth' orders often create subtle price-volume coupling during quiet periods that precedes major moves.\n                Concise Justification: Informed traders minimize market impact by splitting orders, causing the VWAP to deviate from the simple average price (TWAP proxy) even when the overall range is narrow, creating a 'quiet flow' that is orthogonal to high-volatility breakout signals.\n                Concise Knowledge: If price-weighted averages (VWAP) consistently exceed time-weighted averages (Median) during periods of low volume and low volatility, it indicates informed buyers are executing aggressively within a passive market; when this divergence occurs without price breakouts, it signals a high probability of future upward drift.\n                concise Specification: The AID factor is defined as the ratio of the daily (High+Low+Close)/3 to the (High+Low)/2, scaled by the inverse of the 10-day volume trend, specifically targeting days where the intraday range is below its 20-day moving average.\n                ",
        "initial_direction": "Identify 'Trend Exhaustion' by interacting RSQR10 with RESI5: high R-squared combined with high positive residuals suggests an overextended trend prone to mean reversion.",
        "planning_direction": "Identify 'Trend Exhaustion' by interacting RSQR10 with RESI5: high R-squared combined with high positive residuals suggests an overextended trend prone to mean reversion.",
        "created_at": "2026-01-21T11:32:17.110619"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1072093479093911,
        "ICIR": 0.037928943204933,
        "1day.excess_return_without_cost.std": 0.0042372806570693,
        "1day.excess_return_with_cost.annualized_return": 0.0071946987984656,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002275301706517,
        "1day.excess_return_without_cost.annualized_return": 0.0541521806151281,
        "1day.excess_return_with_cost.std": 0.0042369958631361,
        "Rank IC": 0.0231094315003661,
        "IC": 0.0052456320855065,
        "1day.excess_return_without_cost.max_drawdown": -0.0997414553065788,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.82840028674129,
        "1day.pa": 0.0,
        "l2.valid": 0.9964541965158707,
        "Rank ICIR": 0.1667716639028527,
        "l2.train": 0.9935006785059004,
        "1day.excess_return_with_cost.information_ratio": 0.1100692731748338,
        "1day.excess_return_with_cost.mean": 3.0229826884309665e-05
      },
      "feedback": {
        "observations": "The current iteration of the 'Asymmetric Information Decay' (AID) framework shows mixed results. While the annualized return (0.054152) has surpassed the previous SOTA (0.052010), the Information Ratio (IR) and Information Coefficient (IC) have slightly declined, and the Maximum Drawdown has deepened significantly (-0.099 vs -0.072). This suggests that while the current implementation captures higher magnitude returns, it does so with increased volatility and less consistency across the time series. The use of Z-scores and cross-sectional ranking in the current factors (AID_Z and AID_CS) likely contributed to the higher return but introduced more noise compared to simpler formulations.",
        "hypothesis_evaluation": "The hypothesis that a positive VWAP-to-Median-Price spread on declining volume signals informed accumulation is partially supported by the improvement in annualized returns. However, the drop in IC and IR suggests that the 'low-volume regime' filter might be too restrictive or binary (using 0/1 masks), leading to a loss of predictive signal in transition periods. The divergence between price-weighted and time-weighted averages remains a valid signal, but its interaction with volume requires a smoother mathematical representation than simple thresholding.",
        "decision": true,
        "reason": "The current binary filters (e.g., volume < mean) create sharp discontinuities that hurt the Information Ratio. By moving to a continuous interaction (e.g., dividing the price spread by a volume-volatility ratio), we can maintain the core 'Asymmetric Information' logic while improving the signal-to-noise ratio. Furthermore, reducing the reliance on complex Z-scores (which can be unstable in short windows) in favor of simple ratios will improve the factor's robustness and generalization, addressing the slight deterioration in IC."
      }
    },
    "830f5c2ee06c9f98": {
      "factor_id": "830f5c2ee06c9f98",
      "factor_name": "Institutional_Absorption_Factor_10D",
      "factor_expression": "POW(TS_CORR($close, SEQUENCE(10), 10), 2) * INV(TS_MEAN(($high - $low) / ($volume + 1e-8), 5))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"POW(TS_CORR($close, SEQUENCE(10), 10), 2) / (TS_MEAN(($high - $low) / ($volume + 1e-8), 5) + 1e-8)\" # Your output factor expression will be filled in here\n    name = \"Institutional_Absorption_Factor_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies sustainable price trends by combining linear persistence (R-squared) with low volume-weighted intraday volatility. High R-squared indicates a steady price climb, while low volume-weighted range suggests institutional accumulation without price spikes or liquidity gaps.",
      "factor_formulation": "IAF = \\text{POW}(\\text{TS_CORR}(\\text{close}, \\text{SEQUENCE}(10), 10), 2) * \\text{INV}(\\text{TS_MEAN}(\\frac{\\text{high} - \\text{low}}{\\text{volume} + 1e-8}, 5))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 9,
        "evolution_phase": "mutation",
        "trajectory_id": "3b723480152e",
        "parent_trajectory_ids": [
          "00a50f728443"
        ],
        "hypothesis": "Hypothesis: The Institutional Absorption Factor (IAF) identifies sustainable price trends by detecting periods where the 10-day R-squared of price returns is high (indicating linear persistence) while the 5-day volume-weighted price volatility is low, suggesting non-disruptive institutional accumulation.\n                Concise Observation: The parent strategy (LSEF) focused on mean-reversion from 'hollow' price spikes; however, market leaders often exhibit 'efficient' climbs where price moves steadily with minimal intraday noise, signaling a different regime of institutional conviction.\n                Concise Justification: High R-squared values filter for steady directional movement, while low volume-weighted volatility (WVMA) ensures that this movement is not driven by speculative spikes or liquidity gaps, but rather by consistent, controlled buying pressure.\n                Concise Knowledge: If a price trend exhibits high linear persistence (R-squared) alongside low volume-weighted volatility, it likely reflects institutional absorption; such 'quiet' trends are more sustainable than high-volatility breakouts which often lead to exhaustion.\n                concise Specification: The factor is defined as the product of the 10-day Pearson R-squared of daily close prices against a time index and the inverse of the 5-day moving average of the volume-weighted intraday range ($high-$low)/$volume. It targets trend-following entries in low-noise environments.\n                ",
        "initial_direction": "Detect 'Institutional Absorption' by identifying periods of high RSQR10 and low WVMA5: a steady price climb on low relative volume-weighted volatility indicates efficient, non-disruptive buying.",
        "planning_direction": "Detect 'Institutional Absorption' by identifying periods of high RSQR10 and low WVMA5: a steady price climb on low relative volume-weighted volatility indicates efficient, non-disruptive buying.",
        "created_at": "2026-01-21T12:20:55.615002"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1191894507604488,
        "ICIR": 0.0423436700109229,
        "1day.excess_return_without_cost.std": 0.004051247398869,
        "1day.excess_return_with_cost.annualized_return": 0.00293898401951,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002105760575969,
        "1day.excess_return_without_cost.annualized_return": 0.050117101708071,
        "1day.excess_return_with_cost.std": 0.0040529893723043,
        "Rank IC": 0.0230786334929141,
        "IC": 0.0058217224994981,
        "1day.excess_return_without_cost.max_drawdown": -0.0953488136540804,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.8018787485030696,
        "1day.pa": 0.0,
        "l2.valid": 0.9964740395164088,
        "Rank ICIR": 0.1727121375528159,
        "l2.train": 0.9940822192532732,
        "1day.excess_return_with_cost.information_ratio": 0.0470038337115988,
        "1day.excess_return_with_cost.mean": 1.2348672350882373e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the Institutional Absorption Factor (IAF) hypothesis, focusing on the synergy between price trend linearity (R-squared/Correlation) and low intraday volatility. The 'Current Result' achieved a higher Information Coefficient (IC) of 0.005822 compared to the SOTA's 0.005798, indicating a slight improvement in the raw predictive power of the signal. However, the risk-adjusted metrics (Information Ratio) and drawdown protection (Max Drawdown) underperformed relative to the SOTA. Among the tested factors, the 'Institutional_Accumulation_Efficiency' and 'Quiet_Trend_Persistence_ZScore' provided more robust normalization than the original IAF_10D by using cross-sectional ranking and smoothed volume denominators.",
        "hypothesis_evaluation": "The hypothesis that linear persistence combined with low volume-weighted volatility identifies sustainable trends is partially supported by the improved IC. The results suggest that the 'linear persistence' component (TS_CORR) is a strong signal, but the 'volatility' denominator needs better scaling. The current implementation of (high-low)/volume can be extremely noisy due to small volume values, which likely led to the higher drawdown and lower IR compared to SOTA.",
        "decision": false,
        "reason": "The current results show that while the predictive correlation (IC) is high, the stability of the return (IR) is lacking. The volume-based denominator in IAF_10D and IAE is prone to outliers. By replacing the volume-weighted range with a pure price-relative range (High-Low)/Close and applying a cross-sectional Rank to both the persistence and the volatility components separately before combining them, we can create a more stable, scale-invariant factor that captures the same 'quiet markup' logic without the instability of volume-driven denominators."
      }
    },
    "d7ae30e09c457386": {
      "factor_id": "d7ae30e09c457386",
      "factor_name": "Quiet_Trend_Persistence_ZScore",
      "factor_expression": "RANK(TS_CORR($close, SEQUENCE(10), 10)) / (RANK(TS_MEAN(($high - $low) / ($close + 1e-8), 5)) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(TS_CORR($close, SEQUENCE(10), 10)) / (RANK(TS_MEAN(($high - $low) / ($close + 1e-8), 5)) + 1e-8)\" # Your output factor expression will be filled in here\n    name = \"Quiet_Trend_Persistence_ZScore\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A variation of the absorption hypothesis that uses Z-scored persistence and normalized volatility. It captures regimes where the price trend is unusually linear relative to its recent intraday noise levels, favoring 'quiet' institutional markups over volatile retail breakouts.",
      "factor_formulation": "QTP = \\text{RANK}(\\text{TS_CORR}(\\text{close}, \\text{SEQUENCE}(10), 10)) / \\text{RANK}(\\text{TS_MEAN}(\\frac{\\text{high} - \\text{low}}{\\text{close}}, 5))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 9,
        "evolution_phase": "mutation",
        "trajectory_id": "3b723480152e",
        "parent_trajectory_ids": [
          "00a50f728443"
        ],
        "hypothesis": "Hypothesis: The Institutional Absorption Factor (IAF) identifies sustainable price trends by detecting periods where the 10-day R-squared of price returns is high (indicating linear persistence) while the 5-day volume-weighted price volatility is low, suggesting non-disruptive institutional accumulation.\n                Concise Observation: The parent strategy (LSEF) focused on mean-reversion from 'hollow' price spikes; however, market leaders often exhibit 'efficient' climbs where price moves steadily with minimal intraday noise, signaling a different regime of institutional conviction.\n                Concise Justification: High R-squared values filter for steady directional movement, while low volume-weighted volatility (WVMA) ensures that this movement is not driven by speculative spikes or liquidity gaps, but rather by consistent, controlled buying pressure.\n                Concise Knowledge: If a price trend exhibits high linear persistence (R-squared) alongside low volume-weighted volatility, it likely reflects institutional absorption; such 'quiet' trends are more sustainable than high-volatility breakouts which often lead to exhaustion.\n                concise Specification: The factor is defined as the product of the 10-day Pearson R-squared of daily close prices against a time index and the inverse of the 5-day moving average of the volume-weighted intraday range ($high-$low)/$volume. It targets trend-following entries in low-noise environments.\n                ",
        "initial_direction": "Detect 'Institutional Absorption' by identifying periods of high RSQR10 and low WVMA5: a steady price climb on low relative volume-weighted volatility indicates efficient, non-disruptive buying.",
        "planning_direction": "Detect 'Institutional Absorption' by identifying periods of high RSQR10 and low WVMA5: a steady price climb on low relative volume-weighted volatility indicates efficient, non-disruptive buying.",
        "created_at": "2026-01-21T12:20:55.615002"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1191894507604488,
        "ICIR": 0.0423436700109229,
        "1day.excess_return_without_cost.std": 0.004051247398869,
        "1day.excess_return_with_cost.annualized_return": 0.00293898401951,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002105760575969,
        "1day.excess_return_without_cost.annualized_return": 0.050117101708071,
        "1day.excess_return_with_cost.std": 0.0040529893723043,
        "Rank IC": 0.0230786334929141,
        "IC": 0.0058217224994981,
        "1day.excess_return_without_cost.max_drawdown": -0.0953488136540804,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.8018787485030696,
        "1day.pa": 0.0,
        "l2.valid": 0.9964740395164088,
        "Rank ICIR": 0.1727121375528159,
        "l2.train": 0.9940822192532732,
        "1day.excess_return_with_cost.information_ratio": 0.0470038337115988,
        "1day.excess_return_with_cost.mean": 1.2348672350882373e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the Institutional Absorption Factor (IAF) hypothesis, focusing on the synergy between price trend linearity (R-squared/Correlation) and low intraday volatility. The 'Current Result' achieved a higher Information Coefficient (IC) of 0.005822 compared to the SOTA's 0.005798, indicating a slight improvement in the raw predictive power of the signal. However, the risk-adjusted metrics (Information Ratio) and drawdown protection (Max Drawdown) underperformed relative to the SOTA. Among the tested factors, the 'Institutional_Accumulation_Efficiency' and 'Quiet_Trend_Persistence_ZScore' provided more robust normalization than the original IAF_10D by using cross-sectional ranking and smoothed volume denominators.",
        "hypothesis_evaluation": "The hypothesis that linear persistence combined with low volume-weighted volatility identifies sustainable trends is partially supported by the improved IC. The results suggest that the 'linear persistence' component (TS_CORR) is a strong signal, but the 'volatility' denominator needs better scaling. The current implementation of (high-low)/volume can be extremely noisy due to small volume values, which likely led to the higher drawdown and lower IR compared to SOTA.",
        "decision": false,
        "reason": "The current results show that while the predictive correlation (IC) is high, the stability of the return (IR) is lacking. The volume-based denominator in IAF_10D and IAE is prone to outliers. By replacing the volume-weighted range with a pure price-relative range (High-Low)/Close and applying a cross-sectional Rank to both the persistence and the volatility components separately before combining them, we can create a more stable, scale-invariant factor that captures the same 'quiet markup' logic without the instability of volume-driven denominators."
      }
    },
    "cff56aabe0bd256e": {
      "factor_id": "cff56aabe0bd256e",
      "factor_name": "Institutional_Accumulation_Efficiency",
      "factor_expression": "POW(TS_CORR($close, SEQUENCE(10), 10), 2) / (TS_MEAN(($high - $low) / (TS_MEAN($volume, 10) + 1e-8), 10) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"POW(TS_CORR($close, SEQUENCE(10), 10), 2) / (TS_MEAN(($high - $low) / (TS_MEAN($volume, 10) + 1e-8), 10) + 1e-8)\" # Your output factor expression will be filled in here\n    name = \"Institutional_Accumulation_Efficiency\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor measures the 'efficiency' of a price move by dividing the 10-day price persistence (R-squared) by the 10-day average of the volume-weighted spread. Higher values indicate the price is moving linearly with minimal volume-induced volatility, characteristic of institutional absorption.",
      "factor_formulation": "IAE = \\frac{\\text{TS_CORR}(\\text{close}, \\text{SEQUENCE}(10), 10)^2}{\\text{TS_MEAN}(\\frac{\\text{high} - \\text{low}}{\\text{TS_MEAN}(\\text{volume}, 10) + 1e-8}, 10)}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 9,
        "evolution_phase": "mutation",
        "trajectory_id": "3b723480152e",
        "parent_trajectory_ids": [
          "00a50f728443"
        ],
        "hypothesis": "Hypothesis: The Institutional Absorption Factor (IAF) identifies sustainable price trends by detecting periods where the 10-day R-squared of price returns is high (indicating linear persistence) while the 5-day volume-weighted price volatility is low, suggesting non-disruptive institutional accumulation.\n                Concise Observation: The parent strategy (LSEF) focused on mean-reversion from 'hollow' price spikes; however, market leaders often exhibit 'efficient' climbs where price moves steadily with minimal intraday noise, signaling a different regime of institutional conviction.\n                Concise Justification: High R-squared values filter for steady directional movement, while low volume-weighted volatility (WVMA) ensures that this movement is not driven by speculative spikes or liquidity gaps, but rather by consistent, controlled buying pressure.\n                Concise Knowledge: If a price trend exhibits high linear persistence (R-squared) alongside low volume-weighted volatility, it likely reflects institutional absorption; such 'quiet' trends are more sustainable than high-volatility breakouts which often lead to exhaustion.\n                concise Specification: The factor is defined as the product of the 10-day Pearson R-squared of daily close prices against a time index and the inverse of the 5-day moving average of the volume-weighted intraday range ($high-$low)/$volume. It targets trend-following entries in low-noise environments.\n                ",
        "initial_direction": "Detect 'Institutional Absorption' by identifying periods of high RSQR10 and low WVMA5: a steady price climb on low relative volume-weighted volatility indicates efficient, non-disruptive buying.",
        "planning_direction": "Detect 'Institutional Absorption' by identifying periods of high RSQR10 and low WVMA5: a steady price climb on low relative volume-weighted volatility indicates efficient, non-disruptive buying.",
        "created_at": "2026-01-21T12:20:55.615002"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1191894507604488,
        "ICIR": 0.0423436700109229,
        "1day.excess_return_without_cost.std": 0.004051247398869,
        "1day.excess_return_with_cost.annualized_return": 0.00293898401951,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002105760575969,
        "1day.excess_return_without_cost.annualized_return": 0.050117101708071,
        "1day.excess_return_with_cost.std": 0.0040529893723043,
        "Rank IC": 0.0230786334929141,
        "IC": 0.0058217224994981,
        "1day.excess_return_without_cost.max_drawdown": -0.0953488136540804,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.8018787485030696,
        "1day.pa": 0.0,
        "l2.valid": 0.9964740395164088,
        "Rank ICIR": 0.1727121375528159,
        "l2.train": 0.9940822192532732,
        "1day.excess_return_with_cost.information_ratio": 0.0470038337115988,
        "1day.excess_return_with_cost.mean": 1.2348672350882373e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the Institutional Absorption Factor (IAF) hypothesis, focusing on the synergy between price trend linearity (R-squared/Correlation) and low intraday volatility. The 'Current Result' achieved a higher Information Coefficient (IC) of 0.005822 compared to the SOTA's 0.005798, indicating a slight improvement in the raw predictive power of the signal. However, the risk-adjusted metrics (Information Ratio) and drawdown protection (Max Drawdown) underperformed relative to the SOTA. Among the tested factors, the 'Institutional_Accumulation_Efficiency' and 'Quiet_Trend_Persistence_ZScore' provided more robust normalization than the original IAF_10D by using cross-sectional ranking and smoothed volume denominators.",
        "hypothesis_evaluation": "The hypothesis that linear persistence combined with low volume-weighted volatility identifies sustainable trends is partially supported by the improved IC. The results suggest that the 'linear persistence' component (TS_CORR) is a strong signal, but the 'volatility' denominator needs better scaling. The current implementation of (high-low)/volume can be extremely noisy due to small volume values, which likely led to the higher drawdown and lower IR compared to SOTA.",
        "decision": false,
        "reason": "The current results show that while the predictive correlation (IC) is high, the stability of the return (IR) is lacking. The volume-based denominator in IAF_10D and IAE is prone to outliers. By replacing the volume-weighted range with a pure price-relative range (High-Low)/Close and applying a cross-sectional Rank to both the persistence and the volatility components separately before combining them, we can create a more stable, scale-invariant factor that captures the same 'quiet markup' logic without the instability of volume-driven denominators."
      }
    },
    "295221a0e133815f": {
      "factor_id": "295221a0e133815f",
      "factor_name": "IMEI_Gap_Linearity_20D",
      "factor_expression": "ZSCORE(TS_MEAN(($open - DELAY($close, 1)) / ($high - $low + 1e-8), 5)) * ZSCORE(POW(TS_CORR($close, SEQUENCE(10), 10), 2))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"ZSCORE(TS_MEAN(($open - DELAY($close, 1)) / ($high - $low + 1e-8), 5)) * ZSCORE(POW(TS_CORR($close, SEQUENCE(10), 10), 2))\" # Your output factor expression will be filled in here\n    name = \"IMEI_Gap_Linearity_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "Institutional Momentum Exhaustion Index (IMEI) component focusing on the synergy between overnight gaps and price linearity. It measures the 5-day average of normalized overnight gaps scaled by the 10-day price trend linearity (R-squared proxy), identifying high-conviction institutional moves.",
      "factor_formulation": "\\text{ZSCORE}(\\text{TS_MEAN}(\\frac{open - prev\\_close}{high - low}, 5)) \\times \\text{ZSCORE}(\\text{TS_CORR}(close, \\text{SEQUENCE}(10), 10)^2)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 4,
        "evolution_phase": "crossover",
        "trajectory_id": "5c99d6654ee5",
        "parent_trajectory_ids": [
          "6d4195d3d1f0",
          "74ba6f865315"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Momentum Exhaustion Index' (IMEI) predicts asset returns by scaling the 5-day institutional gap-trend synergy (product of normalized overnight gaps and 10-day price linearity) by a 20-day volume-price convexity penalty, identifying high-conviction trends before they reach liquidity depletion.\n                Concise Observation: Parent 1 (RankIC 0.0267) shows that price-volume convexity captures trend fragility, while Parent 2 (RankIC 0.0237) demonstrates that overnight gaps combined with trend linearity effectively signal institutional conviction.\n                Concise Justification: Fusing these signals allows the model to distinguish between 'healthy' institutional accumulation (high gap synergy, low convexity) and 'exhausted' retail-driven climaxes (high convexity), improving the signal-to-noise ratio of momentum factors.\n                Concise Knowledge: If institutional overnight gaps align with linear price trends, momentum persists; however, when the correlation between price returns and volume growth turns negative or price-volume convexity peaks, the trend becomes brittle and prone to reversal.\n                concise Specification: Define IMEI as (5-day mean of (Open - Prev_Close) / (High - Low)) * (10-day price R-squared) * (1 - 20-day correlation between price returns and volume changes), where all components are z-scored cross-sectionally.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T04:28:58.098143"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1450854929483079,
        "ICIR": 0.0378510838006322,
        "1day.excess_return_without_cost.std": 0.0042753851269329,
        "1day.excess_return_with_cost.annualized_return": -0.0138693005378254,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001405078496683,
        "1day.excess_return_without_cost.annualized_return": 0.0334408682210643,
        "1day.excess_return_with_cost.std": 0.0042760195952111,
        "Rank IC": 0.023007782032308,
        "IC": 0.0053104123883917,
        "1day.excess_return_without_cost.max_drawdown": -0.0930951903683457,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.5070068463109773,
        "1day.pa": 0.0,
        "l2.valid": 0.9967266058301948,
        "Rank ICIR": 0.167903601252565,
        "l2.train": 0.9940489479907376,
        "1day.excess_return_with_cost.information_ratio": -0.2102453473728435,
        "1day.excess_return_with_cost.mean": -5.827437200766979e-05
      },
      "feedback": {
        "observations": "The experiment tested the 'Institutional Momentum Exhaustion Index' (IMEI) by breaking it into components (Gap-Linearity and Convexity Penalty) and a full synergy factor. While the theoretical framework is sound, the 'IMEI_Full_Synergy_Factor' failed to surpass the current SOTA results. The Information Ratio (0.507 vs 0.973) and IC (0.0053 vs 0.0058) are significantly lower than the benchmark. The full synergy factor's complexity is high, involving multiple Z-scores and cross-product terms, which likely led to noise amplification rather than signal enhancement. The 'Convexity Penalty' component, while theoretically interesting, may be too restrictive when combined multiplicatively with the momentum signals.",
        "hypothesis_evaluation": "The hypothesis that scaling gap-trend synergy by a convexity penalty identifies 'high-conviction trends' is partially supported by the fact that the factor generates positive returns, but it is not yet optimized. The current implementation of the 'convexity penalty' (1 - ZSCORE of price-volume correlation) might be overly simplistic. The interaction between overnight gaps and intra-day linearity is a strong signal, but the triple-product structure (Gap * Linearity * Penalty) creates a highly non-linear distribution that may be unstable across different market regimes.",
        "decision": false,
        "reason": "The previous 'Linearity' component (R-squared) often selects for 'over-extended' trends that are nearing exhaustion. By switching focus to 'Gap-Persistence' (the ability of the price to stay above the open) and 'Volatility-Adjusted Volume', we can identify the early stages of institutional accumulation. Furthermore, reducing the complexity from a triple-product to a dual-component additive or simpler multiplicative model will improve robustness and reduce the risk of overfitting observed in the current iteration."
      }
    },
    "3d7da8b842ca153d": {
      "factor_id": "3d7da8b842ca153d",
      "factor_name": "IMEI_Convexity_Penalty_20D",
      "factor_expression": "1.0 - ZSCORE(TS_CORR($return, TS_PCTCHANGE($volume, 1), 20))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"INV(TS_CORR(TS_PCTCHANGE($close, 1), TS_PCTCHANGE($volume, 1), 20))\" # Your output factor expression will be filled in here\n    name = \"IMEI_Convexity_Penalty_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor captures the 'exhaustion' part of the IMEI hypothesis by penalizing momentum when price-volume convexity becomes extreme. It uses the inverse of the correlation between price returns and volume changes over a 20-day window to identify brittle trends.",
      "factor_formulation": "1 - \\text{ZSCORE}(\\text{TS_CORR}(return, \\text{TS_PCTCHANGE}(volume, 1), 20))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 4,
        "evolution_phase": "crossover",
        "trajectory_id": "5c99d6654ee5",
        "parent_trajectory_ids": [
          "6d4195d3d1f0",
          "74ba6f865315"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Momentum Exhaustion Index' (IMEI) predicts asset returns by scaling the 5-day institutional gap-trend synergy (product of normalized overnight gaps and 10-day price linearity) by a 20-day volume-price convexity penalty, identifying high-conviction trends before they reach liquidity depletion.\n                Concise Observation: Parent 1 (RankIC 0.0267) shows that price-volume convexity captures trend fragility, while Parent 2 (RankIC 0.0237) demonstrates that overnight gaps combined with trend linearity effectively signal institutional conviction.\n                Concise Justification: Fusing these signals allows the model to distinguish between 'healthy' institutional accumulation (high gap synergy, low convexity) and 'exhausted' retail-driven climaxes (high convexity), improving the signal-to-noise ratio of momentum factors.\n                Concise Knowledge: If institutional overnight gaps align with linear price trends, momentum persists; however, when the correlation between price returns and volume growth turns negative or price-volume convexity peaks, the trend becomes brittle and prone to reversal.\n                concise Specification: Define IMEI as (5-day mean of (Open - Prev_Close) / (High - Low)) * (10-day price R-squared) * (1 - 20-day correlation between price returns and volume changes), where all components are z-scored cross-sectionally.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T04:28:58.098143"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1450854929483079,
        "ICIR": 0.0378510838006322,
        "1day.excess_return_without_cost.std": 0.0042753851269329,
        "1day.excess_return_with_cost.annualized_return": -0.0138693005378254,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001405078496683,
        "1day.excess_return_without_cost.annualized_return": 0.0334408682210643,
        "1day.excess_return_with_cost.std": 0.0042760195952111,
        "Rank IC": 0.023007782032308,
        "IC": 0.0053104123883917,
        "1day.excess_return_without_cost.max_drawdown": -0.0930951903683457,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.5070068463109773,
        "1day.pa": 0.0,
        "l2.valid": 0.9967266058301948,
        "Rank ICIR": 0.167903601252565,
        "l2.train": 0.9940489479907376,
        "1day.excess_return_with_cost.information_ratio": -0.2102453473728435,
        "1day.excess_return_with_cost.mean": -5.827437200766979e-05
      },
      "feedback": {
        "observations": "The experiment tested the 'Institutional Momentum Exhaustion Index' (IMEI) by breaking it into components (Gap-Linearity and Convexity Penalty) and a full synergy factor. While the theoretical framework is sound, the 'IMEI_Full_Synergy_Factor' failed to surpass the current SOTA results. The Information Ratio (0.507 vs 0.973) and IC (0.0053 vs 0.0058) are significantly lower than the benchmark. The full synergy factor's complexity is high, involving multiple Z-scores and cross-product terms, which likely led to noise amplification rather than signal enhancement. The 'Convexity Penalty' component, while theoretically interesting, may be too restrictive when combined multiplicatively with the momentum signals.",
        "hypothesis_evaluation": "The hypothesis that scaling gap-trend synergy by a convexity penalty identifies 'high-conviction trends' is partially supported by the fact that the factor generates positive returns, but it is not yet optimized. The current implementation of the 'convexity penalty' (1 - ZSCORE of price-volume correlation) might be overly simplistic. The interaction between overnight gaps and intra-day linearity is a strong signal, but the triple-product structure (Gap * Linearity * Penalty) creates a highly non-linear distribution that may be unstable across different market regimes.",
        "decision": false,
        "reason": "The previous 'Linearity' component (R-squared) often selects for 'over-extended' trends that are nearing exhaustion. By switching focus to 'Gap-Persistence' (the ability of the price to stay above the open) and 'Volatility-Adjusted Volume', we can identify the early stages of institutional accumulation. Furthermore, reducing the complexity from a triple-product to a dual-component additive or simpler multiplicative model will improve robustness and reduce the risk of overfitting observed in the current iteration."
      }
    },
    "9a289aa77ac1fdc1": {
      "factor_id": "9a289aa77ac1fdc1",
      "factor_name": "IMEI_Full_Synergy_Factor",
      "factor_expression": "ZSCORE(($open - DELAY($close, 1)) / ($high - $low + 1e-8)) * ZSCORE(POW(TS_CORR($close, SEQUENCE(10), 10), 2)) * (1.0 - ZSCORE(TS_CORR($return, DELTA($volume, 1), 20)))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"ZSCORE(($open - DELAY($close, 1)) / ($high - $low + 1e-8)) * ZSCORE(POW(TS_CORR($close, SEQUENCE(10), 10), 2)) * (1.0 - ZSCORE(TS_CORR(TS_PCTCHANGE($close, 1), DELTA($volume, 1), 20)))\" # Your output factor expression will be filled in here\n    name = \"IMEI_Full_Synergy_Factor\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "The integrated IMEI factor combining institutional gap conviction, trend linearity, and the volume-price convexity penalty. It identifies assets where institutional gaps align with steady trends and volume support, while avoiding those showing signs of liquidity depletion.",
      "factor_formulation": "\\text{ZSCORE}(\\frac{open - DELAY(close, 1)}{high - low}) \\times \\text{ZSCORE}(\\text{POW}(\\text{TS_CORR}(close, \\text{SEQUENCE}(10), 10), 2)) \\times (1 - \\text{ZSCORE}(\\text{TS_CORR}(return, \\text{DELTA}(volume, 1), 20)))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 4,
        "evolution_phase": "crossover",
        "trajectory_id": "5c99d6654ee5",
        "parent_trajectory_ids": [
          "6d4195d3d1f0",
          "74ba6f865315"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Momentum Exhaustion Index' (IMEI) predicts asset returns by scaling the 5-day institutional gap-trend synergy (product of normalized overnight gaps and 10-day price linearity) by a 20-day volume-price convexity penalty, identifying high-conviction trends before they reach liquidity depletion.\n                Concise Observation: Parent 1 (RankIC 0.0267) shows that price-volume convexity captures trend fragility, while Parent 2 (RankIC 0.0237) demonstrates that overnight gaps combined with trend linearity effectively signal institutional conviction.\n                Concise Justification: Fusing these signals allows the model to distinguish between 'healthy' institutional accumulation (high gap synergy, low convexity) and 'exhausted' retail-driven climaxes (high convexity), improving the signal-to-noise ratio of momentum factors.\n                Concise Knowledge: If institutional overnight gaps align with linear price trends, momentum persists; however, when the correlation between price returns and volume growth turns negative or price-volume convexity peaks, the trend becomes brittle and prone to reversal.\n                concise Specification: Define IMEI as (5-day mean of (Open - Prev_Close) / (High - Low)) * (10-day price R-squared) * (1 - 20-day correlation between price returns and volume changes), where all components are z-scored cross-sectionally.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T04:28:58.098143"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1450854929483079,
        "ICIR": 0.0378510838006322,
        "1day.excess_return_without_cost.std": 0.0042753851269329,
        "1day.excess_return_with_cost.annualized_return": -0.0138693005378254,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001405078496683,
        "1day.excess_return_without_cost.annualized_return": 0.0334408682210643,
        "1day.excess_return_with_cost.std": 0.0042760195952111,
        "Rank IC": 0.023007782032308,
        "IC": 0.0053104123883917,
        "1day.excess_return_without_cost.max_drawdown": -0.0930951903683457,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.5070068463109773,
        "1day.pa": 0.0,
        "l2.valid": 0.9967266058301948,
        "Rank ICIR": 0.167903601252565,
        "l2.train": 0.9940489479907376,
        "1day.excess_return_with_cost.information_ratio": -0.2102453473728435,
        "1day.excess_return_with_cost.mean": -5.827437200766979e-05
      },
      "feedback": {
        "observations": "The experiment tested the 'Institutional Momentum Exhaustion Index' (IMEI) by breaking it into components (Gap-Linearity and Convexity Penalty) and a full synergy factor. While the theoretical framework is sound, the 'IMEI_Full_Synergy_Factor' failed to surpass the current SOTA results. The Information Ratio (0.507 vs 0.973) and IC (0.0053 vs 0.0058) are significantly lower than the benchmark. The full synergy factor's complexity is high, involving multiple Z-scores and cross-product terms, which likely led to noise amplification rather than signal enhancement. The 'Convexity Penalty' component, while theoretically interesting, may be too restrictive when combined multiplicatively with the momentum signals.",
        "hypothesis_evaluation": "The hypothesis that scaling gap-trend synergy by a convexity penalty identifies 'high-conviction trends' is partially supported by the fact that the factor generates positive returns, but it is not yet optimized. The current implementation of the 'convexity penalty' (1 - ZSCORE of price-volume correlation) might be overly simplistic. The interaction between overnight gaps and intra-day linearity is a strong signal, but the triple-product structure (Gap * Linearity * Penalty) creates a highly non-linear distribution that may be unstable across different market regimes.",
        "decision": false,
        "reason": "The previous 'Linearity' component (R-squared) often selects for 'over-extended' trends that are nearing exhaustion. By switching focus to 'Gap-Persistence' (the ability of the price to stay above the open) and 'Volatility-Adjusted Volume', we can identify the early stages of institutional accumulation. Furthermore, reducing the complexity from a triple-product to a dual-component additive or simpler multiplicative model will improve robustness and reduce the risk of overfitting observed in the current iteration."
      }
    },
    "2c3bc84638006fee": {
      "factor_id": "2c3bc84638006fee",
      "factor_name": "Intraday_Compression_Breakout_20D",
      "factor_expression": "$return / ((($high - $low) / ($close + 1e-8)) / (TS_STD($return, 20) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_PCTCHANGE($close, 1) / ((($high - $low) / ($close + 1e-8) + 1e-8) / (TS_STD(TS_PCTCHANGE($close, 1), 20) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Intraday_Compression_Breakout_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies high-conviction breakouts by measuring the ratio of price movement intensity to intraday range compression. It uses the daily return as a proxy for breakout direction and magnitude, normalized by the intraday range relative to 20-day volatility. High values suggest a strong directional move relative to a tight price channel.",
      "factor_formulation": "\\text{ICB}_{20D} = \\frac{\\text{return}}{\\frac{(\\text{high} - \\text{low}) / \\text{close}}{\\text{TS\\_STD}(\\text{return}, 20)}}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 5,
        "evolution_phase": "mutation",
        "trajectory_id": "6eec8f66c883",
        "parent_trajectory_ids": [
          "dc35ed2e2f1b"
        ],
        "hypothesis": "Hypothesis: The 'Intraday Compression-Breakout' factor, defined as the ratio of late-session volume intensity to the day's price range normalized by 20-day volatility, predicts that price breakouts following periods of intraday compression are driven by institutional conviction and lead to multi-day trend persistence.\n                Concise Observation: While the parent strategy focused on overnight gap reversals and liquidity exhaustion, market data suggests that low intraday volatility (tight high-low range) often precedes explosive moves when accompanied by significant late-day volume participation.\n                Concise Justification: Intraday price compression represents a state of equilibrium or 'coiling'; a surge in volume during the final session indicates institutional repositioning that overcomes this equilibrium, signaling a high-conviction breakout that typically carries over into subsequent days.\n                Concise Knowledge: If a stock's intraday range is narrow relative to its historical volatility (compression) while volume concentrates in the final trading hour (late-session imbalance), then the resulting price direction is more likely to persist as a structural trend rather than a mean-reverting noise.\n                concise Specification: The factor is calculated as (Last Hour Volume / Total Daily Volume) divided by ((High - Low) / Close / ATR_20D). High values indicate high-conviction breakouts from tight ranges, while low values indicate aimless volatility or low-conviction trading.\n                ",
        "initial_direction": "Evaluate 'Intraday-to-Interday Volatility Shift' by comparing KLEN to STD5: when intraday ranges exceed 5-day realized volatility, it signals a regime shift in market participants' urgency.",
        "planning_direction": "Evaluate 'Intraday-to-Interday Volatility Shift' by comparing KLEN to STD5: when intraday ranges exceed 5-day realized volatility, it signals a regime shift in market participants' urgency.",
        "created_at": "2026-01-21T06:01:44.336577"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0969020149008347,
        "ICIR": 0.0511100672463702,
        "1day.excess_return_without_cost.std": 0.0043168528602969,
        "1day.excess_return_with_cost.annualized_return": 0.0103233561138843,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002405021454377,
        "1day.excess_return_without_cost.annualized_return": 0.0572395106141823,
        "1day.excess_return_with_cost.std": 0.0043175284180423,
        "Rank IC": 0.0229860436999911,
        "IC": 0.0069767094157484,
        "1day.excess_return_without_cost.max_drawdown": -0.0889608553406053,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.859488732072847,
        "1day.pa": 0.0,
        "l2.valid": 0.9963866572458152,
        "Rank ICIR": 0.169727915651973,
        "l2.train": 0.9933586199061692,
        "1day.excess_return_with_cost.information_ratio": 0.1549876972346362,
        "1day.excess_return_with_cost.mean": 4.337544585665691e-05
      },
      "feedback": {
        "observations": "The current iteration focused on the 'Intraday Compression-Breakout' hypothesis by testing three distinct implementations: a direct ratio of return to normalized range (ICB_20D), a volume-efficiency rank (VRE_10D), and a sign-based relative compression measure (RCS_15D). The combined result shows a significant improvement in Information Coefficient (IC) from 0.0058 to 0.0070 and an increase in Annualized Return from 0.052 to 0.057. However, the Information Ratio (IR) decreased slightly, and the Max Drawdown worsened, suggesting that while the signal strength (IC) is higher, the volatility of the excess returns has also increased.",
        "hypothesis_evaluation": "The hypothesis that price breakouts following compression lead to trend persistence is supported by the improved IC and Annualized Return. Specifically, the 'RCS_15D' and 'ICB_20D' formulations likely contributed to capturing the directional conviction. The 'VRE_10D' factor's use of volume rank suggests that adding a liquidity/intensity dimension helps filter for institutional activity, though the increased drawdown indicates these breakouts might be subject to higher 'fake-out' risks or higher volatility.",
        "decision": true,
        "reason": "The current results show higher returns but also higher risk (drawdown). By refining the 'Volume' component to look for 'Volume Volatility Compression' (the 'quiet before the storm') and ensuring the breakout occurs on a significant volume spike relative to the compression period, we can likely filter out low-conviction noise and improve the Information Ratio and Max Drawdown."
      }
    },
    "8e8b8ce62850fa9c": {
      "factor_id": "8e8b8ce62850fa9c",
      "factor_name": "Volume_Range_Efficiency_Rank_10D",
      "factor_expression": "RANK($volume / (TS_MEAN($volume, 10) + 1e-8)) * RANK(TS_STD($return, 10) / (($high - $low) / ($close + 1e-8) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK($volume / (TS_MEAN($volume, 10) + 1e-8)) * RANK(TS_STD(TS_PCTCHANGE($close, 1), 10) / (($high - $low) / ($close + 1e-8) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Volume_Range_Efficiency_Rank_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor captures the 'coiling' effect by identifying days where volume is high but the price range is narrow relative to historical volatility. It ranks the efficiency of volume in moving the price range. A high rank indicates that the stock is experiencing high-volume consolidation, often a precursor to a trend breakout.",
      "factor_formulation": "\\text{VRE}_{10D} = \\text{RANK}\\left(\\frac{\\$volume}{\\text{TS\\_MEAN}(\\$volume, 10)}\\right) * \\text{RANK}\\left(\\frac{\\text{TS\\_STD}(\\$return, 10)}{(\\$high - \\$low)/\\$close}\\right)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 5,
        "evolution_phase": "mutation",
        "trajectory_id": "6eec8f66c883",
        "parent_trajectory_ids": [
          "dc35ed2e2f1b"
        ],
        "hypothesis": "Hypothesis: The 'Intraday Compression-Breakout' factor, defined as the ratio of late-session volume intensity to the day's price range normalized by 20-day volatility, predicts that price breakouts following periods of intraday compression are driven by institutional conviction and lead to multi-day trend persistence.\n                Concise Observation: While the parent strategy focused on overnight gap reversals and liquidity exhaustion, market data suggests that low intraday volatility (tight high-low range) often precedes explosive moves when accompanied by significant late-day volume participation.\n                Concise Justification: Intraday price compression represents a state of equilibrium or 'coiling'; a surge in volume during the final session indicates institutional repositioning that overcomes this equilibrium, signaling a high-conviction breakout that typically carries over into subsequent days.\n                Concise Knowledge: If a stock's intraday range is narrow relative to its historical volatility (compression) while volume concentrates in the final trading hour (late-session imbalance), then the resulting price direction is more likely to persist as a structural trend rather than a mean-reverting noise.\n                concise Specification: The factor is calculated as (Last Hour Volume / Total Daily Volume) divided by ((High - Low) / Close / ATR_20D). High values indicate high-conviction breakouts from tight ranges, while low values indicate aimless volatility or low-conviction trading.\n                ",
        "initial_direction": "Evaluate 'Intraday-to-Interday Volatility Shift' by comparing KLEN to STD5: when intraday ranges exceed 5-day realized volatility, it signals a regime shift in market participants' urgency.",
        "planning_direction": "Evaluate 'Intraday-to-Interday Volatility Shift' by comparing KLEN to STD5: when intraday ranges exceed 5-day realized volatility, it signals a regime shift in market participants' urgency.",
        "created_at": "2026-01-21T06:01:44.336577"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0969020149008347,
        "ICIR": 0.0511100672463702,
        "1day.excess_return_without_cost.std": 0.0043168528602969,
        "1day.excess_return_with_cost.annualized_return": 0.0103233561138843,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002405021454377,
        "1day.excess_return_without_cost.annualized_return": 0.0572395106141823,
        "1day.excess_return_with_cost.std": 0.0043175284180423,
        "Rank IC": 0.0229860436999911,
        "IC": 0.0069767094157484,
        "1day.excess_return_without_cost.max_drawdown": -0.0889608553406053,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.859488732072847,
        "1day.pa": 0.0,
        "l2.valid": 0.9963866572458152,
        "Rank ICIR": 0.169727915651973,
        "l2.train": 0.9933586199061692,
        "1day.excess_return_with_cost.information_ratio": 0.1549876972346362,
        "1day.excess_return_with_cost.mean": 4.337544585665691e-05
      },
      "feedback": {
        "observations": "The current iteration focused on the 'Intraday Compression-Breakout' hypothesis by testing three distinct implementations: a direct ratio of return to normalized range (ICB_20D), a volume-efficiency rank (VRE_10D), and a sign-based relative compression measure (RCS_15D). The combined result shows a significant improvement in Information Coefficient (IC) from 0.0058 to 0.0070 and an increase in Annualized Return from 0.052 to 0.057. However, the Information Ratio (IR) decreased slightly, and the Max Drawdown worsened, suggesting that while the signal strength (IC) is higher, the volatility of the excess returns has also increased.",
        "hypothesis_evaluation": "The hypothesis that price breakouts following compression lead to trend persistence is supported by the improved IC and Annualized Return. Specifically, the 'RCS_15D' and 'ICB_20D' formulations likely contributed to capturing the directional conviction. The 'VRE_10D' factor's use of volume rank suggests that adding a liquidity/intensity dimension helps filter for institutional activity, though the increased drawdown indicates these breakouts might be subject to higher 'fake-out' risks or higher volatility.",
        "decision": true,
        "reason": "The current results show higher returns but also higher risk (drawdown). By refining the 'Volume' component to look for 'Volume Volatility Compression' (the 'quiet before the storm') and ensuring the breakout occurs on a significant volume spike relative to the compression period, we can likely filter out low-conviction noise and improve the Information Ratio and Max Drawdown."
      }
    },
    "9b38466a17c63e06": {
      "factor_id": "9b38466a17c63e06",
      "factor_name": "Relative_Compression_Strength_15D",
      "factor_expression": "SIGN($return) * (1 - TS_RANK(($high - $low) / ($close + 1e-8), 15))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"SIGN(TS_PCTCHANGE($close, 1)) * (1 - TS_RANK(($high - $low) / ($close + 1e-8), 15))\" # Your output factor expression will be filled in here\n    name = \"Relative_Compression_Strength_15D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "Measures the current intraday range relative to its 15-day historical distribution. A low value indicates extreme price compression. When combined with a directional return, it signals the start of a trend from a state of equilibrium.",
      "factor_formulation": "\\text{RCS}_{15D} = \\text{SIGN}(\\$return) * (1 - \\text{TS\\_RANK}((\\text{high} - \\text{low})/\\text{close}, 15))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 5,
        "evolution_phase": "mutation",
        "trajectory_id": "6eec8f66c883",
        "parent_trajectory_ids": [
          "dc35ed2e2f1b"
        ],
        "hypothesis": "Hypothesis: The 'Intraday Compression-Breakout' factor, defined as the ratio of late-session volume intensity to the day's price range normalized by 20-day volatility, predicts that price breakouts following periods of intraday compression are driven by institutional conviction and lead to multi-day trend persistence.\n                Concise Observation: While the parent strategy focused on overnight gap reversals and liquidity exhaustion, market data suggests that low intraday volatility (tight high-low range) often precedes explosive moves when accompanied by significant late-day volume participation.\n                Concise Justification: Intraday price compression represents a state of equilibrium or 'coiling'; a surge in volume during the final session indicates institutional repositioning that overcomes this equilibrium, signaling a high-conviction breakout that typically carries over into subsequent days.\n                Concise Knowledge: If a stock's intraday range is narrow relative to its historical volatility (compression) while volume concentrates in the final trading hour (late-session imbalance), then the resulting price direction is more likely to persist as a structural trend rather than a mean-reverting noise.\n                concise Specification: The factor is calculated as (Last Hour Volume / Total Daily Volume) divided by ((High - Low) / Close / ATR_20D). High values indicate high-conviction breakouts from tight ranges, while low values indicate aimless volatility or low-conviction trading.\n                ",
        "initial_direction": "Evaluate 'Intraday-to-Interday Volatility Shift' by comparing KLEN to STD5: when intraday ranges exceed 5-day realized volatility, it signals a regime shift in market participants' urgency.",
        "planning_direction": "Evaluate 'Intraday-to-Interday Volatility Shift' by comparing KLEN to STD5: when intraday ranges exceed 5-day realized volatility, it signals a regime shift in market participants' urgency.",
        "created_at": "2026-01-21T06:01:44.336577"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0969020149008347,
        "ICIR": 0.0511100672463702,
        "1day.excess_return_without_cost.std": 0.0043168528602969,
        "1day.excess_return_with_cost.annualized_return": 0.0103233561138843,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002405021454377,
        "1day.excess_return_without_cost.annualized_return": 0.0572395106141823,
        "1day.excess_return_with_cost.std": 0.0043175284180423,
        "Rank IC": 0.0229860436999911,
        "IC": 0.0069767094157484,
        "1day.excess_return_without_cost.max_drawdown": -0.0889608553406053,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.859488732072847,
        "1day.pa": 0.0,
        "l2.valid": 0.9963866572458152,
        "Rank ICIR": 0.169727915651973,
        "l2.train": 0.9933586199061692,
        "1day.excess_return_with_cost.information_ratio": 0.1549876972346362,
        "1day.excess_return_with_cost.mean": 4.337544585665691e-05
      },
      "feedback": {
        "observations": "The current iteration focused on the 'Intraday Compression-Breakout' hypothesis by testing three distinct implementations: a direct ratio of return to normalized range (ICB_20D), a volume-efficiency rank (VRE_10D), and a sign-based relative compression measure (RCS_15D). The combined result shows a significant improvement in Information Coefficient (IC) from 0.0058 to 0.0070 and an increase in Annualized Return from 0.052 to 0.057. However, the Information Ratio (IR) decreased slightly, and the Max Drawdown worsened, suggesting that while the signal strength (IC) is higher, the volatility of the excess returns has also increased.",
        "hypothesis_evaluation": "The hypothesis that price breakouts following compression lead to trend persistence is supported by the improved IC and Annualized Return. Specifically, the 'RCS_15D' and 'ICB_20D' formulations likely contributed to capturing the directional conviction. The 'VRE_10D' factor's use of volume rank suggests that adding a liquidity/intensity dimension helps filter for institutional activity, though the increased drawdown indicates these breakouts might be subject to higher 'fake-out' risks or higher volatility.",
        "decision": true,
        "reason": "The current results show higher returns but also higher risk (drawdown). By refining the 'Volume' component to look for 'Volume Volatility Compression' (the 'quiet before the storm') and ensuring the breakout occurs on a significant volume spike relative to the compression period, we can likely filter out low-conviction noise and improve the Information Ratio and Max Drawdown."
      }
    },
    "314d882053c7ab3b": {
      "factor_id": "314d882053c7ab3b",
      "factor_name": "Trend_Exhaustion_Divergence_20D",
      "factor_expression": "(1 - TS_CORR($close, $volume, 20)) * (POW(REGBETA($close, SEQUENCE(10), 10), 2) * TS_VAR(SEQUENCE(10), 10) / (TS_VAR($close, 10) + 1e-8))",
      "factor_implementation_code": "",
      "factor_description": "This factor identifies potential trend exhaustion by multiplying price linearity (R-squared of price vs. time) with the lack of price-volume synchronization. A high value suggests a strong price trend that is no longer supported by volume, signaling a potential mean-reversion.",
      "factor_formulation": "RSQR10 = \\frac{REGBETA(close, SEQUENCE(10), 10)^2 \\times TS\\_VAR(SEQUENCE(10), 10)}{TS\\_VAR(close, 10)}, \\\\ Factor = (1 - TS\\_CORR(close, volume, 20)) \\times RSQR10",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 0,
        "evolution_phase": "original",
        "trajectory_id": "b100bbf3cd8d",
        "parent_trajectory_ids": [],
        "hypothesis": "Hypothesis: The interaction between the 20-day price-volume correlation (CORR20) and the 10-day price trend linearity (RSQR10) identifies trend exhaustion: specifically, when a highly linear price trend (high RSQR10) is accompanied by a breakdown in price-volume synchronization (low CORR20), the asset is likely to experience a mean-reverting return.\n                Concise Observation: In daily price-volume data, strong trends often show high R-squared values relative to time, but the most sustainable moves typically maintain a consistent correlation with volume; divergence between these two often appears at local price peaks or troughs.\n                Concise Justification: Volume serves as the 'fuel' for price trends; a high R-squared indicates a persistent directional move, but if the correlation with volume drops, it suggests that the price is moving on thinning liquidity or lack of conviction, signaling a potential 'blow-off top' or 'exhaustion gap'.\n                Concise Knowledge: If a price trend exhibits high statistical linearity but loses its correlation with trading volume, the trend's structural strength is weakening; when these two metrics diverge, the probability of a price reversal increases as the move is no longer supported by broad market participation.\n                concise Specification: Define the factor as the product of (1 - CORR(close, volume, 20)) and RSQR(close, 10), where RSQR is the coefficient of determination of close price against a time index, expected to negatively predict returns over the subsequent 5-day horizon.\n                ",
        "initial_direction": "Assess 'Volume-Price Divergence' by interacting CORR20 with RSQR10: a high R-squared trend that loses its correlation with volume often precedes a trend reversal or consolidation.",
        "planning_direction": "Assess 'Volume-Price Divergence' by interacting CORR20 with RSQR10: a high R-squared trend that loses its correlation with volume often precedes a trend reversal or consolidation.",
        "created_at": "2026-01-20T22:16:16.565911"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.2156576192923504,
        "ICIR": 0.0493727867878478,
        "1day.excess_return_without_cost.std": 0.0047532393251851,
        "1day.excess_return_with_cost.annualized_return": -0.008842355672347,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001643956712425,
        "1day.excess_return_without_cost.annualized_return": 0.0391261697557351,
        "1day.excess_return_with_cost.std": 0.0047538275949012,
        "Rank IC": 0.0229610774285775,
        "IC": 0.0073300758738927,
        "1day.excess_return_without_cost.max_drawdown": -0.1657612411577176,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.5335672620063892,
        "1day.pa": 0.0,
        "l2.valid": 0.9967935904302332,
        "Rank ICIR": 0.1553216019531143,
        "l2.train": 0.9942025786074422,
        "1day.excess_return_with_cost.information_ratio": -0.1205691152522126,
        "1day.excess_return_with_cost.mean": -3.715275492582812e-05
      },
      "feedback": {
        "observations": "The experiment tested two implementations of the trend exhaustion hypothesis: 'Linear_Trend_Volume_Decoupling_Z' and 'Volume_Supported_Trend_Efficiency'. The current results show a significant improvement in the Information Coefficient (IC) (0.0073 vs 0.0058), suggesting that the interaction between price linearity and volume decoupling has stronger predictive power for cross-sectional returns than previous iterations. However, the risk-adjusted metrics (Information Ratio) and drawdown (Max Drawdown) have deteriorated significantly compared to the SOTA, indicating that while the signal is more accurate on average, it may be more volatile or prone to extreme errors in specific market regimes.",
        "hypothesis_evaluation": "The hypothesis that the interaction between high price linearity (RSQR10) and low price-volume synchronization (CORR20) identifies mean-reversion is partially supported by the increased IC. The 'Linear_Trend_Volume_Decoupling_Z' approach, which uses Z-scores to isolate the divergence, appears to capture the signal better than simple ratios. However, the poor annualized return and high drawdown suggest that the 'exhaustion' signal might be premature or that the 1-day holding period is too short to capture the full mean-reversion effect.",
        "decision": false,
        "reason": "The current factors focus on the shape of the trend (linearity) and its support (volume), but ignore the magnitude of the move. A highly linear trend with low volume support might not reverse if the total price move is small. By incorporating a volatility-normalized range (e.g., (High-Low)/StdDev), we can identify 'stretched' trends where exhaustion is more likely to lead to a profitable mean-reversion. Additionally, simplifying the expression by using a direct subtraction of ranks or Z-scores (as seen in the current iteration) is preferred over complex ratios to maintain complexity control."
      }
    },
    "9f68be1d0cebfad6": {
      "factor_id": "9f68be1d0cebfad6",
      "factor_name": "Linear_Trend_Volume_Decoupling_Z",
      "factor_expression": "ZSCORE(POW(REGBETA($close, SEQUENCE(10), 10), 2) / (TS_VAR($close, 10) + 1e-8)) - ZSCORE(TS_CORR($close, $volume, 20))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"ZSCORE(POW(REGBETA($close, SEQUENCE(10), 10), 2) / (TS_VAR($close, 10) + 1e-8)) - ZSCORE(TS_CORR($close, $volume, 20))\" # Your output factor expression will be filled in here\n    name = \"Linear_Trend_Volume_Decoupling_Z\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor captures the divergence between price trend linearity and volume support using Z-scored components. It specifically looks for instances where the 10-day price trend is exceptionally linear but the 20-day price-volume correlation is declining, normalized cross-sectionally.",
      "factor_formulation": "Linearity = \\frac{REGBETA(close, SEQUENCE(10), 10)^2}{TS\\_VAR(close, 10)}, \\\\ Factor = ZSCORE(Linearity) - ZSCORE(TS\\_CORR(close, volume, 20))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 0,
        "evolution_phase": "original",
        "trajectory_id": "b100bbf3cd8d",
        "parent_trajectory_ids": [],
        "hypothesis": "Hypothesis: The interaction between the 20-day price-volume correlation (CORR20) and the 10-day price trend linearity (RSQR10) identifies trend exhaustion: specifically, when a highly linear price trend (high RSQR10) is accompanied by a breakdown in price-volume synchronization (low CORR20), the asset is likely to experience a mean-reverting return.\n                Concise Observation: In daily price-volume data, strong trends often show high R-squared values relative to time, but the most sustainable moves typically maintain a consistent correlation with volume; divergence between these two often appears at local price peaks or troughs.\n                Concise Justification: Volume serves as the 'fuel' for price trends; a high R-squared indicates a persistent directional move, but if the correlation with volume drops, it suggests that the price is moving on thinning liquidity or lack of conviction, signaling a potential 'blow-off top' or 'exhaustion gap'.\n                Concise Knowledge: If a price trend exhibits high statistical linearity but loses its correlation with trading volume, the trend's structural strength is weakening; when these two metrics diverge, the probability of a price reversal increases as the move is no longer supported by broad market participation.\n                concise Specification: Define the factor as the product of (1 - CORR(close, volume, 20)) and RSQR(close, 10), where RSQR is the coefficient of determination of close price against a time index, expected to negatively predict returns over the subsequent 5-day horizon.\n                ",
        "initial_direction": "Assess 'Volume-Price Divergence' by interacting CORR20 with RSQR10: a high R-squared trend that loses its correlation with volume often precedes a trend reversal or consolidation.",
        "planning_direction": "Assess 'Volume-Price Divergence' by interacting CORR20 with RSQR10: a high R-squared trend that loses its correlation with volume often precedes a trend reversal or consolidation.",
        "created_at": "2026-01-20T22:16:16.565911"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.2156576192923504,
        "ICIR": 0.0493727867878478,
        "1day.excess_return_without_cost.std": 0.0047532393251851,
        "1day.excess_return_with_cost.annualized_return": -0.008842355672347,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001643956712425,
        "1day.excess_return_without_cost.annualized_return": 0.0391261697557351,
        "1day.excess_return_with_cost.std": 0.0047538275949012,
        "Rank IC": 0.0229610774285775,
        "IC": 0.0073300758738927,
        "1day.excess_return_without_cost.max_drawdown": -0.1657612411577176,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.5335672620063892,
        "1day.pa": 0.0,
        "l2.valid": 0.9967935904302332,
        "Rank ICIR": 0.1553216019531143,
        "l2.train": 0.9942025786074422,
        "1day.excess_return_with_cost.information_ratio": -0.1205691152522126,
        "1day.excess_return_with_cost.mean": -3.715275492582812e-05
      },
      "feedback": {
        "observations": "The experiment tested two implementations of the trend exhaustion hypothesis: 'Linear_Trend_Volume_Decoupling_Z' and 'Volume_Supported_Trend_Efficiency'. The current results show a significant improvement in the Information Coefficient (IC) (0.0073 vs 0.0058), suggesting that the interaction between price linearity and volume decoupling has stronger predictive power for cross-sectional returns than previous iterations. However, the risk-adjusted metrics (Information Ratio) and drawdown (Max Drawdown) have deteriorated significantly compared to the SOTA, indicating that while the signal is more accurate on average, it may be more volatile or prone to extreme errors in specific market regimes.",
        "hypothesis_evaluation": "The hypothesis that the interaction between high price linearity (RSQR10) and low price-volume synchronization (CORR20) identifies mean-reversion is partially supported by the increased IC. The 'Linear_Trend_Volume_Decoupling_Z' approach, which uses Z-scores to isolate the divergence, appears to capture the signal better than simple ratios. However, the poor annualized return and high drawdown suggest that the 'exhaustion' signal might be premature or that the 1-day holding period is too short to capture the full mean-reversion effect.",
        "decision": false,
        "reason": "The current factors focus on the shape of the trend (linearity) and its support (volume), but ignore the magnitude of the move. A highly linear trend with low volume support might not reverse if the total price move is small. By incorporating a volatility-normalized range (e.g., (High-Low)/StdDev), we can identify 'stretched' trends where exhaustion is more likely to lead to a profitable mean-reversion. Additionally, simplifying the expression by using a direct subtraction of ranks or Z-scores (as seen in the current iteration) is preferred over complex ratios to maintain complexity control."
      }
    },
    "30f54cd75db05a27": {
      "factor_id": "30f54cd75db05a27",
      "factor_name": "Volume_Supported_Trend_Efficiency",
      "factor_expression": "ABS(REGBETA($close, SEQUENCE(10), 10)) / (TS_CORR($close, $volume, 20) + 1.1)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"ABS(REGBETA($close, SEQUENCE(10), 10)) / (TS_CORR($close, $volume, 20) + 1.1)\" # Your output factor expression will be filled in here\n    name = \"Volume_Supported_Trend_Efficiency\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A simplified measure of trend sustainability. It calculates the ratio of price linearity to price-volume correlation. High values indicate 'inefficient' trends where price moves linearly without corresponding volume confirmation, often preceding a reversal.",
      "factor_formulation": "Factor = \\frac{ABS(REGBETA(close, SEQUENCE(10), 10))}{TS\\_CORR(close, volume, 20) + 1.1}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 0,
        "evolution_phase": "original",
        "trajectory_id": "b100bbf3cd8d",
        "parent_trajectory_ids": [],
        "hypothesis": "Hypothesis: The interaction between the 20-day price-volume correlation (CORR20) and the 10-day price trend linearity (RSQR10) identifies trend exhaustion: specifically, when a highly linear price trend (high RSQR10) is accompanied by a breakdown in price-volume synchronization (low CORR20), the asset is likely to experience a mean-reverting return.\n                Concise Observation: In daily price-volume data, strong trends often show high R-squared values relative to time, but the most sustainable moves typically maintain a consistent correlation with volume; divergence between these two often appears at local price peaks or troughs.\n                Concise Justification: Volume serves as the 'fuel' for price trends; a high R-squared indicates a persistent directional move, but if the correlation with volume drops, it suggests that the price is moving on thinning liquidity or lack of conviction, signaling a potential 'blow-off top' or 'exhaustion gap'.\n                Concise Knowledge: If a price trend exhibits high statistical linearity but loses its correlation with trading volume, the trend's structural strength is weakening; when these two metrics diverge, the probability of a price reversal increases as the move is no longer supported by broad market participation.\n                concise Specification: Define the factor as the product of (1 - CORR(close, volume, 20)) and RSQR(close, 10), where RSQR is the coefficient of determination of close price against a time index, expected to negatively predict returns over the subsequent 5-day horizon.\n                ",
        "initial_direction": "Assess 'Volume-Price Divergence' by interacting CORR20 with RSQR10: a high R-squared trend that loses its correlation with volume often precedes a trend reversal or consolidation.",
        "planning_direction": "Assess 'Volume-Price Divergence' by interacting CORR20 with RSQR10: a high R-squared trend that loses its correlation with volume often precedes a trend reversal or consolidation.",
        "created_at": "2026-01-20T22:16:16.565911"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.2156576192923504,
        "ICIR": 0.0493727867878478,
        "1day.excess_return_without_cost.std": 0.0047532393251851,
        "1day.excess_return_with_cost.annualized_return": -0.008842355672347,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001643956712425,
        "1day.excess_return_without_cost.annualized_return": 0.0391261697557351,
        "1day.excess_return_with_cost.std": 0.0047538275949012,
        "Rank IC": 0.0229610774285775,
        "IC": 0.0073300758738927,
        "1day.excess_return_without_cost.max_drawdown": -0.1657612411577176,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.5335672620063892,
        "1day.pa": 0.0,
        "l2.valid": 0.9967935904302332,
        "Rank ICIR": 0.1553216019531143,
        "l2.train": 0.9942025786074422,
        "1day.excess_return_with_cost.information_ratio": -0.1205691152522126,
        "1day.excess_return_with_cost.mean": -3.715275492582812e-05
      },
      "feedback": {
        "observations": "The experiment tested two implementations of the trend exhaustion hypothesis: 'Linear_Trend_Volume_Decoupling_Z' and 'Volume_Supported_Trend_Efficiency'. The current results show a significant improvement in the Information Coefficient (IC) (0.0073 vs 0.0058), suggesting that the interaction between price linearity and volume decoupling has stronger predictive power for cross-sectional returns than previous iterations. However, the risk-adjusted metrics (Information Ratio) and drawdown (Max Drawdown) have deteriorated significantly compared to the SOTA, indicating that while the signal is more accurate on average, it may be more volatile or prone to extreme errors in specific market regimes.",
        "hypothesis_evaluation": "The hypothesis that the interaction between high price linearity (RSQR10) and low price-volume synchronization (CORR20) identifies mean-reversion is partially supported by the increased IC. The 'Linear_Trend_Volume_Decoupling_Z' approach, which uses Z-scores to isolate the divergence, appears to capture the signal better than simple ratios. However, the poor annualized return and high drawdown suggest that the 'exhaustion' signal might be premature or that the 1-day holding period is too short to capture the full mean-reversion effect.",
        "decision": false,
        "reason": "The current factors focus on the shape of the trend (linearity) and its support (volume), but ignore the magnitude of the move. A highly linear trend with low volume support might not reverse if the total price move is small. By incorporating a volatility-normalized range (e.g., (High-Low)/StdDev), we can identify 'stretched' trends where exhaustion is more likely to lead to a profitable mean-reversion. Additionally, simplifying the expression by using a direct subtraction of ranks or Z-scores (as seen in the current iteration) is preferred over complex ratios to maintain complexity control."
      }
    },
    "70e8a4524ea98152": {
      "factor_id": "70e8a4524ea98152",
      "factor_name": "ICCG_Compression_Gap_Synergy",
      "factor_expression": "TS_MEAN((($open - DELAY($close, 1)) / (DELAY($close, 1) + 1e-8)) * TS_CORR($close, SEQUENCE(10), 10), 5) * (TS_STD($return, 20) / (TS_MAX($high, 5) - TS_MIN($low, 5) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_MEAN((($open / DELAY($close, 1) - 1) * TS_CORR($close, SEQUENCE(10), 10)), 5) * (TS_STD(TS_PCTCHANGE($close, 1), 20) / (TS_MAX($high, 5) - TS_MIN($low, 5) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"ICCG_Compression_Gap_Synergy\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies institutional conviction by detecting overnight gaps that occur after a period of low-volatility compression. It combines the gap magnitude, the price linearity (measured by correlation with time), and a compression ratio (volatility vs. range) to highlight high-quality trend initiations.",
      "factor_formulation": "ICCG = \\text{TS_MEAN}\\left(\\frac{open - \\text{DELAY}(close, 1)}{\\text{DELAY}(close, 1)} \\times \\text{TS_CORR}(close, \\text{SEQUENCE}(10), 10), 5\\right) \\times \\frac{\\text{TS_STD}(return, 20) + 1e-8}{\\text{TS_MAX}(high, 5) - \\text{TS_MIN}(low, 5) + 1e-8}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 6,
        "evolution_phase": "crossover",
        "trajectory_id": "656b66d5e22e",
        "parent_trajectory_ids": [
          "96deba3b9e1b",
          "b0fce848934c"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Conviction Compression-Gap' (ICCG) factor predicts that the highest quality returns follow overnight gaps that emerge from a 15-day low-volatility compression state, where the gap's institutional conviction is validated by a high synergy between the overnight jump and the 10-day price linearity.\n                Concise Observation: Parent 1 (RankIC=0.0230) showed that intraday compression precedes significant breakouts, while Parent 2 (RankIC=0.0230) demonstrated that overnight gaps coupled with trend linearity (synergy) are strong predictors of institutional flow.\n                Concise Justification: Combining compression with gap-trend synergy filters out 'exhaustion gaps' (which occur at high volatility) and 'speculative noise' (which lacks trend linearity), focusing instead on 'coiled' assets where institutional conviction triggers a low-resistance trend initiation.\n                Concise Knowledge: If a price breakout via an overnight gap occurs after a period of range compression (low volatility), it is more likely to represent a structural shift in institutional positioning rather than noise; when this gap is aligned with a linear price trend, the momentum is more sustainable.\n                concise Specification: Define ICCG as the product of (1) the 5-day average of (Overnight Gap * 10-day Price Linearity) and (2) a Compression Factor (20-day Volatility / 5-day Range), penalized by a 10-day volume-price convexity measure to avoid late-stage exhaustion.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T06:31:15.041808"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0885796932006375,
        "ICIR": 0.0443091035388941,
        "1day.excess_return_without_cost.std": 0.0039561987896372,
        "1day.excess_return_with_cost.annualized_return": 0.0277769125145813,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.000314912519629,
        "1day.excess_return_without_cost.annualized_return": 0.0749491796717027,
        "1day.excess_return_with_cost.std": 0.0039569221555321,
        "Rank IC": 0.0229274407857934,
        "IC": 0.0058246351507859,
        "1day.excess_return_without_cost.max_drawdown": -0.0786960514076617,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.228005464933501,
        "1day.pa": 0.0,
        "l2.valid": 0.9964054979421716,
        "Rank ICIR": 0.1799234462340459,
        "l2.train": 0.9933104059120548,
        "1day.excess_return_with_cost.information_ratio": 0.4550278578405051,
        "1day.excess_return_with_cost.mean": 0.0001167097164478
      },
      "feedback": {
        "observations": "The experiment successfully validated the 'Institutional Conviction Compression-Gap' (ICCG) framework. The current iteration significantly outperformed the previous SOTA in three out of four key metrics: Information Ratio (1.228 vs 0.972), Annualized Return (0.0749 vs 0.0520), and IC (0.005825 vs 0.005798). While the Max Drawdown slightly increased (-0.078 vs -0.072), the substantial gain in risk-adjusted return (IR) suggests a much stronger predictive signal. The 'Institutional_Coil_Breakout_Factor' and 'Gap_Linearity_Convexity_Filter' appear to have effectively isolated the structural shifts hypothesized, though the complexity of the ICCG_Compression_Gap_Synergy factor (using 5 base features and multiple nested TS functions) warrants monitoring.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that overnight gaps emerging from compression states, when validated by price linearity, predict high-quality returns. Specifically, the synergy between the gap magnitude and the 10-day price linearity (TS_CORR) proves to be a robust filter for institutional conviction. The inclusion of volume-price convexity (GLCF) also suggests that penalizing 'heavy' volume moves helps in avoiding late-stage trend exhaustion.",
        "decision": true,
        "reason": "While the current results are strong, the ICCG_Compression_Gap_Synergy factor is becoming complex. By focusing on 'Relative Volatility Tightness' (e.g., ATR(5)/ATR(20)), we can capture the 'coil' effect more cleanly with fewer parameters. Additionally, institutional conviction is often most visible in the volume transacted at the open; therefore, scaling the gap by the opening volume rank should filter out low-liquidity noise gaps that currently might be diluting the signal."
      }
    },
    "b363196b7e9d51e3": {
      "factor_id": "b363196b7e9d51e3",
      "factor_name": "Institutional_Coil_Breakout_Factor",
      "factor_expression": "RANK(($open - DELAY($close, 1)) / (TS_STD($return, 15) + 1e-8)) * RANK(TS_CORR($close, SEQUENCE(10), 10))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(($open - DELAY($close, 1)) / (TS_STD($close / DELAY($close, 1) - 1, 15) + 1e-8)) * RANK(TS_CORR($close, SEQUENCE(10), 10))\" # Your output factor expression will be filled in here\n    name = \"Institutional_Coil_Breakout_Factor\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A simplified version of the ICCG hypothesis focusing on the 'coiled' state. It measures the ratio of the overnight gap to the recent 15-day volatility, scaled by the 10-day price trend linearity to filter for structural shifts rather than noise.",
      "factor_formulation": "ICBF = \\text{RANK}\\left(\\frac{open - \\text{DELAY}(close, 1)}{\\text{TS_STD}(return, 15) + 1e-8}\\right) \\times \\text{RANK}(\\text{TS_CORR}(close, \\text{SEQUENCE}(10), 10))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 6,
        "evolution_phase": "crossover",
        "trajectory_id": "656b66d5e22e",
        "parent_trajectory_ids": [
          "96deba3b9e1b",
          "b0fce848934c"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Conviction Compression-Gap' (ICCG) factor predicts that the highest quality returns follow overnight gaps that emerge from a 15-day low-volatility compression state, where the gap's institutional conviction is validated by a high synergy between the overnight jump and the 10-day price linearity.\n                Concise Observation: Parent 1 (RankIC=0.0230) showed that intraday compression precedes significant breakouts, while Parent 2 (RankIC=0.0230) demonstrated that overnight gaps coupled with trend linearity (synergy) are strong predictors of institutional flow.\n                Concise Justification: Combining compression with gap-trend synergy filters out 'exhaustion gaps' (which occur at high volatility) and 'speculative noise' (which lacks trend linearity), focusing instead on 'coiled' assets where institutional conviction triggers a low-resistance trend initiation.\n                Concise Knowledge: If a price breakout via an overnight gap occurs after a period of range compression (low volatility), it is more likely to represent a structural shift in institutional positioning rather than noise; when this gap is aligned with a linear price trend, the momentum is more sustainable.\n                concise Specification: Define ICCG as the product of (1) the 5-day average of (Overnight Gap * 10-day Price Linearity) and (2) a Compression Factor (20-day Volatility / 5-day Range), penalized by a 10-day volume-price convexity measure to avoid late-stage exhaustion.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T06:31:15.041808"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0885796932006375,
        "ICIR": 0.0443091035388941,
        "1day.excess_return_without_cost.std": 0.0039561987896372,
        "1day.excess_return_with_cost.annualized_return": 0.0277769125145813,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.000314912519629,
        "1day.excess_return_without_cost.annualized_return": 0.0749491796717027,
        "1day.excess_return_with_cost.std": 0.0039569221555321,
        "Rank IC": 0.0229274407857934,
        "IC": 0.0058246351507859,
        "1day.excess_return_without_cost.max_drawdown": -0.0786960514076617,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.228005464933501,
        "1day.pa": 0.0,
        "l2.valid": 0.9964054979421716,
        "Rank ICIR": 0.1799234462340459,
        "l2.train": 0.9933104059120548,
        "1day.excess_return_with_cost.information_ratio": 0.4550278578405051,
        "1day.excess_return_with_cost.mean": 0.0001167097164478
      },
      "feedback": {
        "observations": "The experiment successfully validated the 'Institutional Conviction Compression-Gap' (ICCG) framework. The current iteration significantly outperformed the previous SOTA in three out of four key metrics: Information Ratio (1.228 vs 0.972), Annualized Return (0.0749 vs 0.0520), and IC (0.005825 vs 0.005798). While the Max Drawdown slightly increased (-0.078 vs -0.072), the substantial gain in risk-adjusted return (IR) suggests a much stronger predictive signal. The 'Institutional_Coil_Breakout_Factor' and 'Gap_Linearity_Convexity_Filter' appear to have effectively isolated the structural shifts hypothesized, though the complexity of the ICCG_Compression_Gap_Synergy factor (using 5 base features and multiple nested TS functions) warrants monitoring.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that overnight gaps emerging from compression states, when validated by price linearity, predict high-quality returns. Specifically, the synergy between the gap magnitude and the 10-day price linearity (TS_CORR) proves to be a robust filter for institutional conviction. The inclusion of volume-price convexity (GLCF) also suggests that penalizing 'heavy' volume moves helps in avoiding late-stage trend exhaustion.",
        "decision": true,
        "reason": "While the current results are strong, the ICCG_Compression_Gap_Synergy factor is becoming complex. By focusing on 'Relative Volatility Tightness' (e.g., ATR(5)/ATR(20)), we can capture the 'coil' effect more cleanly with fewer parameters. Additionally, institutional conviction is often most visible in the volume transacted at the open; therefore, scaling the gap by the opening volume rank should filter out low-liquidity noise gaps that currently might be diluting the signal."
      }
    },
    "3548a08d29141808": {
      "factor_id": "3548a08d29141808",
      "factor_name": "Gap_Linearity_Convexity_Filter",
      "factor_expression": "(($open / DELAY($close, 1) - 1) * TS_CORR($close, SEQUENCE(10), 10)) / (ABS(REGBETA($volume, $close, 10)) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(($open / DELAY($close, 1) - 1) * TS_CORR($close, SEQUENCE(10), 10)) / (ABS(REGBETA($volume, $close, 10)) + 1e-8)\" # Your output factor expression will be filled in here\n    name = \"Gap_Linearity_Convexity_Filter\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor targets the synergy between overnight gaps and price linearity while penalizing volume-price convexity to avoid late-stage exhaustion. It uses the regression of volume on price to identify if the current move is becoming 'heavy' (high volume without price progress).",
      "factor_formulation": "GLCF = \\frac{(open / \\text{DELAY}(close, 1) - 1) \\times \\text{TS_CORR}(close, \\text{SEQUENCE}(10), 10)}{\\text{ABS}(\\text{REGBETA}(volume, close, 10)) + 1e-8}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 6,
        "evolution_phase": "crossover",
        "trajectory_id": "656b66d5e22e",
        "parent_trajectory_ids": [
          "96deba3b9e1b",
          "b0fce848934c"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Conviction Compression-Gap' (ICCG) factor predicts that the highest quality returns follow overnight gaps that emerge from a 15-day low-volatility compression state, where the gap's institutional conviction is validated by a high synergy between the overnight jump and the 10-day price linearity.\n                Concise Observation: Parent 1 (RankIC=0.0230) showed that intraday compression precedes significant breakouts, while Parent 2 (RankIC=0.0230) demonstrated that overnight gaps coupled with trend linearity (synergy) are strong predictors of institutional flow.\n                Concise Justification: Combining compression with gap-trend synergy filters out 'exhaustion gaps' (which occur at high volatility) and 'speculative noise' (which lacks trend linearity), focusing instead on 'coiled' assets where institutional conviction triggers a low-resistance trend initiation.\n                Concise Knowledge: If a price breakout via an overnight gap occurs after a period of range compression (low volatility), it is more likely to represent a structural shift in institutional positioning rather than noise; when this gap is aligned with a linear price trend, the momentum is more sustainable.\n                concise Specification: Define ICCG as the product of (1) the 5-day average of (Overnight Gap * 10-day Price Linearity) and (2) a Compression Factor (20-day Volatility / 5-day Range), penalized by a 10-day volume-price convexity measure to avoid late-stage exhaustion.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T06:31:15.041808"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0885796932006375,
        "ICIR": 0.0443091035388941,
        "1day.excess_return_without_cost.std": 0.0039561987896372,
        "1day.excess_return_with_cost.annualized_return": 0.0277769125145813,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.000314912519629,
        "1day.excess_return_without_cost.annualized_return": 0.0749491796717027,
        "1day.excess_return_with_cost.std": 0.0039569221555321,
        "Rank IC": 0.0229274407857934,
        "IC": 0.0058246351507859,
        "1day.excess_return_without_cost.max_drawdown": -0.0786960514076617,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.228005464933501,
        "1day.pa": 0.0,
        "l2.valid": 0.9964054979421716,
        "Rank ICIR": 0.1799234462340459,
        "l2.train": 0.9933104059120548,
        "1day.excess_return_with_cost.information_ratio": 0.4550278578405051,
        "1day.excess_return_with_cost.mean": 0.0001167097164478
      },
      "feedback": {
        "observations": "The experiment successfully validated the 'Institutional Conviction Compression-Gap' (ICCG) framework. The current iteration significantly outperformed the previous SOTA in three out of four key metrics: Information Ratio (1.228 vs 0.972), Annualized Return (0.0749 vs 0.0520), and IC (0.005825 vs 0.005798). While the Max Drawdown slightly increased (-0.078 vs -0.072), the substantial gain in risk-adjusted return (IR) suggests a much stronger predictive signal. The 'Institutional_Coil_Breakout_Factor' and 'Gap_Linearity_Convexity_Filter' appear to have effectively isolated the structural shifts hypothesized, though the complexity of the ICCG_Compression_Gap_Synergy factor (using 5 base features and multiple nested TS functions) warrants monitoring.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that overnight gaps emerging from compression states, when validated by price linearity, predict high-quality returns. Specifically, the synergy between the gap magnitude and the 10-day price linearity (TS_CORR) proves to be a robust filter for institutional conviction. The inclusion of volume-price convexity (GLCF) also suggests that penalizing 'heavy' volume moves helps in avoiding late-stage trend exhaustion.",
        "decision": true,
        "reason": "While the current results are strong, the ICCG_Compression_Gap_Synergy factor is becoming complex. By focusing on 'Relative Volatility Tightness' (e.g., ATR(5)/ATR(20)), we can capture the 'coil' effect more cleanly with fewer parameters. Additionally, institutional conviction is often most visible in the volume transacted at the open; therefore, scaling the gap by the opening volume rank should filter out low-liquidity noise gaps that currently might be diluting the signal."
      }
    },
    "da196f502510c5ff": {
      "factor_id": "da196f502510c5ff",
      "factor_name": "Stealth_Institutional_Accumulation_15D",
      "factor_expression": "(POW(TS_CORR($close, SEQUENCE(10), 10), 2) / (TS_STD($return, 5) + 1e-8)) * (TS_SUM(($return > 0 ? $volume * $return : 0), 15) / (TS_SUM($volume * ABS($return), 15) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(POW(TS_CORR($close, SEQUENCE(15), 15), 2) / (TS_STD($close / DELAY($close, 1) - 1, 15) + 1e-8)) * (TS_SUM((($close / DELAY($close, 1) - 1) > 0 ? $volume * ($close / DELAY($close, 1) - 1) : 0), 15) / (TS_SUM($volume * ABS($close / DELAY($close, 1) - 1), 15) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Stealth_Institutional_Accumulation_15D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies institutional accumulation by combining price trend linearity (R-squared) with volume-weighted upside intensity, normalized by short-term volatility. High linearity and volume-weighted upside indicate high-conviction buying, while low volatility ensures the trend is 'efficient' and not driven by noise.",
      "factor_formulation": "\\text{Factor} = \\frac{\\text{TS\\_CORR}(\\text{close}, \\text{SEQUENCE}(10), 10)^2}{\\text{TS\\_STD}(\\text{return}, 5) + 1e-8} \\times \\frac{\\text{TS\\_SUM}(\\text{volume} \\times (\\text{return} > 0 ? \\text{return} : 0), 15)}{\\text{TS\\_SUM}(\\text{volume} \\times \\text{ABS}(\\text{return}), 15) + 1e-8}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 2,
        "evolution_phase": "crossover",
        "trajectory_id": "a76cc6a74dee",
        "parent_trajectory_ids": [
          "432771960cc4",
          "0144c84c5654"
        ],
        "hypothesis": "Hypothesis: The 'Stealth Institutional Convergence' factor, calculated as the product of a 10-day price trend linearity (R-squared) and a 15-day volume-weighted upside intensity ratio, normalized by 5-day price volatility, positively predicts future returns by identifying high-conviction institutional accumulation.\n                Concise Observation: Parent 1 (RankIC 0.0248) suggests that linear price trends are reliable, while Parent 2 (RankIC 0.0236) indicates that volume-weighted upside bias captures liquidity absorption, but both suffer from false positives when used in isolation.\n                Concise Justification: By multiplying price linearity with volume-weighted upside intensity and dividing by volatility, we isolate 'efficient' accumulation where institutions move prices steadily with conviction, filtering out speculative volatility that lacks structural volume support.\n                Concise Knowledge: If a price trend exhibits high linearity and low volatility while being supported by asymmetric volume-weighted positive returns, it indicates institutional accumulation; conversely, high volume asymmetry with erratic price movement often reflects retail-driven noise or low-liquidity manipulation.\n                concise Specification: The factor is defined as [RSQR(close, 10) / Std(returns, 5)] * [Sum(volume * (returns > 0 ? returns : 0), 15) / Sum(volume * abs(returns), 15)], where RSQR measures the coefficient of determination of price against a time trend over 10 days.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T00:32:36.121847"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.099204283348859,
        "ICIR": 0.0492083409215249,
        "1day.excess_return_without_cost.std": 0.0040270458213739,
        "1day.excess_return_with_cost.annualized_return": 0.0456408573360667,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003890867888525,
        "1day.excess_return_without_cost.annualized_return": 0.0926026557468963,
        "1day.excess_return_with_cost.std": 0.0040277887286513,
        "Rank IC": 0.0228458259311759,
        "IC": 0.0066265005394101,
        "1day.excess_return_without_cost.max_drawdown": -0.0866459789358339,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.4905563266096065,
        "1day.pa": 0.0,
        "l2.valid": 0.9966126029926172,
        "Rank ICIR": 0.1733592309023739,
        "l2.train": 0.9943552323771646,
        "1day.excess_return_with_cost.information_ratio": 0.7345115562021487,
        "1day.excess_return_with_cost.mean": 0.0001917683081347
      },
      "feedback": {
        "observations": "The experiment results demonstrate a significant improvement over the SOTA result. The 'Linear_Upside_Efficiency_Factor' and 'Stealth_Institutional_Accumulation_15D' implementations have successfully captured alpha, with the Information Ratio (IR) increasing from 0.97 to 1.49 and the Annualized Return nearly doubling from 5.2% to 9.26%. The IC also showed a healthy improvement to 0.0066. However, the Max Drawdown slightly worsened (-0.086 vs -0.072), suggesting that while the signal is stronger, it may introduce specific period risks or higher volatility in the long-short portfolio.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that combining price trend linearity (R-squared) with volume-weighted upside intensity identifies high-conviction institutional movement. The use of RANK in the 'Linear_Upside_Efficiency_Factor' likely contributed to the robustness of the signal by neutralizing the scale differences between the linearity component and the volume-weighted component. The normalization by volatility effectively filters out 'noisy' price action, confirming that 'efficient' trends are more predictive of institutional accumulation.",
        "decision": true,
        "reason": "While the current linearity (R-squared) is effective, institutional accumulation is often better characterized by price and volume moving in tandem. Using price-volume correlation as a proxy for 'conviction' and switching to downside deviation (Sortino-style risk) instead of standard deviation (Sharpe-style risk) allows the factor to remain high during strong, low-noise rallies even if volatility is high, as long as that volatility is primarily on the upside. This should improve the Information Ratio and potentially reduce the Max Drawdown observed in the current iteration."
      }
    },
    "cb50e412f0da1733": {
      "factor_id": "cb50e412f0da1733",
      "factor_name": "Linear_Upside_Efficiency_Factor",
      "factor_expression": "RANK(TS_CORR($close, SEQUENCE(10), 10) / (TS_STD($return, 10) + 1e-8)) * RANK(TS_SUM($return * $volume, 10) / (TS_SUM(ABS($return) * $volume, 10) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(TS_CORR($close, SEQUENCE(10), 10) / (TS_STD(TS_PCTCHANGE($close, 1), 10) + 1e-8)) * RANK(TS_SUM(TS_PCTCHANGE($close, 1) * $volume, 10) / (TS_SUM(ABS(TS_PCTCHANGE($close, 1)) * $volume, 10) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Linear_Upside_Efficiency_Factor\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A simplified version of the institutional convergence hypothesis. It focuses on the ratio of price trend linearity to volatility, scaled by the relative volume-weighted strength of positive returns. This helps isolate steady, volume-supported price appreciation.",
      "factor_formulation": "\\text{Factor} = \\text{RANK}\\left(\\frac{\\text{TS\\_CORR}(\\text{close}, \\text{SEQUENCE}(10), 10)}{\\text{TS\\_STD}(\\text{return}, 10) + 1e-8}\\right) \\times \\text{RANK}\\left(\\frac{\\text{TS\\_SUM}(\\text{return} \\times \\text{volume}, 10)}{\\text{TS\\_SUM}(\\text{ABS}(\\text{return}) \\times \\text{volume}, 10) + 1e-8}\\right)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 2,
        "evolution_phase": "crossover",
        "trajectory_id": "a76cc6a74dee",
        "parent_trajectory_ids": [
          "432771960cc4",
          "0144c84c5654"
        ],
        "hypothesis": "Hypothesis: The 'Stealth Institutional Convergence' factor, calculated as the product of a 10-day price trend linearity (R-squared) and a 15-day volume-weighted upside intensity ratio, normalized by 5-day price volatility, positively predicts future returns by identifying high-conviction institutional accumulation.\n                Concise Observation: Parent 1 (RankIC 0.0248) suggests that linear price trends are reliable, while Parent 2 (RankIC 0.0236) indicates that volume-weighted upside bias captures liquidity absorption, but both suffer from false positives when used in isolation.\n                Concise Justification: By multiplying price linearity with volume-weighted upside intensity and dividing by volatility, we isolate 'efficient' accumulation where institutions move prices steadily with conviction, filtering out speculative volatility that lacks structural volume support.\n                Concise Knowledge: If a price trend exhibits high linearity and low volatility while being supported by asymmetric volume-weighted positive returns, it indicates institutional accumulation; conversely, high volume asymmetry with erratic price movement often reflects retail-driven noise or low-liquidity manipulation.\n                concise Specification: The factor is defined as [RSQR(close, 10) / Std(returns, 5)] * [Sum(volume * (returns > 0 ? returns : 0), 15) / Sum(volume * abs(returns), 15)], where RSQR measures the coefficient of determination of price against a time trend over 10 days.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T00:32:36.121847"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.099204283348859,
        "ICIR": 0.0492083409215249,
        "1day.excess_return_without_cost.std": 0.0040270458213739,
        "1day.excess_return_with_cost.annualized_return": 0.0456408573360667,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003890867888525,
        "1day.excess_return_without_cost.annualized_return": 0.0926026557468963,
        "1day.excess_return_with_cost.std": 0.0040277887286513,
        "Rank IC": 0.0228458259311759,
        "IC": 0.0066265005394101,
        "1day.excess_return_without_cost.max_drawdown": -0.0866459789358339,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.4905563266096065,
        "1day.pa": 0.0,
        "l2.valid": 0.9966126029926172,
        "Rank ICIR": 0.1733592309023739,
        "l2.train": 0.9943552323771646,
        "1day.excess_return_with_cost.information_ratio": 0.7345115562021487,
        "1day.excess_return_with_cost.mean": 0.0001917683081347
      },
      "feedback": {
        "observations": "The experiment results demonstrate a significant improvement over the SOTA result. The 'Linear_Upside_Efficiency_Factor' and 'Stealth_Institutional_Accumulation_15D' implementations have successfully captured alpha, with the Information Ratio (IR) increasing from 0.97 to 1.49 and the Annualized Return nearly doubling from 5.2% to 9.26%. The IC also showed a healthy improvement to 0.0066. However, the Max Drawdown slightly worsened (-0.086 vs -0.072), suggesting that while the signal is stronger, it may introduce specific period risks or higher volatility in the long-short portfolio.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that combining price trend linearity (R-squared) with volume-weighted upside intensity identifies high-conviction institutional movement. The use of RANK in the 'Linear_Upside_Efficiency_Factor' likely contributed to the robustness of the signal by neutralizing the scale differences between the linearity component and the volume-weighted component. The normalization by volatility effectively filters out 'noisy' price action, confirming that 'efficient' trends are more predictive of institutional accumulation.",
        "decision": true,
        "reason": "While the current linearity (R-squared) is effective, institutional accumulation is often better characterized by price and volume moving in tandem. Using price-volume correlation as a proxy for 'conviction' and switching to downside deviation (Sortino-style risk) instead of standard deviation (Sharpe-style risk) allows the factor to remain high during strong, low-noise rallies even if volatility is high, as long as that volatility is primarily on the upside. This should improve the Information Ratio and potentially reduce the Max Drawdown observed in the current iteration."
      }
    },
    "bddbe645cb422037": {
      "factor_id": "bddbe645cb422037",
      "factor_name": "Trend_Exhaustion_Index_10D_5D",
      "factor_expression": "POW(TS_CORR($close, SEQUENCE(10), 10), 2) * TS_ZSCORE($close, 5)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"POW(TS_CORR($close, SEQUENCE(10), 10), 2) * TS_ZSCORE($close, 5)\" # Your output factor expression will be filled in here\n    name = \"Trend_Exhaustion_Index_10D_5D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies potential price reversals by multiplying the linearity of a 10-day trend (R-squared) with the short-term price deviation (standardized residual). High values indicate a 'perfect' trend that has over-extended, signaling a speculative climax prone to mean reversion.",
      "factor_formulation": "TEI = (\\text{TS\\_CORR}(\\text{close}, \\text{SEQUENCE}(10), 10))^2 \\times \\text{TS\\_ZSCORE}(\\text{close}, 5)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 11,
        "evolution_phase": "mutation",
        "trajectory_id": "9b496977c9e9",
        "parent_trajectory_ids": [
          "b5130bd370bd"
        ],
        "hypothesis": "Hypothesis: The 'Trend Exhaustion Index' (TEI) identifies imminent price reversals by calculating the product of the 10-day price-time linear regression R-squared and the 5-day standardized residual of the close price, where extreme values signal a decoupling of price from its structural trend.\n                Concise Observation: The parent strategy focused on trend persistence via volume stability, but failed to account for 'over-extended' states where high-conviction buying leads to technical blow-offs rather than continued growth.\n                Concise Justification: High R-squared values indicate a consensus-driven trend, while high positive residuals represent a 'stretch' beyond the trend line; the interaction of these two identifies speculative climaxes that typically precede a mean-reverting correction.\n                Concise Knowledge: If a price trend exhibits exceptionally high linearity (R-squared) alongside significant positive price deviations (residuals), the probability of mean reversion increases as liquidity demand outstrips sustainable supply; When trends become too 'perfect', they are prone to exhaustion.\n                concise Specification: The factor is defined as the product of the 10-day Rolling R-Squared of Close vs. Time and the 5-day Standardized Residual (Close minus 5-day Mean Close, divided by 5-day StdDev), targeting a 1-5 day reversal horizon.\n                ",
        "initial_direction": "Identify 'Trend Exhaustion' by interacting RSQR10 with RESI5: high R-squared combined with high positive residuals suggests an overextended trend prone to mean reversion.",
        "planning_direction": "Identify 'Trend Exhaustion' by interacting RSQR10 with RESI5: high R-squared combined with high positive residuals suggests an overextended trend prone to mean reversion.",
        "created_at": "2026-01-21T14:08:56.358473"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1633949137073185,
        "ICIR": 0.0681186538195247,
        "1day.excess_return_without_cost.std": 0.0047406425140845,
        "1day.excess_return_with_cost.annualized_return": 0.0132250543006071,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002551803001294,
        "1day.excess_return_without_cost.annualized_return": 0.0607329114308175,
        "1day.excess_return_with_cost.std": 0.004741946905026,
        "Rank IC": 0.0227117109529899,
        "IC": 0.0098400970097212,
        "1day.excess_return_without_cost.max_drawdown": -0.1147480720655139,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.8304211763417851,
        "1day.pa": 0.0,
        "l2.valid": 0.9964968733857864,
        "Rank ICIR": 0.1649235812966548,
        "l2.train": 0.9932242337412928,
        "1day.excess_return_with_cost.information_ratio": 0.1807807977087844,
        "1day.excess_return_with_cost.mean": 5.556745504456805e-05
      },
      "feedback": {
        "observations": "The current iteration of the 'Trend Exhaustion Index' (TEI) framework has yielded a significant improvement in predictive power, as evidenced by the IC (0.0098 vs 0.0058) and Annualized Return (0.0607 vs 0.0520). However, the Information Ratio (IR) has decreased, and the Max Drawdown has worsened significantly (-0.1147 vs -0.0725), suggesting that while the signal is stronger on average, it has become more volatile or prone to tail risks. The Structural_Decoupling_Score (SDS) and Linear_Stretch_Reversal_Factor (LSR) successfully captured different dimensions of the decoupling effect, but the increased drawdown suggests that the 'exhaustion' signal might be catching high-volatility regimes that are difficult to time perfectly.",
        "hypothesis_evaluation": "The results support the hypothesis that combining trend linearity (R-squared/Correlation) with price deviation (Residuals/Z-Score) identifies meaningful alpha. The increase in IC confirms that the 'decoupling' of price from its structural trend is a valid predictor of future returns. However, the divergence between higher IC/Return and lower IR/higher Drawdown indicates that the current 10-day/5-day window combination might be too sensitive, leading to 'false positives' where a trend appears exhausted but continues to extend (the 'melt-up' problem).",
        "decision": true,
        "reason": "The current drawdown issue suggests the factor triggers too early in high-volatility environments. By introducing a volatility ratio (e.g., TS_STD(close, 20) / TS_STD(close, 5)), we can dampen the signal when short-term volatility spikes relative to the trend, ensuring the 'exhaustion' is measured against a stable structural backdrop. Additionally, simplifying the interaction from a product of ranks to a direct ratio of trend-strength to deviation may reduce complexity while maintaining the core logic."
      }
    },
    "d350e652dc4898b9": {
      "factor_id": "d350e652dc4898b9",
      "factor_name": "Linear_Stretch_Reversal_Factor",
      "factor_expression": "RANK(TS_CORR($close, SEQUENCE(10), 10)) * RANK(($close - TS_MEAN($close, 5)) / (TS_STD($close, 5) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(TS_CORR($close, SEQUENCE(10), 10)) * RANK(($close - TS_MEAN($close, 5)) / (TS_STD($close, 5) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Linear_Stretch_Reversal_Factor\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A variation of the exhaustion index focusing on the interaction between the 10-day trend strength and the 5-day price deviation from its mean. It uses cross-sectional ranking to normalize the exhaustion signal across the universe.",
      "factor_formulation": "LSR = \\text{RANK}(\\text{TS\\_CORR}(\\text{close}, \\text{SEQUENCE}(10), 10)) \\times \\text{RANK}(\\frac{\\text{close} - \\text{TS\\_MEAN}(\\text{close}, 5)}{\\text{TS\\_STD}(\\text{close}, 5) + 1e-8})",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 11,
        "evolution_phase": "mutation",
        "trajectory_id": "9b496977c9e9",
        "parent_trajectory_ids": [
          "b5130bd370bd"
        ],
        "hypothesis": "Hypothesis: The 'Trend Exhaustion Index' (TEI) identifies imminent price reversals by calculating the product of the 10-day price-time linear regression R-squared and the 5-day standardized residual of the close price, where extreme values signal a decoupling of price from its structural trend.\n                Concise Observation: The parent strategy focused on trend persistence via volume stability, but failed to account for 'over-extended' states where high-conviction buying leads to technical blow-offs rather than continued growth.\n                Concise Justification: High R-squared values indicate a consensus-driven trend, while high positive residuals represent a 'stretch' beyond the trend line; the interaction of these two identifies speculative climaxes that typically precede a mean-reverting correction.\n                Concise Knowledge: If a price trend exhibits exceptionally high linearity (R-squared) alongside significant positive price deviations (residuals), the probability of mean reversion increases as liquidity demand outstrips sustainable supply; When trends become too 'perfect', they are prone to exhaustion.\n                concise Specification: The factor is defined as the product of the 10-day Rolling R-Squared of Close vs. Time and the 5-day Standardized Residual (Close minus 5-day Mean Close, divided by 5-day StdDev), targeting a 1-5 day reversal horizon.\n                ",
        "initial_direction": "Identify 'Trend Exhaustion' by interacting RSQR10 with RESI5: high R-squared combined with high positive residuals suggests an overextended trend prone to mean reversion.",
        "planning_direction": "Identify 'Trend Exhaustion' by interacting RSQR10 with RESI5: high R-squared combined with high positive residuals suggests an overextended trend prone to mean reversion.",
        "created_at": "2026-01-21T14:08:56.358473"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1633949137073185,
        "ICIR": 0.0681186538195247,
        "1day.excess_return_without_cost.std": 0.0047406425140845,
        "1day.excess_return_with_cost.annualized_return": 0.0132250543006071,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002551803001294,
        "1day.excess_return_without_cost.annualized_return": 0.0607329114308175,
        "1day.excess_return_with_cost.std": 0.004741946905026,
        "Rank IC": 0.0227117109529899,
        "IC": 0.0098400970097212,
        "1day.excess_return_without_cost.max_drawdown": -0.1147480720655139,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.8304211763417851,
        "1day.pa": 0.0,
        "l2.valid": 0.9964968733857864,
        "Rank ICIR": 0.1649235812966548,
        "l2.train": 0.9932242337412928,
        "1day.excess_return_with_cost.information_ratio": 0.1807807977087844,
        "1day.excess_return_with_cost.mean": 5.556745504456805e-05
      },
      "feedback": {
        "observations": "The current iteration of the 'Trend Exhaustion Index' (TEI) framework has yielded a significant improvement in predictive power, as evidenced by the IC (0.0098 vs 0.0058) and Annualized Return (0.0607 vs 0.0520). However, the Information Ratio (IR) has decreased, and the Max Drawdown has worsened significantly (-0.1147 vs -0.0725), suggesting that while the signal is stronger on average, it has become more volatile or prone to tail risks. The Structural_Decoupling_Score (SDS) and Linear_Stretch_Reversal_Factor (LSR) successfully captured different dimensions of the decoupling effect, but the increased drawdown suggests that the 'exhaustion' signal might be catching high-volatility regimes that are difficult to time perfectly.",
        "hypothesis_evaluation": "The results support the hypothesis that combining trend linearity (R-squared/Correlation) with price deviation (Residuals/Z-Score) identifies meaningful alpha. The increase in IC confirms that the 'decoupling' of price from its structural trend is a valid predictor of future returns. However, the divergence between higher IC/Return and lower IR/higher Drawdown indicates that the current 10-day/5-day window combination might be too sensitive, leading to 'false positives' where a trend appears exhausted but continues to extend (the 'melt-up' problem).",
        "decision": true,
        "reason": "The current drawdown issue suggests the factor triggers too early in high-volatility environments. By introducing a volatility ratio (e.g., TS_STD(close, 20) / TS_STD(close, 5)), we can dampen the signal when short-term volatility spikes relative to the trend, ensuring the 'exhaustion' is measured against a stable structural backdrop. Additionally, simplifying the interaction from a product of ranks to a direct ratio of trend-strength to deviation may reduce complexity while maintaining the core logic."
      }
    },
    "958bb1068fe220d6": {
      "factor_id": "958bb1068fe220d6",
      "factor_name": "Structural_Decoupling_Score",
      "factor_expression": "TS_CORR($close, SEQUENCE(10), 10) * (REGRESI($close, SEQUENCE(5), 5) / (TS_STD($close, 5) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_CORR($close, SEQUENCE(10), 10) * (REGRESI($close, SEQUENCE(5), 5) / (TS_STD($close, 5) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Structural_Decoupling_Score\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor measures the decoupling of price from its structural trend by calculating the product of the 10-day price-time correlation and the 5-day residual from a linear regression. It identifies stocks that are deviating significantly from a highly linear path.",
      "factor_formulation": "SDS = \\text{TS\\_CORR}(\\text{close}, \\text{SEQUENCE}(10), 10) \\times \\frac{\\text{REGRESI}(\\text{close}, \\text{SEQUENCE}(5), 5)}{\\text{TS\\_STD}(\\text{close}, 5) + 1e-8}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 11,
        "evolution_phase": "mutation",
        "trajectory_id": "9b496977c9e9",
        "parent_trajectory_ids": [
          "b5130bd370bd"
        ],
        "hypothesis": "Hypothesis: The 'Trend Exhaustion Index' (TEI) identifies imminent price reversals by calculating the product of the 10-day price-time linear regression R-squared and the 5-day standardized residual of the close price, where extreme values signal a decoupling of price from its structural trend.\n                Concise Observation: The parent strategy focused on trend persistence via volume stability, but failed to account for 'over-extended' states where high-conviction buying leads to technical blow-offs rather than continued growth.\n                Concise Justification: High R-squared values indicate a consensus-driven trend, while high positive residuals represent a 'stretch' beyond the trend line; the interaction of these two identifies speculative climaxes that typically precede a mean-reverting correction.\n                Concise Knowledge: If a price trend exhibits exceptionally high linearity (R-squared) alongside significant positive price deviations (residuals), the probability of mean reversion increases as liquidity demand outstrips sustainable supply; When trends become too 'perfect', they are prone to exhaustion.\n                concise Specification: The factor is defined as the product of the 10-day Rolling R-Squared of Close vs. Time and the 5-day Standardized Residual (Close minus 5-day Mean Close, divided by 5-day StdDev), targeting a 1-5 day reversal horizon.\n                ",
        "initial_direction": "Identify 'Trend Exhaustion' by interacting RSQR10 with RESI5: high R-squared combined with high positive residuals suggests an overextended trend prone to mean reversion.",
        "planning_direction": "Identify 'Trend Exhaustion' by interacting RSQR10 with RESI5: high R-squared combined with high positive residuals suggests an overextended trend prone to mean reversion.",
        "created_at": "2026-01-21T14:08:56.358473"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1633949137073185,
        "ICIR": 0.0681186538195247,
        "1day.excess_return_without_cost.std": 0.0047406425140845,
        "1day.excess_return_with_cost.annualized_return": 0.0132250543006071,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002551803001294,
        "1day.excess_return_without_cost.annualized_return": 0.0607329114308175,
        "1day.excess_return_with_cost.std": 0.004741946905026,
        "Rank IC": 0.0227117109529899,
        "IC": 0.0098400970097212,
        "1day.excess_return_without_cost.max_drawdown": -0.1147480720655139,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.8304211763417851,
        "1day.pa": 0.0,
        "l2.valid": 0.9964968733857864,
        "Rank ICIR": 0.1649235812966548,
        "l2.train": 0.9932242337412928,
        "1day.excess_return_with_cost.information_ratio": 0.1807807977087844,
        "1day.excess_return_with_cost.mean": 5.556745504456805e-05
      },
      "feedback": {
        "observations": "The current iteration of the 'Trend Exhaustion Index' (TEI) framework has yielded a significant improvement in predictive power, as evidenced by the IC (0.0098 vs 0.0058) and Annualized Return (0.0607 vs 0.0520). However, the Information Ratio (IR) has decreased, and the Max Drawdown has worsened significantly (-0.1147 vs -0.0725), suggesting that while the signal is stronger on average, it has become more volatile or prone to tail risks. The Structural_Decoupling_Score (SDS) and Linear_Stretch_Reversal_Factor (LSR) successfully captured different dimensions of the decoupling effect, but the increased drawdown suggests that the 'exhaustion' signal might be catching high-volatility regimes that are difficult to time perfectly.",
        "hypothesis_evaluation": "The results support the hypothesis that combining trend linearity (R-squared/Correlation) with price deviation (Residuals/Z-Score) identifies meaningful alpha. The increase in IC confirms that the 'decoupling' of price from its structural trend is a valid predictor of future returns. However, the divergence between higher IC/Return and lower IR/higher Drawdown indicates that the current 10-day/5-day window combination might be too sensitive, leading to 'false positives' where a trend appears exhausted but continues to extend (the 'melt-up' problem).",
        "decision": true,
        "reason": "The current drawdown issue suggests the factor triggers too early in high-volatility environments. By introducing a volatility ratio (e.g., TS_STD(close, 20) / TS_STD(close, 5)), we can dampen the signal when short-term volatility spikes relative to the trend, ensuring the 'exhaustion' is measured against a stable structural backdrop. Additionally, simplifying the interaction from a product of ranks to a direct ratio of trend-strength to deviation may reduce complexity while maintaining the core logic."
      }
    },
    "c2bc880157b825f2": {
      "factor_id": "c2bc880157b825f2",
      "factor_name": "Informed_Breakout_Resonance_5D",
      "factor_expression": "TS_CORR($close, $volume, 5) * (($open / (DELAY($close, 1) + 1e-8) - 1) / (TS_MEAN($high - $low, 5) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(TS_CORR($close, $volume, 5) * (($open / DELAY($close, 1) - 1) / TS_MEAN($high - $low, 5)))\" # Your output factor expression will be filled in here\n    name = \"Informed_Breakout_Resonance_5D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies institutional trend initiation by combining pre-breakout accumulation (return-volume correlation) with breakout conviction (volatility-adjusted overnight gap). It targets stocks where prior volume-price synergy is validated by a significant price gap relative to recent intraday volatility.",
      "factor_formulation": "IBR_{5D} = \\text{TS\\_CORR}(\\text{close}, \\text{volume}, 5) \\times \\frac{(\\text{open} / \\text{DELAY}(\\text{close}, 1) - 1)}{\\text{TS\\_MEAN}(\\text{high} - \\text{low}, 5)}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 10,
        "evolution_phase": "crossover",
        "trajectory_id": "e3f9689b3f0b",
        "parent_trajectory_ids": [
          "eb432bc3d7d9",
          "8d9bd5be78a0"
        ],
        "hypothesis": "Hypothesis: The 'Informed Breakout Resonance' (IBR) factor identifies institutional trend initiation by multiplying the 5-day return-volume correlation (MSIA component) with the ratio of the overnight gap to the 5-day average intraday range (LVSB component), capturing breakouts preceded by informed accumulation.\n                Concise Observation: Parent 1 (MSIA) captures pre-breakout accumulation through volume-return synergy, while Parent 2 (LVSB) identifies breakout conviction via gap-to-dispersion ratios; both show positive RankIC but suffer from noise when used in isolation.\n                Concise Justification: Combining lead-lag indicators of accumulation and execution filters out speculative gaps that lack structural support, ensuring that the captured momentum is rooted in prior information asymmetry and validated by liquidity-efficient price action.\n                Concise Knowledge: If a significant overnight price gap occurs following a period of high volume-weighted price directionality, it likely represents institutional execution; when this gap is large relative to recent intraday volatility, the signal quality for a sustainable trend is enhanced.\n                concise Specification: The factor is defined as (Correlation of $close and $volume over 5 days) * (($open / $close[t-1] - 1) / Mean($high - $low, 5)), targeting stocks where the incubation phase (correlation) resonates with the breakout trigger (volatility-adjusted gap).\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T13:12:25.934893"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1010204969084028,
        "ICIR": 0.0394664694473316,
        "1day.excess_return_without_cost.std": 0.0041006287833142,
        "1day.excess_return_with_cost.annualized_return": -0.0055615139225531,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001751926683843,
        "1day.excess_return_without_cost.annualized_return": 0.0416958550754759,
        "1day.excess_return_with_cost.std": 0.0041022351106141,
        "Rank IC": 0.0225058594061146,
        "IC": 0.0054558898487561,
        "1day.excess_return_without_cost.max_drawdown": -0.0902128926008573,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.6591040044051556,
        "1day.pa": 0.0,
        "l2.valid": 0.9965083323208964,
        "Rank ICIR": 0.1693125969117782,
        "l2.train": 0.9938567513835428,
        "1day.excess_return_with_cost.information_ratio": -0.0878787767151277,
        "1day.excess_return_with_cost.mean": -2.336770555694614e-05
      },
      "feedback": {
        "observations": "The experiment evaluated three variations of the 'Informed Breakout Resonance' (IBR) hypothesis. The current results, while positive, failed to outperform the existing SOTA across all key metrics including IC (0.0054 vs 0.0057) and Information Ratio (0.659 vs 0.972). Among the implementations, the 'Accumulated_Gap_Momentum_S_5D' and 'Z_Informed_Gap_Efficiency_10D' attempted to stabilize the signal using ranking and Z-scores, but the increased complexity in normalization did not translate to higher risk-adjusted returns. The original IBR_5D formulation suffered from scale mismatch between the correlation component and the volatility-adjusted gap, which likely introduced noise.",
        "hypothesis_evaluation": "The hypothesis that institutional breakouts are preceded by return-volume synergy is supported by the positive IC and annualized return, but the 'Resonance' (multiplication) of these two components appears highly sensitive to the normalization method. The 5-day window for accumulation (MSIA) might be too short to capture true institutional positioning, potentially picking up high-frequency noise instead of informed flow. Furthermore, using 'high - low' as a denominator in IBR_5D may create extreme outliers when intraday ranges compress, destabilizing the factor.",
        "decision": false,
        "reason": "1. Extending the accumulation window from 5 to 20 days filters out short-term retail noise and better aligns with institutional execution horizons. 2. Replacing 'high-low' with 'TS_STD(returns)' provides a more robust normalization for the gap, as price ranges are non-stationary and prone to spikes. 3. Using a Rank-based combination (addition instead of multiplication) can reduce the impact of outliers and prevent the signal from being zeroed out when one component is neutral."
      }
    },
    "9a986d11fbe7aba3": {
      "factor_id": "9a986d11fbe7aba3",
      "factor_name": "Z_Informed_Gap_Efficiency_10D",
      "factor_expression": "RANK(TS_CORR($close, $volume, 10)) * RANK(($open - DELAY($close, 1)) / (TS_STD($close, 10) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"ZSCORE(RANK(TS_CORR($close, $volume, 10)) * RANK(($open - DELAY($close, 1)) / (TS_STD($close, 10) + 1e-8)))\" # Your output factor expression will be filled in here\n    name = \"Z_Informed_Gap_Efficiency_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A cross-sectionally standardized version of the Informed Breakout Resonance hypothesis, using a 10-day window for accumulation and volatility normalization. It measures the efficiency of price gaps following periods of high volume-weighted price directionality.",
      "factor_formulation": "IGE_{10D} = \\text{RANK}(\\text{TS\\_CORR}(\\text{close}, \\text{volume}, 10)) \\times \\text{RANK}\\left(\\frac{\\text{open} - \\text{DELAY}(\\text{close}, 1)}{\\text{TS\\_STD}(\\text{close}, 10)}\\right)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 10,
        "evolution_phase": "crossover",
        "trajectory_id": "e3f9689b3f0b",
        "parent_trajectory_ids": [
          "eb432bc3d7d9",
          "8d9bd5be78a0"
        ],
        "hypothesis": "Hypothesis: The 'Informed Breakout Resonance' (IBR) factor identifies institutional trend initiation by multiplying the 5-day return-volume correlation (MSIA component) with the ratio of the overnight gap to the 5-day average intraday range (LVSB component), capturing breakouts preceded by informed accumulation.\n                Concise Observation: Parent 1 (MSIA) captures pre-breakout accumulation through volume-return synergy, while Parent 2 (LVSB) identifies breakout conviction via gap-to-dispersion ratios; both show positive RankIC but suffer from noise when used in isolation.\n                Concise Justification: Combining lead-lag indicators of accumulation and execution filters out speculative gaps that lack structural support, ensuring that the captured momentum is rooted in prior information asymmetry and validated by liquidity-efficient price action.\n                Concise Knowledge: If a significant overnight price gap occurs following a period of high volume-weighted price directionality, it likely represents institutional execution; when this gap is large relative to recent intraday volatility, the signal quality for a sustainable trend is enhanced.\n                concise Specification: The factor is defined as (Correlation of $close and $volume over 5 days) * (($open / $close[t-1] - 1) / Mean($high - $low, 5)), targeting stocks where the incubation phase (correlation) resonates with the breakout trigger (volatility-adjusted gap).\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T13:12:25.934893"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1010204969084028,
        "ICIR": 0.0394664694473316,
        "1day.excess_return_without_cost.std": 0.0041006287833142,
        "1day.excess_return_with_cost.annualized_return": -0.0055615139225531,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001751926683843,
        "1day.excess_return_without_cost.annualized_return": 0.0416958550754759,
        "1day.excess_return_with_cost.std": 0.0041022351106141,
        "Rank IC": 0.0225058594061146,
        "IC": 0.0054558898487561,
        "1day.excess_return_without_cost.max_drawdown": -0.0902128926008573,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.6591040044051556,
        "1day.pa": 0.0,
        "l2.valid": 0.9965083323208964,
        "Rank ICIR": 0.1693125969117782,
        "l2.train": 0.9938567513835428,
        "1day.excess_return_with_cost.information_ratio": -0.0878787767151277,
        "1day.excess_return_with_cost.mean": -2.336770555694614e-05
      },
      "feedback": {
        "observations": "The experiment evaluated three variations of the 'Informed Breakout Resonance' (IBR) hypothesis. The current results, while positive, failed to outperform the existing SOTA across all key metrics including IC (0.0054 vs 0.0057) and Information Ratio (0.659 vs 0.972). Among the implementations, the 'Accumulated_Gap_Momentum_S_5D' and 'Z_Informed_Gap_Efficiency_10D' attempted to stabilize the signal using ranking and Z-scores, but the increased complexity in normalization did not translate to higher risk-adjusted returns. The original IBR_5D formulation suffered from scale mismatch between the correlation component and the volatility-adjusted gap, which likely introduced noise.",
        "hypothesis_evaluation": "The hypothesis that institutional breakouts are preceded by return-volume synergy is supported by the positive IC and annualized return, but the 'Resonance' (multiplication) of these two components appears highly sensitive to the normalization method. The 5-day window for accumulation (MSIA) might be too short to capture true institutional positioning, potentially picking up high-frequency noise instead of informed flow. Furthermore, using 'high - low' as a denominator in IBR_5D may create extreme outliers when intraday ranges compress, destabilizing the factor.",
        "decision": false,
        "reason": "1. Extending the accumulation window from 5 to 20 days filters out short-term retail noise and better aligns with institutional execution horizons. 2. Replacing 'high-low' with 'TS_STD(returns)' provides a more robust normalization for the gap, as price ranges are non-stationary and prone to spikes. 3. Using a Rank-based combination (addition instead of multiplication) can reduce the impact of outliers and prevent the signal from being zeroed out when one component is neutral."
      }
    },
    "ad68a3156bf94181": {
      "factor_id": "ad68a3156bf94181",
      "factor_name": "Accumulated_Gap_Momentum_S_5D",
      "factor_expression": "TS_RANK(TS_CORR($close, $volume, 5), 10) * TS_ZSCORE($open / (DELAY($close, 1) + 1e-8), 10)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_RANK(TS_CORR($close, $volume, 5), 10) * TS_ZSCORE($open / (DELAY($close, 1) + 1e-8), 10)\" # Your output factor expression will be filled in here\n    name = \"Accumulated_Gap_Momentum_S_5D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor captures the resonance between accumulation and breakout by multiplying the time-series rank of return-volume correlation with the standardized overnight gap. It focuses on the relative strength of the accumulation signal compared to its own history.",
      "factor_formulation": "AGM = \\text{TS\\_RANK}(\\text{TS\\_CORR}(\\text{close}, \\text{volume}, 5), 10) \\times \\text{TS\\_ZSCORE}(\\text{open} / \\text{DELAY}(\\text{close}, 1), 10)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 10,
        "evolution_phase": "crossover",
        "trajectory_id": "e3f9689b3f0b",
        "parent_trajectory_ids": [
          "eb432bc3d7d9",
          "8d9bd5be78a0"
        ],
        "hypothesis": "Hypothesis: The 'Informed Breakout Resonance' (IBR) factor identifies institutional trend initiation by multiplying the 5-day return-volume correlation (MSIA component) with the ratio of the overnight gap to the 5-day average intraday range (LVSB component), capturing breakouts preceded by informed accumulation.\n                Concise Observation: Parent 1 (MSIA) captures pre-breakout accumulation through volume-return synergy, while Parent 2 (LVSB) identifies breakout conviction via gap-to-dispersion ratios; both show positive RankIC but suffer from noise when used in isolation.\n                Concise Justification: Combining lead-lag indicators of accumulation and execution filters out speculative gaps that lack structural support, ensuring that the captured momentum is rooted in prior information asymmetry and validated by liquidity-efficient price action.\n                Concise Knowledge: If a significant overnight price gap occurs following a period of high volume-weighted price directionality, it likely represents institutional execution; when this gap is large relative to recent intraday volatility, the signal quality for a sustainable trend is enhanced.\n                concise Specification: The factor is defined as (Correlation of $close and $volume over 5 days) * (($open / $close[t-1] - 1) / Mean($high - $low, 5)), targeting stocks where the incubation phase (correlation) resonates with the breakout trigger (volatility-adjusted gap).\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T13:12:25.934893"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1010204969084028,
        "ICIR": 0.0394664694473316,
        "1day.excess_return_without_cost.std": 0.0041006287833142,
        "1day.excess_return_with_cost.annualized_return": -0.0055615139225531,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001751926683843,
        "1day.excess_return_without_cost.annualized_return": 0.0416958550754759,
        "1day.excess_return_with_cost.std": 0.0041022351106141,
        "Rank IC": 0.0225058594061146,
        "IC": 0.0054558898487561,
        "1day.excess_return_without_cost.max_drawdown": -0.0902128926008573,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.6591040044051556,
        "1day.pa": 0.0,
        "l2.valid": 0.9965083323208964,
        "Rank ICIR": 0.1693125969117782,
        "l2.train": 0.9938567513835428,
        "1day.excess_return_with_cost.information_ratio": -0.0878787767151277,
        "1day.excess_return_with_cost.mean": -2.336770555694614e-05
      },
      "feedback": {
        "observations": "The experiment evaluated three variations of the 'Informed Breakout Resonance' (IBR) hypothesis. The current results, while positive, failed to outperform the existing SOTA across all key metrics including IC (0.0054 vs 0.0057) and Information Ratio (0.659 vs 0.972). Among the implementations, the 'Accumulated_Gap_Momentum_S_5D' and 'Z_Informed_Gap_Efficiency_10D' attempted to stabilize the signal using ranking and Z-scores, but the increased complexity in normalization did not translate to higher risk-adjusted returns. The original IBR_5D formulation suffered from scale mismatch between the correlation component and the volatility-adjusted gap, which likely introduced noise.",
        "hypothesis_evaluation": "The hypothesis that institutional breakouts are preceded by return-volume synergy is supported by the positive IC and annualized return, but the 'Resonance' (multiplication) of these two components appears highly sensitive to the normalization method. The 5-day window for accumulation (MSIA) might be too short to capture true institutional positioning, potentially picking up high-frequency noise instead of informed flow. Furthermore, using 'high - low' as a denominator in IBR_5D may create extreme outliers when intraday ranges compress, destabilizing the factor.",
        "decision": false,
        "reason": "1. Extending the accumulation window from 5 to 20 days filters out short-term retail noise and better aligns with institutional execution horizons. 2. Replacing 'high-low' with 'TS_STD(returns)' provides a more robust normalization for the gap, as price ranges are non-stationary and prone to spikes. 3. Using a Rank-based combination (addition instead of multiplication) can reduce the impact of outliers and prevent the signal from being zeroed out when one component is neutral."
      }
    },
    "fc88e87480f42f89": {
      "factor_id": "fc88e87480f42f89",
      "factor_name": "ISB_Factor_10D",
      "factor_expression": "(($open / DELAY($close, 1) - 1) * POW(TS_CORR($close, SEQUENCE(10), 10), 2)) / (TS_MEAN(($high - $low) / ($close + 1e-8), 5) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(($open / DELAY($close, 1) - 1) * POW(TS_CORR($close, SEQUENCE(10), 10), 2)) / (TS_MEAN(($high - $low) / ($close + 1e-8), 5) + 1e-8)\" # Your output factor expression will be filled in here\n    name = \"ISB_Factor_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "The Institutional Stealth Breakout (ISB) factor identifies high-quality price trends by multiplying the overnight gap with the 10-day linear regression R-squared of close prices, normalized by intraday volatility. High R-squared indicates a stable, persistent trend, while the gap serves as a tactical entry trigger.",
      "factor_formulation": "ISB = \\frac{(\\text{open} / \\text{delay}(\\text{close}, 1) - 1) \\times \\text{TS\\_CORR}(\\text{close}, \\text{SEQUENCE}(10), 10)^2}{\\text{TS\\_MEAN}((\\text{high} - \\text{low}) / \\text{close}, 5)}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 10,
        "evolution_phase": "crossover",
        "trajectory_id": "ab440405fa20",
        "parent_trajectory_ids": [
          "e50ec3582ef8",
          "8d9bd5be78a0"
        ],
        "hypothesis": "Hypothesis: The Institutional Stealth Breakout (ISB) factor identifies high-quality price trends by multiplying the magnitude of a liquidity-validated overnight gap with the 10-day linear regression R-squared of daily close prices, while penalizing high intraday volatility.\n                Concise Observation: Parent 2 (RankIC=0.027) successfully captures momentum via gaps but suffers from volatility decay, while Parent 1 (RankIC=0.023) identifies stable trends but lacks a clear entry trigger.\n                Concise Justification: Combining the overnight gap (tactical trigger) with R-squared (persistence filter) ensures that the momentum is both significant at inception and orderly in execution, reducing the risk of 'pump-and-dump' reversals.\n                Concise Knowledge: If an overnight price gap is supported by high relative volume and followed by a high R-squared linear trend with low intraday dispersion, it indicates institutional accumulation rather than retail speculation.\n                concise Specification: Calculate the overnight gap ($open / $close[1] - 1) multiplied by the 10-day rolling R-squared of $close, then divide by the 5-day average of ($high - $low) / $close to normalize for volatility.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T13:53:09.652573"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1126646268963909,
        "ICIR": 0.0420610830854019,
        "1day.excess_return_without_cost.std": 0.004051589566095,
        "1day.excess_return_with_cost.annualized_return": 0.0124731560122608,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002493869676311,
        "1day.excess_return_without_cost.annualized_return": 0.0593540982962082,
        "1day.excess_return_with_cost.std": 0.004051176761841,
        "Rank IC": 0.0224972946475899,
        "IC": 0.005657134676375,
        "1day.excess_return_without_cost.max_drawdown": -0.1027964714387138,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.949591435560056,
        "1day.pa": 0.0,
        "l2.valid": 0.9964255113415672,
        "Rank ICIR": 0.1721698278239003,
        "l2.train": 0.9943750166471697,
        "1day.excess_return_with_cost.information_ratio": 0.1995752505235117,
        "1day.excess_return_with_cost.mean": 5.240821853891099e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the Institutional Stealth Breakout (ISB) hypothesis. The current iteration achieved a higher annualized return (0.059 vs 0.052) compared to the SOTA, although it showed a slight decline in Information Ratio (0.949 vs 0.972) and a deeper maximum drawdown (-0.102 vs -0.072). The IC remains very close to the SOTA (0.0056 vs 0.0057). The results suggest that while the 'Stealth' entry (overnight gap) combined with trend persistence (R-squared) is a valid alpha source, the current implementations may be introducing higher tail risk or volatility, as evidenced by the drawdown increase.",
        "hypothesis_evaluation": "The hypothesis that combining overnight gaps with price persistence (R-squared) identifies high-quality trends is supported by the improvement in annualized returns. However, the 'penalizing high intraday volatility' component (used in ISB_Factor_10D) or the 'volume validation' (ISB_Liquidity_Validated_10D) seems to increase the aggressiveness of the factor at the cost of stability. The 'Stealth' aspectentering on gaps within low-volatility regimesshows promise but needs better risk-adjustment to improve the Information Ratio and Drawdown.",
        "decision": true,
        "reason": "The current results show improved returns but higher risk. By using a 'Gap-to-Range' ratio, we normalize the entry trigger against the asset's recent volatility, preventing outsized bets on naturally volatile stocks. Extending the volatility normalization window from 5 to 20 days will provide a more stable denominator, likely reducing the Max Drawdown. Furthermore, integrating volume directly into the persistence measure (rather than as a separate multiplier) ensures that the trend is truly institutional, addressing the 'Stealth' and 'Institutional' components of the hypothesis more cohesively without increasing complexity (SL/ER)."
      }
    },
    "b083151f08771eb0": {
      "factor_id": "b083151f08771eb0",
      "factor_name": "ISB_Liquidity_Validated_10D",
      "factor_expression": "RANK($open / DELAY($close, 1) - 1) * ($volume / (TS_MEAN($volume, 10) + 1e-8)) * POW(TS_CORR($close, SEQUENCE(10), 10), 2)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK($open / DELAY($close, 1) - 1) * ($volume / (TS_MEAN($volume, 10) + 1e-8)) * POW(TS_CORR($close, SEQUENCE(10), 10), 2)\" # Your output factor expression will be filled in here\n    name = \"ISB_Liquidity_Validated_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A variation of the ISB factor that incorporates volume validation. It weights the overnight gap by the relative volume to ensure the breakout is supported by institutional activity, then filters by trend persistence (R-squared) and penalizes high-dispersion intraday moves.",
      "factor_formulation": "ISB_{vol} = \\text{RANK}\\left(\\frac{\\text{open}}{\\text{delay}(\\text{close}, 1)} - 1\\right) \\times \\frac{\\text{volume}}{\\text{TS\\_MEAN}(\\text{volume}, 10)} \\times \\text{TS\\_CORR}(\\text{close}, \\text{SEQUENCE}(10), 10)^2",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 10,
        "evolution_phase": "crossover",
        "trajectory_id": "ab440405fa20",
        "parent_trajectory_ids": [
          "e50ec3582ef8",
          "8d9bd5be78a0"
        ],
        "hypothesis": "Hypothesis: The Institutional Stealth Breakout (ISB) factor identifies high-quality price trends by multiplying the magnitude of a liquidity-validated overnight gap with the 10-day linear regression R-squared of daily close prices, while penalizing high intraday volatility.\n                Concise Observation: Parent 2 (RankIC=0.027) successfully captures momentum via gaps but suffers from volatility decay, while Parent 1 (RankIC=0.023) identifies stable trends but lacks a clear entry trigger.\n                Concise Justification: Combining the overnight gap (tactical trigger) with R-squared (persistence filter) ensures that the momentum is both significant at inception and orderly in execution, reducing the risk of 'pump-and-dump' reversals.\n                Concise Knowledge: If an overnight price gap is supported by high relative volume and followed by a high R-squared linear trend with low intraday dispersion, it indicates institutional accumulation rather than retail speculation.\n                concise Specification: Calculate the overnight gap ($open / $close[1] - 1) multiplied by the 10-day rolling R-squared of $close, then divide by the 5-day average of ($high - $low) / $close to normalize for volatility.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T13:53:09.652573"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1126646268963909,
        "ICIR": 0.0420610830854019,
        "1day.excess_return_without_cost.std": 0.004051589566095,
        "1day.excess_return_with_cost.annualized_return": 0.0124731560122608,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002493869676311,
        "1day.excess_return_without_cost.annualized_return": 0.0593540982962082,
        "1day.excess_return_with_cost.std": 0.004051176761841,
        "Rank IC": 0.0224972946475899,
        "IC": 0.005657134676375,
        "1day.excess_return_without_cost.max_drawdown": -0.1027964714387138,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.949591435560056,
        "1day.pa": 0.0,
        "l2.valid": 0.9964255113415672,
        "Rank ICIR": 0.1721698278239003,
        "l2.train": 0.9943750166471697,
        "1day.excess_return_with_cost.information_ratio": 0.1995752505235117,
        "1day.excess_return_with_cost.mean": 5.240821853891099e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the Institutional Stealth Breakout (ISB) hypothesis. The current iteration achieved a higher annualized return (0.059 vs 0.052) compared to the SOTA, although it showed a slight decline in Information Ratio (0.949 vs 0.972) and a deeper maximum drawdown (-0.102 vs -0.072). The IC remains very close to the SOTA (0.0056 vs 0.0057). The results suggest that while the 'Stealth' entry (overnight gap) combined with trend persistence (R-squared) is a valid alpha source, the current implementations may be introducing higher tail risk or volatility, as evidenced by the drawdown increase.",
        "hypothesis_evaluation": "The hypothesis that combining overnight gaps with price persistence (R-squared) identifies high-quality trends is supported by the improvement in annualized returns. However, the 'penalizing high intraday volatility' component (used in ISB_Factor_10D) or the 'volume validation' (ISB_Liquidity_Validated_10D) seems to increase the aggressiveness of the factor at the cost of stability. The 'Stealth' aspectentering on gaps within low-volatility regimesshows promise but needs better risk-adjustment to improve the Information Ratio and Drawdown.",
        "decision": true,
        "reason": "The current results show improved returns but higher risk. By using a 'Gap-to-Range' ratio, we normalize the entry trigger against the asset's recent volatility, preventing outsized bets on naturally volatile stocks. Extending the volatility normalization window from 5 to 20 days will provide a more stable denominator, likely reducing the Max Drawdown. Furthermore, integrating volume directly into the persistence measure (rather than as a separate multiplier) ensures that the trend is truly institutional, addressing the 'Stealth' and 'Institutional' components of the hypothesis more cohesively without increasing complexity (SL/ER)."
      }
    },
    "a1ed978b60929311": {
      "factor_id": "a1ed978b60929311",
      "factor_name": "ISB_Volatility_Adjusted_Trigger",
      "factor_expression": "(($open - DELAY($close, 1)) / (TS_MEAN($high - $low, 5) + 1e-8)) * POW(TS_CORR($close, SEQUENCE(10), 10), 2)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(($open - DELAY($close, 1)) / (TS_MEAN($high - $low, 5) + 1e-8)) * POW(TS_CORR($close, SEQUENCE(10), 10), 2)\" # Your output factor expression will be filled in here\n    name = \"ISB_Volatility_Adjusted_Trigger\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor focuses on the 'Stealth' aspect by identifying gaps that occur within a low-volatility regime. It uses the ratio of the overnight gap to the 5-day average true range (approximated) and scales it by the 10-day price persistence (R-squared).",
      "factor_formulation": "ISB_{adj} = \\frac{\\text{open} - \\text{delay}(\\text{close}, 1)}{\\text{TS\\_MEAN}(\\text{high} - \\text{low}, 5) + 1e-8} \\times \\text{TS\\_CORR}(\\text{close}, \\text{SEQUENCE}(10), 10)^2",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 10,
        "evolution_phase": "crossover",
        "trajectory_id": "ab440405fa20",
        "parent_trajectory_ids": [
          "e50ec3582ef8",
          "8d9bd5be78a0"
        ],
        "hypothesis": "Hypothesis: The Institutional Stealth Breakout (ISB) factor identifies high-quality price trends by multiplying the magnitude of a liquidity-validated overnight gap with the 10-day linear regression R-squared of daily close prices, while penalizing high intraday volatility.\n                Concise Observation: Parent 2 (RankIC=0.027) successfully captures momentum via gaps but suffers from volatility decay, while Parent 1 (RankIC=0.023) identifies stable trends but lacks a clear entry trigger.\n                Concise Justification: Combining the overnight gap (tactical trigger) with R-squared (persistence filter) ensures that the momentum is both significant at inception and orderly in execution, reducing the risk of 'pump-and-dump' reversals.\n                Concise Knowledge: If an overnight price gap is supported by high relative volume and followed by a high R-squared linear trend with low intraday dispersion, it indicates institutional accumulation rather than retail speculation.\n                concise Specification: Calculate the overnight gap ($open / $close[1] - 1) multiplied by the 10-day rolling R-squared of $close, then divide by the 5-day average of ($high - $low) / $close to normalize for volatility.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T13:53:09.652573"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1126646268963909,
        "ICIR": 0.0420610830854019,
        "1day.excess_return_without_cost.std": 0.004051589566095,
        "1day.excess_return_with_cost.annualized_return": 0.0124731560122608,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002493869676311,
        "1day.excess_return_without_cost.annualized_return": 0.0593540982962082,
        "1day.excess_return_with_cost.std": 0.004051176761841,
        "Rank IC": 0.0224972946475899,
        "IC": 0.005657134676375,
        "1day.excess_return_without_cost.max_drawdown": -0.1027964714387138,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.949591435560056,
        "1day.pa": 0.0,
        "l2.valid": 0.9964255113415672,
        "Rank ICIR": 0.1721698278239003,
        "l2.train": 0.9943750166471697,
        "1day.excess_return_with_cost.information_ratio": 0.1995752505235117,
        "1day.excess_return_with_cost.mean": 5.240821853891099e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the Institutional Stealth Breakout (ISB) hypothesis. The current iteration achieved a higher annualized return (0.059 vs 0.052) compared to the SOTA, although it showed a slight decline in Information Ratio (0.949 vs 0.972) and a deeper maximum drawdown (-0.102 vs -0.072). The IC remains very close to the SOTA (0.0056 vs 0.0057). The results suggest that while the 'Stealth' entry (overnight gap) combined with trend persistence (R-squared) is a valid alpha source, the current implementations may be introducing higher tail risk or volatility, as evidenced by the drawdown increase.",
        "hypothesis_evaluation": "The hypothesis that combining overnight gaps with price persistence (R-squared) identifies high-quality trends is supported by the improvement in annualized returns. However, the 'penalizing high intraday volatility' component (used in ISB_Factor_10D) or the 'volume validation' (ISB_Liquidity_Validated_10D) seems to increase the aggressiveness of the factor at the cost of stability. The 'Stealth' aspectentering on gaps within low-volatility regimesshows promise but needs better risk-adjustment to improve the Information Ratio and Drawdown.",
        "decision": true,
        "reason": "The current results show improved returns but higher risk. By using a 'Gap-to-Range' ratio, we normalize the entry trigger against the asset's recent volatility, preventing outsized bets on naturally volatile stocks. Extending the volatility normalization window from 5 to 20 days will provide a more stable denominator, likely reducing the Max Drawdown. Furthermore, integrating volume directly into the persistence measure (rather than as a separate multiplier) ensures that the trend is truly institutional, addressing the 'Stealth' and 'Institutional' components of the hypothesis more cohesively without increasing complexity (SL/ER)."
      }
    },
    "f61362cad2ae4bff": {
      "factor_id": "f61362cad2ae4bff",
      "factor_name": "IILV_Momentum_Stability_20D",
      "factor_expression": "(($open / DELAY($close, 1) - 1) / (TS_STD($close, 15) / (TS_MEAN($close, 15) + 1e-8) + 1e-8)) * (DELTA($close, 20) * (TS_MEAN($volume, 20) / (TS_STD($volume, 20) + 1e-8)))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(($open / DELAY($close, 1) - 1) / (TS_STD($close, 15) / (TS_MEAN($close, 15) + 1e-8) + 1e-8)) * (DELTA($close, 20) * (TS_MEAN($volume, 20) / (TS_STD($volume, 20) + 1e-8)))\" # Your output factor expression will be filled in here\n    name = \"IILV_Momentum_Stability_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies high-conviction trends by combining a volatility-normalized overnight gap with volume-stability-weighted momentum. It captures breakouts that occur from low-volatility states and are supported by steady capital flows, reducing the impact of erratic retail speculation.",
      "factor_formulation": "\\text{IILV} = \\left( \\frac{\\text{open} / \\text{delay}(\\text{close}, 1) - 1}{\\text{TS_STD}(\\text{close}, 15) / \\text{TS_MEAN}(\\text{close}, 15) + 1e-8} \\right) \\times \\left( (\\text{close} - \\text{delay}(\\text{close}, 20)) \\times \\frac{\\text{TS_MEAN}(\\text{volume}, 20)}{\\text{TS_STD}(\\text{volume}, 20) + 1e-8} \\right)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 10,
        "evolution_phase": "crossover",
        "trajectory_id": "f5c2f570cbf7",
        "parent_trajectory_ids": [
          "7695cdd33a33",
          "15343411702f"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Inertia & Liquidity Vacuum' (IILV) factor identifies high-conviction trends by multiplying the 1-day overnight price gap (normalized by 15-day volatility compression) with the 20-day volume-stability-weighted momentum, capturing breakouts that possess both immediate institutional entry and structural capital persistence.\n                Concise Observation: Parent 1 showed that volume-volatility-adjusted momentum (RankIC 0.0249) captures trend sustainability, while Parent 2 showed that volatility-compressed breakouts (RankIC 0.0287) provide strong entry signals; however, individual signals often suffer from false breakouts or decaying momentum.\n                Concise Justification: Combining short-term overnight gaps with medium-term inertial persistence filters out 'noisy' breakouts; scaling the signal by the inverse of volume volatility ensures that only breakouts supported by steady, non-erratic capital flows are prioritized.\n                Concise Knowledge: If a price breakout occurs from a low-volatility state (volatility compression) and is accompanied by high volume stability (low volume variance relative to its mean), the resulting trend is more likely to persist due to institutional accumulation rather than retail speculation.\n                concise Specification: The factor is defined as: [($open / $close.shift(1) - 1) / (std($close, 15) / mean($close, 15))] * [mean($close - $close.shift(20), 1) * (mean($volume, 20) / (std($volume, 20) + 1e-6))]. This integrates a 15-day volatility compression ratio, a 1-day gap, and a 20-day volume-weighted momentum.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T12:40:01.110042"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1416466447967556,
        "ICIR": 0.0480657888890976,
        "1day.excess_return_without_cost.std": 0.0043733217550421,
        "1day.excess_return_with_cost.annualized_return": 0.0015565608927098,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002041011487076,
        "1day.excess_return_without_cost.annualized_return": 0.0485760733924271,
        "1day.excess_return_with_cost.std": 0.0043753569601605,
        "Rank IC": 0.0224019762465862,
        "IC": 0.0061841072725354,
        "1day.excess_return_without_cost.max_drawdown": -0.1106947286823017,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7199834224914314,
        "1day.pa": 0.0,
        "l2.valid": 0.9963663934296204,
        "Rank ICIR": 0.1787582628102196,
        "l2.train": 0.9933531259128724,
        "1day.excess_return_with_cost.information_ratio": 0.0230602571579243,
        "1day.excess_return_with_cost.mean": 6.54017181810842e-06
      },
      "feedback": {
        "observations": "The current iteration focused on the 'Institutional Inertia & Liquidity Vacuum' (IILV) hypothesis, testing three variations: a multiplicative raw-value factor, a dual-rank version, and an additive Z-score version. The results show a significant improvement in the Information Coefficient (IC) reaching 0.006184, which is higher than the SOTA result (0.005798). However, the risk-adjusted returns (Information Ratio) and drawdown metrics (Max Drawdown) have deteriorated compared to the SOTA. Specifically, while the IC is higher, the Information Ratio dropped from 0.97 to 0.72, and the Max Drawdown increased from -0.07 to -0.11, suggesting that while the signal's predictive correlation improved, its stability and tail-risk profile worsened.",
        "hypothesis_evaluation": "The hypothesis that combining overnight gaps with volume-stability-weighted momentum identifies high-conviction trends is partially supported by the improved IC. The 'Institutional_Flow_Persistence_Factor' (additive Z-score) likely contributed to the predictive power but introduced higher volatility. The multiplicative interaction in 'IILV_Momentum_Stability_20D' might be creating extreme values that lead to higher drawdowns. The 'Liquidity Vacuum' concept (using Volume CV as a denominator) is effective for signal strength but requires better normalization to prevent outlier-driven turnover.",
        "decision": false,
        "reason": "The current multiplicative and additive models are capturing the signal but also amplifying noise, as evidenced by the higher IC but lower IR and worse drawdown. By applying a 'SQUASH' or 'RANK' transformation to the volatility-normalized gap and then multiplying it by a long-term momentum signal that is strictly filtered for low volume-variance, we can isolate the 'Inertia' without the 'Volatility' penalty. Transitioning from raw price changes to log-returns or using a more robust measure of volume stability ( like the 20-day median volume relative to its standard deviation) should improve the Information Ratio."
      }
    },
    "80525514209d9a23": {
      "factor_id": "80525514209d9a23",
      "factor_name": "Ranked_IILV_Compression_Signal",
      "factor_expression": "RANK(TS_PCTCHANGE($open, 1) / (TS_STD($return, 15) + 1e-8)) * RANK(DELTA($close, 20) / (TS_STD($volume, 20) / (TS_MEAN($volume, 20) + 1e-8) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(($open / DELAY($close, 1) - 1) / (TS_STD(TS_PCTCHANGE($close, 1), 15) + 1e-8)) * RANK(DELTA($close, 20) / (TS_STD($volume, 20) / (TS_MEAN($volume, 20) + 1e-8) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Ranked_IILV_Compression_Signal\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A cross-sectionally robust version of the Institutional Inertia factor. It uses RANK to normalize the overnight gap relative to volatility compression and multiplies it by the volume-stability-adjusted price change over 20 days to isolate institutional accumulation patterns.",
      "factor_formulation": "\\text{Ranked_IILV} = \\text{RANK}\\left(\\frac{\\text{TS_PCTCHANGE}(\\text{open}, 1)}{\\text{TS_STD}(\\text{return}, 15) + 1e-8}\\right) \\times \\text{RANK}\\left(\\frac{\\text{DELTA}(\\text{close}, 20)}{\\text{TS_STD}(\\text{volume}, 20) / \\text{TS_MEAN}(\\text{volume}, 20) + 1e-8}\\right)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 10,
        "evolution_phase": "crossover",
        "trajectory_id": "f5c2f570cbf7",
        "parent_trajectory_ids": [
          "7695cdd33a33",
          "15343411702f"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Inertia & Liquidity Vacuum' (IILV) factor identifies high-conviction trends by multiplying the 1-day overnight price gap (normalized by 15-day volatility compression) with the 20-day volume-stability-weighted momentum, capturing breakouts that possess both immediate institutional entry and structural capital persistence.\n                Concise Observation: Parent 1 showed that volume-volatility-adjusted momentum (RankIC 0.0249) captures trend sustainability, while Parent 2 showed that volatility-compressed breakouts (RankIC 0.0287) provide strong entry signals; however, individual signals often suffer from false breakouts or decaying momentum.\n                Concise Justification: Combining short-term overnight gaps with medium-term inertial persistence filters out 'noisy' breakouts; scaling the signal by the inverse of volume volatility ensures that only breakouts supported by steady, non-erratic capital flows are prioritized.\n                Concise Knowledge: If a price breakout occurs from a low-volatility state (volatility compression) and is accompanied by high volume stability (low volume variance relative to its mean), the resulting trend is more likely to persist due to institutional accumulation rather than retail speculation.\n                concise Specification: The factor is defined as: [($open / $close.shift(1) - 1) / (std($close, 15) / mean($close, 15))] * [mean($close - $close.shift(20), 1) * (mean($volume, 20) / (std($volume, 20) + 1e-6))]. This integrates a 15-day volatility compression ratio, a 1-day gap, and a 20-day volume-weighted momentum.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T12:40:01.110042"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1416466447967556,
        "ICIR": 0.0480657888890976,
        "1day.excess_return_without_cost.std": 0.0043733217550421,
        "1day.excess_return_with_cost.annualized_return": 0.0015565608927098,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002041011487076,
        "1day.excess_return_without_cost.annualized_return": 0.0485760733924271,
        "1day.excess_return_with_cost.std": 0.0043753569601605,
        "Rank IC": 0.0224019762465862,
        "IC": 0.0061841072725354,
        "1day.excess_return_without_cost.max_drawdown": -0.1106947286823017,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7199834224914314,
        "1day.pa": 0.0,
        "l2.valid": 0.9963663934296204,
        "Rank ICIR": 0.1787582628102196,
        "l2.train": 0.9933531259128724,
        "1day.excess_return_with_cost.information_ratio": 0.0230602571579243,
        "1day.excess_return_with_cost.mean": 6.54017181810842e-06
      },
      "feedback": {
        "observations": "The current iteration focused on the 'Institutional Inertia & Liquidity Vacuum' (IILV) hypothesis, testing three variations: a multiplicative raw-value factor, a dual-rank version, and an additive Z-score version. The results show a significant improvement in the Information Coefficient (IC) reaching 0.006184, which is higher than the SOTA result (0.005798). However, the risk-adjusted returns (Information Ratio) and drawdown metrics (Max Drawdown) have deteriorated compared to the SOTA. Specifically, while the IC is higher, the Information Ratio dropped from 0.97 to 0.72, and the Max Drawdown increased from -0.07 to -0.11, suggesting that while the signal's predictive correlation improved, its stability and tail-risk profile worsened.",
        "hypothesis_evaluation": "The hypothesis that combining overnight gaps with volume-stability-weighted momentum identifies high-conviction trends is partially supported by the improved IC. The 'Institutional_Flow_Persistence_Factor' (additive Z-score) likely contributed to the predictive power but introduced higher volatility. The multiplicative interaction in 'IILV_Momentum_Stability_20D' might be creating extreme values that lead to higher drawdowns. The 'Liquidity Vacuum' concept (using Volume CV as a denominator) is effective for signal strength but requires better normalization to prevent outlier-driven turnover.",
        "decision": false,
        "reason": "The current multiplicative and additive models are capturing the signal but also amplifying noise, as evidenced by the higher IC but lower IR and worse drawdown. By applying a 'SQUASH' or 'RANK' transformation to the volatility-normalized gap and then multiplying it by a long-term momentum signal that is strictly filtered for low volume-variance, we can isolate the 'Inertia' without the 'Volatility' penalty. Transitioning from raw price changes to log-returns or using a more robust measure of volume stability ( like the 20-day median volume relative to its standard deviation) should improve the Information Ratio."
      }
    },
    "f1cd5e9260bbf254": {
      "factor_id": "f1cd5e9260bbf254",
      "factor_name": "Institutional_Flow_Persistence_Factor",
      "factor_expression": "ZSCORE(DELTA($close, 20) / (TS_STD($volume, 20) / (TS_MEAN($volume, 20) + 1e-8) + 1e-8)) + ZSCORE($open / DELAY($close, 1) - 1)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"ZSCORE(DELTA($close, 20) / (TS_STD($volume, 20) / (TS_MEAN($volume, 20) + 1e-8) + 1e-8)) + ZSCORE($open / DELAY($close, 1) - 1)\" # Your output factor expression will be filled in here\n    name = \"Institutional_Flow_Persistence_Factor\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor focuses on the 'Liquidity Vacuum' aspect by measuring the 20-day price trend scaled by the inverse of volume volatility (Volume CV), further filtered by the 1-day gap magnitude to ensure the trend is initiated by a strong entry signal.",
      "factor_formulation": "\\text{IFP} = \\text{ZSCORE}\\left( \\frac{\\text{DELTA}(\\text{close}, 20)}{\\text{TS_STD}(\\text{volume}, 20) / \\text{TS_MEAN}(\\text{volume}, 20) + 1e-8} \\right) + \\text{ZSCORE}(\\text{open} / \\text{delay}(\\text{close}, 1) - 1)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 10,
        "evolution_phase": "crossover",
        "trajectory_id": "f5c2f570cbf7",
        "parent_trajectory_ids": [
          "7695cdd33a33",
          "15343411702f"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Inertia & Liquidity Vacuum' (IILV) factor identifies high-conviction trends by multiplying the 1-day overnight price gap (normalized by 15-day volatility compression) with the 20-day volume-stability-weighted momentum, capturing breakouts that possess both immediate institutional entry and structural capital persistence.\n                Concise Observation: Parent 1 showed that volume-volatility-adjusted momentum (RankIC 0.0249) captures trend sustainability, while Parent 2 showed that volatility-compressed breakouts (RankIC 0.0287) provide strong entry signals; however, individual signals often suffer from false breakouts or decaying momentum.\n                Concise Justification: Combining short-term overnight gaps with medium-term inertial persistence filters out 'noisy' breakouts; scaling the signal by the inverse of volume volatility ensures that only breakouts supported by steady, non-erratic capital flows are prioritized.\n                Concise Knowledge: If a price breakout occurs from a low-volatility state (volatility compression) and is accompanied by high volume stability (low volume variance relative to its mean), the resulting trend is more likely to persist due to institutional accumulation rather than retail speculation.\n                concise Specification: The factor is defined as: [($open / $close.shift(1) - 1) / (std($close, 15) / mean($close, 15))] * [mean($close - $close.shift(20), 1) * (mean($volume, 20) / (std($volume, 20) + 1e-6))]. This integrates a 15-day volatility compression ratio, a 1-day gap, and a 20-day volume-weighted momentum.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T12:40:01.110042"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1416466447967556,
        "ICIR": 0.0480657888890976,
        "1day.excess_return_without_cost.std": 0.0043733217550421,
        "1day.excess_return_with_cost.annualized_return": 0.0015565608927098,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002041011487076,
        "1day.excess_return_without_cost.annualized_return": 0.0485760733924271,
        "1day.excess_return_with_cost.std": 0.0043753569601605,
        "Rank IC": 0.0224019762465862,
        "IC": 0.0061841072725354,
        "1day.excess_return_without_cost.max_drawdown": -0.1106947286823017,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7199834224914314,
        "1day.pa": 0.0,
        "l2.valid": 0.9963663934296204,
        "Rank ICIR": 0.1787582628102196,
        "l2.train": 0.9933531259128724,
        "1day.excess_return_with_cost.information_ratio": 0.0230602571579243,
        "1day.excess_return_with_cost.mean": 6.54017181810842e-06
      },
      "feedback": {
        "observations": "The current iteration focused on the 'Institutional Inertia & Liquidity Vacuum' (IILV) hypothesis, testing three variations: a multiplicative raw-value factor, a dual-rank version, and an additive Z-score version. The results show a significant improvement in the Information Coefficient (IC) reaching 0.006184, which is higher than the SOTA result (0.005798). However, the risk-adjusted returns (Information Ratio) and drawdown metrics (Max Drawdown) have deteriorated compared to the SOTA. Specifically, while the IC is higher, the Information Ratio dropped from 0.97 to 0.72, and the Max Drawdown increased from -0.07 to -0.11, suggesting that while the signal's predictive correlation improved, its stability and tail-risk profile worsened.",
        "hypothesis_evaluation": "The hypothesis that combining overnight gaps with volume-stability-weighted momentum identifies high-conviction trends is partially supported by the improved IC. The 'Institutional_Flow_Persistence_Factor' (additive Z-score) likely contributed to the predictive power but introduced higher volatility. The multiplicative interaction in 'IILV_Momentum_Stability_20D' might be creating extreme values that lead to higher drawdowns. The 'Liquidity Vacuum' concept (using Volume CV as a denominator) is effective for signal strength but requires better normalization to prevent outlier-driven turnover.",
        "decision": false,
        "reason": "The current multiplicative and additive models are capturing the signal but also amplifying noise, as evidenced by the higher IC but lower IR and worse drawdown. By applying a 'SQUASH' or 'RANK' transformation to the volatility-normalized gap and then multiplying it by a long-term momentum signal that is strictly filtered for low volume-variance, we can isolate the 'Inertia' without the 'Volatility' penalty. Transitioning from raw price changes to log-returns or using a more robust measure of volume stability ( like the 20-day median volume relative to its standard deviation) should improve the Information Ratio."
      }
    },
    "8b39ce1839ed04c0": {
      "factor_id": "8b39ce1839ed04c0",
      "factor_name": "Late_Day_Exhaustion_Intensity",
      "factor_expression": "(($close - $low) / ($high - $low + 1e-8)) * ($volume / (TS_MEAN($volume, 5) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(($close - $low) / ($high - $low + 1e-8)) * ($volume / (TS_MEAN($volume, 5) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Late_Day_Exhaustion_Intensity\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor captures price exhaustion by multiplying the closing range position (where the price closes relative to its daily high/low) by the volume intensity relative to its 5-day average. A high value suggests a strong, volume-supported close, while a divergence (high price position with low volume intensity) indicates a potential blow-off top or mean reversion signal.",
      "factor_formulation": "\\text{Exhaustion} = \\frac{$close - $low}{$high - $low + 1e-8} \\times \\frac{$volume}{\\text{TS_MEAN}($volume, 5)}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 7,
        "evolution_phase": "mutation",
        "trajectory_id": "ccff6ed7caa8",
        "parent_trajectory_ids": [
          "043474954dbc"
        ],
        "hypothesis": "Hypothesis: The 'Late-Day Trend Exhaustion' factor, defined as the ratio of the closing price relative to the daily range (Close-Low)/(High-Low) adjusted by the ratio of daily volume to its 5-day moving average, predicts next-day mean reversion when high price extremes occur on thinning relative volume.\n                Concise Observation: The parent strategy focused on institutional floors via lower shadows and volume stability, but failed to capture the 'blow-off' or 'exhaustion' phase where price continues to move while volume participation drops.\n                Concise Justification: Price discovery requires volume validation; a high 'Closing Range' score (price near high) coupled with low 'Volume Intensity' suggests liquidity exhaustion rather than a sustainable breakout, making the asset prone to a reversal.\n                Concise Knowledge: If a price reaches its daily extreme on declining relative volume, it indicates a lack of institutional follow-through; when retail-driven late-day momentum lacks volume support, market makers likely over-extend prices, leading to a mean-reverting snap-back.\n                concise Specification: Calculate the daily 'Closing Position' as ($close - $low) / ($high - $low + 1e-8) and multiply it by the 'Volume Surge' ($volume / TS_MEAN($volume, 5)); a high value indicates strong, volume-backed closes (momentum), while a low value with high price position indicates exhaustion (reversal).\n                ",
        "initial_direction": "Analyze 'Support Integrity' under stress by crossing KLOW with VSTD5: strong lower shadows accompanied by low volume volatility indicate stable accumulation at price floors.",
        "planning_direction": "Analyze 'Support Integrity' under stress by crossing KLOW with VSTD5: strong lower shadows accompanied by low volume volatility indicate stable accumulation at price floors.",
        "created_at": "2026-01-21T08:44:46.702334"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0801096653999234,
        "ICIR": 0.0323137840858001,
        "1day.excess_return_without_cost.std": 0.0038933268536367,
        "1day.excess_return_with_cost.annualized_return": 0.0224067038418408,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002916131544456,
        "1day.excess_return_without_cost.annualized_return": 0.0694039307580737,
        "1day.excess_return_with_cost.std": 0.0038951193400999,
        "Rank IC": 0.0223438865785895,
        "IC": 0.0046130019394651,
        "1day.excess_return_without_cost.max_drawdown": -0.0636899799289828,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.1555127025750906,
        "1day.pa": 0.0,
        "l2.valid": 0.9963781161583856,
        "Rank ICIR": 0.1589113087694215,
        "l2.train": 0.9935972769811862,
        "1day.excess_return_with_cost.information_ratio": 0.3728796885191014,
        "1day.excess_return_with_cost.mean": 9.41458144615162e-05
      },
      "feedback": {
        "observations": "The current iteration tested three variations of the 'Late-Day Trend Exhaustion' hypothesis. The results show a significant improvement in risk-adjusted performance metrics compared to the previous SOTA. Specifically, the Information Ratio increased from 0.97 to 1.15, and the Annualized Return rose from 5.2% to 6.9%. While the Information Coefficient (IC) saw a slight decrease (0.0058 to 0.0046), the reduction in Max Drawdown (-0.072 to -0.063) suggests that the current factor set captures higher-quality, lower-volatility signals. The 'Smoothed_Exhaustion_Index_10D' likely contributed to this stability by filtering out daily noise through the Z-score and 10-day window.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that combining price positioning (Close relative to High/Low) with volume intensity provides a predictive signal for mean reversion. The success of the 'Exhaustion_Reversal_Rank' and 'Smoothed_Exhaustion_Index_10D' suggests that the 'thinning volume' component is more effective when viewed as a divergence (rank difference) or a time-series anomaly (Z-score) rather than a simple product of price and volume.",
        "decision": true,
        "reason": "The current factors utilize a 5-day volume mean, but do not account for the magnitude of the price range relative to historical volatility (ATR). By incorporating a 'Volatility-Adjusted Range' and checking if the current volume is not just low, but declining over multiple days (negative volume slope), we can better isolate 'blow-off' exhaustion from simple low-liquidity consolidation. This addresses the 'thinning' aspect more dynamically."
      }
    },
    "81113f66dc600f67": {
      "factor_id": "81113f66dc600f67",
      "factor_name": "Exhaustion_Reversal_Rank",
      "factor_expression": "RANK(($close - $low) / ($high - $low + 1e-8)) - RANK($volume / (TS_MEAN($volume, 5) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(($close - $low) / ($high - $low + 1e-8)) - RANK($volume / (TS_MEAN($volume, 5) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Exhaustion_Reversal_Rank\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies potential reversal points by looking for instances where the closing price is near the high of the day but volume is significantly lower than the recent average. It applies a cross-sectional rank to the exhaustion signal to identify the most overextended assets relative to the market.",
      "factor_formulation": "\\text{Exhaustion\\_Rank} = \\text{RANK}\\left(\\frac{$close - $low}{$high - $low + 1e-8}\\right) - \\text{RANK}\\left(\\frac{$volume}{\\text{TS_MEAN}($volume, 5)}\\right)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 7,
        "evolution_phase": "mutation",
        "trajectory_id": "ccff6ed7caa8",
        "parent_trajectory_ids": [
          "043474954dbc"
        ],
        "hypothesis": "Hypothesis: The 'Late-Day Trend Exhaustion' factor, defined as the ratio of the closing price relative to the daily range (Close-Low)/(High-Low) adjusted by the ratio of daily volume to its 5-day moving average, predicts next-day mean reversion when high price extremes occur on thinning relative volume.\n                Concise Observation: The parent strategy focused on institutional floors via lower shadows and volume stability, but failed to capture the 'blow-off' or 'exhaustion' phase where price continues to move while volume participation drops.\n                Concise Justification: Price discovery requires volume validation; a high 'Closing Range' score (price near high) coupled with low 'Volume Intensity' suggests liquidity exhaustion rather than a sustainable breakout, making the asset prone to a reversal.\n                Concise Knowledge: If a price reaches its daily extreme on declining relative volume, it indicates a lack of institutional follow-through; when retail-driven late-day momentum lacks volume support, market makers likely over-extend prices, leading to a mean-reverting snap-back.\n                concise Specification: Calculate the daily 'Closing Position' as ($close - $low) / ($high - $low + 1e-8) and multiply it by the 'Volume Surge' ($volume / TS_MEAN($volume, 5)); a high value indicates strong, volume-backed closes (momentum), while a low value with high price position indicates exhaustion (reversal).\n                ",
        "initial_direction": "Analyze 'Support Integrity' under stress by crossing KLOW with VSTD5: strong lower shadows accompanied by low volume volatility indicate stable accumulation at price floors.",
        "planning_direction": "Analyze 'Support Integrity' under stress by crossing KLOW with VSTD5: strong lower shadows accompanied by low volume volatility indicate stable accumulation at price floors.",
        "created_at": "2026-01-21T08:44:46.702334"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0801096653999234,
        "ICIR": 0.0323137840858001,
        "1day.excess_return_without_cost.std": 0.0038933268536367,
        "1day.excess_return_with_cost.annualized_return": 0.0224067038418408,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002916131544456,
        "1day.excess_return_without_cost.annualized_return": 0.0694039307580737,
        "1day.excess_return_with_cost.std": 0.0038951193400999,
        "Rank IC": 0.0223438865785895,
        "IC": 0.0046130019394651,
        "1day.excess_return_without_cost.max_drawdown": -0.0636899799289828,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.1555127025750906,
        "1day.pa": 0.0,
        "l2.valid": 0.9963781161583856,
        "Rank ICIR": 0.1589113087694215,
        "l2.train": 0.9935972769811862,
        "1day.excess_return_with_cost.information_ratio": 0.3728796885191014,
        "1day.excess_return_with_cost.mean": 9.41458144615162e-05
      },
      "feedback": {
        "observations": "The current iteration tested three variations of the 'Late-Day Trend Exhaustion' hypothesis. The results show a significant improvement in risk-adjusted performance metrics compared to the previous SOTA. Specifically, the Information Ratio increased from 0.97 to 1.15, and the Annualized Return rose from 5.2% to 6.9%. While the Information Coefficient (IC) saw a slight decrease (0.0058 to 0.0046), the reduction in Max Drawdown (-0.072 to -0.063) suggests that the current factor set captures higher-quality, lower-volatility signals. The 'Smoothed_Exhaustion_Index_10D' likely contributed to this stability by filtering out daily noise through the Z-score and 10-day window.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that combining price positioning (Close relative to High/Low) with volume intensity provides a predictive signal for mean reversion. The success of the 'Exhaustion_Reversal_Rank' and 'Smoothed_Exhaustion_Index_10D' suggests that the 'thinning volume' component is more effective when viewed as a divergence (rank difference) or a time-series anomaly (Z-score) rather than a simple product of price and volume.",
        "decision": true,
        "reason": "The current factors utilize a 5-day volume mean, but do not account for the magnitude of the price range relative to historical volatility (ATR). By incorporating a 'Volatility-Adjusted Range' and checking if the current volume is not just low, but declining over multiple days (negative volume slope), we can better isolate 'blow-off' exhaustion from simple low-liquidity consolidation. This addresses the 'thinning' aspect more dynamically."
      }
    },
    "11042c7817360441": {
      "factor_id": "11042c7817360441",
      "factor_name": "Smoothed_Exhaustion_Index_10D",
      "factor_expression": "TS_ZSCORE((($close - $low) / ($high - $low + 1e-8)) / (($volume / (TS_MEAN($volume, 5) + 1e-8)) + 1e-8), 10)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_ZSCORE((($close - $low) / ($high - $low + 1e-8)) / (($volume / (TS_MEAN($volume, 5) + 1e-8)) + 1e-8), 10)\" # Your output factor expression will be filled in here\n    name = \"Smoothed_Exhaustion_Index_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A smoothed version of the exhaustion index that uses a 10-day Z-score of the closing position relative to volume surges. This helps identify persistent patterns of thinning volume during price rallies, which is a stronger signal for institutional exhaustion than a single day's movement.",
      "factor_formulation": "\\text{SEI} = \\text{TS_ZSCORE}\\left(\\frac{$close - $low}{$high - $low + 1e-8} \\times \\text{INV}\\left(\\frac{$volume}{\\text{TS_MEAN}($volume, 5)}\\right), 10\\right)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 7,
        "evolution_phase": "mutation",
        "trajectory_id": "ccff6ed7caa8",
        "parent_trajectory_ids": [
          "043474954dbc"
        ],
        "hypothesis": "Hypothesis: The 'Late-Day Trend Exhaustion' factor, defined as the ratio of the closing price relative to the daily range (Close-Low)/(High-Low) adjusted by the ratio of daily volume to its 5-day moving average, predicts next-day mean reversion when high price extremes occur on thinning relative volume.\n                Concise Observation: The parent strategy focused on institutional floors via lower shadows and volume stability, but failed to capture the 'blow-off' or 'exhaustion' phase where price continues to move while volume participation drops.\n                Concise Justification: Price discovery requires volume validation; a high 'Closing Range' score (price near high) coupled with low 'Volume Intensity' suggests liquidity exhaustion rather than a sustainable breakout, making the asset prone to a reversal.\n                Concise Knowledge: If a price reaches its daily extreme on declining relative volume, it indicates a lack of institutional follow-through; when retail-driven late-day momentum lacks volume support, market makers likely over-extend prices, leading to a mean-reverting snap-back.\n                concise Specification: Calculate the daily 'Closing Position' as ($close - $low) / ($high - $low + 1e-8) and multiply it by the 'Volume Surge' ($volume / TS_MEAN($volume, 5)); a high value indicates strong, volume-backed closes (momentum), while a low value with high price position indicates exhaustion (reversal).\n                ",
        "initial_direction": "Analyze 'Support Integrity' under stress by crossing KLOW with VSTD5: strong lower shadows accompanied by low volume volatility indicate stable accumulation at price floors.",
        "planning_direction": "Analyze 'Support Integrity' under stress by crossing KLOW with VSTD5: strong lower shadows accompanied by low volume volatility indicate stable accumulation at price floors.",
        "created_at": "2026-01-21T08:44:46.702334"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0801096653999234,
        "ICIR": 0.0323137840858001,
        "1day.excess_return_without_cost.std": 0.0038933268536367,
        "1day.excess_return_with_cost.annualized_return": 0.0224067038418408,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002916131544456,
        "1day.excess_return_without_cost.annualized_return": 0.0694039307580737,
        "1day.excess_return_with_cost.std": 0.0038951193400999,
        "Rank IC": 0.0223438865785895,
        "IC": 0.0046130019394651,
        "1day.excess_return_without_cost.max_drawdown": -0.0636899799289828,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.1555127025750906,
        "1day.pa": 0.0,
        "l2.valid": 0.9963781161583856,
        "Rank ICIR": 0.1589113087694215,
        "l2.train": 0.9935972769811862,
        "1day.excess_return_with_cost.information_ratio": 0.3728796885191014,
        "1day.excess_return_with_cost.mean": 9.41458144615162e-05
      },
      "feedback": {
        "observations": "The current iteration tested three variations of the 'Late-Day Trend Exhaustion' hypothesis. The results show a significant improvement in risk-adjusted performance metrics compared to the previous SOTA. Specifically, the Information Ratio increased from 0.97 to 1.15, and the Annualized Return rose from 5.2% to 6.9%. While the Information Coefficient (IC) saw a slight decrease (0.0058 to 0.0046), the reduction in Max Drawdown (-0.072 to -0.063) suggests that the current factor set captures higher-quality, lower-volatility signals. The 'Smoothed_Exhaustion_Index_10D' likely contributed to this stability by filtering out daily noise through the Z-score and 10-day window.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that combining price positioning (Close relative to High/Low) with volume intensity provides a predictive signal for mean reversion. The success of the 'Exhaustion_Reversal_Rank' and 'Smoothed_Exhaustion_Index_10D' suggests that the 'thinning volume' component is more effective when viewed as a divergence (rank difference) or a time-series anomaly (Z-score) rather than a simple product of price and volume.",
        "decision": true,
        "reason": "The current factors utilize a 5-day volume mean, but do not account for the magnitude of the price range relative to historical volatility (ATR). By incorporating a 'Volatility-Adjusted Range' and checking if the current volume is not just low, but declining over multiple days (negative volume slope), we can better isolate 'blow-off' exhaustion from simple low-liquidity consolidation. This addresses the 'thinning' aspect more dynamically."
      }
    },
    "b409759f81e6ef4e": {
      "factor_id": "b409759f81e6ef4e",
      "factor_name": "Liquidity_Exhaustion_Reversal_60D",
      "factor_expression": "ZSCORE(TS_PCTCHANGE($close, 60) * TS_CORR($close, $volume, 20)) * (-ZSCORE(($open / ($DELAY($close, 1) + 1e-8) - 1) / (TS_MEAN($volume, 5) + 1e-8)))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"ZSCORE(TS_PCTCHANGE($close, 60) * TS_CORR($close, $volume, 60)) * (-ZSCORE(($open / DELAY($close, 1) - 1) / (TS_MEAN($volume, 5) + 1e-8)))\" # Your output factor expression will be filled in here\n    name = \"Liquidity_Exhaustion_Reversal_60D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies high-conviction reversal points by combining long-term price-volume capitulation with short-term sentiment exhaustion. Capitulation is defined by a 60-day price decline correlated with volume, while exhaustion is captured by a volume-normalized overnight gap. The factor targets assets where selling pressure has likely peaked across multiple participant scales.",
      "factor_formulation": "Capitulation = ZSCORE(TS\\_PCTCHANGE(close, 60) * TS\\_CORR(close, volume, 20)) \\\\ Exhaustion = ZSCORE((open / DELAY(close, 1) - 1) / (TS\\_MEAN(volume, 5) + 1e-8)) \\\\ Factor = Capitulation * (-Exhaustion)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 2,
        "evolution_phase": "crossover",
        "trajectory_id": "2e2ad860588f",
        "parent_trajectory_ids": [
          "ee9a7812274d",
          "ac0ab75c4337"
        ],
        "hypothesis": "Hypothesis: The 'Multi-Scale Liquidity Exhaustion Reversal' factor captures high-conviction turning points by multiplying a 60-day price-volume capitulation signal (ROC60 * Correlation(Price, Volume, 20)) with a volume-normalized overnight gap measure, identifying assets where both institutional selling and retail sentiment have reached exhaustion.\n                Concise Observation: Parent 1 (RankIC=0.0234) identifies long-term oversold conditions but lacks timing, while Parent 2 (RankIC=0.0244) captures short-term sentiment gaps; combining them addresses the 'falling knife' risk by requiring a specific tactical gap to trigger the entry.\n                Concise Justification: Long-term price-volume divergence indicates institutional capitulation, while a volume-normalized overnight gap represents retail sentiment exhaustion; their product isolates assets where liquidity-driven selling is most likely to reverse into a recovery phase.\n                Concise Knowledge: If long-term structural price declines are validated by negative price-volume correlations and then followed by a low-volume overnight gap, the probability of a mean-reversion event increases due to the exhaustion of selling pressure across multiple participant scales.\n                concise Specification: Define Capitulation as (ROC_60 * Correlation(Close, Volume, 20)); define Gap_Exhaustion as (Open / Close_prev - 1) / (SMA(Volume, 5)); the final factor is the product of the Z-scored Capitulation and the negative Z-scored Gap_Exhaustion to signal long-term oversold assets with short-term exhaustion.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T00:40:19.290573"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1247784976581043,
        "ICIR": 0.0284891380433587,
        "1day.excess_return_without_cost.std": 0.0043147995375779,
        "1day.excess_return_with_cost.annualized_return": 0.0001693268239725,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001999104870992,
        "1day.excess_return_without_cost.annualized_return": 0.0475786959296192,
        "1day.excess_return_with_cost.std": 0.0043145102068784,
        "Rank IC": 0.0223170990384345,
        "IC": 0.0039465506394682,
        "1day.excess_return_without_cost.max_drawdown": -0.1100803283902266,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.71476525374449,
        "1day.pa": 0.0,
        "l2.valid": 0.9966159004264684,
        "Rank ICIR": 0.1633604956068002,
        "l2.train": 0.9939830035527862,
        "1day.excess_return_with_cost.information_ratio": 0.002543933668793,
        "1day.excess_return_with_cost.mean": 7.114572435823057e-07
      },
      "feedback": {
        "observations": "The current iteration explored three variations of the 'Liquidity Exhaustion' hypothesis. While the factors successfully implemented the logic of combining long-term price-volume correlation with short-term gap signals, the overall performance (IC: 0.0039, IR: 0.71) failed to surpass the current SOTA (IC: 0.0058, IR: 0.97). The 'Liquidity_Exhaustion_Reversal_60D' factor used a multiplicative approach with Z-scores, which may have introduced noise due to the compounding of outliers. The 'Structural_Capitulation_Timing_Factor' utilized ranks to handle outliers but likely lost signal intensity. The 'Retail_Institutional_Exhaustion_Index' focused on volume volatility but might have missed the directional 'capitulation' aspect by using absolute values of the gap.",
        "hypothesis_evaluation": "The hypothesis that multiplying long-term capitulation with short-term exhaustion identifies high-conviction turning points is partially supported by the positive IC, but the implementation is currently too noisy. The use of volume as a denominator in 'Exhaustion' (volume-normalized gap) shows promise but needs a more robust normalization method than simple volume or volume standard deviation, as extreme low-volume days can create artificial signal spikes.",
        "decision": false,
        "reason": "1. Complexity Control: The current factors used up to 5-6 base features; the new approach will simplify the interaction by using price volatility as the primary normalizer for gaps rather than raw volume. 2. Robustness: Replacing the product of Z-scores with a conditional logic or a more stable 'Relative Volume' multiplier will reduce the impact of extreme outliers. 3. Theoretical Alignment: True exhaustion occurs when price moves sharply on high relative volume, suggesting a climax; the current factors may be capturing low-liquidity noise instead of high-conviction exhaustion."
      }
    },
    "242807086d6f1e45": {
      "factor_id": "242807086d6f1e45",
      "factor_name": "Structural_Capitulation_Timing_Factor",
      "factor_expression": "RANK(TS_PCTCHANGE($close, 60) * TS_CORR($close, $volume, 20)) + RANK(-($open - $DELAY($close, 1)) / (TS_MEAN($volume, 10) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(TS_PCTCHANGE($close, 60) * TS_CORR($close, $volume, 20)) + RANK(-($open - DELAY($close, 1)) / (TS_MEAN($volume, 10) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Structural_Capitulation_Timing_Factor\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A simplified version of the liquidity exhaustion hypothesis focusing on the interaction between long-term structural decline and short-term liquidity shocks. It uses the rank of price-volume divergence multiplied by the rank of the overnight gap relative to recent volume to isolate stocks with the highest probability of a mean-reversion event.",
      "factor_formulation": "Factor = RANK(TS\\_PCTCHANGE(close, 60) * TS\\_CORR(close, volume, 20)) + RANK(-(open - DELAY(close, 1)) / (TS\\_MEAN(volume, 10) + 1e-8))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 2,
        "evolution_phase": "crossover",
        "trajectory_id": "2e2ad860588f",
        "parent_trajectory_ids": [
          "ee9a7812274d",
          "ac0ab75c4337"
        ],
        "hypothesis": "Hypothesis: The 'Multi-Scale Liquidity Exhaustion Reversal' factor captures high-conviction turning points by multiplying a 60-day price-volume capitulation signal (ROC60 * Correlation(Price, Volume, 20)) with a volume-normalized overnight gap measure, identifying assets where both institutional selling and retail sentiment have reached exhaustion.\n                Concise Observation: Parent 1 (RankIC=0.0234) identifies long-term oversold conditions but lacks timing, while Parent 2 (RankIC=0.0244) captures short-term sentiment gaps; combining them addresses the 'falling knife' risk by requiring a specific tactical gap to trigger the entry.\n                Concise Justification: Long-term price-volume divergence indicates institutional capitulation, while a volume-normalized overnight gap represents retail sentiment exhaustion; their product isolates assets where liquidity-driven selling is most likely to reverse into a recovery phase.\n                Concise Knowledge: If long-term structural price declines are validated by negative price-volume correlations and then followed by a low-volume overnight gap, the probability of a mean-reversion event increases due to the exhaustion of selling pressure across multiple participant scales.\n                concise Specification: Define Capitulation as (ROC_60 * Correlation(Close, Volume, 20)); define Gap_Exhaustion as (Open / Close_prev - 1) / (SMA(Volume, 5)); the final factor is the product of the Z-scored Capitulation and the negative Z-scored Gap_Exhaustion to signal long-term oversold assets with short-term exhaustion.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T00:40:19.290573"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1247784976581043,
        "ICIR": 0.0284891380433587,
        "1day.excess_return_without_cost.std": 0.0043147995375779,
        "1day.excess_return_with_cost.annualized_return": 0.0001693268239725,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001999104870992,
        "1day.excess_return_without_cost.annualized_return": 0.0475786959296192,
        "1day.excess_return_with_cost.std": 0.0043145102068784,
        "Rank IC": 0.0223170990384345,
        "IC": 0.0039465506394682,
        "1day.excess_return_without_cost.max_drawdown": -0.1100803283902266,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.71476525374449,
        "1day.pa": 0.0,
        "l2.valid": 0.9966159004264684,
        "Rank ICIR": 0.1633604956068002,
        "l2.train": 0.9939830035527862,
        "1day.excess_return_with_cost.information_ratio": 0.002543933668793,
        "1day.excess_return_with_cost.mean": 7.114572435823057e-07
      },
      "feedback": {
        "observations": "The current iteration explored three variations of the 'Liquidity Exhaustion' hypothesis. While the factors successfully implemented the logic of combining long-term price-volume correlation with short-term gap signals, the overall performance (IC: 0.0039, IR: 0.71) failed to surpass the current SOTA (IC: 0.0058, IR: 0.97). The 'Liquidity_Exhaustion_Reversal_60D' factor used a multiplicative approach with Z-scores, which may have introduced noise due to the compounding of outliers. The 'Structural_Capitulation_Timing_Factor' utilized ranks to handle outliers but likely lost signal intensity. The 'Retail_Institutional_Exhaustion_Index' focused on volume volatility but might have missed the directional 'capitulation' aspect by using absolute values of the gap.",
        "hypothesis_evaluation": "The hypothesis that multiplying long-term capitulation with short-term exhaustion identifies high-conviction turning points is partially supported by the positive IC, but the implementation is currently too noisy. The use of volume as a denominator in 'Exhaustion' (volume-normalized gap) shows promise but needs a more robust normalization method than simple volume or volume standard deviation, as extreme low-volume days can create artificial signal spikes.",
        "decision": false,
        "reason": "1. Complexity Control: The current factors used up to 5-6 base features; the new approach will simplify the interaction by using price volatility as the primary normalizer for gaps rather than raw volume. 2. Robustness: Replacing the product of Z-scores with a conditional logic or a more stable 'Relative Volume' multiplier will reduce the impact of extreme outliers. 3. Theoretical Alignment: True exhaustion occurs when price moves sharply on high relative volume, suggesting a climax; the current factors may be capturing low-liquidity noise instead of high-conviction exhaustion."
      }
    },
    "4faa6182086b5ca2": {
      "factor_id": "4faa6182086b5ca2",
      "factor_name": "Retail_Institutional_Exhaustion_Index",
      "factor_expression": "ZSCORE(TS_CORR($close, $volume, 20)) * ZSCORE(ABS($open - $DELAY($close, 1)) / (TS_STD($volume, 20) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"ZSCORE(TS_CORR($close, $volume, 20)) * ZSCORE(ABS($open - DELAY($close, 1)) / (TS_STD($volume, 20) + 0.00000001))\" # Your output factor expression will be filled in here\n    name = \"Retail_Institutional_Exhaustion_Index\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor captures the divergence between institutional selling (long-term price-volume trend) and retail panic (short-term gap volatility). By normalizing the overnight gap with the 20-day volume standard deviation, it identifies where price gaps are disproportionately large relative to recent liquidity, signaling a climax in selling pressure.",
      "factor_formulation": "Factor = ZSCORE(TS\\_CORR(close, volume, 20)) * ZSCORE(ABS(open - DELAY(close, 1)) / (TS\\_STD(volume, 20) + 1e-8))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 2,
        "evolution_phase": "crossover",
        "trajectory_id": "2e2ad860588f",
        "parent_trajectory_ids": [
          "ee9a7812274d",
          "ac0ab75c4337"
        ],
        "hypothesis": "Hypothesis: The 'Multi-Scale Liquidity Exhaustion Reversal' factor captures high-conviction turning points by multiplying a 60-day price-volume capitulation signal (ROC60 * Correlation(Price, Volume, 20)) with a volume-normalized overnight gap measure, identifying assets where both institutional selling and retail sentiment have reached exhaustion.\n                Concise Observation: Parent 1 (RankIC=0.0234) identifies long-term oversold conditions but lacks timing, while Parent 2 (RankIC=0.0244) captures short-term sentiment gaps; combining them addresses the 'falling knife' risk by requiring a specific tactical gap to trigger the entry.\n                Concise Justification: Long-term price-volume divergence indicates institutional capitulation, while a volume-normalized overnight gap represents retail sentiment exhaustion; their product isolates assets where liquidity-driven selling is most likely to reverse into a recovery phase.\n                Concise Knowledge: If long-term structural price declines are validated by negative price-volume correlations and then followed by a low-volume overnight gap, the probability of a mean-reversion event increases due to the exhaustion of selling pressure across multiple participant scales.\n                concise Specification: Define Capitulation as (ROC_60 * Correlation(Close, Volume, 20)); define Gap_Exhaustion as (Open / Close_prev - 1) / (SMA(Volume, 5)); the final factor is the product of the Z-scored Capitulation and the negative Z-scored Gap_Exhaustion to signal long-term oversold assets with short-term exhaustion.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T00:40:19.290573"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1247784976581043,
        "ICIR": 0.0284891380433587,
        "1day.excess_return_without_cost.std": 0.0043147995375779,
        "1day.excess_return_with_cost.annualized_return": 0.0001693268239725,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001999104870992,
        "1day.excess_return_without_cost.annualized_return": 0.0475786959296192,
        "1day.excess_return_with_cost.std": 0.0043145102068784,
        "Rank IC": 0.0223170990384345,
        "IC": 0.0039465506394682,
        "1day.excess_return_without_cost.max_drawdown": -0.1100803283902266,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.71476525374449,
        "1day.pa": 0.0,
        "l2.valid": 0.9966159004264684,
        "Rank ICIR": 0.1633604956068002,
        "l2.train": 0.9939830035527862,
        "1day.excess_return_with_cost.information_ratio": 0.002543933668793,
        "1day.excess_return_with_cost.mean": 7.114572435823057e-07
      },
      "feedback": {
        "observations": "The current iteration explored three variations of the 'Liquidity Exhaustion' hypothesis. While the factors successfully implemented the logic of combining long-term price-volume correlation with short-term gap signals, the overall performance (IC: 0.0039, IR: 0.71) failed to surpass the current SOTA (IC: 0.0058, IR: 0.97). The 'Liquidity_Exhaustion_Reversal_60D' factor used a multiplicative approach with Z-scores, which may have introduced noise due to the compounding of outliers. The 'Structural_Capitulation_Timing_Factor' utilized ranks to handle outliers but likely lost signal intensity. The 'Retail_Institutional_Exhaustion_Index' focused on volume volatility but might have missed the directional 'capitulation' aspect by using absolute values of the gap.",
        "hypothesis_evaluation": "The hypothesis that multiplying long-term capitulation with short-term exhaustion identifies high-conviction turning points is partially supported by the positive IC, but the implementation is currently too noisy. The use of volume as a denominator in 'Exhaustion' (volume-normalized gap) shows promise but needs a more robust normalization method than simple volume or volume standard deviation, as extreme low-volume days can create artificial signal spikes.",
        "decision": false,
        "reason": "1. Complexity Control: The current factors used up to 5-6 base features; the new approach will simplify the interaction by using price volatility as the primary normalizer for gaps rather than raw volume. 2. Robustness: Replacing the product of Z-scores with a conditional logic or a more stable 'Relative Volume' multiplier will reduce the impact of extreme outliers. 3. Theoretical Alignment: True exhaustion occurs when price moves sharply on high relative volume, suggesting a climax; the current factors may be capturing low-liquidity noise instead of high-conviction exhaustion."
      }
    },
    "3af9a14e98e89f30": {
      "factor_id": "3af9a14e98e89f30",
      "factor_name": "Liquidity_Validated_Resonance_5D",
      "factor_expression": "(($high - $low) / $close * TS_MEAN($volume, 5)) / (ABS($open - DELAY($close, 1)) / TS_MEAN($volume, 5) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(($high - $low) / $close * TS_MEAN($volume, 5)) / (ABS($open - DELAY($close, 1)) / TS_MEAN($volume, 5) + 1e-8)\" # Your output factor expression will be filled in here\n    name = \"Liquidity_Validated_Resonance_5D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor calculates the ratio of intraday price-volume resonance to the volume-normalized overnight gap. It identifies institutional conviction by rewarding price discovery occurring during high-volume intraday trading while penalizing gaps that occur on low relative liquidity, which often signal sentiment exhaustion.",
      "factor_formulation": "LVR_\\text{5D} = \\frac{((\\text{high} - \\text{low}) / \\text{close}) \\times \\text{TS_MEAN}(\\text{volume}, 5)}{\\text{ABS}(\\text{open} - \\text{DELAY}(\\text{close}, 1)) / \\text{TS_MEAN}(\\text{volume}, 5)}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 2,
        "evolution_phase": "crossover",
        "trajectory_id": "35b14ca72a83",
        "parent_trajectory_ids": [
          "40b954f98281",
          "ac0ab75c4337"
        ],
        "hypothesis": "Hypothesis: The 'Liquidity-Validated Volatility Resonance' factor, calculated as the ratio of the 5-day Intraday Range-Volume Resonance to the 5-day Volume-Normalized Overnight Gap, positively predicts future returns by identifying institutional conviction while filtering out overnight sentiment exhaustion.\n                Concise Observation: Parent 1 captures trend strength via intraday range and volume (RankIC 0.0240), while Parent 2 identifies mean-reversion from overnight gaps (RankIC 0.0244); combining them addresses the failure of trend signals during liquidity-driven exhaustion phases.\n                Concise Justification: By dividing the intraday resonance (KLEN * WVMA) by the normalized gap, we amplify signals where price discovery is supported by continuous trading volume and penalize stocks where the price jump occurred in a low-liquidity overnight environment.\n                Concise Knowledge: If intraday price-volume resonance is high and the overnight gap is small relative to historical volume, then the price move is likely driven by institutional conviction; conversely, if a large overnight gap occurs on low volume, it represents sentiment exhaustion and mean-reversion risk.\n                concise Specification: The factor is defined as ((High - Low) / Close * SMA(Volume, 5)) / (abs(Open - Prev_Close) / SMA(Volume, 5)). All components use a 5-day lookback period to ensure temporal alignment between the volatility and liquidity metrics.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T00:19:43.778999"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1127947224378989,
        "ICIR": 0.0394922326806911,
        "1day.excess_return_without_cost.std": 0.0039921219556271,
        "1day.excess_return_with_cost.annualized_return": -0.0082360315181751,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.000162302941731,
        "1day.excess_return_without_cost.annualized_return": 0.0386281001319865,
        "1day.excess_return_with_cost.std": 0.0039940985561356,
        "Rank IC": 0.0222599888069993,
        "IC": 0.0055118617922671,
        "1day.excess_return_without_cost.max_drawdown": -0.0917397977637186,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.6272072501193354,
        "1day.pa": 0.0,
        "l2.valid": 0.9964019623273406,
        "Rank ICIR": 0.1633104610682,
        "l2.train": 0.9939345022610504,
        "1day.excess_return_with_cost.information_ratio": -0.1336628583982484,
        "1day.excess_return_with_cost.mean": -3.4605174446114094e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Liquidity-Validated Volatility Resonance' hypothesis. While all three factors were successfully implemented, the collective performance (IC: 0.0055, IR: 0.627) failed to surpass the current SOTA (IC: 0.0058, IR: 0.972). The 'Liquidity_Validated_Resonance_5D' and its variants aimed to capture institutional conviction by scaling intraday range by volume and penalizing overnight gaps. However, the current formulations appear to have higher drawdown (-0.0917 vs -0.0725) and lower risk-adjusted returns than the SOTA, suggesting that the interaction between volume and the overnight gap might be too noisy or improperly scaled in the current linear ratio format.",
        "hypothesis_evaluation": "The hypothesis that the ratio of intraday resonance to overnight gaps predicts returns is partially supported by the positive IC, but the current mathematical implementation is suboptimal. The use of 'TS_MEAN(volume, 5)' in both the numerator and denominator of the first factor (LVR_5D) essentially cancels out the volume effect, reducing it to a price-only ratio of (Intraday Range / Overnight Gap). This negates the 'Liquidity-Validated' aspect of the hypothesis. Furthermore, the high drawdown suggests that the factor may be sensitive to extreme price gaps that do not necessarily represent sentiment exhaustion.",
        "decision": false,
        "reason": "To improve upon the current results, we need to address the 'volume cancellation' issue. Instead of a simple ratio of means, we should calculate a daily 'Intensity' score and then average it. By using (Intraday Range / (Overnight Gap + Average True Range)) weighted by (Daily Volume / 5-day Average Volume), we ensure that the liquidity validation is applied at the daily level before aggregation. This prevents a single high-volume day from distorting the 5-day mean and provides a more robust measure of 'conviction' versus 'noise'."
      }
    },
    "2a14c2d6aeb23110": {
      "factor_id": "2a14c2d6aeb23110",
      "factor_name": "Resonance_Gap_Efficiency_Rank_5D",
      "factor_expression": "RANK((($high - $low) * POW(TS_MEAN($volume, 5), 2)) / (ABS($open - DELAY($close, 1)) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK((($high - $low) * POW(TS_MEAN($volume, 5), 2)) / (ABS($open - DELAY($close, 1)) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Resonance_Gap_Efficiency_Rank_5D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A cross-sectionally ranked version of the resonance-to-gap ratio. It measures the efficiency of price movement by comparing the intraday range (scaled by volume) against the overnight gap (normalized by volume). High values indicate strong intraday trend persistence supported by liquidity.",
      "factor_formulation": "RGER_\\text{5D} = \\text{RANK}\\left(\\frac{(\\text{high} - \\text{low}) \\times \\text{TS_MEAN}(\\text{volume}, 5)^2}{\\text{ABS}(\\text{open} - \\text{DELAY}(\\text{close}, 1)) + 1e-8}\\right)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 2,
        "evolution_phase": "crossover",
        "trajectory_id": "35b14ca72a83",
        "parent_trajectory_ids": [
          "40b954f98281",
          "ac0ab75c4337"
        ],
        "hypothesis": "Hypothesis: The 'Liquidity-Validated Volatility Resonance' factor, calculated as the ratio of the 5-day Intraday Range-Volume Resonance to the 5-day Volume-Normalized Overnight Gap, positively predicts future returns by identifying institutional conviction while filtering out overnight sentiment exhaustion.\n                Concise Observation: Parent 1 captures trend strength via intraday range and volume (RankIC 0.0240), while Parent 2 identifies mean-reversion from overnight gaps (RankIC 0.0244); combining them addresses the failure of trend signals during liquidity-driven exhaustion phases.\n                Concise Justification: By dividing the intraday resonance (KLEN * WVMA) by the normalized gap, we amplify signals where price discovery is supported by continuous trading volume and penalize stocks where the price jump occurred in a low-liquidity overnight environment.\n                Concise Knowledge: If intraday price-volume resonance is high and the overnight gap is small relative to historical volume, then the price move is likely driven by institutional conviction; conversely, if a large overnight gap occurs on low volume, it represents sentiment exhaustion and mean-reversion risk.\n                concise Specification: The factor is defined as ((High - Low) / Close * SMA(Volume, 5)) / (abs(Open - Prev_Close) / SMA(Volume, 5)). All components use a 5-day lookback period to ensure temporal alignment between the volatility and liquidity metrics.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T00:19:43.778999"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1127947224378989,
        "ICIR": 0.0394922326806911,
        "1day.excess_return_without_cost.std": 0.0039921219556271,
        "1day.excess_return_with_cost.annualized_return": -0.0082360315181751,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.000162302941731,
        "1day.excess_return_without_cost.annualized_return": 0.0386281001319865,
        "1day.excess_return_with_cost.std": 0.0039940985561356,
        "Rank IC": 0.0222599888069993,
        "IC": 0.0055118617922671,
        "1day.excess_return_without_cost.max_drawdown": -0.0917397977637186,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.6272072501193354,
        "1day.pa": 0.0,
        "l2.valid": 0.9964019623273406,
        "Rank ICIR": 0.1633104610682,
        "l2.train": 0.9939345022610504,
        "1day.excess_return_with_cost.information_ratio": -0.1336628583982484,
        "1day.excess_return_with_cost.mean": -3.4605174446114094e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Liquidity-Validated Volatility Resonance' hypothesis. While all three factors were successfully implemented, the collective performance (IC: 0.0055, IR: 0.627) failed to surpass the current SOTA (IC: 0.0058, IR: 0.972). The 'Liquidity_Validated_Resonance_5D' and its variants aimed to capture institutional conviction by scaling intraday range by volume and penalizing overnight gaps. However, the current formulations appear to have higher drawdown (-0.0917 vs -0.0725) and lower risk-adjusted returns than the SOTA, suggesting that the interaction between volume and the overnight gap might be too noisy or improperly scaled in the current linear ratio format.",
        "hypothesis_evaluation": "The hypothesis that the ratio of intraday resonance to overnight gaps predicts returns is partially supported by the positive IC, but the current mathematical implementation is suboptimal. The use of 'TS_MEAN(volume, 5)' in both the numerator and denominator of the first factor (LVR_5D) essentially cancels out the volume effect, reducing it to a price-only ratio of (Intraday Range / Overnight Gap). This negates the 'Liquidity-Validated' aspect of the hypothesis. Furthermore, the high drawdown suggests that the factor may be sensitive to extreme price gaps that do not necessarily represent sentiment exhaustion.",
        "decision": false,
        "reason": "To improve upon the current results, we need to address the 'volume cancellation' issue. Instead of a simple ratio of means, we should calculate a daily 'Intensity' score and then average it. By using (Intraday Range / (Overnight Gap + Average True Range)) weighted by (Daily Volume / 5-day Average Volume), we ensure that the liquidity validation is applied at the daily level before aggregation. This prevents a single high-volume day from distorting the 5-day mean and provides a more robust measure of 'conviction' versus 'noise'."
      }
    },
    "50c55e21c72c5349": {
      "factor_id": "50c55e21c72c5349",
      "factor_name": "Intraday_Conviction_ZScore_5D",
      "factor_expression": "ZSCORE((($high - $low) / (TS_MEAN($high - $low, 5) + 1e-8)) / (ABS($open - DELAY($close, 1)) / (TS_MEAN($volume, 5) + 1e-8) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"ZSCORE((($high - $low) / (TS_MEAN($high - $low, 5) + 1e-8)) / (ABS($open - DELAY($close, 1)) / (TS_MEAN($volume, 5) + 1e-8) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Intraday_Conviction_ZScore_5D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor standardizes the intraday volatility-liquidity resonance relative to the overnight shock. It uses Z-score to identify stocks where the intraday participation significantly outweighs the overnight sentiment-driven gap, suggesting a more sustainable trend.",
      "factor_formulation": "ICZ_\\text{5D} = \\text{ZSCORE}\\left(\\frac{(\\text{high} - \\text{low}) / \\text{TS_MEAN}(\\text{high} - \\text{low}, 5)}{\\text{ABS}(\\text{open} - \\text{DELAY}(\\text{close}, 1)) / \\text{TS_MEAN}(\\text{volume}, 5) + 1e-8}\\right)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 2,
        "evolution_phase": "crossover",
        "trajectory_id": "35b14ca72a83",
        "parent_trajectory_ids": [
          "40b954f98281",
          "ac0ab75c4337"
        ],
        "hypothesis": "Hypothesis: The 'Liquidity-Validated Volatility Resonance' factor, calculated as the ratio of the 5-day Intraday Range-Volume Resonance to the 5-day Volume-Normalized Overnight Gap, positively predicts future returns by identifying institutional conviction while filtering out overnight sentiment exhaustion.\n                Concise Observation: Parent 1 captures trend strength via intraday range and volume (RankIC 0.0240), while Parent 2 identifies mean-reversion from overnight gaps (RankIC 0.0244); combining them addresses the failure of trend signals during liquidity-driven exhaustion phases.\n                Concise Justification: By dividing the intraday resonance (KLEN * WVMA) by the normalized gap, we amplify signals where price discovery is supported by continuous trading volume and penalize stocks where the price jump occurred in a low-liquidity overnight environment.\n                Concise Knowledge: If intraday price-volume resonance is high and the overnight gap is small relative to historical volume, then the price move is likely driven by institutional conviction; conversely, if a large overnight gap occurs on low volume, it represents sentiment exhaustion and mean-reversion risk.\n                concise Specification: The factor is defined as ((High - Low) / Close * SMA(Volume, 5)) / (abs(Open - Prev_Close) / SMA(Volume, 5)). All components use a 5-day lookback period to ensure temporal alignment between the volatility and liquidity metrics.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T00:19:43.778999"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1127947224378989,
        "ICIR": 0.0394922326806911,
        "1day.excess_return_without_cost.std": 0.0039921219556271,
        "1day.excess_return_with_cost.annualized_return": -0.0082360315181751,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.000162302941731,
        "1day.excess_return_without_cost.annualized_return": 0.0386281001319865,
        "1day.excess_return_with_cost.std": 0.0039940985561356,
        "Rank IC": 0.0222599888069993,
        "IC": 0.0055118617922671,
        "1day.excess_return_without_cost.max_drawdown": -0.0917397977637186,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.6272072501193354,
        "1day.pa": 0.0,
        "l2.valid": 0.9964019623273406,
        "Rank ICIR": 0.1633104610682,
        "l2.train": 0.9939345022610504,
        "1day.excess_return_with_cost.information_ratio": -0.1336628583982484,
        "1day.excess_return_with_cost.mean": -3.4605174446114094e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Liquidity-Validated Volatility Resonance' hypothesis. While all three factors were successfully implemented, the collective performance (IC: 0.0055, IR: 0.627) failed to surpass the current SOTA (IC: 0.0058, IR: 0.972). The 'Liquidity_Validated_Resonance_5D' and its variants aimed to capture institutional conviction by scaling intraday range by volume and penalizing overnight gaps. However, the current formulations appear to have higher drawdown (-0.0917 vs -0.0725) and lower risk-adjusted returns than the SOTA, suggesting that the interaction between volume and the overnight gap might be too noisy or improperly scaled in the current linear ratio format.",
        "hypothesis_evaluation": "The hypothesis that the ratio of intraday resonance to overnight gaps predicts returns is partially supported by the positive IC, but the current mathematical implementation is suboptimal. The use of 'TS_MEAN(volume, 5)' in both the numerator and denominator of the first factor (LVR_5D) essentially cancels out the volume effect, reducing it to a price-only ratio of (Intraday Range / Overnight Gap). This negates the 'Liquidity-Validated' aspect of the hypothesis. Furthermore, the high drawdown suggests that the factor may be sensitive to extreme price gaps that do not necessarily represent sentiment exhaustion.",
        "decision": false,
        "reason": "To improve upon the current results, we need to address the 'volume cancellation' issue. Instead of a simple ratio of means, we should calculate a daily 'Intensity' score and then average it. By using (Intraday Range / (Overnight Gap + Average True Range)) weighted by (Daily Volume / 5-day Average Volume), we ensure that the liquidity validation is applied at the daily level before aggregation. This prevents a single high-volume day from distorting the 5-day mean and provides a more robust measure of 'conviction' versus 'noise'."
      }
    },
    "885705120222fbc8": {
      "factor_id": "885705120222fbc8",
      "factor_name": "SEID_Institutional_Divergence_10D",
      "factor_expression": "(POW(TS_CORR($close, SEQUENCE(10), 10), 2) * TS_MEAN(($open - DELAY($close, 1)) / (DELAY($close, 1) + 1e-8), 5)) / (TS_CORR($return, $volume, 5) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(POW(TS_CORR($close, SEQUENCE(10), 10), 2) * TS_MEAN(($open - DELAY($close, 1)) / (DELAY($close, 1) + 1e-8), 5)) / (TS_CORR(TS_PCTCHANGE($close, 1), $volume, 5) + 1e-8)\" # Your output factor expression will be filled in here\n    name = \"SEID_Institutional_Divergence_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor implements the Structural Exhaustion & Institutional Divergence (SEID) hypothesis. It measures the divergence between price trend linearity (R-squared) and institutional conviction (overnight gaps), normalized by volume-price correlation. High values indicate speculative exhaustion where a linear price path lacks institutional gap support and is driven by high-convexity retail volume.",
      "factor_formulation": "SEID = \\frac{\\text{TS\\_CORR}(\\text{close}, \\text{SEQUENCE}(10), 10)^2 \\times \\text{TS\\_MEAN}((\\text{open} - \\text{prev\\_close})/\\text{prev\\_close}, 5)}{\\text{TS\\_CORR}(\\text{return}, \\text{volume}, 5)}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 6,
        "evolution_phase": "crossover",
        "trajectory_id": "fb317a249559",
        "parent_trajectory_ids": [
          "668f01f1201b",
          "b0fce848934c"
        ],
        "hypothesis": "Hypothesis: The 'Structural Exhaustion & Institutional Divergence' (SEID) factor, defined as the product of a 10-day price-time R-squared and the 5-day average of overnight gaps, inversely weighted by the 5-day volume-price correlation, predicts a significant price reversal when geometric trend perfection diverges from institutional conviction.\n                Concise Observation: Parent 1 successfully used price-time linearity to find trend exhaustion (RankIC 0.0219), while Parent 2 identified that institutional gaps provide a quality filter for momentum (RankIC 0.0230); combining these reveals that price moves with high R-squared but low institutional 'gap' support are the most prone to failure.\n                Concise Justification: Linear price trends are unsustainable without continuous institutional liquidity provision; by measuring the divergence between the 'perfection' of the price path (R-squared) and the 'strength' of institutional entry (overnight gaps), we can isolate speculative bubbles from robust trends.\n                Concise Knowledge: If a price trend exhibits high geometric linearity (R-squared) while institutional support (overnight gaps) diminishes and volume-price alignment (convexity) peaks, the asset is likely entering a structural climax phase; When these conditions align, the probability of a mean-reversion event increases as speculative retail momentum replaces institutional accumulation.\n                concise Specification: The factor is calculated by multiplying the 10-day price-time R-squared by the 5-day mean of (Open - Prev_Close) / Prev_Close, then dividing by the 5-day rolling correlation between daily returns and volume to penalize high-convexity speculative moves.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T07:24:39.560807"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1090159768569968,
        "ICIR": 0.0452362084803116,
        "1day.excess_return_without_cost.std": 0.004224799409635,
        "1day.excess_return_with_cost.annualized_return": 0.0196100505220739,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002811447780228,
        "1day.excess_return_without_cost.annualized_return": 0.0669124571694445,
        "1day.excess_return_with_cost.std": 0.0042261306915758,
        "Rank IC": 0.0222027890219965,
        "IC": 0.0060714284732353,
        "1day.excess_return_without_cost.max_drawdown": -0.1017431519051186,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.026626347995202,
        "1day.pa": 0.0,
        "l2.valid": 0.9964339753866596,
        "Rank ICIR": 0.1702555899170283,
        "l2.train": 0.9938257445745428,
        "1day.excess_return_with_cost.information_ratio": 0.3007788612120447,
        "1day.excess_return_with_cost.mean": 8.239517026081495e-05
      },
      "feedback": {
        "observations": "The current iteration of the 'Structural Exhaustion & Institutional Divergence' (SEID) framework has successfully yielded a new State-of-the-Art (SOTA) result. The 'SEID_Institutional_Divergence_10D' and its variants demonstrate strong predictive power, with the Information Ratio (IR) increasing from 0.97 to 1.02 and the Annualized Return rising from 5.2% to 6.69%. The Information Coefficient (IC) also showed a marginal improvement. However, the Max Drawdown (MDD) worsened from -0.072 to -0.101, suggesting that while the signal is more aggressive in capturing returns, it introduces higher tail risk or volatility during market regime shifts.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that the divergence between price linearity (R-squared) and institutional conviction (overnight gaps) serves as a potent reversal or exhaustion signal. The inclusion of the volume-price correlation as a denominator (inversely weighting) appears to be the primary driver of the performance boost, as it effectively filters out trends driven by retail-heavy speculative volume.",
        "decision": true,
        "reason": "The current MDD is high, likely because raw price gaps and R-squared values are sensitive to absolute volatility levels. By normalizing the overnight gap by a short-term ATR (Average True Range) and using an Efficiency Ratio (Net Change / Sum of Absolute Changes), we can create a more robust measure of 'structural perfection' that is comparable across different market environments, potentially smoothing the drawdown while maintaining the high IR."
      }
    },
    "757293c4f1d9e794": {
      "factor_id": "757293c4f1d9e794",
      "factor_name": "Structural_Exhaustion_Rank_Factor",
      "factor_expression": "RANK(POW(TS_CORR($close, SEQUENCE(10), 10), 2)) - RANK(TS_MEAN(($open - DELAY($close, 1)) / (DELAY($close, 1) + 1e-8), 5))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(POW(TS_CORR($close, SEQUENCE(10), 10), 2)) - RANK(TS_MEAN(($open - DELAY($close, 1)) / (DELAY($close, 1) + 1e-8), 5))\" # Your output factor expression will be filled in here\n    name = \"Structural_Exhaustion_Rank_Factor\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A simplified version of the SEID hypothesis focusing on the cross-sectional rank of price linearity versus the rank of institutional gap strength. It identifies stocks where the 'perfection' of the trend (R-squared) is high but the institutional support (overnight gaps) is relatively low compared to the market, signaling potential mean reversion.",
      "factor_formulation": "\\text{Exhaustion} = \\text{RANK}(\\text{TS\\_CORR}(\\text{close}, \\text{SEQUENCE}(10), 10)^2) - \\text{RANK}(\\text{TS\\_MEAN}((\\text{open} - \\text{prev\\_close})/\\text{prev\\_close}, 5))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 6,
        "evolution_phase": "crossover",
        "trajectory_id": "fb317a249559",
        "parent_trajectory_ids": [
          "668f01f1201b",
          "b0fce848934c"
        ],
        "hypothesis": "Hypothesis: The 'Structural Exhaustion & Institutional Divergence' (SEID) factor, defined as the product of a 10-day price-time R-squared and the 5-day average of overnight gaps, inversely weighted by the 5-day volume-price correlation, predicts a significant price reversal when geometric trend perfection diverges from institutional conviction.\n                Concise Observation: Parent 1 successfully used price-time linearity to find trend exhaustion (RankIC 0.0219), while Parent 2 identified that institutional gaps provide a quality filter for momentum (RankIC 0.0230); combining these reveals that price moves with high R-squared but low institutional 'gap' support are the most prone to failure.\n                Concise Justification: Linear price trends are unsustainable without continuous institutional liquidity provision; by measuring the divergence between the 'perfection' of the price path (R-squared) and the 'strength' of institutional entry (overnight gaps), we can isolate speculative bubbles from robust trends.\n                Concise Knowledge: If a price trend exhibits high geometric linearity (R-squared) while institutional support (overnight gaps) diminishes and volume-price alignment (convexity) peaks, the asset is likely entering a structural climax phase; When these conditions align, the probability of a mean-reversion event increases as speculative retail momentum replaces institutional accumulation.\n                concise Specification: The factor is calculated by multiplying the 10-day price-time R-squared by the 5-day mean of (Open - Prev_Close) / Prev_Close, then dividing by the 5-day rolling correlation between daily returns and volume to penalize high-convexity speculative moves.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T07:24:39.560807"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1090159768569968,
        "ICIR": 0.0452362084803116,
        "1day.excess_return_without_cost.std": 0.004224799409635,
        "1day.excess_return_with_cost.annualized_return": 0.0196100505220739,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002811447780228,
        "1day.excess_return_without_cost.annualized_return": 0.0669124571694445,
        "1day.excess_return_with_cost.std": 0.0042261306915758,
        "Rank IC": 0.0222027890219965,
        "IC": 0.0060714284732353,
        "1day.excess_return_without_cost.max_drawdown": -0.1017431519051186,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.026626347995202,
        "1day.pa": 0.0,
        "l2.valid": 0.9964339753866596,
        "Rank ICIR": 0.1702555899170283,
        "l2.train": 0.9938257445745428,
        "1day.excess_return_with_cost.information_ratio": 0.3007788612120447,
        "1day.excess_return_with_cost.mean": 8.239517026081495e-05
      },
      "feedback": {
        "observations": "The current iteration of the 'Structural Exhaustion & Institutional Divergence' (SEID) framework has successfully yielded a new State-of-the-Art (SOTA) result. The 'SEID_Institutional_Divergence_10D' and its variants demonstrate strong predictive power, with the Information Ratio (IR) increasing from 0.97 to 1.02 and the Annualized Return rising from 5.2% to 6.69%. The Information Coefficient (IC) also showed a marginal improvement. However, the Max Drawdown (MDD) worsened from -0.072 to -0.101, suggesting that while the signal is more aggressive in capturing returns, it introduces higher tail risk or volatility during market regime shifts.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that the divergence between price linearity (R-squared) and institutional conviction (overnight gaps) serves as a potent reversal or exhaustion signal. The inclusion of the volume-price correlation as a denominator (inversely weighting) appears to be the primary driver of the performance boost, as it effectively filters out trends driven by retail-heavy speculative volume.",
        "decision": true,
        "reason": "The current MDD is high, likely because raw price gaps and R-squared values are sensitive to absolute volatility levels. By normalizing the overnight gap by a short-term ATR (Average True Range) and using an Efficiency Ratio (Net Change / Sum of Absolute Changes), we can create a more robust measure of 'structural perfection' that is comparable across different market environments, potentially smoothing the drawdown while maintaining the high IR."
      }
    },
    "47da4059d811475c": {
      "factor_id": "47da4059d811475c",
      "factor_name": "Speculative_Convexity_Divergence",
      "factor_expression": "POW(TS_CORR($close, SEQUENCE(10), 10), 2) / (ABS(TS_CORR($return, $volume, 5)) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"POW(TS_CORR($close, SEQUENCE(10), 10), 2) / (ABS(TS_CORR(TS_PCTCHANGE($close, 1), $volume, 5)) + 1e-8)\" # Your output factor expression will be filled in here\n    name = \"Speculative_Convexity_Divergence\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor captures the divergence between price linearity and volume-price alignment. It targets the 'Structural Climax' phase where price follows a strict linear path (high R-squared) but is increasingly penalized by high volume-return correlation, which suggests speculative retail participation rather than institutional accumulation.",
      "factor_formulation": "\\text{SCD} = \\frac{\\text{TS\\_CORR}(\\text{close}, \\text{SEQUENCE}(10), 10)^2}{\\text{ABS}(\\text{TS\\_CORR}(\\text{return}, \\text{volume}, 5)) + 1e-8}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 6,
        "evolution_phase": "crossover",
        "trajectory_id": "fb317a249559",
        "parent_trajectory_ids": [
          "668f01f1201b",
          "b0fce848934c"
        ],
        "hypothesis": "Hypothesis: The 'Structural Exhaustion & Institutional Divergence' (SEID) factor, defined as the product of a 10-day price-time R-squared and the 5-day average of overnight gaps, inversely weighted by the 5-day volume-price correlation, predicts a significant price reversal when geometric trend perfection diverges from institutional conviction.\n                Concise Observation: Parent 1 successfully used price-time linearity to find trend exhaustion (RankIC 0.0219), while Parent 2 identified that institutional gaps provide a quality filter for momentum (RankIC 0.0230); combining these reveals that price moves with high R-squared but low institutional 'gap' support are the most prone to failure.\n                Concise Justification: Linear price trends are unsustainable without continuous institutional liquidity provision; by measuring the divergence between the 'perfection' of the price path (R-squared) and the 'strength' of institutional entry (overnight gaps), we can isolate speculative bubbles from robust trends.\n                Concise Knowledge: If a price trend exhibits high geometric linearity (R-squared) while institutional support (overnight gaps) diminishes and volume-price alignment (convexity) peaks, the asset is likely entering a structural climax phase; When these conditions align, the probability of a mean-reversion event increases as speculative retail momentum replaces institutional accumulation.\n                concise Specification: The factor is calculated by multiplying the 10-day price-time R-squared by the 5-day mean of (Open - Prev_Close) / Prev_Close, then dividing by the 5-day rolling correlation between daily returns and volume to penalize high-convexity speculative moves.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T07:24:39.560807"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1090159768569968,
        "ICIR": 0.0452362084803116,
        "1day.excess_return_without_cost.std": 0.004224799409635,
        "1day.excess_return_with_cost.annualized_return": 0.0196100505220739,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002811447780228,
        "1day.excess_return_without_cost.annualized_return": 0.0669124571694445,
        "1day.excess_return_with_cost.std": 0.0042261306915758,
        "Rank IC": 0.0222027890219965,
        "IC": 0.0060714284732353,
        "1day.excess_return_without_cost.max_drawdown": -0.1017431519051186,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.026626347995202,
        "1day.pa": 0.0,
        "l2.valid": 0.9964339753866596,
        "Rank ICIR": 0.1702555899170283,
        "l2.train": 0.9938257445745428,
        "1day.excess_return_with_cost.information_ratio": 0.3007788612120447,
        "1day.excess_return_with_cost.mean": 8.239517026081495e-05
      },
      "feedback": {
        "observations": "The current iteration of the 'Structural Exhaustion & Institutional Divergence' (SEID) framework has successfully yielded a new State-of-the-Art (SOTA) result. The 'SEID_Institutional_Divergence_10D' and its variants demonstrate strong predictive power, with the Information Ratio (IR) increasing from 0.97 to 1.02 and the Annualized Return rising from 5.2% to 6.69%. The Information Coefficient (IC) also showed a marginal improvement. However, the Max Drawdown (MDD) worsened from -0.072 to -0.101, suggesting that while the signal is more aggressive in capturing returns, it introduces higher tail risk or volatility during market regime shifts.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that the divergence between price linearity (R-squared) and institutional conviction (overnight gaps) serves as a potent reversal or exhaustion signal. The inclusion of the volume-price correlation as a denominator (inversely weighting) appears to be the primary driver of the performance boost, as it effectively filters out trends driven by retail-heavy speculative volume.",
        "decision": true,
        "reason": "The current MDD is high, likely because raw price gaps and R-squared values are sensitive to absolute volatility levels. By normalizing the overnight gap by a short-term ATR (Average True Range) and using an Efficiency Ratio (Net Change / Sum of Absolute Changes), we can create a more robust measure of 'structural perfection' that is comparable across different market environments, potentially smoothing the drawdown while maintaining the high IR."
      }
    },
    "e127356ebc9b0da5": {
      "factor_id": "e127356ebc9b0da5",
      "factor_name": "ARP_Stability_Momentum_20D",
      "factor_expression": "(TS_SUM($return, 20) / (TS_STD($volume, 20) + 1e-8)) * (POW(TS_CORR($close, SEQUENCE(20), 20), 2) / ((TS_MEAN($high - $low, 20) / (TS_MEAN($close, 20) + 1e-8)) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"((TS_SUM(TS_PCTCHANGE($close, 1), 20) / (TS_STD($volume, 20) + 1e-8)) * (POW(TS_CORR($close, SEQUENCE(20), 20), 2) / (TS_MEAN($high - $low, 20) / (TS_MEAN($close, 20) + 1e-8) + 1e-8)))\" # Your output factor expression will be filled in here\n    name = \"ARP_Stability_Momentum_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "Adaptive Regime Persistence (ARP) factor: It identifies high-quality trends by combining 20-day momentum (normalized by volume volatility) with a structural health filter. The filter rewards price linearity (R-squared of price vs. time) and penalizes high intraday dispersion (High-Low range).",
      "factor_formulation": "ARP = \\left( \\frac{\\sum_{i=1}^{20} \\text{return}_i}{\\text{TS_STD}(\\text{volume}, 20)} \\right) \\times \\left( \\frac{\\text{TS_CORR}(\\text{close}, \\text{SEQUENCE}(20), 20)^2}{\\text{TS_MEAN}(\\text{high} - \\text{low}, 20) / \\text{TS_MEAN}(\\text{close}, 20)} \\right)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 10,
        "evolution_phase": "crossover",
        "trajectory_id": "326a44359ecb",
        "parent_trajectory_ids": [
          "7695cdd33a33",
          "387975e43d62"
        ],
        "hypothesis": "Hypothesis: The 'Adaptive Regime Persistence' (ARP) factor identifies high-quality trends by multiplying the 20-day momentum (scaled by the inverse of 20-day volume standard deviation) by a 'Structural Health' filter that penalizes high intraday price dispersion (High-Low range) relative to price linearity (R-squared).\n                Concise Observation: Parent 1 (ICP) successfully captures trend persistence via volume stability (RankIC 0.0249), while Parent 2 (FES) identifies reversal points through price linearity and dispersion (RankIC 0.0260), suggesting that momentum quality is conditional on intraday price behavior.\n                Concise Justification: By fusing Parent 1's volume-weighted momentum with Parent 2's exhaustion logic, the factor distinguishes between 'quiet accumulation' (stable volume, narrow intraday ranges) and 'noisy distribution' (volatile volume, wide intraday ranges), enhancing the signal-to-noise ratio of trend following.\n                Concise Knowledge: If momentum is accompanied by low volume volatility, the trend is more sustainable; however, if high trend linearity (R-squared) coincides with expanding intraday price dispersion, the asset is likely entering a fractal exhaustion phase regardless of its momentum.\n                concise Specification: Define ARP as (20-day Return / 20-day StdDev of Volume) * (1 / (20-day High-Low Range / 20-day R-squared of Close prices)), where R-squared is calculated over a 20-day lookback window.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T13:28:30.766967"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1447182964967509,
        "ICIR": 0.046053784675255,
        "1day.excess_return_without_cost.std": 0.0050125035457234,
        "1day.excess_return_with_cost.annualized_return": 0.0119503732617394,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.000251075075355,
        "1day.excess_return_without_cost.annualized_return": 0.0597558679344904,
        "1day.excess_return_with_cost.std": 0.0050139212530742,
        "Rank IC": 0.0221755251648344,
        "IC": 0.0066530330598884,
        "1day.excess_return_without_cost.max_drawdown": -0.1314612386632318,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7727471062294823,
        "1day.pa": 0.0,
        "l2.valid": 0.9965626427365224,
        "Rank ICIR": 0.1549158454935542,
        "l2.train": 0.9932464419146758,
        "1day.excess_return_with_cost.information_ratio": 0.1544953750789007,
        "1day.excess_return_with_cost.mean": 5.021165236024973e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Adaptive Regime Persistence' (ARP) framework. The 'ARP_Stability_Momentum_20D' and 'STQ' factors successfully captured the interaction between price linearity (R-squared) and intraday noise. The current results show a significant improvement in IC (0.0066 vs 0.0057) and Annualized Return (0.0597 vs 0.0520) compared to the SOTA, although the Information Ratio and Max Drawdown have deteriorated, suggesting higher volatility in the new factor's performance.",
        "hypothesis_evaluation": "The results support the hypothesis that combining price linearity (R-squared) with a penalty for intraday dispersion (High-Low range) identifies higher-quality trends. Specifically, the inclusion of the 'Structural Health' filter (Linearity / Noise) effectively filters out 'noisy' momentum. However, the high Max Drawdown suggests that the current scaling method (using raw volume standard deviation) might be introducing instability or that the 20-day window is sensitive to regime shifts.",
        "decision": true,
        "reason": "The current ARP factor uses a 20-day average for both linearity and intraday dispersion. Intraday noise (High-Low) is often a leading indicator of trend exhaustion and reacts faster than 20-day linearity. By shortening the noise window to 5 days, we can exit deteriorating trends sooner. Additionally, the current volume scaling (TS_STD) is not unit-less; using a Z-score or Rank-based volume stability will prevent the factor from being dominated by high-volume stocks, likely improving the Information Ratio and reducing Drawdown."
      }
    },
    "d4247873a500eacf": {
      "factor_id": "d4247873a500eacf",
      "factor_name": "Structural_Trend_Quality_20D",
      "factor_expression": "TS_PCTCHANGE($close, 20) * POW(TS_CORR($close, SEQUENCE(20), 20), 2) / (TS_MEAN($high - $low, 20) / (TS_MEAN($close, 20) + 1e-8) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_PCTCHANGE($close, 20) * POW(TS_CORR($close, SEQUENCE(20), 20), 2) / (TS_MEAN($high - $low, 20) / (TS_MEAN($close, 20) + 1e-8) + 1e-8)\" # Your output factor expression will be filled in here\n    name = \"Structural_Trend_Quality_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A simplified version of the ARP hypothesis focusing on the ratio of trend linearity to intraday noise, scaled by momentum. It uses the R-squared of closing prices against time to measure trend strength and the average daily range to measure noise, ensuring the trend is 'quiet' and 'linear'.",
      "factor_formulation": "STQ = \\text{TS_PCTCHANGE}(\\text{close}, 20) \\times \\frac{\\text{TS_CORR}(\\text{close}, \\text{SEQUENCE}(20), 20)^2}{\\text{TS_MEAN}(\\text{high} - \\text{low}, 20) / \\text{TS_MEAN}(\\text{close}, 20)}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 10,
        "evolution_phase": "crossover",
        "trajectory_id": "326a44359ecb",
        "parent_trajectory_ids": [
          "7695cdd33a33",
          "387975e43d62"
        ],
        "hypothesis": "Hypothesis: The 'Adaptive Regime Persistence' (ARP) factor identifies high-quality trends by multiplying the 20-day momentum (scaled by the inverse of 20-day volume standard deviation) by a 'Structural Health' filter that penalizes high intraday price dispersion (High-Low range) relative to price linearity (R-squared).\n                Concise Observation: Parent 1 (ICP) successfully captures trend persistence via volume stability (RankIC 0.0249), while Parent 2 (FES) identifies reversal points through price linearity and dispersion (RankIC 0.0260), suggesting that momentum quality is conditional on intraday price behavior.\n                Concise Justification: By fusing Parent 1's volume-weighted momentum with Parent 2's exhaustion logic, the factor distinguishes between 'quiet accumulation' (stable volume, narrow intraday ranges) and 'noisy distribution' (volatile volume, wide intraday ranges), enhancing the signal-to-noise ratio of trend following.\n                Concise Knowledge: If momentum is accompanied by low volume volatility, the trend is more sustainable; however, if high trend linearity (R-squared) coincides with expanding intraday price dispersion, the asset is likely entering a fractal exhaustion phase regardless of its momentum.\n                concise Specification: Define ARP as (20-day Return / 20-day StdDev of Volume) * (1 / (20-day High-Low Range / 20-day R-squared of Close prices)), where R-squared is calculated over a 20-day lookback window.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T13:28:30.766967"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1447182964967509,
        "ICIR": 0.046053784675255,
        "1day.excess_return_without_cost.std": 0.0050125035457234,
        "1day.excess_return_with_cost.annualized_return": 0.0119503732617394,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.000251075075355,
        "1day.excess_return_without_cost.annualized_return": 0.0597558679344904,
        "1day.excess_return_with_cost.std": 0.0050139212530742,
        "Rank IC": 0.0221755251648344,
        "IC": 0.0066530330598884,
        "1day.excess_return_without_cost.max_drawdown": -0.1314612386632318,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7727471062294823,
        "1day.pa": 0.0,
        "l2.valid": 0.9965626427365224,
        "Rank ICIR": 0.1549158454935542,
        "l2.train": 0.9932464419146758,
        "1day.excess_return_with_cost.information_ratio": 0.1544953750789007,
        "1day.excess_return_with_cost.mean": 5.021165236024973e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Adaptive Regime Persistence' (ARP) framework. The 'ARP_Stability_Momentum_20D' and 'STQ' factors successfully captured the interaction between price linearity (R-squared) and intraday noise. The current results show a significant improvement in IC (0.0066 vs 0.0057) and Annualized Return (0.0597 vs 0.0520) compared to the SOTA, although the Information Ratio and Max Drawdown have deteriorated, suggesting higher volatility in the new factor's performance.",
        "hypothesis_evaluation": "The results support the hypothesis that combining price linearity (R-squared) with a penalty for intraday dispersion (High-Low range) identifies higher-quality trends. Specifically, the inclusion of the 'Structural Health' filter (Linearity / Noise) effectively filters out 'noisy' momentum. However, the high Max Drawdown suggests that the current scaling method (using raw volume standard deviation) might be introducing instability or that the 20-day window is sensitive to regime shifts.",
        "decision": true,
        "reason": "The current ARP factor uses a 20-day average for both linearity and intraday dispersion. Intraday noise (High-Low) is often a leading indicator of trend exhaustion and reacts faster than 20-day linearity. By shortening the noise window to 5 days, we can exit deteriorating trends sooner. Additionally, the current volume scaling (TS_STD) is not unit-less; using a Z-score or Rank-based volume stability will prevent the factor from being dominated by high-volume stocks, likely improving the Information Ratio and reducing Drawdown."
      }
    },
    "a6d43eef351aeb6c": {
      "factor_id": "a6d43eef351aeb6c",
      "factor_name": "Volume_Adjusted_Linearity_20D",
      "factor_expression": "RANK(POW(TS_CORR($close, SEQUENCE(20), 20), 2)) / (RANK(TS_STD($volume, 20)) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(POW(TS_CORR($close, SEQUENCE(20), 20), 2)) / (RANK(TS_STD($volume, 20)) + 1e-8)\" # Your output factor expression will be filled in here\n    name = \"Volume_Adjusted_Linearity_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor captures the ARP logic by weighting price linearity (R-squared) with the inverse of volume volatility. It identifies regimes where price moves are consistent and volume is stable, suggesting institutional accumulation rather than speculative volatility.",
      "factor_formulation": "VAL = \\text{RANK}(\\text{TS_CORR}(\\text{close}, \\text{SEQUENCE}(20), 20)^2) / \\text{RANK}(\\text{TS_STD}(\\text{volume}, 20))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 10,
        "evolution_phase": "crossover",
        "trajectory_id": "326a44359ecb",
        "parent_trajectory_ids": [
          "7695cdd33a33",
          "387975e43d62"
        ],
        "hypothesis": "Hypothesis: The 'Adaptive Regime Persistence' (ARP) factor identifies high-quality trends by multiplying the 20-day momentum (scaled by the inverse of 20-day volume standard deviation) by a 'Structural Health' filter that penalizes high intraday price dispersion (High-Low range) relative to price linearity (R-squared).\n                Concise Observation: Parent 1 (ICP) successfully captures trend persistence via volume stability (RankIC 0.0249), while Parent 2 (FES) identifies reversal points through price linearity and dispersion (RankIC 0.0260), suggesting that momentum quality is conditional on intraday price behavior.\n                Concise Justification: By fusing Parent 1's volume-weighted momentum with Parent 2's exhaustion logic, the factor distinguishes between 'quiet accumulation' (stable volume, narrow intraday ranges) and 'noisy distribution' (volatile volume, wide intraday ranges), enhancing the signal-to-noise ratio of trend following.\n                Concise Knowledge: If momentum is accompanied by low volume volatility, the trend is more sustainable; however, if high trend linearity (R-squared) coincides with expanding intraday price dispersion, the asset is likely entering a fractal exhaustion phase regardless of its momentum.\n                concise Specification: Define ARP as (20-day Return / 20-day StdDev of Volume) * (1 / (20-day High-Low Range / 20-day R-squared of Close prices)), where R-squared is calculated over a 20-day lookback window.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T13:28:30.766967"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1447182964967509,
        "ICIR": 0.046053784675255,
        "1day.excess_return_without_cost.std": 0.0050125035457234,
        "1day.excess_return_with_cost.annualized_return": 0.0119503732617394,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.000251075075355,
        "1day.excess_return_without_cost.annualized_return": 0.0597558679344904,
        "1day.excess_return_with_cost.std": 0.0050139212530742,
        "Rank IC": 0.0221755251648344,
        "IC": 0.0066530330598884,
        "1day.excess_return_without_cost.max_drawdown": -0.1314612386632318,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7727471062294823,
        "1day.pa": 0.0,
        "l2.valid": 0.9965626427365224,
        "Rank ICIR": 0.1549158454935542,
        "l2.train": 0.9932464419146758,
        "1day.excess_return_with_cost.information_ratio": 0.1544953750789007,
        "1day.excess_return_with_cost.mean": 5.021165236024973e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Adaptive Regime Persistence' (ARP) framework. The 'ARP_Stability_Momentum_20D' and 'STQ' factors successfully captured the interaction between price linearity (R-squared) and intraday noise. The current results show a significant improvement in IC (0.0066 vs 0.0057) and Annualized Return (0.0597 vs 0.0520) compared to the SOTA, although the Information Ratio and Max Drawdown have deteriorated, suggesting higher volatility in the new factor's performance.",
        "hypothesis_evaluation": "The results support the hypothesis that combining price linearity (R-squared) with a penalty for intraday dispersion (High-Low range) identifies higher-quality trends. Specifically, the inclusion of the 'Structural Health' filter (Linearity / Noise) effectively filters out 'noisy' momentum. However, the high Max Drawdown suggests that the current scaling method (using raw volume standard deviation) might be introducing instability or that the 20-day window is sensitive to regime shifts.",
        "decision": true,
        "reason": "The current ARP factor uses a 20-day average for both linearity and intraday dispersion. Intraday noise (High-Low) is often a leading indicator of trend exhaustion and reacts faster than 20-day linearity. By shortening the noise window to 5 days, we can exit deteriorating trends sooner. Additionally, the current volume scaling (TS_STD) is not unit-less; using a Z-score or Rank-based volume stability will prevent the factor from being dominated by high-volume stocks, likely improving the Information Ratio and reducing Drawdown."
      }
    },
    "c3e95ca956f44c5f": {
      "factor_id": "c3e95ca956f44c5f",
      "factor_name": "Trend_Exhaustion_Index_10D",
      "factor_expression": "POW(TS_CORR($close, SEQUENCE(10), 10), 2) * TS_MEAN(REGRESI($close, SEQUENCE(10), 10), 5)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"POW(TS_CORR($close, SEQUENCE(10), 10), 2) * TS_MEAN(REGRESI($close, SEQUENCE(10), 10), 5)\" # Your output factor expression will be filled in here\n    name = \"Trend_Exhaustion_Index_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies potential price reversals by multiplying the linearity of the price trend (R-squared) by the recent average deviation from that trend. A high R-squared combined with high positive residuals suggests a parabolic move that is likely to exhaust.",
      "factor_formulation": "\\text{TrendExhaustion} = \\text{POW}(\\text{TS\\_CORR}(\\text{close}, \\text{SEQUENCE}(10), 10), 2) \\times \\text{TS\\_MEAN}(\\text{REGRESI}(\\text{close}, \\text{SEQUENCE}(10), 10), 5)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 5,
        "evolution_phase": "mutation",
        "trajectory_id": "04512a60411e",
        "parent_trajectory_ids": [
          "a18c15e6fbc9"
        ],
        "hypothesis": "Hypothesis: The 'Trend Exhaustion' factor, calculated as the interaction between a 10-day price-time R-squared and the 5-day average of residuals from a linear trend, predicts a negative return reversal when both metrics are high, as it identifies overextended price moves that lack sustainable structural support.\n                Concise Observation: While the parent strategy focused on illiquid gaps and price floors, market data often shows that even liquid, high-momentum stocks reach 'exhaustion' points where the strength of the trend (R-squared) becomes a liability if the price accelerates too far above the regression line.\n                Concise Justification: High R-squared values indicate a consensus-driven trend; however, when residuals also spike, it suggests a 'blow-off top' or parabolic move where the rate of change is no longer consistent with the established trend, leading to a high-probability reversal.\n                Concise Knowledge: If a price trend exhibits extremely high linearity (high R-squared) alongside large positive deviations from that trend (high residuals), the probability of a mean-reversion event increases because the current price has decoupled from its recent growth trajectory.\n                concise Specification: The factor is defined as the product of the R-squared of $close over a 10-day window against a time index and the 5-day mean of the residuals from that same regression. High positive values are expected to correlate with negative future returns.\n                ",
        "initial_direction": "Identify 'Trend Exhaustion' by interacting RSQR10 with RESI5: high R-squared combined with high positive residuals suggests an overextended trend prone to mean reversion.",
        "planning_direction": "Identify 'Trend Exhaustion' by interacting RSQR10 with RESI5: high R-squared combined with high positive residuals suggests an overextended trend prone to mean reversion.",
        "created_at": "2026-01-21T05:08:19.773615"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.138769923707156,
        "ICIR": 0.0579389812500951,
        "1day.excess_return_without_cost.std": 0.0040989617588207,
        "1day.excess_return_with_cost.annualized_return": 0.0051778527602755,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002212018467671,
        "1day.excess_return_without_cost.annualized_return": 0.0526460395305887,
        "1day.excess_return_with_cost.std": 0.0041005433745646,
        "Rank IC": 0.0219338929702103,
        "IC": 0.007835455148842,
        "1day.excess_return_without_cost.max_drawdown": -0.0926508288638392,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.8325366485931793,
        "1day.pa": 0.0,
        "l2.valid": 0.996543139529108,
        "Rank ICIR": 0.1626444140519063,
        "l2.train": 0.9938319614595916,
        "1day.excess_return_with_cost.information_ratio": 0.0818502118532473,
        "1day.excess_return_with_cost.mean": 2.1755683866704084e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Trend Exhaustion' hypothesis. The current results show a significant improvement in Information Coefficient (IC) and a slight increase in Annualized Return compared to the previous SOTA, although the Information Ratio (IR) and Max Drawdown (MDD) have deteriorated. This suggests that while the predictive power (IC) of the trend exhaustion concept is strong, the current implementationsspecifically combining R-squared with residualsmay introduce higher volatility or tail risk in the portfolio construction phase.",
        "hypothesis_evaluation": "The hypothesis that combining trend linearity (R-squared) with residuals identifies exhaustion is supported by the improved IC (0.0078 vs 0.0057). However, the 'Normalized_Linear_Deviation_Reversal' and 'Trend_Linearity_Volume_Exhaustion' implementations likely contributed to the higher IC. The interaction between price acceleration and volume (VolExhaust) appears to be a strong signal, but the increased drawdown suggests the 'exhaustion' signal might be premature or lead to high-turnover volatility.",
        "decision": true,
        "reason": "The current factors use the absolute level of residuals or their Z-score. However, a high residual can persist in a strong trend. By looking at the change in residuals (the second derivative of price relative to the linear trend), we can better capture the 'parabolic' acceleration phase. Furthermore, the current symbol lengths are approaching complexity limits; simplifying the interaction by using a 5-day ROC of the 10-day residual, multiplied by a binary volume trigger (volume > mean volume), may reduce noise and improve the Information Ratio."
      }
    },
    "6e0856d7f18174be": {
      "factor_id": "6e0856d7f18174be",
      "factor_name": "Normalized_Linear_Deviation_Reversal",
      "factor_expression": "POW(TS_CORR($close, SEQUENCE(10), 10), 2) * TS_ZSCORE(REGRESI($close, SEQUENCE(10), 10), 5)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"POW(TS_CORR($close, SEQUENCE(10), 10), 2) * TS_ZSCORE(REGRESI($close, SEQUENCE(10), 10), 5)\" # Your output factor expression will be filled in here\n    name = \"Normalized_Linear_Deviation_Reversal\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A refined version of the trend exhaustion hypothesis that uses Z-scored residuals to normalize the deviation across different price levels. It captures the interaction between trend strength (R-squared) and the magnitude of recent 'over-shooting' relative to the 10-day linear trend.",
      "factor_formulation": "\\text{NormDev} = \\text{POW}(\\text{TS\\_CORR}(\\text{close}, \\text{SEQUENCE}(10), 10), 2) \\times \\text{TS\\_ZSCORE}(\\text{REGRESI}(\\text{close}, \\text{SEQUENCE}(10), 10), 5)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 5,
        "evolution_phase": "mutation",
        "trajectory_id": "04512a60411e",
        "parent_trajectory_ids": [
          "a18c15e6fbc9"
        ],
        "hypothesis": "Hypothesis: The 'Trend Exhaustion' factor, calculated as the interaction between a 10-day price-time R-squared and the 5-day average of residuals from a linear trend, predicts a negative return reversal when both metrics are high, as it identifies overextended price moves that lack sustainable structural support.\n                Concise Observation: While the parent strategy focused on illiquid gaps and price floors, market data often shows that even liquid, high-momentum stocks reach 'exhaustion' points where the strength of the trend (R-squared) becomes a liability if the price accelerates too far above the regression line.\n                Concise Justification: High R-squared values indicate a consensus-driven trend; however, when residuals also spike, it suggests a 'blow-off top' or parabolic move where the rate of change is no longer consistent with the established trend, leading to a high-probability reversal.\n                Concise Knowledge: If a price trend exhibits extremely high linearity (high R-squared) alongside large positive deviations from that trend (high residuals), the probability of a mean-reversion event increases because the current price has decoupled from its recent growth trajectory.\n                concise Specification: The factor is defined as the product of the R-squared of $close over a 10-day window against a time index and the 5-day mean of the residuals from that same regression. High positive values are expected to correlate with negative future returns.\n                ",
        "initial_direction": "Identify 'Trend Exhaustion' by interacting RSQR10 with RESI5: high R-squared combined with high positive residuals suggests an overextended trend prone to mean reversion.",
        "planning_direction": "Identify 'Trend Exhaustion' by interacting RSQR10 with RESI5: high R-squared combined with high positive residuals suggests an overextended trend prone to mean reversion.",
        "created_at": "2026-01-21T05:08:19.773615"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.138769923707156,
        "ICIR": 0.0579389812500951,
        "1day.excess_return_without_cost.std": 0.0040989617588207,
        "1day.excess_return_with_cost.annualized_return": 0.0051778527602755,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002212018467671,
        "1day.excess_return_without_cost.annualized_return": 0.0526460395305887,
        "1day.excess_return_with_cost.std": 0.0041005433745646,
        "Rank IC": 0.0219338929702103,
        "IC": 0.007835455148842,
        "1day.excess_return_without_cost.max_drawdown": -0.0926508288638392,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.8325366485931793,
        "1day.pa": 0.0,
        "l2.valid": 0.996543139529108,
        "Rank ICIR": 0.1626444140519063,
        "l2.train": 0.9938319614595916,
        "1day.excess_return_with_cost.information_ratio": 0.0818502118532473,
        "1day.excess_return_with_cost.mean": 2.1755683866704084e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Trend Exhaustion' hypothesis. The current results show a significant improvement in Information Coefficient (IC) and a slight increase in Annualized Return compared to the previous SOTA, although the Information Ratio (IR) and Max Drawdown (MDD) have deteriorated. This suggests that while the predictive power (IC) of the trend exhaustion concept is strong, the current implementationsspecifically combining R-squared with residualsmay introduce higher volatility or tail risk in the portfolio construction phase.",
        "hypothesis_evaluation": "The hypothesis that combining trend linearity (R-squared) with residuals identifies exhaustion is supported by the improved IC (0.0078 vs 0.0057). However, the 'Normalized_Linear_Deviation_Reversal' and 'Trend_Linearity_Volume_Exhaustion' implementations likely contributed to the higher IC. The interaction between price acceleration and volume (VolExhaust) appears to be a strong signal, but the increased drawdown suggests the 'exhaustion' signal might be premature or lead to high-turnover volatility.",
        "decision": true,
        "reason": "The current factors use the absolute level of residuals or their Z-score. However, a high residual can persist in a strong trend. By looking at the change in residuals (the second derivative of price relative to the linear trend), we can better capture the 'parabolic' acceleration phase. Furthermore, the current symbol lengths are approaching complexity limits; simplifying the interaction by using a 5-day ROC of the 10-day residual, multiplied by a binary volume trigger (volume > mean volume), may reduce noise and improve the Information Ratio."
      }
    },
    "a9ac3f9a546cccad": {
      "factor_id": "a9ac3f9a546cccad",
      "factor_name": "Trend_Linearity_Volume_Exhaustion",
      "factor_expression": "POW(TS_CORR($close, SEQUENCE(10), 10), 2) * REGRESI($close, SEQUENCE(10), 10) * TS_RANK($volume, 10)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"POW(TS_CORR($close, SEQUENCE(10), 10), 2) * REGRESI($close, SEQUENCE(10), 10) * TS_RANK($volume, 10)\" # Your output factor expression will be filled in here\n    name = \"Trend_Linearity_Volume_Exhaustion\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor combines the trend exhaustion logic (R-squared and residuals) with volume confirmation. It assumes that exhaustion is more likely when the price acceleration (residuals) occurs on high relative volume, indicating a final 'blow-off' phase.",
      "factor_formulation": "\\text{VolExhaust} = \\text{POW}(\\text{TS\\_CORR}(\\text{close}, \\text{SEQUENCE}(10), 10), 2) \\times \\text{REGRESI}(\\text{close}, \\text{SEQUENCE}(10), 10) \\times \\text{TS\\_RANK}(\\text{volume}, 10)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 5,
        "evolution_phase": "mutation",
        "trajectory_id": "04512a60411e",
        "parent_trajectory_ids": [
          "a18c15e6fbc9"
        ],
        "hypothesis": "Hypothesis: The 'Trend Exhaustion' factor, calculated as the interaction between a 10-day price-time R-squared and the 5-day average of residuals from a linear trend, predicts a negative return reversal when both metrics are high, as it identifies overextended price moves that lack sustainable structural support.\n                Concise Observation: While the parent strategy focused on illiquid gaps and price floors, market data often shows that even liquid, high-momentum stocks reach 'exhaustion' points where the strength of the trend (R-squared) becomes a liability if the price accelerates too far above the regression line.\n                Concise Justification: High R-squared values indicate a consensus-driven trend; however, when residuals also spike, it suggests a 'blow-off top' or parabolic move where the rate of change is no longer consistent with the established trend, leading to a high-probability reversal.\n                Concise Knowledge: If a price trend exhibits extremely high linearity (high R-squared) alongside large positive deviations from that trend (high residuals), the probability of a mean-reversion event increases because the current price has decoupled from its recent growth trajectory.\n                concise Specification: The factor is defined as the product of the R-squared of $close over a 10-day window against a time index and the 5-day mean of the residuals from that same regression. High positive values are expected to correlate with negative future returns.\n                ",
        "initial_direction": "Identify 'Trend Exhaustion' by interacting RSQR10 with RESI5: high R-squared combined with high positive residuals suggests an overextended trend prone to mean reversion.",
        "planning_direction": "Identify 'Trend Exhaustion' by interacting RSQR10 with RESI5: high R-squared combined with high positive residuals suggests an overextended trend prone to mean reversion.",
        "created_at": "2026-01-21T05:08:19.773615"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.138769923707156,
        "ICIR": 0.0579389812500951,
        "1day.excess_return_without_cost.std": 0.0040989617588207,
        "1day.excess_return_with_cost.annualized_return": 0.0051778527602755,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002212018467671,
        "1day.excess_return_without_cost.annualized_return": 0.0526460395305887,
        "1day.excess_return_with_cost.std": 0.0041005433745646,
        "Rank IC": 0.0219338929702103,
        "IC": 0.007835455148842,
        "1day.excess_return_without_cost.max_drawdown": -0.0926508288638392,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.8325366485931793,
        "1day.pa": 0.0,
        "l2.valid": 0.996543139529108,
        "Rank ICIR": 0.1626444140519063,
        "l2.train": 0.9938319614595916,
        "1day.excess_return_with_cost.information_ratio": 0.0818502118532473,
        "1day.excess_return_with_cost.mean": 2.1755683866704084e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Trend Exhaustion' hypothesis. The current results show a significant improvement in Information Coefficient (IC) and a slight increase in Annualized Return compared to the previous SOTA, although the Information Ratio (IR) and Max Drawdown (MDD) have deteriorated. This suggests that while the predictive power (IC) of the trend exhaustion concept is strong, the current implementationsspecifically combining R-squared with residualsmay introduce higher volatility or tail risk in the portfolio construction phase.",
        "hypothesis_evaluation": "The hypothesis that combining trend linearity (R-squared) with residuals identifies exhaustion is supported by the improved IC (0.0078 vs 0.0057). However, the 'Normalized_Linear_Deviation_Reversal' and 'Trend_Linearity_Volume_Exhaustion' implementations likely contributed to the higher IC. The interaction between price acceleration and volume (VolExhaust) appears to be a strong signal, but the increased drawdown suggests the 'exhaustion' signal might be premature or lead to high-turnover volatility.",
        "decision": true,
        "reason": "The current factors use the absolute level of residuals or their Z-score. However, a high residual can persist in a strong trend. By looking at the change in residuals (the second derivative of price relative to the linear trend), we can better capture the 'parabolic' acceleration phase. Furthermore, the current symbol lengths are approaching complexity limits; simplifying the interaction by using a 5-day ROC of the 10-day residual, multiplied by a binary volume trigger (volume > mean volume), may reduce noise and improve the Information Ratio."
      }
    },
    "5e477df39189f4f7": {
      "factor_id": "5e477df39189f4f7",
      "factor_name": "Liquidity_Buffered_Gap_Continuity_5D",
      "factor_expression": "(($open - DELAY($close, 1)) / (TS_MEAN($high - $low, 5) + 1e-8)) * (1 - RANK(TS_MEAN(ABS($return) / ($volume + 1e-8), 5)))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(($open - DELAY($close, 1)) / (TS_MEAN(MAX($high - $low, MAX(ABS($high - DELAY($close, 1)), ABS($low - DELAY($close, 1)))), 5) + 1e-8)) * (1 - RANK(TS_MEAN(ABS($close / DELAY($close, 1) - 1) / ($volume + 1e-8), 5)))\" # Your output factor expression will be filled in here\n    name = \"Liquidity_Buffered_Gap_Continuity_5D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies sustainable institutional signals by combining the overnight price gap with a liquidity filter. The gap is normalized by the average true range (ATR) to measure conviction. It is then adjusted by the inverse rank of the Amihud illiquidity ratio (absolute return over volume) over a 5-day window. Gaps occurring with low illiquidity (high liquidity) are prioritized, as they suggest sustainable institutional positioning rather than exhausted price spikes.",
      "factor_formulation": "\\text{Gap} = \\frac{\\text{open} - \\text{delay}(\\text{close}, 1)}{\\text{TS_MEAN}(\\text{high} - \\text{low}, 5)}, \\text{Illiq} = \\frac{\\text{ABS}(\\text{return})}{\\text{volume}}, \\text{Factor} = \\text{Gap} \\times (1 - \\text{RANK}(\\text{TS_MEAN}(\\text{Illiq}, 5)))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 4,
        "evolution_phase": "crossover",
        "trajectory_id": "8005870a87f9",
        "parent_trajectory_ids": [
          "85552c59600c",
          "849c0b2b23a0"
        ],
        "hypothesis": "Hypothesis: The 'Liquidity-Buffered Gap Continuity' factor identifies high-conviction institutional signals by multiplying the overnight gap (normalized by ATR) with a volume-weighted momentum component, while applying a non-linear penalty for liquidity exhaustion via the Amihud illiquidity spike.\n                Concise Observation: Parent 1 (RankIC 0.029) captures mean-reversion from liquidity exhaustion, while Parent 2 (RankIC 0.021) captures momentum from overnight gaps; combining them addresses the failure of gaps to persist when liquidity is thin.\n                Concise Justification: Institutional flows create price gaps that require sufficient liquidity to sustain a trend; by filtering gaps through a 5-day liquidity exhaustion window, we distinguish between high-capacity informed trades and low-capacity price spikes.\n                Concise Knowledge: If an overnight price gap occurs without a corresponding spike in the Amihud illiquidity ratio, it is more likely to represent sustainable institutional positioning; conversely, gaps accompanied by liquidity exhaustion often signal mean-reverting blow-off tops.\n                concise Specification: Define Gap as (Open - PrevClose) / ATR(5); define Liquidity Exhaustion as the 5-day Amihud Illiquidity (abs(Return)/Volume) relative to its moving average; the factor is the Gap multiplied by (1 - Rank(Liquidity Exhaustion)).\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T04:48:52.566842"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0997286417633351,
        "ICIR": 0.0383901482681001,
        "1day.excess_return_without_cost.std": 0.0042050885487607,
        "1day.excess_return_with_cost.annualized_return": 0.0442622896678722,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003828496826256,
        "1day.excess_return_without_cost.annualized_return": 0.0911182244648932,
        "1day.excess_return_with_cost.std": 0.0042059549999511,
        "Rank IC": 0.0218397678289023,
        "IC": 0.0052286194384379,
        "1day.excess_return_without_cost.max_drawdown": -0.0924830475110537,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.4045642962503515,
        "1day.pa": 0.0,
        "l2.valid": 0.996452257992103,
        "Rank ICIR": 0.1641165388268079,
        "l2.train": 0.9944704030580672,
        "1day.excess_return_with_cost.information_ratio": 0.6821514014294594,
        "1day.excess_return_with_cost.mean": 0.0001859760070078
      },
      "feedback": {
        "observations": "The current experiment focused on the 'Liquidity-Buffered Gap Continuity' hypothesis by testing two variations: a 5-day ATR-normalized gap with a liquidity rank filter, and a 10-day Z-score gap with an illiquidity penalty. The results show a significant improvement in the Information Ratio (1.40 vs 0.97) and Annualized Return (9.1% vs 5.2%) compared to the SOTA, although the Max Drawdown and IC slightly deteriorated. This suggests that the liquidity filter effectively isolates higher-quality momentum signals, leading to better risk-adjusted returns despite a slightly lower overall correlation (IC).",
        "hypothesis_evaluation": "The results strongly support the hypothesis that filtering overnight gaps with liquidity metrics (Amihud ratio) identifies more sustainable price movements. The 5-day and 10-day implementations demonstrate that 'liquidity-buffered' gaps provide a more robust signal than raw price gaps. However, the increase in Max Drawdown suggests that while the returns are higher, the factor may be susceptible to specific market regimes where liquidity-driven signals cluster and then revert.",
        "decision": true,
        "reason": "The current factors use static windows (5D/10D). In high-volatility regimes, liquidity dries up faster, making static windows lag. By using a 'Liquidity Surprise' (ratio of current illiquidity to its trend), we can better identify genuine institutional 'stealth' entries versus broad market exhaustion. Furthermore, simplifying the gap normalization to a simple percentage change relative to a 20-day volatility band may reduce complexity while maintaining the signal's core logic."
      }
    },
    "1c7c5aba6cd4860d": {
      "factor_id": "1c7c5aba6cd4860d",
      "factor_name": "Gap_Momentum_Liquidity_Resilience_10D",
      "factor_expression": "ZSCORE(($open - DELAY($close, 1)) / (DELAY($close, 1) + 1e-8)) * RANK(-TS_MEAN(ABS($return) / ($volume + 1e-8), 10))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"ZSCORE(($open - DELAY($close, 1)) / (DELAY($close, 1) + 1e-8)) * RANK(-TS_MEAN(ABS(($close - DELAY($close, 1)) / (DELAY($close, 1) + 1e-8)) / ($volume + 1e-8), 10))\" # Your output factor expression will be filled in here\n    name = \"Gap_Momentum_Liquidity_Resilience_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor captures the persistence of overnight gaps by filtering for liquidity exhaustion. It uses a 10-day window to calculate the average illiquidity (Amihud ratio) and penalizes gaps that coincide with spikes in illiquidity. By multiplying the normalized gap by the negative Z-score of recent illiquidity, the factor highlights price jumps supported by deep market interest, which are more likely to trend rather than mean-revert.",
      "factor_formulation": "\\text{Factor} = \\text{ZSCORE}(\\frac{\\text{open} - \\text{delay}(\\text{close}, 1)}{\\text{delay}(\\text{close}, 1)}) \\times \\text{RANK}(-\\text{TS_MEAN}(\\frac{\\text{ABS}(\\text{return})}{\\text{volume}}, 10))",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 4,
        "evolution_phase": "crossover",
        "trajectory_id": "8005870a87f9",
        "parent_trajectory_ids": [
          "85552c59600c",
          "849c0b2b23a0"
        ],
        "hypothesis": "Hypothesis: The 'Liquidity-Buffered Gap Continuity' factor identifies high-conviction institutional signals by multiplying the overnight gap (normalized by ATR) with a volume-weighted momentum component, while applying a non-linear penalty for liquidity exhaustion via the Amihud illiquidity spike.\n                Concise Observation: Parent 1 (RankIC 0.029) captures mean-reversion from liquidity exhaustion, while Parent 2 (RankIC 0.021) captures momentum from overnight gaps; combining them addresses the failure of gaps to persist when liquidity is thin.\n                Concise Justification: Institutional flows create price gaps that require sufficient liquidity to sustain a trend; by filtering gaps through a 5-day liquidity exhaustion window, we distinguish between high-capacity informed trades and low-capacity price spikes.\n                Concise Knowledge: If an overnight price gap occurs without a corresponding spike in the Amihud illiquidity ratio, it is more likely to represent sustainable institutional positioning; conversely, gaps accompanied by liquidity exhaustion often signal mean-reverting blow-off tops.\n                concise Specification: Define Gap as (Open - PrevClose) / ATR(5); define Liquidity Exhaustion as the 5-day Amihud Illiquidity (abs(Return)/Volume) relative to its moving average; the factor is the Gap multiplied by (1 - Rank(Liquidity Exhaustion)).\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T04:48:52.566842"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0997286417633351,
        "ICIR": 0.0383901482681001,
        "1day.excess_return_without_cost.std": 0.0042050885487607,
        "1day.excess_return_with_cost.annualized_return": 0.0442622896678722,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003828496826256,
        "1day.excess_return_without_cost.annualized_return": 0.0911182244648932,
        "1day.excess_return_with_cost.std": 0.0042059549999511,
        "Rank IC": 0.0218397678289023,
        "IC": 0.0052286194384379,
        "1day.excess_return_without_cost.max_drawdown": -0.0924830475110537,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.4045642962503515,
        "1day.pa": 0.0,
        "l2.valid": 0.996452257992103,
        "Rank ICIR": 0.1641165388268079,
        "l2.train": 0.9944704030580672,
        "1day.excess_return_with_cost.information_ratio": 0.6821514014294594,
        "1day.excess_return_with_cost.mean": 0.0001859760070078
      },
      "feedback": {
        "observations": "The current experiment focused on the 'Liquidity-Buffered Gap Continuity' hypothesis by testing two variations: a 5-day ATR-normalized gap with a liquidity rank filter, and a 10-day Z-score gap with an illiquidity penalty. The results show a significant improvement in the Information Ratio (1.40 vs 0.97) and Annualized Return (9.1% vs 5.2%) compared to the SOTA, although the Max Drawdown and IC slightly deteriorated. This suggests that the liquidity filter effectively isolates higher-quality momentum signals, leading to better risk-adjusted returns despite a slightly lower overall correlation (IC).",
        "hypothesis_evaluation": "The results strongly support the hypothesis that filtering overnight gaps with liquidity metrics (Amihud ratio) identifies more sustainable price movements. The 5-day and 10-day implementations demonstrate that 'liquidity-buffered' gaps provide a more robust signal than raw price gaps. However, the increase in Max Drawdown suggests that while the returns are higher, the factor may be susceptible to specific market regimes where liquidity-driven signals cluster and then revert.",
        "decision": true,
        "reason": "The current factors use static windows (5D/10D). In high-volatility regimes, liquidity dries up faster, making static windows lag. By using a 'Liquidity Surprise' (ratio of current illiquidity to its trend), we can better identify genuine institutional 'stealth' entries versus broad market exhaustion. Furthermore, simplifying the gap normalization to a simple percentage change relative to a 20-day volatility band may reduce complexity while maintaining the signal's core logic."
      }
    },
    "bf73055a0f11209a": {
      "factor_id": "bf73055a0f11209a",
      "factor_name": "Support_Integrity_V1_5D",
      "factor_expression": "(MIN($open, $close) - $low) / (TS_STD($volume, 5) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(MIN($open, $close) - $low) / (TS_STD($volume, 5) + 1e-8)\" # Your output factor expression will be filled in here\n    name = \"Support_Integrity_V1_5D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies price support integrity by calculating the ratio of the lower shadow length to the 5-day rolling standard deviation of volume. A high value suggests that price rebounds (long lower shadows) are occurring under stable volume conditions, indicating firm institutional absorption rather than volatile price discovery.",
      "factor_formulation": "SI_{5D} = \\frac{\\min(open, close) - low}{TS\\_STD(volume, 5)}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 0,
        "evolution_phase": "original",
        "trajectory_id": "08047bc58707",
        "parent_trajectory_ids": [],
        "hypothesis": "Hypothesis: The 'Support Integrity' factor, defined as the ratio of the lower shadow length (KLOW) to the 5-day rolling standard deviation of volume (VSTD5), positively predicts future returns by identifying price levels where stable accumulation occurs under low-volatility conditions.\n                Concise Observation: Market participants often interpret long lower shadows as signs of recovery, but these signals are frequently false if accompanied by high volume volatility, which indicates unstable price discovery rather than firm support.\n                Concise Justification: Crossing a price-action metric (KLOW) with a volume-stability metric (VSTD5) filters out 'noisy' price rebounds, ensuring that the identified support is characterized by deliberate and steady buying pressure.\n                Concise Knowledge: If a security exhibits significant lower shadows (KLOW) while volume volatility (VSTD5) remains low, it suggests consistent institutional absorption at price floors rather than panic selling or erratic trading; when these two conditions coincide, the price support is more likely to hold.\n                concise Specification: The factor is calculated as KLOW divided by the 5-day standard deviation of volume, where KLOW is the difference between the minimum of open/close and the low price, applied to daily frequency data.\n                ",
        "initial_direction": "Analyze 'Support Integrity' under stress by crossing KLOW with VSTD5: strong lower shadows accompanied by low volume volatility indicate stable accumulation at price floors.",
        "planning_direction": "Analyze 'Support Integrity' under stress by crossing KLOW with VSTD5: strong lower shadows accompanied by low volume volatility indicate stable accumulation at price floors.",
        "created_at": "2026-01-20T21:20:41.336586"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1220663117847332,
        "ICIR": 0.0440301932004756,
        "1day.excess_return_without_cost.std": 0.0040936414426882,
        "1day.excess_return_with_cost.annualized_return": 0.0196034096373383,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002803713366073,
        "1day.excess_return_without_cost.annualized_return": 0.0667283781125529,
        "1day.excess_return_with_cost.std": 0.0040952096821865,
        "Rank IC": 0.0217174998163428,
        "IC": 0.0058491950065442,
        "1day.excess_return_without_cost.max_drawdown": -0.094328360552949,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.0566040960038003,
        "1day.pa": 0.0,
        "l2.valid": 0.9962600993062564,
        "Rank ICIR": 0.1675278112313153,
        "l2.train": 0.9940286244375036,
        "1day.excess_return_with_cost.information_ratio": 0.3102894383287448,
        "1day.excess_return_with_cost.mean": 8.236726738377446e-05
      },
      "feedback": {
        "observations": "The current iteration of the 'Support Integrity' framework has successfully improved upon the previous SOTA across most key performance metrics. Specifically, the Smoothed_Support_Integrity_5D (SSI_5D) and its variants have demonstrated a higher Information Ratio (1.056 vs 0.972), a higher Annualized Return (6.67% vs 5.20%), and a slightly improved IC (0.0058 vs 0.0057). However, the Max Drawdown has worsened (-0.094 vs -0.072), suggesting that while the signal is more predictive on average, it may be susceptible to higher tail risk or market-wide volatility regimes. The complexity of the factors remains low (SL < 300, ER < 6), which is positive for generalization.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that the ratio of lower shadow length to volume volatility predicts future returns. The improvement seen in the 'Smoothed' version (SSI_5D) indicates that the 'Support Integrity' signal is not just a transient daily noise but a structural accumulation pattern that benefits from temporal filtering. The 'Ranked' version also suggests that the relative strength of this support across the cross-section is a valid alpha source.",
        "decision": true,
        "reason": "Currently, the numerator (lower shadow) is an absolute price value, which might bias the factor towards higher-priced or more volatile stocks. Normalizing the lower shadow by the daily range (KLOW / (High - Low)) creates a unitless ratio of 'recovery strength'. Furthermore, adding a condition or a multiplier that rewards increasing volume (positive volume gradient) alongside low volume volatility could distinguish between 'quiet accumulation' and 'lack of interest'. This aims to address the increased Max Drawdown by ensuring we only capture active support levels."
      }
    },
    "b346bfcb3d9aec73": {
      "factor_id": "b346bfcb3d9aec73",
      "factor_name": "Ranked_Support_Stability_10D",
      "factor_expression": "RANK((MIN($open, $close) - $low) / (TS_STD($volume, 10) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK((MIN($open, $close) - $low) / (TS_STD($volume, 10) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Ranked_Support_Stability_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A cross-sectionally ranked version of the Support Integrity hypothesis, focusing on the relative strength of price floors. It normalizes the lower shadow by the 10-day volume volatility to identify stocks with the most reliable 'buying-the-dip' signals relative to the market.",
      "factor_formulation": "RSS_{10D} = RANK\\left(\\frac{\\min(open, close) - low}{TS\\_STD(volume, 10)}\\right)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 0,
        "evolution_phase": "original",
        "trajectory_id": "08047bc58707",
        "parent_trajectory_ids": [],
        "hypothesis": "Hypothesis: The 'Support Integrity' factor, defined as the ratio of the lower shadow length (KLOW) to the 5-day rolling standard deviation of volume (VSTD5), positively predicts future returns by identifying price levels where stable accumulation occurs under low-volatility conditions.\n                Concise Observation: Market participants often interpret long lower shadows as signs of recovery, but these signals are frequently false if accompanied by high volume volatility, which indicates unstable price discovery rather than firm support.\n                Concise Justification: Crossing a price-action metric (KLOW) with a volume-stability metric (VSTD5) filters out 'noisy' price rebounds, ensuring that the identified support is characterized by deliberate and steady buying pressure.\n                Concise Knowledge: If a security exhibits significant lower shadows (KLOW) while volume volatility (VSTD5) remains low, it suggests consistent institutional absorption at price floors rather than panic selling or erratic trading; when these two conditions coincide, the price support is more likely to hold.\n                concise Specification: The factor is calculated as KLOW divided by the 5-day standard deviation of volume, where KLOW is the difference between the minimum of open/close and the low price, applied to daily frequency data.\n                ",
        "initial_direction": "Analyze 'Support Integrity' under stress by crossing KLOW with VSTD5: strong lower shadows accompanied by low volume volatility indicate stable accumulation at price floors.",
        "planning_direction": "Analyze 'Support Integrity' under stress by crossing KLOW with VSTD5: strong lower shadows accompanied by low volume volatility indicate stable accumulation at price floors.",
        "created_at": "2026-01-20T21:20:41.336586"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1220663117847332,
        "ICIR": 0.0440301932004756,
        "1day.excess_return_without_cost.std": 0.0040936414426882,
        "1day.excess_return_with_cost.annualized_return": 0.0196034096373383,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002803713366073,
        "1day.excess_return_without_cost.annualized_return": 0.0667283781125529,
        "1day.excess_return_with_cost.std": 0.0040952096821865,
        "Rank IC": 0.0217174998163428,
        "IC": 0.0058491950065442,
        "1day.excess_return_without_cost.max_drawdown": -0.094328360552949,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.0566040960038003,
        "1day.pa": 0.0,
        "l2.valid": 0.9962600993062564,
        "Rank ICIR": 0.1675278112313153,
        "l2.train": 0.9940286244375036,
        "1day.excess_return_with_cost.information_ratio": 0.3102894383287448,
        "1day.excess_return_with_cost.mean": 8.236726738377446e-05
      },
      "feedback": {
        "observations": "The current iteration of the 'Support Integrity' framework has successfully improved upon the previous SOTA across most key performance metrics. Specifically, the Smoothed_Support_Integrity_5D (SSI_5D) and its variants have demonstrated a higher Information Ratio (1.056 vs 0.972), a higher Annualized Return (6.67% vs 5.20%), and a slightly improved IC (0.0058 vs 0.0057). However, the Max Drawdown has worsened (-0.094 vs -0.072), suggesting that while the signal is more predictive on average, it may be susceptible to higher tail risk or market-wide volatility regimes. The complexity of the factors remains low (SL < 300, ER < 6), which is positive for generalization.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that the ratio of lower shadow length to volume volatility predicts future returns. The improvement seen in the 'Smoothed' version (SSI_5D) indicates that the 'Support Integrity' signal is not just a transient daily noise but a structural accumulation pattern that benefits from temporal filtering. The 'Ranked' version also suggests that the relative strength of this support across the cross-section is a valid alpha source.",
        "decision": true,
        "reason": "Currently, the numerator (lower shadow) is an absolute price value, which might bias the factor towards higher-priced or more volatile stocks. Normalizing the lower shadow by the daily range (KLOW / (High - Low)) creates a unitless ratio of 'recovery strength'. Furthermore, adding a condition or a multiplier that rewards increasing volume (positive volume gradient) alongside low volume volatility could distinguish between 'quiet accumulation' and 'lack of interest'. This aims to address the increased Max Drawdown by ensuring we only capture active support levels."
      }
    },
    "1a43e8255bf79e56": {
      "factor_id": "1a43e8255bf79e56",
      "factor_name": "Smoothed_Support_Integrity_5D",
      "factor_expression": "TS_MEAN((MIN($open, $close) - $low) / (TS_STD($volume, 5) + 1e-8), 3)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_MEAN((MIN($open, $close) - $low) / (TS_STD($volume, 5) + 1e-8), 3)\" # Your output factor expression will be filled in here\n    name = \"Smoothed_Support_Integrity_5D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor applies a 3-day simple moving average to the Support Integrity ratio to filter out single-day noise. It captures sustained periods where price dips are consistently met with steady, low-volatility buying pressure.",
      "factor_formulation": "SSI_{5D} = TS\\_MEAN\\left(\\frac{\\min(open, close) - low}{TS\\_STD(volume, 5)}, 3\\right)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 0,
        "evolution_phase": "original",
        "trajectory_id": "08047bc58707",
        "parent_trajectory_ids": [],
        "hypothesis": "Hypothesis: The 'Support Integrity' factor, defined as the ratio of the lower shadow length (KLOW) to the 5-day rolling standard deviation of volume (VSTD5), positively predicts future returns by identifying price levels where stable accumulation occurs under low-volatility conditions.\n                Concise Observation: Market participants often interpret long lower shadows as signs of recovery, but these signals are frequently false if accompanied by high volume volatility, which indicates unstable price discovery rather than firm support.\n                Concise Justification: Crossing a price-action metric (KLOW) with a volume-stability metric (VSTD5) filters out 'noisy' price rebounds, ensuring that the identified support is characterized by deliberate and steady buying pressure.\n                Concise Knowledge: If a security exhibits significant lower shadows (KLOW) while volume volatility (VSTD5) remains low, it suggests consistent institutional absorption at price floors rather than panic selling or erratic trading; when these two conditions coincide, the price support is more likely to hold.\n                concise Specification: The factor is calculated as KLOW divided by the 5-day standard deviation of volume, where KLOW is the difference between the minimum of open/close and the low price, applied to daily frequency data.\n                ",
        "initial_direction": "Analyze 'Support Integrity' under stress by crossing KLOW with VSTD5: strong lower shadows accompanied by low volume volatility indicate stable accumulation at price floors.",
        "planning_direction": "Analyze 'Support Integrity' under stress by crossing KLOW with VSTD5: strong lower shadows accompanied by low volume volatility indicate stable accumulation at price floors.",
        "created_at": "2026-01-20T21:20:41.336586"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1220663117847332,
        "ICIR": 0.0440301932004756,
        "1day.excess_return_without_cost.std": 0.0040936414426882,
        "1day.excess_return_with_cost.annualized_return": 0.0196034096373383,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002803713366073,
        "1day.excess_return_without_cost.annualized_return": 0.0667283781125529,
        "1day.excess_return_with_cost.std": 0.0040952096821865,
        "Rank IC": 0.0217174998163428,
        "IC": 0.0058491950065442,
        "1day.excess_return_without_cost.max_drawdown": -0.094328360552949,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.0566040960038003,
        "1day.pa": 0.0,
        "l2.valid": 0.9962600993062564,
        "Rank ICIR": 0.1675278112313153,
        "l2.train": 0.9940286244375036,
        "1day.excess_return_with_cost.information_ratio": 0.3102894383287448,
        "1day.excess_return_with_cost.mean": 8.236726738377446e-05
      },
      "feedback": {
        "observations": "The current iteration of the 'Support Integrity' framework has successfully improved upon the previous SOTA across most key performance metrics. Specifically, the Smoothed_Support_Integrity_5D (SSI_5D) and its variants have demonstrated a higher Information Ratio (1.056 vs 0.972), a higher Annualized Return (6.67% vs 5.20%), and a slightly improved IC (0.0058 vs 0.0057). However, the Max Drawdown has worsened (-0.094 vs -0.072), suggesting that while the signal is more predictive on average, it may be susceptible to higher tail risk or market-wide volatility regimes. The complexity of the factors remains low (SL < 300, ER < 6), which is positive for generalization.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that the ratio of lower shadow length to volume volatility predicts future returns. The improvement seen in the 'Smoothed' version (SSI_5D) indicates that the 'Support Integrity' signal is not just a transient daily noise but a structural accumulation pattern that benefits from temporal filtering. The 'Ranked' version also suggests that the relative strength of this support across the cross-section is a valid alpha source.",
        "decision": true,
        "reason": "Currently, the numerator (lower shadow) is an absolute price value, which might bias the factor towards higher-priced or more volatile stocks. Normalizing the lower shadow by the daily range (KLOW / (High - Low)) creates a unitless ratio of 'recovery strength'. Furthermore, adding a condition or a multiplier that rewards increasing volume (positive volume gradient) alongside low volume volatility could distinguish between 'quiet accumulation' and 'lack of interest'. This aims to address the increased Max Drawdown by ensuring we only capture active support levels."
      }
    },
    "94d25e79ba1d9311": {
      "factor_id": "94d25e79ba1d9311",
      "factor_name": "Abnormal_Liquidity_Consumption_Ratio_5D",
      "factor_expression": "RANK(($high - $low) / (TS_STD($return, 5) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(($high - $low) / (TS_STD($close / DELAY($close, 1) - 1, 5) + 0.00000001))\" # Your output factor expression will be filled in here\n    name = \"Abnormal_Liquidity_Consumption_Ratio_5D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor measures the ratio of the current day's price range (High-Low) to the 5-day rolling standard deviation of daily returns. It identifies periods where intraday price volatility significantly exceeds the recent interday volatility regime, suggesting potential liquidity exhaustion or overextension.",
      "factor_formulation": "\\text{RANK}\\left(\\frac{\\text{high} - \\text{low}}{\\text{TS\\_STD}(\\text{return}, 5) + 1e-8}\\right)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 0,
        "evolution_phase": "original",
        "trajectory_id": "c8d9fff8e6e4",
        "parent_trajectory_ids": [],
        "hypothesis": "Hypothesis: The ratio of the current day's price range (High-Low) to the 5-day standard deviation of daily returns identifies periods of abnormal liquidity consumption and predicts short-term mean reversion or trend exhaustion.\n                Concise Observation: The relationship between daily price extremes (High/Low) and closing-price-based volatility (STD) often diverges during market stress, where intraday noise increases faster than interday trend strength.\n                Concise Justification: Comparing a point-in-time range (KLEN) to a trailing volatility measure (STD5) captures the 'volatility of volatility' and the immediate imbalance between buyer and seller urgency relative to the established regime.\n                Concise Knowledge: If the intraday range significantly exceeds the recent historical volatility, it indicates a surge in informed trading or panic-driven liquidity demand; when this ratio reaches extreme levels, the market is likely to experience a temporary price correction as liquidity providers demand a premium for the heightened risk.\n                concise Specification: The factor is defined as (High - Low) / STD(LogReturn, 5). A high value suggests an 'overextended' intraday move relative to the 5-day baseline, expected to negatively correlate with the next 5-day forward returns in a mean-reverting market.\n                ",
        "initial_direction": "Evaluate 'Intraday-to-Interday Volatility Shift' by comparing KLEN to STD5: when intraday ranges exceed 5-day realized volatility, it signals a regime shift in market participants' urgency.",
        "planning_direction": "Evaluate 'Intraday-to-Interday Volatility Shift' by comparing KLEN to STD5: when intraday ranges exceed 5-day realized volatility, it signals a regime shift in market participants' urgency.",
        "created_at": "2026-01-20T21:51:13.205695"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0994481113999163,
        "ICIR": 0.0342210459476005,
        "1day.excess_return_without_cost.std": 0.0038531976957521,
        "1day.excess_return_with_cost.annualized_return": 0.0170952998995187,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002718211856144,
        "1day.excess_return_without_cost.annualized_return": 0.064693442176239,
        "1day.excess_return_with_cost.std": 0.003855677316592,
        "Rank IC": 0.0216769045323516,
        "IC": 0.0043713920080057,
        "1day.excess_return_without_cost.max_drawdown": -0.0861035372663329,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.0883046606789435,
        "1day.pa": 0.0,
        "l2.valid": 0.9962563804229888,
        "Rank ICIR": 0.1685037786293848,
        "l2.train": 0.9935761979131807,
        "1day.excess_return_with_cost.information_ratio": 0.2874005301850193,
        "1day.excess_return_with_cost.mean": 7.182899117444871e-05
      },
      "feedback": {
        "observations": "The current iteration focused on the ratio of intraday range to interday return volatility. The results show a significant improvement in the Information Ratio (1.088 vs 0.972) and Annualized Return (0.0647 vs 0.0520) compared to the SOTA, although the IC slightly decreased and the Max Drawdown increased. The 'Abnormal_Liquidity_Consumption_Ratio_5D' and its smoothed/Z-scored variants successfully captured short-term alpha, suggesting that the relationship between intraday price action and recent volatility regimes is a potent predictor.",
        "hypothesis_evaluation": "The hypothesis is strongly supported. The metrics indicate that normalizing the intraday range by return standard deviation effectively identifies profitable signals. The improvement in Information Ratio suggests that this normalization provides a more stable risk-adjusted return than previous methods. However, the slight drop in IC and increase in drawdown suggest that while the 'extreme' signals are profitable, they may introduce higher tail risk or timing sensitivity.",
        "decision": true,
        "reason": "While the current range-to-volatility ratio works well, it treats all 'wide range' days equally. A wide range on low volume might indicate a lack of liquidity (slippage), whereas a wide range on high volume indicates active liquidity consumption. By integrating a volume component (e.g., current volume relative to its 5-day average), we can refine the signal to focus on 'True' liquidity exhaustion events, likely improving the IC and reducing the Max Drawdown by filtering out false signals."
      }
    },
    "cfc1ea350f314ce9": {
      "factor_id": "cfc1ea350f314ce9",
      "factor_name": "Relative_Range_Volatility_ZScore_10D",
      "factor_expression": "TS_ZSCORE(($high - $low) / (TS_STD($return, 10) + 1e-8), 10)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_ZSCORE(($high - $low) / TS_STD(TS_PCTCHANGE($close, 1), 10), 10)\" # Your output factor expression will be filled in here\n    name = \"Relative_Range_Volatility_ZScore_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor calculates the Z-score of the intraday range normalized by the trailing 10-day return volatility. By applying a time-series Z-score to the ratio, it highlights extreme deviations from the local average liquidity consumption, signaling mean reversion opportunities.",
      "factor_formulation": "\\text{TS\\_ZSCORE}\\left(\\frac{\\text{high} - \\text{low}}{\\text{TS\\_STD}(\\text{return}, 10) + 1e-8}, 10\\right)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 0,
        "evolution_phase": "original",
        "trajectory_id": "c8d9fff8e6e4",
        "parent_trajectory_ids": [],
        "hypothesis": "Hypothesis: The ratio of the current day's price range (High-Low) to the 5-day standard deviation of daily returns identifies periods of abnormal liquidity consumption and predicts short-term mean reversion or trend exhaustion.\n                Concise Observation: The relationship between daily price extremes (High/Low) and closing-price-based volatility (STD) often diverges during market stress, where intraday noise increases faster than interday trend strength.\n                Concise Justification: Comparing a point-in-time range (KLEN) to a trailing volatility measure (STD5) captures the 'volatility of volatility' and the immediate imbalance between buyer and seller urgency relative to the established regime.\n                Concise Knowledge: If the intraday range significantly exceeds the recent historical volatility, it indicates a surge in informed trading or panic-driven liquidity demand; when this ratio reaches extreme levels, the market is likely to experience a temporary price correction as liquidity providers demand a premium for the heightened risk.\n                concise Specification: The factor is defined as (High - Low) / STD(LogReturn, 5). A high value suggests an 'overextended' intraday move relative to the 5-day baseline, expected to negatively correlate with the next 5-day forward returns in a mean-reverting market.\n                ",
        "initial_direction": "Evaluate 'Intraday-to-Interday Volatility Shift' by comparing KLEN to STD5: when intraday ranges exceed 5-day realized volatility, it signals a regime shift in market participants' urgency.",
        "planning_direction": "Evaluate 'Intraday-to-Interday Volatility Shift' by comparing KLEN to STD5: when intraday ranges exceed 5-day realized volatility, it signals a regime shift in market participants' urgency.",
        "created_at": "2026-01-20T21:51:13.205695"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0994481113999163,
        "ICIR": 0.0342210459476005,
        "1day.excess_return_without_cost.std": 0.0038531976957521,
        "1day.excess_return_with_cost.annualized_return": 0.0170952998995187,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002718211856144,
        "1day.excess_return_without_cost.annualized_return": 0.064693442176239,
        "1day.excess_return_with_cost.std": 0.003855677316592,
        "Rank IC": 0.0216769045323516,
        "IC": 0.0043713920080057,
        "1day.excess_return_without_cost.max_drawdown": -0.0861035372663329,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.0883046606789435,
        "1day.pa": 0.0,
        "l2.valid": 0.9962563804229888,
        "Rank ICIR": 0.1685037786293848,
        "l2.train": 0.9935761979131807,
        "1day.excess_return_with_cost.information_ratio": 0.2874005301850193,
        "1day.excess_return_with_cost.mean": 7.182899117444871e-05
      },
      "feedback": {
        "observations": "The current iteration focused on the ratio of intraday range to interday return volatility. The results show a significant improvement in the Information Ratio (1.088 vs 0.972) and Annualized Return (0.0647 vs 0.0520) compared to the SOTA, although the IC slightly decreased and the Max Drawdown increased. The 'Abnormal_Liquidity_Consumption_Ratio_5D' and its smoothed/Z-scored variants successfully captured short-term alpha, suggesting that the relationship between intraday price action and recent volatility regimes is a potent predictor.",
        "hypothesis_evaluation": "The hypothesis is strongly supported. The metrics indicate that normalizing the intraday range by return standard deviation effectively identifies profitable signals. The improvement in Information Ratio suggests that this normalization provides a more stable risk-adjusted return than previous methods. However, the slight drop in IC and increase in drawdown suggest that while the 'extreme' signals are profitable, they may introduce higher tail risk or timing sensitivity.",
        "decision": true,
        "reason": "While the current range-to-volatility ratio works well, it treats all 'wide range' days equally. A wide range on low volume might indicate a lack of liquidity (slippage), whereas a wide range on high volume indicates active liquidity consumption. By integrating a volume component (e.g., current volume relative to its 5-day average), we can refine the signal to focus on 'True' liquidity exhaustion events, likely improving the IC and reducing the Max Drawdown by filtering out false signals."
      }
    },
    "5293a32e7f3267d7": {
      "factor_id": "5293a32e7f3267d7",
      "factor_name": "Smoothed_Range_Volatility_Imbalance_5D",
      "factor_expression": "RANK(SMA(($high - $low) / (TS_STD($return, 5) + 1e-8), 5, 1))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(SMA(($high - $low) / (TS_STD($close / DELAY($close, 1) - 1, 5) + 0.00000001), 5, 1))\" # Your output factor expression will be filled in here\n    name = \"Smoothed_Range_Volatility_Imbalance_5D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor uses a 5-day simple moving average of the range-to-volatility ratio to capture persistent liquidity imbalances. It compares the intraday range magnitude against the 5-day return standard deviation, cross-sectionally ranked to identify stocks with the highest relative volatility of volatility.",
      "factor_formulation": "\\text{RANK}\\left(\\text{SMA}\\left(\\frac{\\text{high} - \\text{low}}{\\text{TS\\_STD}(\\text{return}, 5) + 1e-8}, 5, 1\\right)\\right)",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 0,
        "evolution_phase": "original",
        "trajectory_id": "c8d9fff8e6e4",
        "parent_trajectory_ids": [],
        "hypothesis": "Hypothesis: The ratio of the current day's price range (High-Low) to the 5-day standard deviation of daily returns identifies periods of abnormal liquidity consumption and predicts short-term mean reversion or trend exhaustion.\n                Concise Observation: The relationship between daily price extremes (High/Low) and closing-price-based volatility (STD) often diverges during market stress, where intraday noise increases faster than interday trend strength.\n                Concise Justification: Comparing a point-in-time range (KLEN) to a trailing volatility measure (STD5) captures the 'volatility of volatility' and the immediate imbalance between buyer and seller urgency relative to the established regime.\n                Concise Knowledge: If the intraday range significantly exceeds the recent historical volatility, it indicates a surge in informed trading or panic-driven liquidity demand; when this ratio reaches extreme levels, the market is likely to experience a temporary price correction as liquidity providers demand a premium for the heightened risk.\n                concise Specification: The factor is defined as (High - Low) / STD(LogReturn, 5). A high value suggests an 'overextended' intraday move relative to the 5-day baseline, expected to negatively correlate with the next 5-day forward returns in a mean-reverting market.\n                ",
        "initial_direction": "Evaluate 'Intraday-to-Interday Volatility Shift' by comparing KLEN to STD5: when intraday ranges exceed 5-day realized volatility, it signals a regime shift in market participants' urgency.",
        "planning_direction": "Evaluate 'Intraday-to-Interday Volatility Shift' by comparing KLEN to STD5: when intraday ranges exceed 5-day realized volatility, it signals a regime shift in market participants' urgency.",
        "created_at": "2026-01-20T21:51:13.205695"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0994481113999163,
        "ICIR": 0.0342210459476005,
        "1day.excess_return_without_cost.std": 0.0038531976957521,
        "1day.excess_return_with_cost.annualized_return": 0.0170952998995187,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002718211856144,
        "1day.excess_return_without_cost.annualized_return": 0.064693442176239,
        "1day.excess_return_with_cost.std": 0.003855677316592,
        "Rank IC": 0.0216769045323516,
        "IC": 0.0043713920080057,
        "1day.excess_return_without_cost.max_drawdown": -0.0861035372663329,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.0883046606789435,
        "1day.pa": 0.0,
        "l2.valid": 0.9962563804229888,
        "Rank ICIR": 0.1685037786293848,
        "l2.train": 0.9935761979131807,
        "1day.excess_return_with_cost.information_ratio": 0.2874005301850193,
        "1day.excess_return_with_cost.mean": 7.182899117444871e-05
      },
      "feedback": {
        "observations": "The current iteration focused on the ratio of intraday range to interday return volatility. The results show a significant improvement in the Information Ratio (1.088 vs 0.972) and Annualized Return (0.0647 vs 0.0520) compared to the SOTA, although the IC slightly decreased and the Max Drawdown increased. The 'Abnormal_Liquidity_Consumption_Ratio_5D' and its smoothed/Z-scored variants successfully captured short-term alpha, suggesting that the relationship between intraday price action and recent volatility regimes is a potent predictor.",
        "hypothesis_evaluation": "The hypothesis is strongly supported. The metrics indicate that normalizing the intraday range by return standard deviation effectively identifies profitable signals. The improvement in Information Ratio suggests that this normalization provides a more stable risk-adjusted return than previous methods. However, the slight drop in IC and increase in drawdown suggest that while the 'extreme' signals are profitable, they may introduce higher tail risk or timing sensitivity.",
        "decision": true,
        "reason": "While the current range-to-volatility ratio works well, it treats all 'wide range' days equally. A wide range on low volume might indicate a lack of liquidity (slippage), whereas a wide range on high volume indicates active liquidity consumption. By integrating a volume component (e.g., current volume relative to its 5-day average), we can refine the signal to focus on 'True' liquidity exhaustion events, likely improving the IC and reducing the Max Drawdown by filtering out false signals."
      }
    },
    "ba526a647cf5ee0e": {
      "factor_id": "ba526a647cf5ee0e",
      "factor_name": "Inst_Trend_Liquidity_Validated_5D",
      "factor_expression": "(POW(TS_CORR($close, SEQUENCE(10), 10), 2) * TS_MEAN(ABS($open - DELAY($close, 1)) / ($high - $low + 1e-8), 5)) / (TS_MEAN($high - $low, 5) / (WMA($volume, 5) + 1e-8) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(POW(TS_CORR($close, SEQUENCE(10), 10), 2) * TS_MEAN(ABS($open - DELAY($close, 1)) / ($high - $low + 1e-8), 5)) / (TS_MEAN($high - $low, 5) / (WMA($volume, 5) + 1e-8) + 1e-8)\" # Your output factor expression will be filled in here\n    name = \"Inst_Trend_Liquidity_Validated_5D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies high-conviction institutional moves by combining price trend linearity (R-squared) with overnight gaps, normalized by a 'liquidity vacuum' metric. It rewards linear trends backed by gaps and penalizes moves occurring in low-volume, high-volatility environments to filter out fragile price spikes.",
      "factor_formulation": "ITLV = \\frac{\\text{POW}(\\text{TS_CORR}(\\text{close}, \\text{SEQUENCE}(10), 10), 2) \\times \\text{TS_MEAN}(\\frac{\\text{ABS}(\\text{open} - \\text{DELAY}(\\text{close}, 1))}{\\text{high} - \\text{low} + 1e-8}, 5)}{\\text{TS_MEAN}(\\text{high} - \\text{low}, 5) / (\\text{WMA}(\\text{volume}, 5) + 1e-8)}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 4,
        "evolution_phase": "crossover",
        "trajectory_id": "1b235054d33f",
        "parent_trajectory_ids": [
          "407b02bacaff",
          "74ba6f865315"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Liquidity-Validated Trend' factor, calculated as the product of 10-day price trend linearity (R-squared) and the 5-day average overnight gap, divided by the 5-day liquidity vacuum (High-Low range over weighted volume), identifies high-conviction institutional moves while filtering out fragile, low-liquidity price spikes.\n                Concise Observation: Parent 1's liquidity vacuum effectively identifies mean-reverting 'hollow' moves (RankIC 0.0267), while Parent 2's gap-trend synergy captures institutional momentum (RankIC 0.0237); combining them addresses the weakness where trend signals fail during liquidity-depleted volatility spikes.\n                Concise Justification: By using the liquidity vacuum as a denominator (inverse weighting), we amplify trend signals that occur within high-volume environments and penalize those occurring in 'thin' markets, ensuring the factor captures high-quality, volume-backed price discovery.\n                Concise Knowledge: If a price trend exhibits high linearity and is initiated by overnight gaps, it indicates institutional conviction; however, this signal is only sustainable if the 'liquidity vacuum' is low, as high volatility relative to volume suggests a lack of depth prone to mean reversion.\n                concise Specification: The factor is defined as (10-day Close price R-squared * 5-day Mean(Overnight Gap / Daily Range)) / (5-day Mean(High-Low Range) / 5-day Weighted Volume Moving Average), where all components are calculated using daily adjusted price and volume data.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T04:44:34.968896"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.082704194736218,
        "ICIR": 0.0413461075933884,
        "1day.excess_return_without_cost.std": 0.004044798614246,
        "1day.excess_return_with_cost.annualized_return": 0.0148373130190573,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002616095104362,
        "1day.excess_return_without_cost.annualized_return": 0.0622630634838351,
        "1day.excess_return_with_cost.std": 0.0040457049078413,
        "Rank IC": 0.0216708623224584,
        "IC": 0.0055443709098467,
        "1day.excess_return_without_cost.max_drawdown": -0.064274655491318,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.997803684164623,
        "1day.pa": 0.0,
        "l2.valid": 0.99646685489234,
        "Rank ICIR": 0.1670212671017849,
        "l2.train": 0.9938931393352156,
        "1day.excess_return_with_cost.information_ratio": 0.2377237531047136,
        "1day.excess_return_with_cost.mean": 6.234165134057718e-05
      },
      "feedback": {
        "observations": "The experimental results demonstrate a successful iteration of the 'Institutional Liquidity-Validated Trend' framework. The current iteration achieved a higher Information Ratio (0.9978 vs 0.9725) and a significantly improved Annualized Return (0.0623 vs 0.0520) compared to the SOTA, while also reducing the Max Drawdown (-0.0643 vs -0.0726). Although the IC slightly decreased (0.0055 vs 0.0058), the risk-adjusted performance metrics suggest that the combination of price linearity and liquidity filtering is capturing higher-quality alpha. Among the tested factors, 'Institutional_Conviction_Index_10D' and 'Inst_Trend_Liquidity_Validated_5D' appear to be the primary drivers, effectively using volume to validate price trends.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that institutional moves are best identified by combining price trend linearity (R-squared) with liquidity metrics. The 'liquidity vacuum' concept (High-Low range relative to volume) effectively filters out noise. However, the complexity of 'Inst_Trend_Liquidity_Validated_5D' (using 5 raw features: open, close, high, low, volume) is approaching the threshold of over-engineering. The simpler 'Institutional_Conviction_Index_10D' provides a more robust foundation by focusing on the core interaction between trend persistence and volume-backed stability.",
        "decision": true,
        "reason": "The current factors use mixed window sizes (10-day for trend, 5-day for liquidity), which may introduce phase-shift noise. By synchronizing the lookback period to 10 days and simplifying the 'liquidity vacuum' to a more standard Volume/ATR ratio, we can reduce the number of base features and free parameters. This follows the principle of complexity control while maintaining the core logic that institutional moves require both price directionality and deep liquidity to be sustainable."
      }
    },
    "cd80fb0b5339b0cd": {
      "factor_id": "cd80fb0b5339b0cd",
      "factor_name": "Liquidity_Vacuum_Adjusted_Gap_Trend",
      "factor_expression": "RANK(TS_MEAN(($open - DELAY($close, 1)) / $close, 5)) / (RANK(TS_MEAN($high - $low, 5) / (TS_MEAN($volume, 5) + 1e-8)) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(TS_MEAN(($open - DELAY($close, 1)) / $close, 5)) / (RANK(TS_MEAN($high - $low, 5) / (TS_MEAN($volume, 5) + 1e-8)) + 1e-8)\" # Your output factor expression will be filled in here\n    name = \"Liquidity_Vacuum_Adjusted_Gap_Trend\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A simplified version of the institutional conviction hypothesis focusing on the ratio of overnight gap momentum to the liquidity vacuum. It uses the 5-day average of the gap relative to daily range, divided by the ratio of price volatility to volume, cross-sectionally ranked for stability.",
      "factor_formulation": "LVAGT = \\text{RANK}(\\text{TS_MEAN}(\\frac{\\text{open} - \\text{DELAY}(\\text{close}, 1)}{\\text{close}}, 5)) / \\text{RANK}(\\frac{\\text{TS_MEAN}(\\text{high} - \\text{low}, 5)}{\\text{TS_MEAN}(\\text{volume}, 5) + 1e-8})",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 4,
        "evolution_phase": "crossover",
        "trajectory_id": "1b235054d33f",
        "parent_trajectory_ids": [
          "407b02bacaff",
          "74ba6f865315"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Liquidity-Validated Trend' factor, calculated as the product of 10-day price trend linearity (R-squared) and the 5-day average overnight gap, divided by the 5-day liquidity vacuum (High-Low range over weighted volume), identifies high-conviction institutional moves while filtering out fragile, low-liquidity price spikes.\n                Concise Observation: Parent 1's liquidity vacuum effectively identifies mean-reverting 'hollow' moves (RankIC 0.0267), while Parent 2's gap-trend synergy captures institutional momentum (RankIC 0.0237); combining them addresses the weakness where trend signals fail during liquidity-depleted volatility spikes.\n                Concise Justification: By using the liquidity vacuum as a denominator (inverse weighting), we amplify trend signals that occur within high-volume environments and penalize those occurring in 'thin' markets, ensuring the factor captures high-quality, volume-backed price discovery.\n                Concise Knowledge: If a price trend exhibits high linearity and is initiated by overnight gaps, it indicates institutional conviction; however, this signal is only sustainable if the 'liquidity vacuum' is low, as high volatility relative to volume suggests a lack of depth prone to mean reversion.\n                concise Specification: The factor is defined as (10-day Close price R-squared * 5-day Mean(Overnight Gap / Daily Range)) / (5-day Mean(High-Low Range) / 5-day Weighted Volume Moving Average), where all components are calculated using daily adjusted price and volume data.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T04:44:34.968896"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.082704194736218,
        "ICIR": 0.0413461075933884,
        "1day.excess_return_without_cost.std": 0.004044798614246,
        "1day.excess_return_with_cost.annualized_return": 0.0148373130190573,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002616095104362,
        "1day.excess_return_without_cost.annualized_return": 0.0622630634838351,
        "1day.excess_return_with_cost.std": 0.0040457049078413,
        "Rank IC": 0.0216708623224584,
        "IC": 0.0055443709098467,
        "1day.excess_return_without_cost.max_drawdown": -0.064274655491318,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.997803684164623,
        "1day.pa": 0.0,
        "l2.valid": 0.99646685489234,
        "Rank ICIR": 0.1670212671017849,
        "l2.train": 0.9938931393352156,
        "1day.excess_return_with_cost.information_ratio": 0.2377237531047136,
        "1day.excess_return_with_cost.mean": 6.234165134057718e-05
      },
      "feedback": {
        "observations": "The experimental results demonstrate a successful iteration of the 'Institutional Liquidity-Validated Trend' framework. The current iteration achieved a higher Information Ratio (0.9978 vs 0.9725) and a significantly improved Annualized Return (0.0623 vs 0.0520) compared to the SOTA, while also reducing the Max Drawdown (-0.0643 vs -0.0726). Although the IC slightly decreased (0.0055 vs 0.0058), the risk-adjusted performance metrics suggest that the combination of price linearity and liquidity filtering is capturing higher-quality alpha. Among the tested factors, 'Institutional_Conviction_Index_10D' and 'Inst_Trend_Liquidity_Validated_5D' appear to be the primary drivers, effectively using volume to validate price trends.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that institutional moves are best identified by combining price trend linearity (R-squared) with liquidity metrics. The 'liquidity vacuum' concept (High-Low range relative to volume) effectively filters out noise. However, the complexity of 'Inst_Trend_Liquidity_Validated_5D' (using 5 raw features: open, close, high, low, volume) is approaching the threshold of over-engineering. The simpler 'Institutional_Conviction_Index_10D' provides a more robust foundation by focusing on the core interaction between trend persistence and volume-backed stability.",
        "decision": true,
        "reason": "The current factors use mixed window sizes (10-day for trend, 5-day for liquidity), which may introduce phase-shift noise. By synchronizing the lookback period to 10 days and simplifying the 'liquidity vacuum' to a more standard Volume/ATR ratio, we can reduce the number of base features and free parameters. This follows the principle of complexity control while maintaining the core logic that institutional moves require both price directionality and deep liquidity to be sustainable."
      }
    },
    "1d6baf776f496c35": {
      "factor_id": "1d6baf776f496c35",
      "factor_name": "Institutional_Conviction_Index_10D",
      "factor_expression": "POW(TS_CORR($close, SEQUENCE(10), 10), 2) * (TS_MEAN($volume, 10) / (TS_MEAN($high - $low, 10) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"POW(TS_CORR($close, SEQUENCE(10), 10), 2) * (TS_MEAN($volume, 10) / (TS_MEAN($high - $low, 10) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Institutional_Conviction_Index_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor captures the synergy between price trend persistence and liquidity depth. It multiplies the 10-day price linearity by the inverse of the 'liquidity vacuum' (High-Low range / Volume), ensuring that only trends supported by significant volume and low intraday volatility are flagged as high conviction.",
      "factor_formulation": "ICI = \\text{POW}(\\text{TS_CORR}(\\text{close}, \\text{SEQUENCE}(10), 10), 2) \\times \\frac{\\text{TS_MEAN}(\\text{volume}, 10)}{\\text{TS_MEAN}(\\text{high} - \\text{low}, 10) + 1e-8}",
      "cache_location": null,
      "metadata": {
        "experiment_id": "2026-01-20_12-56-39-160392",
        "round_number": 4,
        "evolution_phase": "crossover",
        "trajectory_id": "1b235054d33f",
        "parent_trajectory_ids": [
          "407b02bacaff",
          "74ba6f865315"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Liquidity-Validated Trend' factor, calculated as the product of 10-day price trend linearity (R-squared) and the 5-day average overnight gap, divided by the 5-day liquidity vacuum (High-Low range over weighted volume), identifies high-conviction institutional moves while filtering out fragile, low-liquidity price spikes.\n                Concise Observation: Parent 1's liquidity vacuum effectively identifies mean-reverting 'hollow' moves (RankIC 0.0267), while Parent 2's gap-trend synergy captures institutional momentum (RankIC 0.0237); combining them addresses the weakness where trend signals fail during liquidity-depleted volatility spikes.\n                Concise Justification: By using the liquidity vacuum as a denominator (inverse weighting), we amplify trend signals that occur within high-volume environments and penalize those occurring in 'thin' markets, ensuring the factor captures high-quality, volume-backed price discovery.\n                Concise Knowledge: If a price trend exhibits high linearity and is initiated by overnight gaps, it indicates institutional conviction; however, this signal is only sustainable if the 'liquidity vacuum' is low, as high volatility relative to volume suggests a lack of depth prone to mean reversion.\n                concise Specification: The factor is defined as (10-day Close price R-squared * 5-day Mean(Overnight Gap / Daily Range)) / (5-day Mean(High-Low Range) / 5-day Weighted Volume Moving Average), where all components are calculated using daily adjusted price and volume data.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-21T04:44:34.968896"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.082704194736218,
        "ICIR": 0.0413461075933884,
        "1day.excess_return_without_cost.std": 0.004044798614246,
        "1day.excess_return_with_cost.annualized_return": 0.0148373130190573,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002616095104362,
        "1day.excess_return_without_cost.annualized_return": 0.0622630634838351,
        "1day.excess_return_with_cost.std": 0.0040457049078413,
        "Rank IC": 0.0216708623224584,
        "IC": 0.0055443709098467,
        "1day.excess_return_without_cost.max_drawdown": -0.064274655491318,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.997803684164623,
        "1day.pa": 0.0,
        "l2.valid": 0.99646685489234,
        "Rank ICIR": 0.1670212671017849,
        "l2.train": 0.9938931393352156,
        "1day.excess_return_with_cost.information_ratio": 0.2377237531047136,
        "1day.excess_return_with_cost.mean": 6.234165134057718e-05
      },
      "feedback": {
        "observations": "The experimental results demonstrate a successful iteration of the 'Institutional Liquidity-Validated Trend' framework. The current iteration achieved a higher Information Ratio (0.9978 vs 0.9725) and a significantly improved Annualized Return (0.0623 vs 0.0520) compared to the SOTA, while also reducing the Max Drawdown (-0.0643 vs -0.0726). Although the IC slightly decreased (0.0055 vs 0.0058), the risk-adjusted performance metrics suggest that the combination of price linearity and liquidity filtering is capturing higher-quality alpha. Among the tested factors, 'Institutional_Conviction_Index_10D' and 'Inst_Trend_Liquidity_Validated_5D' appear to be the primary drivers, effectively using volume to validate price trends.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that institutional moves are best identified by combining price trend linearity (R-squared) with liquidity metrics. The 'liquidity vacuum' concept (High-Low range relative to volume) effectively filters out noise. However, the complexity of 'Inst_Trend_Liquidity_Validated_5D' (using 5 raw features: open, close, high, low, volume) is approaching the threshold of over-engineering. The simpler 'Institutional_Conviction_Index_10D' provides a more robust foundation by focusing on the core interaction between trend persistence and volume-backed stability.",
        "decision": true,
        "reason": "The current factors use mixed window sizes (10-day for trend, 5-day for liquidity), which may introduce phase-shift noise. By synchronizing the lookback period to 10 days and simplifying the 'liquidity vacuum' to a more standard Volume/ATR ratio, we can reduce the number of base features and free parameters. This follows the principle of complexity control while maintaining the core logic that institutional moves require both price directionality and deep liquidity to be sustainable."
      }
    }
  }
}
{
  "metadata": {
    "created_at": "2026-01-20T03:13:48.087523",
    "last_updated": "2026-01-20T03:13:48.087528",
    "total_factors": 30,
    "version": "1.0",
    "note": "Round 8 top 30 factors by RankIC from gemini_123"
  },
  "factors": {
    "b6b15acc42508584": {
      "factor_id": "b6b15acc42508584",
      "factor_name": "Informed_Efficiency_Multiplier_V1",
      "factor_expression": "(TS_STD($return, 20) / (ABS(TS_CORR($return, MEAN($return), 20)) + 1e-8)) * TS_CORR($close, $volume, 10) * TS_QUANTILE($low / $open, 20, 0.95)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(TS_STD(REGRESI(TS_PCTCHANGE($close, 1), SEQUENCE(20), 20), 20) / (ABS(TS_CORR(TS_PCTCHANGE($close, 1), MEAN(TS_PCTCHANGE($close, 1)), 20)) + 0.000001)) * TS_CORR(TS_PCTCHANGE($close, 1), $volume, 10) * TS_QUANTILE($low / $open, 20, 0.95)\" # Your output factor expression will be filled in here\n    name = \"Informed_Efficiency_Multiplier_V1\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies informed institutional trends by combining idiosyncratic volatility (relative to market correlation), price-volume efficiency, and structural support. It targets stocks where price movement is 'effortless' and aligned with unique information near support levels.",
      "factor_formulation": "IEM = \\frac{TS\\_STD(return, 20)}{ABS(TS\\_CORR(return, MEAN(return), 20)) + 1e-8} \\times TS\\_CORR(close, volume, 10) \\times TS\\_QUANTILE(low/open, 20, 0.95)",
      "metadata": {
        "experiment_id": "2026-01-18_21-40-12-932281",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "7d7e4863f0d1",
        "parent_trajectory_ids": [
          "b40908e50d0b",
          "e1a555864ea8"
        ],
        "hypothesis": "Hypothesis: The Informed Efficiency Multiplier (IEM) factor, which combines the ratio of 20-day idiosyncratic volatility to market correlation with the 10-day price-volume correlation and a structural support floor, identifies high-conviction institutional trends by filtering information-driven price drifts through liquidity-validated breakout signals.\n                Concise Observation: Parent 1 successfully captured informed drifts (RankIC 0.0268) but suffered from volatility noise, while Parent 2 identified quality breakouts (RankIC 0.0236) but lacked a filter for information asymmetry; combining them targets stocks where 'effortless' price movement aligns with unique information.\n                Concise Justification: By multiplying the Information Asymmetry Decay ratio with price-volume coordination and anchoring it to a 20-day structural low percentile, the factor ensures that idiosyncratic alpha is only harvested when supported by efficient liquidity and price stability.\n                Concise Knowledge: If a stock exhibits high idiosyncratic volatility relative to market correlation while maintaining high price-volume efficiency near structural support, it indicates informed institutional accumulation; when these conditions coincide, the resulting price trend is more persistent and less prone to speculative reversals.\n                concise Specification: Define IAD as (Std(Residuals, 20) / Corr(Asset, Market, 20)); define Efficiency as Corr(Close, Volume, 10); define Support as Percentile(Low/Open, 20, 0.95); the final factor is IAD * Efficiency * Support, calculated daily per instrument.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T14:18:05.970525"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1576714810929428,
        "ICIR": 0.0705464649535498,
        "1day.excess_return_without_cost.std": 0.0050185936199742,
        "1day.excess_return_with_cost.annualized_return": 0.0088938295136385,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002370137250818,
        "1day.excess_return_without_cost.annualized_return": 0.0564092665694759,
        "1day.excess_return_with_cost.std": 0.005020271203024,
        "Rank IC": 0.0311116428387593,
        "IC": 0.0112960177889078,
        "1day.excess_return_without_cost.max_drawdown": -0.1299395488001697,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7285845278974563,
        "1day.pa": 0.0,
        "l2.valid": 0.9965206118613202,
        "Rank ICIR": 0.2028142197799375,
        "l2.train": 0.9936341907341188,
        "1day.excess_return_with_cost.information_ratio": 0.1148347006413909,
        "1day.excess_return_with_cost.mean": 3.736903156990977e-05
      },
      "feedback": {
        "observations": "The current experiment demonstrates a significant improvement in Information Coefficient (IC) and Annualized Return compared to the previous SOTA, although the Information Ratio (IR) and Max Drawdown (MDD) have deteriorated. The 'Informed_Efficiency_Multiplier_V1' and its variants successfully capture predictive signals, as evidenced by the IC doubling from 0.0058 to 0.0113. However, the increased drawdown suggests that while the signal is more predictive on average, it introduces higher volatility or tail risk, possibly due to the interaction between the idiosyncratic volatility ratio and the price-volume correlation component.",
        "hypothesis_evaluation": "The results generally support the hypothesis that combining idiosyncratic volatility (relative to market) with price-volume validation identifies profitable trends. The high IC confirms that the 'Informed Efficiency' concept has strong predictive power. However, the 'structural support floor' component (using high quantiles of low/open or TS_MIN) might be contributing to the increased drawdown by keeping the model in positions during regime shifts. The complexity of the V1 formulation (using multiple nested functions like TS_QUANTILE and TS_CORR) is high, which may explain the lower Information Ratio compared to the SOTA.",
        "decision": true,
        "reason": "The current 'support' components (TS_QUANTILE or low/TS_MIN) are sensitive to outliers and can create 'all-or-nothing' signals that increase drawdown. By using a more stable measure of price location (e.g., distance from a 20-day MA) and simplifying the idiosyncratic volatility ratio to a basic residual-based measure, we can reduce the symbol length and parameter count. This follows the 'Complexity Control' principle, aiming to maintain the predictive power of the price-volume correlation while making the risk-adjustment more robust across different market regimes."
      },
      "cache_location": null
    },
    "b4588111943a558d": {
      "factor_id": "b4588111943a558d",
      "factor_name": "Simplified_IAD_Breakout_Factor",
      "factor_expression": "RANK(TS_STD($return, 20) / (ABS(TS_CORR($return, MEAN($return), 20)) + 0.01)) * TS_CORR($return, $volume, 10) * TS_RANK($low, 20)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(TS_STD(TS_PCTCHANGE($close, 1), 20) / (ABS(TS_CORR(TS_PCTCHANGE($close, 1), MEAN(TS_PCTCHANGE($close, 1)), 20)) + 0.01)) * TS_CORR(TS_PCTCHANGE($close, 1), $volume, 10) * TS_RANK($low, 20)\" # Your output factor expression will be filled in here\n    name = \"Simplified_IAD_Breakout_Factor\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A simplified version of the IEM factor focusing on the interaction between idiosyncratic risk and liquidity validation. It uses the ratio of return volatility to market-wide return correlation, scaled by the price-volume trend and a support-level filter.",
      "factor_formulation": "SIAD = RANK(TS\\_STD(return, 20) / (ABS(TS\\_CORR(return, MEAN(return), 20)) + 0.01)) * TS\\_CORR(return, volume, 10) * TS\\_RANK(low, 20)",
      "metadata": {
        "experiment_id": "2026-01-18_21-40-12-932281",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "7d7e4863f0d1",
        "parent_trajectory_ids": [
          "b40908e50d0b",
          "e1a555864ea8"
        ],
        "hypothesis": "Hypothesis: The Informed Efficiency Multiplier (IEM) factor, which combines the ratio of 20-day idiosyncratic volatility to market correlation with the 10-day price-volume correlation and a structural support floor, identifies high-conviction institutional trends by filtering information-driven price drifts through liquidity-validated breakout signals.\n                Concise Observation: Parent 1 successfully captured informed drifts (RankIC 0.0268) but suffered from volatility noise, while Parent 2 identified quality breakouts (RankIC 0.0236) but lacked a filter for information asymmetry; combining them targets stocks where 'effortless' price movement aligns with unique information.\n                Concise Justification: By multiplying the Information Asymmetry Decay ratio with price-volume coordination and anchoring it to a 20-day structural low percentile, the factor ensures that idiosyncratic alpha is only harvested when supported by efficient liquidity and price stability.\n                Concise Knowledge: If a stock exhibits high idiosyncratic volatility relative to market correlation while maintaining high price-volume efficiency near structural support, it indicates informed institutional accumulation; when these conditions coincide, the resulting price trend is more persistent and less prone to speculative reversals.\n                concise Specification: Define IAD as (Std(Residuals, 20) / Corr(Asset, Market, 20)); define Efficiency as Corr(Close, Volume, 10); define Support as Percentile(Low/Open, 20, 0.95); the final factor is IAD * Efficiency * Support, calculated daily per instrument.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T14:18:05.970525"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1576714810929428,
        "ICIR": 0.0705464649535498,
        "1day.excess_return_without_cost.std": 0.0050185936199742,
        "1day.excess_return_with_cost.annualized_return": 0.0088938295136385,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002370137250818,
        "1day.excess_return_without_cost.annualized_return": 0.0564092665694759,
        "1day.excess_return_with_cost.std": 0.005020271203024,
        "Rank IC": 0.0311116428387593,
        "IC": 0.0112960177889078,
        "1day.excess_return_without_cost.max_drawdown": -0.1299395488001697,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7285845278974563,
        "1day.pa": 0.0,
        "l2.valid": 0.9965206118613202,
        "Rank ICIR": 0.2028142197799375,
        "l2.train": 0.9936341907341188,
        "1day.excess_return_with_cost.information_ratio": 0.1148347006413909,
        "1day.excess_return_with_cost.mean": 3.736903156990977e-05
      },
      "feedback": {
        "observations": "The current experiment demonstrates a significant improvement in Information Coefficient (IC) and Annualized Return compared to the previous SOTA, although the Information Ratio (IR) and Max Drawdown (MDD) have deteriorated. The 'Informed_Efficiency_Multiplier_V1' and its variants successfully capture predictive signals, as evidenced by the IC doubling from 0.0058 to 0.0113. However, the increased drawdown suggests that while the signal is more predictive on average, it introduces higher volatility or tail risk, possibly due to the interaction between the idiosyncratic volatility ratio and the price-volume correlation component.",
        "hypothesis_evaluation": "The results generally support the hypothesis that combining idiosyncratic volatility (relative to market) with price-volume validation identifies profitable trends. The high IC confirms that the 'Informed Efficiency' concept has strong predictive power. However, the 'structural support floor' component (using high quantiles of low/open or TS_MIN) might be contributing to the increased drawdown by keeping the model in positions during regime shifts. The complexity of the V1 formulation (using multiple nested functions like TS_QUANTILE and TS_CORR) is high, which may explain the lower Information Ratio compared to the SOTA.",
        "decision": true,
        "reason": "The current 'support' components (TS_QUANTILE or low/TS_MIN) are sensitive to outliers and can create 'all-or-nothing' signals that increase drawdown. By using a more stable measure of price location (e.g., distance from a 20-day MA) and simplifying the idiosyncratic volatility ratio to a basic residual-based measure, we can reduce the symbol length and parameter count. This follows the 'Complexity Control' principle, aiming to maintain the predictive power of the price-volume correlation while making the risk-adjustment more robust across different market regimes."
      },
      "cache_location": null
    },
    "3dc2eee826d423d2": {
      "factor_id": "3dc2eee826d423d2",
      "factor_name": "Institutional_Accumulation_Support_Factor",
      "factor_expression": "TS_STD(REGRESI($return, SEQUENCE(20), 20), 20) * TS_CORR($close, $volume, 10) * ($low / (TS_MIN($low, 20) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_STD(REGRESI(TS_PCTCHANGE($close, 1), SEQUENCE(20), 20), 20) * TS_CORR($close, $volume, 10) * ($low / TS_MIN($low, 20))\" # Your output factor expression will be filled in here\n    name = \"Institutional_Accumulation_Support_Factor\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor captures institutional accumulation by looking for high idiosyncratic volatility (information asymmetry) when the stock is trading near its 20-day support floor, validated by positive price-volume correlation.",
      "factor_formulation": "IASF = TS\\_STD(REGRESI(return, SEQUENCE(20), 20), 20) * TS\\_CORR(close, volume, 10) * (low / TS\\_MIN(low, 20))",
      "metadata": {
        "experiment_id": "2026-01-18_21-40-12-932281",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "7d7e4863f0d1",
        "parent_trajectory_ids": [
          "b40908e50d0b",
          "e1a555864ea8"
        ],
        "hypothesis": "Hypothesis: The Informed Efficiency Multiplier (IEM) factor, which combines the ratio of 20-day idiosyncratic volatility to market correlation with the 10-day price-volume correlation and a structural support floor, identifies high-conviction institutional trends by filtering information-driven price drifts through liquidity-validated breakout signals.\n                Concise Observation: Parent 1 successfully captured informed drifts (RankIC 0.0268) but suffered from volatility noise, while Parent 2 identified quality breakouts (RankIC 0.0236) but lacked a filter for information asymmetry; combining them targets stocks where 'effortless' price movement aligns with unique information.\n                Concise Justification: By multiplying the Information Asymmetry Decay ratio with price-volume coordination and anchoring it to a 20-day structural low percentile, the factor ensures that idiosyncratic alpha is only harvested when supported by efficient liquidity and price stability.\n                Concise Knowledge: If a stock exhibits high idiosyncratic volatility relative to market correlation while maintaining high price-volume efficiency near structural support, it indicates informed institutional accumulation; when these conditions coincide, the resulting price trend is more persistent and less prone to speculative reversals.\n                concise Specification: Define IAD as (Std(Residuals, 20) / Corr(Asset, Market, 20)); define Efficiency as Corr(Close, Volume, 10); define Support as Percentile(Low/Open, 20, 0.95); the final factor is IAD * Efficiency * Support, calculated daily per instrument.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T14:18:05.970525"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1576714810929428,
        "ICIR": 0.0705464649535498,
        "1day.excess_return_without_cost.std": 0.0050185936199742,
        "1day.excess_return_with_cost.annualized_return": 0.0088938295136385,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002370137250818,
        "1day.excess_return_without_cost.annualized_return": 0.0564092665694759,
        "1day.excess_return_with_cost.std": 0.005020271203024,
        "Rank IC": 0.0311116428387593,
        "IC": 0.0112960177889078,
        "1day.excess_return_without_cost.max_drawdown": -0.1299395488001697,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7285845278974563,
        "1day.pa": 0.0,
        "l2.valid": 0.9965206118613202,
        "Rank ICIR": 0.2028142197799375,
        "l2.train": 0.9936341907341188,
        "1day.excess_return_with_cost.information_ratio": 0.1148347006413909,
        "1day.excess_return_with_cost.mean": 3.736903156990977e-05
      },
      "feedback": {
        "observations": "The current experiment demonstrates a significant improvement in Information Coefficient (IC) and Annualized Return compared to the previous SOTA, although the Information Ratio (IR) and Max Drawdown (MDD) have deteriorated. The 'Informed_Efficiency_Multiplier_V1' and its variants successfully capture predictive signals, as evidenced by the IC doubling from 0.0058 to 0.0113. However, the increased drawdown suggests that while the signal is more predictive on average, it introduces higher volatility or tail risk, possibly due to the interaction between the idiosyncratic volatility ratio and the price-volume correlation component.",
        "hypothesis_evaluation": "The results generally support the hypothesis that combining idiosyncratic volatility (relative to market) with price-volume validation identifies profitable trends. The high IC confirms that the 'Informed Efficiency' concept has strong predictive power. However, the 'structural support floor' component (using high quantiles of low/open or TS_MIN) might be contributing to the increased drawdown by keeping the model in positions during regime shifts. The complexity of the V1 formulation (using multiple nested functions like TS_QUANTILE and TS_CORR) is high, which may explain the lower Information Ratio compared to the SOTA.",
        "decision": true,
        "reason": "The current 'support' components (TS_QUANTILE or low/TS_MIN) are sensitive to outliers and can create 'all-or-nothing' signals that increase drawdown. By using a more stable measure of price location (e.g., distance from a 20-day MA) and simplifying the idiosyncratic volatility ratio to a basic residual-based measure, we can reduce the symbol length and parameter count. This follows the 'Complexity Control' principle, aiming to maintain the predictive power of the price-volume correlation while making the risk-adjustment more robust across different market regimes."
      },
      "cache_location": null
    },
    "50d82128dd1558b7": {
      "factor_id": "50d82128dd1558b7",
      "factor_name": "Liquidity_Validated_Rejection_20D",
      "factor_expression": "(($high - MAX($open, $close) + MIN($open, $close) - $low) / ($high - $low + 1e-8) / (TS_STD($return, 10) + 1e-8)) * (1 - TS_CORR($return, TS_PCTCHANGE($volume, 1), 20))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"((($high - ($open > $close ? $open : $close)) + (($open < $close ? $open : $close) - $low)) / (($high - $low) + 0.00000001) / (TS_STD(TS_PCTCHANGE($close, 1), 10) + 0.00000001)) * (1 - TS_CORR(TS_PCTCHANGE($close, 1), TS_PCTCHANGE($volume, 1), 20))\" # Your output factor expression will be filled in here\n    name = \"Liquidity_Validated_Rejection_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies high-probability mean reversion by combining intraday price rejection (shadow-to-range ratio) with the inverse of volume-price correlation. It targets exhausted price movements where price action shows rejection (wicks) but lacks institutional volume support, normalized by 10-day volatility.",
      "factor_formulation": "LVR = \\frac{(High - \\max(Open, Close) + \\min(Open, Close) - Low)}{(High - Low + 1e-8) \\cdot TS\\_STD(return, 10)} \\cdot (1 - TS\\_CORR(return, TS\\_PCTCHANGE(volume, 1), 20))",
      "metadata": {
        "experiment_id": "2026-01-18_13-34-30-274463",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "a604d5b39fb0",
        "parent_trajectory_ids": [
          "a2d2dc6b6049",
          "d4edaf8f4937"
        ],
        "hypothesis": "Hypothesis: The 'Liquidity-Validated Rejection' factor identifies high-probability mean reversion by multiplying the Intraday Shadow-to-Range ratio (10-day inverse-volatility weighted) by the inverse of the 20-day Volume-Price Correlation, specifically targeting overnight gaps that lack structural volume support.\n                Concise Observation: Parent 1 (RankIC 0.0253) captures intraday exhaustion via wicks, while Parent 2 (RankIC 0.0277) identifies trend conviction via price-volume correlation; however, neither alone distinguishes between a healthy trend consolidation and a false breakout.\n                Concise Justification: Fusing these strategies targets the 'False Breakthrough' scenario: an opening gap (sentiment) followed by intraday wicks (rejection) and low volume-price correlation (lack of institutional conviction) creates a synergistic signal for price snap-back.\n                Concise Knowledge: If intraday price rejection (long shadows) occurs alongside a decoupling of price and volume (low correlation), then the current price movement is likely an exhausted thrust rather than a sustainable trend; when overnight gaps lack volume-price synchronicity, they are more prone to mean reversion.\n                concise Specification: The factor is defined as (Shadow_Ratio / ATR_10D) * (1 - Correlation(Returns, Volume_Change, 20D)), where Shadow_Ratio is (High - Max(Open, Close) + Min(Open, Close) - Low) / (High - Low + 1e-6), applied to days with significant overnight gaps.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T05:48:52.905667"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.104849862862603,
        "ICIR": 0.0530452876557956,
        "1day.excess_return_without_cost.std": 0.0042377340217745,
        "1day.excess_return_with_cost.annualized_return": 0.0026568787618365,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002100901713907,
        "1day.excess_return_without_cost.annualized_return": 0.0500014607910087,
        "1day.excess_return_with_cost.std": 0.0042386307124834,
        "Rank IC": 0.0293661735778227,
        "IC": 0.0079938059935349,
        "1day.excess_return_without_cost.max_drawdown": -0.0883393070374991,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7648222588119782,
        "1day.pa": 0.0,
        "l2.valid": 0.9962004608547262,
        "Rank ICIR": 0.1948114961572588,
        "l2.train": 0.9931248433825322,
        "1day.excess_return_with_cost.information_ratio": 0.0406310156102293,
        "1day.excess_return_with_cost.mean": 1.116335614217035e-05
      },
      "feedback": {
        "observations": "The current iteration tested three variations of the 'Liquidity-Validated Rejection' framework. The 'Shadow_Volume_Decoupling_ZScore' and 'Gap_Exhaustion_Reversion_15D' factors were implemented to capture mean reversion. While the current results achieved a significantly higher Information Coefficient (IC) of 0.007994 compared to the SOTA's 0.005798, the risk-adjusted returns (Information Ratio) and drawdown metrics deteriorated. This suggests that while the signal's predictive power for the cross-section of returns has improved (higher IC), the stability of the signal over time or its concentration in volatile regimes has introduced higher risk (larger drawdown).",
        "hypothesis_evaluation": "The hypothesis that price rejection (shadows) combined with low volume-price correlation identifies mean reversion is supported by the improved IC. However, the 'overnight gap' component in GER and the 'volatility weighting' in LVR might be introducing noise or excessive turnover. The SVD (Z-Score) approach seems more robust for capturing the 'intensity' of rejection relative to history, but the overall strategy currently suffers from higher drawdowns compared to the SOTA.",
        "decision": false,
        "reason": "The current SVD factor uses a 10-day Z-score, which might be too sensitive to short-term spikes. By using a ratio of current shadow to a 20-day moving average, we can identify 'abnormal' rejection more cleanly. Furthermore, the current volume-price correlation (TS_CORR) is a symmetric measure; replacing it with a specific condition where volume is decreasing (indicating exhaustion) while the shadow is increasing should provide a cleaner signal and reduce the drawdown observed in the current results."
      },
      "cache_location": null
    },
    "3fc45423c54ad6f0": {
      "factor_id": "3fc45423c54ad6f0",
      "factor_name": "Gap_Exhaustion_Reversion_15D",
      "factor_expression": "RANK(($open - DELAY($close, 1)) / DELAY($close, 1)) * RANK(($high - MAX($open, $close)) / ($high - $low + 1e-8)) * (1 - TS_CORR($return, $volume, 15))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(($open - DELAY($close, 1)) / DELAY($close, 1)) * RANK(($high - (($open > $close) ? $open : $close)) / ($high - $low + 0.000001)) * (1 - TS_CORR(($close - DELAY($close, 1)) / DELAY($close, 1), $volume, 15))\" # Your output factor expression will be filled in here\n    name = \"Gap_Exhaustion_Reversion_15D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "Focuses on the 'False Breakthrough' scenario by identifying days with significant overnight gaps where the intraday price action results in a reversal shadow, validated by a lack of volume-return synchronicity. It uses RANK to normalize the rejection signal and the decoupling of price and volume.",
      "factor_formulation": "GER = RANK(\\frac{Open - Delay(Close, 1)}{Delay(Close, 1)}) \\cdot RANK(\\frac{High - \\max(Open, Close)}{High - Low + 1e-8}) \\cdot (1 - TS\\_CORR(return, volume, 15))",
      "metadata": {
        "experiment_id": "2026-01-18_13-34-30-274463",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "a604d5b39fb0",
        "parent_trajectory_ids": [
          "a2d2dc6b6049",
          "d4edaf8f4937"
        ],
        "hypothesis": "Hypothesis: The 'Liquidity-Validated Rejection' factor identifies high-probability mean reversion by multiplying the Intraday Shadow-to-Range ratio (10-day inverse-volatility weighted) by the inverse of the 20-day Volume-Price Correlation, specifically targeting overnight gaps that lack structural volume support.\n                Concise Observation: Parent 1 (RankIC 0.0253) captures intraday exhaustion via wicks, while Parent 2 (RankIC 0.0277) identifies trend conviction via price-volume correlation; however, neither alone distinguishes between a healthy trend consolidation and a false breakout.\n                Concise Justification: Fusing these strategies targets the 'False Breakthrough' scenario: an opening gap (sentiment) followed by intraday wicks (rejection) and low volume-price correlation (lack of institutional conviction) creates a synergistic signal for price snap-back.\n                Concise Knowledge: If intraday price rejection (long shadows) occurs alongside a decoupling of price and volume (low correlation), then the current price movement is likely an exhausted thrust rather than a sustainable trend; when overnight gaps lack volume-price synchronicity, they are more prone to mean reversion.\n                concise Specification: The factor is defined as (Shadow_Ratio / ATR_10D) * (1 - Correlation(Returns, Volume_Change, 20D)), where Shadow_Ratio is (High - Max(Open, Close) + Min(Open, Close) - Low) / (High - Low + 1e-6), applied to days with significant overnight gaps.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T05:48:52.905667"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.104849862862603,
        "ICIR": 0.0530452876557956,
        "1day.excess_return_without_cost.std": 0.0042377340217745,
        "1day.excess_return_with_cost.annualized_return": 0.0026568787618365,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002100901713907,
        "1day.excess_return_without_cost.annualized_return": 0.0500014607910087,
        "1day.excess_return_with_cost.std": 0.0042386307124834,
        "Rank IC": 0.0293661735778227,
        "IC": 0.0079938059935349,
        "1day.excess_return_without_cost.max_drawdown": -0.0883393070374991,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7648222588119782,
        "1day.pa": 0.0,
        "l2.valid": 0.9962004608547262,
        "Rank ICIR": 0.1948114961572588,
        "l2.train": 0.9931248433825322,
        "1day.excess_return_with_cost.information_ratio": 0.0406310156102293,
        "1day.excess_return_with_cost.mean": 1.116335614217035e-05
      },
      "feedback": {
        "observations": "The current iteration tested three variations of the 'Liquidity-Validated Rejection' framework. The 'Shadow_Volume_Decoupling_ZScore' and 'Gap_Exhaustion_Reversion_15D' factors were implemented to capture mean reversion. While the current results achieved a significantly higher Information Coefficient (IC) of 0.007994 compared to the SOTA's 0.005798, the risk-adjusted returns (Information Ratio) and drawdown metrics deteriorated. This suggests that while the signal's predictive power for the cross-section of returns has improved (higher IC), the stability of the signal over time or its concentration in volatile regimes has introduced higher risk (larger drawdown).",
        "hypothesis_evaluation": "The hypothesis that price rejection (shadows) combined with low volume-price correlation identifies mean reversion is supported by the improved IC. However, the 'overnight gap' component in GER and the 'volatility weighting' in LVR might be introducing noise or excessive turnover. The SVD (Z-Score) approach seems more robust for capturing the 'intensity' of rejection relative to history, but the overall strategy currently suffers from higher drawdowns compared to the SOTA.",
        "decision": false,
        "reason": "The current SVD factor uses a 10-day Z-score, which might be too sensitive to short-term spikes. By using a ratio of current shadow to a 20-day moving average, we can identify 'abnormal' rejection more cleanly. Furthermore, the current volume-price correlation (TS_CORR) is a symmetric measure; replacing it with a specific condition where volume is decreasing (indicating exhaustion) while the shadow is increasing should provide a cleaner signal and reduce the drawdown observed in the current results."
      },
      "cache_location": null
    },
    "44f12d21fd38fd1b": {
      "factor_id": "44f12d21fd38fd1b",
      "factor_name": "Shadow_Volume_Decoupling_ZScore",
      "factor_expression": "TS_ZSCORE(($high - MAX($open, $close) + MIN($open, $close) - $low) / ($high - $low + 1e-8), 10) * (1 - TS_CORR($return, $volume, 20))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_ZSCORE(($high - ($open > $close ? $open : $close) + ($open < $close ? $open : $close) - $low) / ($high - $low + 0.00000001), 10) * (1 - TS_CORR(TS_PCTCHANGE($close, 1), $volume, 20))\" # Your output factor expression will be filled in here\n    name = \"Shadow_Volume_Decoupling_ZScore\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "Measures the intensity of intraday rejection (shadows) relative to its recent history, multiplied by the inverse of price-volume trend conviction. A high value suggests that the price rejection is occurring during a period of low institutional conviction, increasing the likelihood of a snap-back.",
      "factor_formulation": "SVD = TS\\_ZSCORE(\\frac{High - \\max(Open, Close) + \\min(Open, Close) - Low}{High - Low + 1e-8}, 10) * (1 - TS\\_CORR($return, $volume, 20))",
      "metadata": {
        "experiment_id": "2026-01-18_13-34-30-274463",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "a604d5b39fb0",
        "parent_trajectory_ids": [
          "a2d2dc6b6049",
          "d4edaf8f4937"
        ],
        "hypothesis": "Hypothesis: The 'Liquidity-Validated Rejection' factor identifies high-probability mean reversion by multiplying the Intraday Shadow-to-Range ratio (10-day inverse-volatility weighted) by the inverse of the 20-day Volume-Price Correlation, specifically targeting overnight gaps that lack structural volume support.\n                Concise Observation: Parent 1 (RankIC 0.0253) captures intraday exhaustion via wicks, while Parent 2 (RankIC 0.0277) identifies trend conviction via price-volume correlation; however, neither alone distinguishes between a healthy trend consolidation and a false breakout.\n                Concise Justification: Fusing these strategies targets the 'False Breakthrough' scenario: an opening gap (sentiment) followed by intraday wicks (rejection) and low volume-price correlation (lack of institutional conviction) creates a synergistic signal for price snap-back.\n                Concise Knowledge: If intraday price rejection (long shadows) occurs alongside a decoupling of price and volume (low correlation), then the current price movement is likely an exhausted thrust rather than a sustainable trend; when overnight gaps lack volume-price synchronicity, they are more prone to mean reversion.\n                concise Specification: The factor is defined as (Shadow_Ratio / ATR_10D) * (1 - Correlation(Returns, Volume_Change, 20D)), where Shadow_Ratio is (High - Max(Open, Close) + Min(Open, Close) - Low) / (High - Low + 1e-6), applied to days with significant overnight gaps.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T05:48:52.905667"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.104849862862603,
        "ICIR": 0.0530452876557956,
        "1day.excess_return_without_cost.std": 0.0042377340217745,
        "1day.excess_return_with_cost.annualized_return": 0.0026568787618365,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002100901713907,
        "1day.excess_return_without_cost.annualized_return": 0.0500014607910087,
        "1day.excess_return_with_cost.std": 0.0042386307124834,
        "Rank IC": 0.0293661735778227,
        "IC": 0.0079938059935349,
        "1day.excess_return_without_cost.max_drawdown": -0.0883393070374991,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7648222588119782,
        "1day.pa": 0.0,
        "l2.valid": 0.9962004608547262,
        "Rank ICIR": 0.1948114961572588,
        "l2.train": 0.9931248433825322,
        "1day.excess_return_with_cost.information_ratio": 0.0406310156102293,
        "1day.excess_return_with_cost.mean": 1.116335614217035e-05
      },
      "feedback": {
        "observations": "The current iteration tested three variations of the 'Liquidity-Validated Rejection' framework. The 'Shadow_Volume_Decoupling_ZScore' and 'Gap_Exhaustion_Reversion_15D' factors were implemented to capture mean reversion. While the current results achieved a significantly higher Information Coefficient (IC) of 0.007994 compared to the SOTA's 0.005798, the risk-adjusted returns (Information Ratio) and drawdown metrics deteriorated. This suggests that while the signal's predictive power for the cross-section of returns has improved (higher IC), the stability of the signal over time or its concentration in volatile regimes has introduced higher risk (larger drawdown).",
        "hypothesis_evaluation": "The hypothesis that price rejection (shadows) combined with low volume-price correlation identifies mean reversion is supported by the improved IC. However, the 'overnight gap' component in GER and the 'volatility weighting' in LVR might be introducing noise or excessive turnover. The SVD (Z-Score) approach seems more robust for capturing the 'intensity' of rejection relative to history, but the overall strategy currently suffers from higher drawdowns compared to the SOTA.",
        "decision": false,
        "reason": "The current SVD factor uses a 10-day Z-score, which might be too sensitive to short-term spikes. By using a ratio of current shadow to a 20-day moving average, we can identify 'abnormal' rejection more cleanly. Furthermore, the current volume-price correlation (TS_CORR) is a symmetric measure; replacing it with a specific condition where volume is decreasing (indicating exhaustion) while the shadow is increasing should provide a cleaner signal and reduce the drawdown observed in the current results."
      },
      "cache_location": null
    },
    "495ffee5bca44fa9": {
      "factor_id": "495ffee5bca44fa9",
      "factor_name": "ISB_Structural_Momentum_20D",
      "factor_expression": "TS_MEAN(($close / $open - 1) / ($high / $low - 1 + 1e-6), 5) * TS_CORR($close, $volume, 10) * TS_QUANTILE($low / $open, 20, 0.95)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_MEAN(($close / $open - 1) / ($high / $low - 1 + 1e-6), 5) * TS_CORR($close, $volume, 10) * TS_QUANTILE($low / $open, 20, 0.95)\" # Your output factor expression will be filled in here\n    name = \"ISB_Structural_Momentum_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies 'Informed Structural Breakouts' by combining three signals: 1) Information Asymmetry Decay (overnight returns relative to intraday range), 2) Structural Momentum (volume-price correlation), and 3) Structural Support (95th percentile of low/open ratios). It captures institutional accumulation followed by a synchronized volume breakout.",
      "factor_formulation": "\\text{ISB} = \\text{TS_MEAN}\\left(\\frac{\\frac{close}{open} - 1}{\\frac{high}{low} - 1 + 1e-6}, 5\\right) \\times \\text{TS_CORR}(close, volume, 10) \\times \\text{TS_QUANTILE}\\left(\\frac{low}{open}, 20, 0.95\\right)",
      "metadata": {
        "experiment_id": "2026-01-18_21-40-12-932281",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "147fc0e5509d",
        "parent_trajectory_ids": [
          "5c45e715cea0",
          "4aeb5308e094"
        ],
        "hypothesis": "Hypothesis: The 'Informed Structural Breakout' (ISB) factor identifies high-conviction trend shifts by multiplying a 5-day Information Asymmetry Decay score (overnight returns divided by intraday range) with a 10-day structural momentum score (volume-price correlation weighted by the 20-day 95th percentile of low/open ratios).\n                Concise Observation: Parent 1 (RankIC 0.0257) excels at identifying quiet institutional accumulation but lacks timing, while Parent 2 (RankIC 0.0269) identifies momentum but is prone to false breakouts; combining them addresses the lead-lag relationship between absorption and expansion.\n                Concise Justification: Institutional investors often accumulate positions overnight to minimize market impact, creating a 'quiet' volatility signature; when this is paired with a structural support floor and volume confirmation, it signals a transition from accumulation to a public markup phase.\n                Concise Knowledge: If a period of stealth accumulation (high overnight return relative to intraday volatility) is followed by a structural price floor breakout with positive volume-price correlation, then the resulting trend is more sustainable than a breakout without prior institutional absorption.\n                concise Specification: The factor is defined as: ((Close/Open - 1) / (High/Low - 1 + 1e-6) over 5-day mean) * (Correlation(Close, Volume, 10)) * (95th percentile of Low/Open over 20 days), capturing the sequence of stealth buying, volume synchronization, and structural support.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T13:37:49.284136"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1713403681134332,
        "ICIR": 0.052329702327496,
        "1day.excess_return_without_cost.std": 0.0048755206556764,
        "1day.excess_return_with_cost.annualized_return": -0.0036357163274022,
        "1day.ffr": 0.9998955177097482,
        "1day.excess_return_without_cost.mean": 0.0001856192253913,
        "1day.excess_return_without_cost.annualized_return": 0.0441773756431499,
        "1day.excess_return_with_cost.std": 0.004876385503451,
        "Rank IC": 0.0277237130304404,
        "IC": 0.0087086589760187,
        "1day.excess_return_without_cost.max_drawdown": -0.1263729591004844,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.5873411561760606,
        "1day.pa": 0.0,
        "l2.valid": 0.9968527096665843,
        "Rank ICIR": 0.1741367913202858,
        "l2.train": 0.9937143805931083,
        "1day.excess_return_with_cost.information_ratio": -0.0483285183161516,
        "1day.excess_return_with_cost.mean": -1.527611902269832e-05
      },
      "feedback": {
        "observations": "The current iteration focused on the 'Informed Structural Breakout' (ISB) hypothesis, testing three distinct implementations: a complex multi-component ISB factor, a simplified cross-sectional rank version (IAB), and a volatility-adjusted support factor (SAF). The results show a significant improvement in Information Coefficient (IC) reaching 0.0087 compared to the SOTA's 0.0058, indicating stronger predictive power at the individual asset level. However, the portfolio-level metrics (Information Ratio and Max Drawdown) have deteriorated compared to the SOTA, suggesting that while the signal is more accurate, its volatility or tail-risk profile is less stable.",
        "hypothesis_evaluation": "The hypothesis that combining 'Information Asymmetry Decay' with 'Structural Momentum' identifies high-conviction shifts is partially supported by the higher IC. However, the implementation 'ISB_Structural_Momentum_20D' appears over-engineered (ER=5, multiple nested time-series operations), which likely contributed to the higher drawdown (-0.126 vs -0.072). The 'Institutional_Absorption_Breakout_15D' approach of using RANK shows promise for stability but might have diluted the specific 'structural' signal intended by the hypothesis.",
        "decision": false,
        "reason": "The current ISB factor is too complex, leading to poor risk-adjusted returns (IR) despite a high IC. By simplifying the 'Structural Support' component (using the low/open ratio more directly) and focusing on price efficiency (return divided by range) rather than complex triple-multiplications, we can reduce the risk of overfitting. Moving from a raw multiplication of three signals to a ranked combination of two core components (Efficiency and Support) should improve the Information Ratio and reduce drawdown."
      },
      "cache_location": {
        "workspace_suffix": "exp_20260118_221528",
        "workspace_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221528",
        "factor_dir": "be4322fd9ebb47bd9685e25ed0ef3a54",
        "result_h5_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221528/be4322fd9ebb47bd9685e25ed0ef3a54/result.h5"
      }
    },
    "9503588420f6258c": {
      "factor_id": "9503588420f6258c",
      "factor_name": "Institutional_Absorption_Breakout_15D",
      "factor_expression": "RANK(TS_MEAN($return, 5)) * RANK(TS_CORR($close, $volume, 15))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(TS_MEAN(($close / DELAY($close, 1) - 1), 5)) * RANK(TS_CORR($close, $volume, 15))\" # Your output factor expression will be filled in here\n    name = \"Institutional_Absorption_Breakout_15D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A simplified version of the Informed Structural Breakout hypothesis focusing on the interaction between price-volume synchronization and the relative strength of the overnight move. It uses RANK to normalize the components cross-sectionally for better stability.",
      "factor_formulation": "\\text{IAB} = \\text{RANK}(\\text{TS_MEAN}(return, 5)) \\times \\text{RANK}(\\text{TS_CORR}(close, volume, 15))",
      "metadata": {
        "experiment_id": "2026-01-18_21-40-12-932281",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "147fc0e5509d",
        "parent_trajectory_ids": [
          "5c45e715cea0",
          "4aeb5308e094"
        ],
        "hypothesis": "Hypothesis: The 'Informed Structural Breakout' (ISB) factor identifies high-conviction trend shifts by multiplying a 5-day Information Asymmetry Decay score (overnight returns divided by intraday range) with a 10-day structural momentum score (volume-price correlation weighted by the 20-day 95th percentile of low/open ratios).\n                Concise Observation: Parent 1 (RankIC 0.0257) excels at identifying quiet institutional accumulation but lacks timing, while Parent 2 (RankIC 0.0269) identifies momentum but is prone to false breakouts; combining them addresses the lead-lag relationship between absorption and expansion.\n                Concise Justification: Institutional investors often accumulate positions overnight to minimize market impact, creating a 'quiet' volatility signature; when this is paired with a structural support floor and volume confirmation, it signals a transition from accumulation to a public markup phase.\n                Concise Knowledge: If a period of stealth accumulation (high overnight return relative to intraday volatility) is followed by a structural price floor breakout with positive volume-price correlation, then the resulting trend is more sustainable than a breakout without prior institutional absorption.\n                concise Specification: The factor is defined as: ((Close/Open - 1) / (High/Low - 1 + 1e-6) over 5-day mean) * (Correlation(Close, Volume, 10)) * (95th percentile of Low/Open over 20 days), capturing the sequence of stealth buying, volume synchronization, and structural support.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T13:37:49.284136"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1713403681134332,
        "ICIR": 0.052329702327496,
        "1day.excess_return_without_cost.std": 0.0048755206556764,
        "1day.excess_return_with_cost.annualized_return": -0.0036357163274022,
        "1day.ffr": 0.9998955177097482,
        "1day.excess_return_without_cost.mean": 0.0001856192253913,
        "1day.excess_return_without_cost.annualized_return": 0.0441773756431499,
        "1day.excess_return_with_cost.std": 0.004876385503451,
        "Rank IC": 0.0277237130304404,
        "IC": 0.0087086589760187,
        "1day.excess_return_without_cost.max_drawdown": -0.1263729591004844,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.5873411561760606,
        "1day.pa": 0.0,
        "l2.valid": 0.9968527096665843,
        "Rank ICIR": 0.1741367913202858,
        "l2.train": 0.9937143805931083,
        "1day.excess_return_with_cost.information_ratio": -0.0483285183161516,
        "1day.excess_return_with_cost.mean": -1.527611902269832e-05
      },
      "feedback": {
        "observations": "The current iteration focused on the 'Informed Structural Breakout' (ISB) hypothesis, testing three distinct implementations: a complex multi-component ISB factor, a simplified cross-sectional rank version (IAB), and a volatility-adjusted support factor (SAF). The results show a significant improvement in Information Coefficient (IC) reaching 0.0087 compared to the SOTA's 0.0058, indicating stronger predictive power at the individual asset level. However, the portfolio-level metrics (Information Ratio and Max Drawdown) have deteriorated compared to the SOTA, suggesting that while the signal is more accurate, its volatility or tail-risk profile is less stable.",
        "hypothesis_evaluation": "The hypothesis that combining 'Information Asymmetry Decay' with 'Structural Momentum' identifies high-conviction shifts is partially supported by the higher IC. However, the implementation 'ISB_Structural_Momentum_20D' appears over-engineered (ER=5, multiple nested time-series operations), which likely contributed to the higher drawdown (-0.126 vs -0.072). The 'Institutional_Absorption_Breakout_15D' approach of using RANK shows promise for stability but might have diluted the specific 'structural' signal intended by the hypothesis.",
        "decision": false,
        "reason": "The current ISB factor is too complex, leading to poor risk-adjusted returns (IR) despite a high IC. By simplifying the 'Structural Support' component (using the low/open ratio more directly) and focusing on price efficiency (return divided by range) rather than complex triple-multiplications, we can reduce the risk of overfitting. Moving from a raw multiplication of three signals to a ranked combination of two core components (Efficiency and Support) should improve the Information Ratio and reduce drawdown."
      },
      "cache_location": null
    },
    "c3c002fa80f87dd6": {
      "factor_id": "c3c002fa80f87dd6",
      "factor_name": "Stealth_Accumulation_Floor_10D",
      "factor_expression": "TS_MEDIAN($low / $open, 10) / (TS_STD($high / $low, 10) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_MEDIAN($low / $open, 10) / (TS_STD($high / $low, 10) + 1e-8)\" # Your output factor expression will be filled in here\n    name = \"Stealth_Accumulation_Floor_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor targets the 'quiet institutional accumulation' phase by measuring the consistency of price support (via the low-to-open ratio) and weighting it by the efficiency of price movement (return per unit of intraday volatility).",
      "factor_formulation": "\\text{SAF} = \\frac{\\text{TS_MEDIAN}(low / open, 10)}{\\text{TS_STD}(high / low, 10) + 1e-8}",
      "metadata": {
        "experiment_id": "2026-01-18_21-40-12-932281",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "147fc0e5509d",
        "parent_trajectory_ids": [
          "5c45e715cea0",
          "4aeb5308e094"
        ],
        "hypothesis": "Hypothesis: The 'Informed Structural Breakout' (ISB) factor identifies high-conviction trend shifts by multiplying a 5-day Information Asymmetry Decay score (overnight returns divided by intraday range) with a 10-day structural momentum score (volume-price correlation weighted by the 20-day 95th percentile of low/open ratios).\n                Concise Observation: Parent 1 (RankIC 0.0257) excels at identifying quiet institutional accumulation but lacks timing, while Parent 2 (RankIC 0.0269) identifies momentum but is prone to false breakouts; combining them addresses the lead-lag relationship between absorption and expansion.\n                Concise Justification: Institutional investors often accumulate positions overnight to minimize market impact, creating a 'quiet' volatility signature; when this is paired with a structural support floor and volume confirmation, it signals a transition from accumulation to a public markup phase.\n                Concise Knowledge: If a period of stealth accumulation (high overnight return relative to intraday volatility) is followed by a structural price floor breakout with positive volume-price correlation, then the resulting trend is more sustainable than a breakout without prior institutional absorption.\n                concise Specification: The factor is defined as: ((Close/Open - 1) / (High/Low - 1 + 1e-6) over 5-day mean) * (Correlation(Close, Volume, 10)) * (95th percentile of Low/Open over 20 days), capturing the sequence of stealth buying, volume synchronization, and structural support.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T13:37:49.284136"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1713403681134332,
        "ICIR": 0.052329702327496,
        "1day.excess_return_without_cost.std": 0.0048755206556764,
        "1day.excess_return_with_cost.annualized_return": -0.0036357163274022,
        "1day.ffr": 0.9998955177097482,
        "1day.excess_return_without_cost.mean": 0.0001856192253913,
        "1day.excess_return_without_cost.annualized_return": 0.0441773756431499,
        "1day.excess_return_with_cost.std": 0.004876385503451,
        "Rank IC": 0.0277237130304404,
        "IC": 0.0087086589760187,
        "1day.excess_return_without_cost.max_drawdown": -0.1263729591004844,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.5873411561760606,
        "1day.pa": 0.0,
        "l2.valid": 0.9968527096665843,
        "Rank ICIR": 0.1741367913202858,
        "l2.train": 0.9937143805931083,
        "1day.excess_return_with_cost.information_ratio": -0.0483285183161516,
        "1day.excess_return_with_cost.mean": -1.527611902269832e-05
      },
      "feedback": {
        "observations": "The current iteration focused on the 'Informed Structural Breakout' (ISB) hypothesis, testing three distinct implementations: a complex multi-component ISB factor, a simplified cross-sectional rank version (IAB), and a volatility-adjusted support factor (SAF). The results show a significant improvement in Information Coefficient (IC) reaching 0.0087 compared to the SOTA's 0.0058, indicating stronger predictive power at the individual asset level. However, the portfolio-level metrics (Information Ratio and Max Drawdown) have deteriorated compared to the SOTA, suggesting that while the signal is more accurate, its volatility or tail-risk profile is less stable.",
        "hypothesis_evaluation": "The hypothesis that combining 'Information Asymmetry Decay' with 'Structural Momentum' identifies high-conviction shifts is partially supported by the higher IC. However, the implementation 'ISB_Structural_Momentum_20D' appears over-engineered (ER=5, multiple nested time-series operations), which likely contributed to the higher drawdown (-0.126 vs -0.072). The 'Institutional_Absorption_Breakout_15D' approach of using RANK shows promise for stability but might have diluted the specific 'structural' signal intended by the hypothesis.",
        "decision": false,
        "reason": "The current ISB factor is too complex, leading to poor risk-adjusted returns (IR) despite a high IC. By simplifying the 'Structural Support' component (using the low/open ratio more directly) and focusing on price efficiency (return divided by range) rather than complex triple-multiplications, we can reduce the risk of overfitting. Moving from a raw multiplication of three signals to a ranked combination of two core components (Efficiency and Support) should improve the Information Ratio and reduce drawdown."
      },
      "cache_location": {
        "workspace_suffix": "exp_20260118_221528",
        "workspace_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221528",
        "factor_dir": "12ea8c376a6144fc821638039488b955",
        "result_h5_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221528/12ea8c376a6144fc821638039488b955/result.h5"
      }
    },
    "329bcbb3921f2079": {
      "factor_id": "329bcbb3921f2079",
      "factor_name": "Inst_Overnight_Efficiency_20D",
      "factor_expression": "(($open / DELAY($close, 1)) - 1) * (($high + $low + $close) / (3 * TS_MEAN($close, 20) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(($open / DELAY($close, 1)) - 1) * ((($high + $low + $close) / 3) / TS_MEAN($close, 20))\" # Your output factor expression will be filled in here\n    name = \"Inst_Overnight_Efficiency_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor captures the alignment of overnight momentum with institutional execution efficiency. It multiplies the overnight gap return by the ratio of VWAP (approximated by the average of high, low, and close) to the 20-day SMA, focusing on stocks with high execution efficiency.",
      "factor_formulation": "\\text{Gap} = \\frac{\\text{open}_t}{\\text{close}_{t-1}} - 1, \\text{VWAP}_{approx} = \\frac{\\text{high} + \\text{low} + \\text{close}}{3}, \\text{Factor} = \\text{Gap} \\times \\frac{\\text{VWAP}_{approx}}{\\text{TS_MEAN}(\\text{close}, 20)}",
      "metadata": {
        "experiment_id": "2026-01-19_04-13-15-519909",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "e3611f7f2ca0",
        "parent_trajectory_ids": [
          "782f03351721",
          "ca88ebe7a6cb"
        ],
        "hypothesis": "Hypothesis: The 'Institutional-Validated Overnight Momentum' factor identifies alpha by selecting stocks where the overnight return (gap) relative to the sector average is confirmed by a high 20-day VWAP-to-SMA efficiency ratio and a negative 20-day price-volume correlation.\n                Concise Observation: Parent 1 captures short-term overnight anomalies but lacks liquidity filters, while Parent 2 identifies institutional accumulation regimes but lacks precise timing; combining them addresses the noise in overnight returns and the timing lag in institutional signals.\n                Concise Justification: Institutional accumulation often manifests as price-volume divergence (negative correlation) and high execution efficiency (VWAP > SMA); an overnight gap occurring within this regime indicates the start of a liquidity-backed trend diffusion.\n                Concise Knowledge: If overnight price gaps are backed by high VWAP efficiency and negative price-volume correlation, they are more likely to represent informed institutional positioning rather than noise; when these conditions align, the overnight lead-lag effect becomes a more reliable predictor of intraday continuation.\n                concise Specification: The factor is calculated as the product of the 1-day overnight return (Close_t-1 to Open_t) and the 20-day VWAP-to-SMA ratio, filtered by the 20-day correlation between price changes and volume, focusing on stocks with high efficiency and low correlation.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T19:55:45.884835"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1562749212036952,
        "ICIR": 0.0551182695900946,
        "1day.excess_return_without_cost.std": 0.0046319084169255,
        "1day.excess_return_with_cost.annualized_return": 0.0093642095762987,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002383859749342,
        "1day.excess_return_without_cost.annualized_return": 0.056735862034348,
        "1day.excess_return_with_cost.std": 0.004632298380718,
        "Rank IC": 0.0274270222938023,
        "IC": 0.0080411508241892,
        "1day.excess_return_without_cost.max_drawdown": -0.1354935854609517,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7939793648600881,
        "1day.pa": 0.0,
        "l2.valid": 0.9965089485825276,
        "Rank ICIR": 0.1881885351108118,
        "l2.train": 0.9938711854848232,
        "1day.excess_return_with_cost.information_ratio": 0.1310346401852208,
        "1day.excess_return_with_cost.mean": 3.934541838781008e-05
      },
      "feedback": {
        "observations": "The current iteration focused on 'Institutional-Validated Overnight Momentum' by combining overnight gaps with efficiency ratios and price-volume correlations. The results show a significant improvement in IC (0.0080 vs 0.0057) and Annualized Return (0.0567 vs 0.0520) compared to the SOTA. However, the Information Ratio decreased and the Max Drawdown nearly doubled (-0.135 vs -0.072), suggesting that while the signal strength (IC) has increased, the volatility and tail risk of the factor have also risen. The composite factor 'Validated_Overnight_Trend_20D' successfully integrated multiple dimensions but may be introducing noise or instability during market regime shifts.",
        "hypothesis_evaluation": "The results partially support the hypothesis. The increase in IC and Annualized Return suggests that the interaction between overnight gaps and institutional validation (efficiency and PV correlation) captures a valid alpha source. However, the deterioration in Information Ratio and Drawdown indicates that the current additive/linear combination in 'Validated_Overnight_Trend_20D' might not be the most robust way to filter noise. The 'efficiency' component (VWAP/SMA) and 'divergence' component (PV Correlation) are providing predictive power but require better normalization or non-linear integration to manage risk.",
        "decision": true,
        "reason": "The current 'Validated_Overnight_Trend_20D' uses a simple sum of Z-scored gaps and raw correlations. This can lead to extreme values when components align, causing the observed higher drawdown. By using the change in efficiency (e.g., current efficiency vs. 5-day average efficiency) and normalizing the PV correlation signal cross-sectionally (RANK), we can create a more stable 'validation' signal. Additionally, penalizing the factor weight during periods of high idiosyncratic volatility may help address the Information Ratio and Drawdown issues seen in the current SOTA comparison."
      },
      "cache_location": null
    },
    "37771da53ce638d5": {
      "factor_id": "37771da53ce638d5",
      "factor_name": "Institutional_Divergence_Gap_20D",
      "factor_expression": "RANK(($open / DELAY($close, 1)) - 1) * RANK(-1 * TS_CORR($return, $volume, 20))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(($open / DELAY($close, 1)) - 1) * RANK(-1 * TS_CORR($close / DELAY($close, 1) - 1, $volume, 20))\" # Your output factor expression will be filled in here\n    name = \"Institutional_Divergence_Gap_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies overnight gaps validated by institutional accumulation regimes, defined as a negative correlation between price returns and volume over 20 days. It uses RANK to normalize the divergence signal and the overnight gap.",
      "factor_formulation": "\\text{Gap} = \\frac{\\text{open}_t}{\\text{close}_{t-1}} - 1, \\text{Factor} = \\text{RANK}(\\text{Gap}) \\times \\text{RANK}(-\\text{TS_CORR}(\\text{return}, \\text{volume}, 20))",
      "metadata": {
        "experiment_id": "2026-01-19_04-13-15-519909",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "e3611f7f2ca0",
        "parent_trajectory_ids": [
          "782f03351721",
          "ca88ebe7a6cb"
        ],
        "hypothesis": "Hypothesis: The 'Institutional-Validated Overnight Momentum' factor identifies alpha by selecting stocks where the overnight return (gap) relative to the sector average is confirmed by a high 20-day VWAP-to-SMA efficiency ratio and a negative 20-day price-volume correlation.\n                Concise Observation: Parent 1 captures short-term overnight anomalies but lacks liquidity filters, while Parent 2 identifies institutional accumulation regimes but lacks precise timing; combining them addresses the noise in overnight returns and the timing lag in institutional signals.\n                Concise Justification: Institutional accumulation often manifests as price-volume divergence (negative correlation) and high execution efficiency (VWAP > SMA); an overnight gap occurring within this regime indicates the start of a liquidity-backed trend diffusion.\n                Concise Knowledge: If overnight price gaps are backed by high VWAP efficiency and negative price-volume correlation, they are more likely to represent informed institutional positioning rather than noise; when these conditions align, the overnight lead-lag effect becomes a more reliable predictor of intraday continuation.\n                concise Specification: The factor is calculated as the product of the 1-day overnight return (Close_t-1 to Open_t) and the 20-day VWAP-to-SMA ratio, filtered by the 20-day correlation between price changes and volume, focusing on stocks with high efficiency and low correlation.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T19:55:45.884835"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1562749212036952,
        "ICIR": 0.0551182695900946,
        "1day.excess_return_without_cost.std": 0.0046319084169255,
        "1day.excess_return_with_cost.annualized_return": 0.0093642095762987,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002383859749342,
        "1day.excess_return_without_cost.annualized_return": 0.056735862034348,
        "1day.excess_return_with_cost.std": 0.004632298380718,
        "Rank IC": 0.0274270222938023,
        "IC": 0.0080411508241892,
        "1day.excess_return_without_cost.max_drawdown": -0.1354935854609517,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7939793648600881,
        "1day.pa": 0.0,
        "l2.valid": 0.9965089485825276,
        "Rank ICIR": 0.1881885351108118,
        "l2.train": 0.9938711854848232,
        "1day.excess_return_with_cost.information_ratio": 0.1310346401852208,
        "1day.excess_return_with_cost.mean": 3.934541838781008e-05
      },
      "feedback": {
        "observations": "The current iteration focused on 'Institutional-Validated Overnight Momentum' by combining overnight gaps with efficiency ratios and price-volume correlations. The results show a significant improvement in IC (0.0080 vs 0.0057) and Annualized Return (0.0567 vs 0.0520) compared to the SOTA. However, the Information Ratio decreased and the Max Drawdown nearly doubled (-0.135 vs -0.072), suggesting that while the signal strength (IC) has increased, the volatility and tail risk of the factor have also risen. The composite factor 'Validated_Overnight_Trend_20D' successfully integrated multiple dimensions but may be introducing noise or instability during market regime shifts.",
        "hypothesis_evaluation": "The results partially support the hypothesis. The increase in IC and Annualized Return suggests that the interaction between overnight gaps and institutional validation (efficiency and PV correlation) captures a valid alpha source. However, the deterioration in Information Ratio and Drawdown indicates that the current additive/linear combination in 'Validated_Overnight_Trend_20D' might not be the most robust way to filter noise. The 'efficiency' component (VWAP/SMA) and 'divergence' component (PV Correlation) are providing predictive power but require better normalization or non-linear integration to manage risk.",
        "decision": true,
        "reason": "The current 'Validated_Overnight_Trend_20D' uses a simple sum of Z-scored gaps and raw correlations. This can lead to extreme values when components align, causing the observed higher drawdown. By using the change in efficiency (e.g., current efficiency vs. 5-day average efficiency) and normalizing the PV correlation signal cross-sectionally (RANK), we can create a more stable 'validation' signal. Additionally, penalizing the factor weight during periods of high idiosyncratic volatility may help address the Information Ratio and Drawdown issues seen in the current SOTA comparison."
      },
      "cache_location": null
    },
    "f13a8ac73355b994": {
      "factor_id": "f13a8ac73355b994",
      "factor_name": "Validated_Overnight_Trend_20D",
      "factor_expression": "ZSCORE(($open / DELAY($close, 1)) - 1) - TS_CORR($close, $volume, 20) + ($close / (TS_MEAN($close, 20) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"ZSCORE(($open / DELAY($close, 1)) - 1) - TS_CORR($close, $volume, 20) + ($close / (TS_MEAN($close, 20) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Validated_Overnight_Trend_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A composite factor that weights the overnight gap by both the efficiency ratio (VWAP/SMA) and the price-volume divergence. It aims to filter out noise by ensuring the gap occurs during a period of high efficiency and institutional positioning.",
      "factor_formulation": "\\text{Factor} = \\text{ZSCORE}((\\text{open}/\\text{DELAY}(\\text{close}, 1) - 1)) - \\text{TS_CORR}(\\text{close}, \\text{volume}, 20) + (\\text{close}/\\text{TS_MEAN}(\\text{close}, 20))",
      "metadata": {
        "experiment_id": "2026-01-19_04-13-15-519909",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "e3611f7f2ca0",
        "parent_trajectory_ids": [
          "782f03351721",
          "ca88ebe7a6cb"
        ],
        "hypothesis": "Hypothesis: The 'Institutional-Validated Overnight Momentum' factor identifies alpha by selecting stocks where the overnight return (gap) relative to the sector average is confirmed by a high 20-day VWAP-to-SMA efficiency ratio and a negative 20-day price-volume correlation.\n                Concise Observation: Parent 1 captures short-term overnight anomalies but lacks liquidity filters, while Parent 2 identifies institutional accumulation regimes but lacks precise timing; combining them addresses the noise in overnight returns and the timing lag in institutional signals.\n                Concise Justification: Institutional accumulation often manifests as price-volume divergence (negative correlation) and high execution efficiency (VWAP > SMA); an overnight gap occurring within this regime indicates the start of a liquidity-backed trend diffusion.\n                Concise Knowledge: If overnight price gaps are backed by high VWAP efficiency and negative price-volume correlation, they are more likely to represent informed institutional positioning rather than noise; when these conditions align, the overnight lead-lag effect becomes a more reliable predictor of intraday continuation.\n                concise Specification: The factor is calculated as the product of the 1-day overnight return (Close_t-1 to Open_t) and the 20-day VWAP-to-SMA ratio, filtered by the 20-day correlation between price changes and volume, focusing on stocks with high efficiency and low correlation.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T19:55:45.884835"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1562749212036952,
        "ICIR": 0.0551182695900946,
        "1day.excess_return_without_cost.std": 0.0046319084169255,
        "1day.excess_return_with_cost.annualized_return": 0.0093642095762987,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002383859749342,
        "1day.excess_return_without_cost.annualized_return": 0.056735862034348,
        "1day.excess_return_with_cost.std": 0.004632298380718,
        "Rank IC": 0.0274270222938023,
        "IC": 0.0080411508241892,
        "1day.excess_return_without_cost.max_drawdown": -0.1354935854609517,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7939793648600881,
        "1day.pa": 0.0,
        "l2.valid": 0.9965089485825276,
        "Rank ICIR": 0.1881885351108118,
        "l2.train": 0.9938711854848232,
        "1day.excess_return_with_cost.information_ratio": 0.1310346401852208,
        "1day.excess_return_with_cost.mean": 3.934541838781008e-05
      },
      "feedback": {
        "observations": "The current iteration focused on 'Institutional-Validated Overnight Momentum' by combining overnight gaps with efficiency ratios and price-volume correlations. The results show a significant improvement in IC (0.0080 vs 0.0057) and Annualized Return (0.0567 vs 0.0520) compared to the SOTA. However, the Information Ratio decreased and the Max Drawdown nearly doubled (-0.135 vs -0.072), suggesting that while the signal strength (IC) has increased, the volatility and tail risk of the factor have also risen. The composite factor 'Validated_Overnight_Trend_20D' successfully integrated multiple dimensions but may be introducing noise or instability during market regime shifts.",
        "hypothesis_evaluation": "The results partially support the hypothesis. The increase in IC and Annualized Return suggests that the interaction between overnight gaps and institutional validation (efficiency and PV correlation) captures a valid alpha source. However, the deterioration in Information Ratio and Drawdown indicates that the current additive/linear combination in 'Validated_Overnight_Trend_20D' might not be the most robust way to filter noise. The 'efficiency' component (VWAP/SMA) and 'divergence' component (PV Correlation) are providing predictive power but require better normalization or non-linear integration to manage risk.",
        "decision": true,
        "reason": "The current 'Validated_Overnight_Trend_20D' uses a simple sum of Z-scored gaps and raw correlations. This can lead to extreme values when components align, causing the observed higher drawdown. By using the change in efficiency (e.g., current efficiency vs. 5-day average efficiency) and normalizing the PV correlation signal cross-sectionally (RANK), we can create a more stable 'validation' signal. Additionally, penalizing the factor weight during periods of high idiosyncratic volatility may help address the Information Ratio and Drawdown issues seen in the current SOTA comparison."
      },
      "cache_location": {
        "workspace_suffix": "exp_20260118_221443",
        "workspace_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221443",
        "factor_dir": "b43da31badbb4859a7e12923ef0a47b4",
        "result_h5_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221443/b43da31badbb4859a7e12923ef0a47b4/result.h5"
      }
    },
    "aa94e618b08d2946": {
      "factor_id": "aa94e618b08d2946",
      "factor_name": "IIA_Informed_Absorption_Factor",
      "factor_expression": "(TS_STD(REGRESI($return, MEAN($return), 20), 20) / (ABS(TS_CORR($return, MEAN($return), 20)) + 1e-8)) * (DELTA($close, 10) / (TS_SUM($volume, 10) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(TS_STD(REGRESI(TS_PCTCHANGE($close, 1), MEAN(TS_PCTCHANGE($close, 1)), 20), 20) / (ABS(TS_CORR(TS_PCTCHANGE($close, 1), MEAN(TS_PCTCHANGE($close, 1)), 20)) + 0.000001)) * (DELTA($close, 10) / (TS_SUM($volume, 10) + 0.000001))\" # Your output factor expression will be filled in here\n    name = \"IIA_Informed_Absorption_Factor\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies stocks where high information asymmetry is validated by efficient institutional accumulation. It calculates the ratio of idiosyncratic volatility (standard deviation of residuals relative to the market) to market correlation over 20 days, multiplied by the 10-day price change efficiency relative to volume turnover. High values suggest informed idiosyncratic drift rather than noisy speculation.",
      "factor_formulation": "IIA = \\frac{TS\\_STD(REGRESI(return, MEAN(return), 20), 20)}{ABS(TS\\_CORR(return, MEAN(return), 20)) + 1e-8} \\times \\frac{DELTA(close, 10)}{TS\\_SUM(volume, 10) + 1e-8}",
      "metadata": {
        "experiment_id": "2026-01-18_21-40-12-932281",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "7564b0f41caa",
        "parent_trajectory_ids": [
          "b40908e50d0b",
          "1b5246b65285"
        ],
        "hypothesis": "Hypothesis: The Informed Institutional Absorption (IIA) factor, defined as the ratio of 20-day idiosyncratic volatility to market correlation (IAD) multiplied by the 10-day price change efficiency relative to volume turnover, identifies stocks where high information asymmetry is validated by efficient institutional accumulation.\n                Concise Observation: Parent 1 (IAD) captures alpha from information asymmetry but suffers from high-volatility noise, while Parent 2 (AISVM) identifies structural support but lacks a catalyst; combining them filters for high-conviction idiosyncratic moves.\n                Concise Justification: By using volume-price efficiency as a quality gate for idiosyncratic drift, the factor isolates 'informed' volatility from 'noisy' volatility, ensuring that the momentum is backed by structural institutional support rather than random market fluctuations.\n                Concise Knowledge: If a stock exhibits high idiosyncratic volatility alongside low market correlation, it indicates private information flow; when this is accompanied by high price velocity per unit of volume, it suggests institutional absorption rather than retail speculation.\n                concise Specification: Calculate IAD as std(residuals of price on market)/corr(price, market) over 20 days; calculate Efficiency as (close - close[10]) / sum(volume, 10); the IIA factor is the product of IAD and Efficiency, using a 20-day lookback for volatility and 10-day for velocity.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T14:03:34.773074"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1064154781006655,
        "ICIR": 0.0608110665284537,
        "1day.excess_return_without_cost.std": 0.0043342005262172,
        "1day.excess_return_with_cost.annualized_return": 0.0365635256501168,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003536781023877,
        "1day.excess_return_without_cost.annualized_return": 0.0841753883682867,
        "1day.excess_return_with_cost.std": 0.0043362086392587,
        "Rank IC": 0.026392827058542,
        "IC": 0.0086813080464508,
        "1day.excess_return_without_cost.max_drawdown": -0.0988060104232491,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.2588896116302553,
        "1day.pa": 0.0,
        "l2.valid": 0.9964061987612935,
        "Rank ICIR": 0.1939278185180157,
        "l2.train": 0.9938588619265584,
        "1day.excess_return_with_cost.information_ratio": 0.5465745641946833,
        "1day.excess_return_with_cost.mean": 0.0001536282590341
      },
      "feedback": {
        "observations": "The experiment successfully tested three variations of the Informed Institutional Absorption (IIA) framework. The current iteration achieved a significant performance breakthrough compared to the previous SOTA. Specifically, the Information Ratio (IR) increased from 0.97 to 1.26, and the Annualized Return improved from 5.2% to 8.4%. The Information Coefficient (IC) also showed a robust improvement (0.0087 vs 0.0058). While the Max Drawdown slightly worsened (-0.098 vs -0.072), the substantial gains in risk-adjusted returns (IR) and predictive power (IC) indicate that the core concept of combining idiosyncratic volatility with volume-weighted price efficiency is highly effective.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that idiosyncratic volatility, when normalized by market correlation and adjusted by price-volume efficiency, captures informed institutional activity. The 'Volatility_Filtered_Institutional_Drift' (VFID) and 'Efficiency_Adjusted_Idiosyncratic_Momentum' (EAIM) variants demonstrate that penalizing 'expensive' volume (high volume for small price moves) while rewarding unique information (idiosyncratic moves) provides a superior alpha signal. The success of the RANK-based combination in EAIM suggests that the interaction between these two components is non-linear and benefits from cross-sectional normalization.",
        "decision": true,
        "reason": "While the current factors use volume turnover as a denominator, they might be capturing high-volatility noise. By focusing on the 'Stealth' phasewhere idiosyncratic returns are positive but volume is lower than the stock's own 20-day averagewe can better isolate informed accumulation from retail-driven spikes. Additionally, using a 'Relative Volume' (Current Volume / 20-day Mean Volume) instead of raw turnover will normalize for liquidity differences across instruments, and adding a signal for 'Price Tightness' (low daily range) during the idiosyncratic move could further filter for institutional control."
      },
      "cache_location": null
    },
    "b6580692e1a63d53": {
      "factor_id": "b6580692e1a63d53",
      "factor_name": "Efficiency_Adjusted_Idiosyncratic_Momentum",
      "factor_expression": "RANK(TS_SUM(REGRESI($return, MEAN($return), 20), 20)) * RANK(DELTA($close, 10) / (TS_SUM($volume, 10) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(TS_SUM(REGRESI(TS_PCTCHANGE($close, 1), MEAN(TS_PCTCHANGE($close, 1)), 20), 20)) * RANK(DELTA($close, 10) / (TS_SUM($volume, 10) + 0.000001))\" # Your output factor expression will be filled in here\n    name = \"Efficiency_Adjusted_Idiosyncratic_Momentum\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A simplified version of the IIA hypothesis focusing on the quality of idiosyncratic moves. It weights the 20-day idiosyncratic return (residuals) by the price velocity per unit of volume turnover over 10 days, standardized cross-sectionally to identify outliers with high-conviction institutional support.",
      "factor_formulation": "EAIM = RANK(TS\\_SUM(REGRESI(return, MEAN(return), 20), 20)) \\times RANK(\\frac{DELTA(close, 10)}{TS\\_SUM(volume, 10) + 1e-8})",
      "metadata": {
        "experiment_id": "2026-01-18_21-40-12-932281",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "7564b0f41caa",
        "parent_trajectory_ids": [
          "b40908e50d0b",
          "1b5246b65285"
        ],
        "hypothesis": "Hypothesis: The Informed Institutional Absorption (IIA) factor, defined as the ratio of 20-day idiosyncratic volatility to market correlation (IAD) multiplied by the 10-day price change efficiency relative to volume turnover, identifies stocks where high information asymmetry is validated by efficient institutional accumulation.\n                Concise Observation: Parent 1 (IAD) captures alpha from information asymmetry but suffers from high-volatility noise, while Parent 2 (AISVM) identifies structural support but lacks a catalyst; combining them filters for high-conviction idiosyncratic moves.\n                Concise Justification: By using volume-price efficiency as a quality gate for idiosyncratic drift, the factor isolates 'informed' volatility from 'noisy' volatility, ensuring that the momentum is backed by structural institutional support rather than random market fluctuations.\n                Concise Knowledge: If a stock exhibits high idiosyncratic volatility alongside low market correlation, it indicates private information flow; when this is accompanied by high price velocity per unit of volume, it suggests institutional absorption rather than retail speculation.\n                concise Specification: Calculate IAD as std(residuals of price on market)/corr(price, market) over 20 days; calculate Efficiency as (close - close[10]) / sum(volume, 10); the IIA factor is the product of IAD and Efficiency, using a 20-day lookback for volatility and 10-day for velocity.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T14:03:34.773074"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1064154781006655,
        "ICIR": 0.0608110665284537,
        "1day.excess_return_without_cost.std": 0.0043342005262172,
        "1day.excess_return_with_cost.annualized_return": 0.0365635256501168,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003536781023877,
        "1day.excess_return_without_cost.annualized_return": 0.0841753883682867,
        "1day.excess_return_with_cost.std": 0.0043362086392587,
        "Rank IC": 0.026392827058542,
        "IC": 0.0086813080464508,
        "1day.excess_return_without_cost.max_drawdown": -0.0988060104232491,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.2588896116302553,
        "1day.pa": 0.0,
        "l2.valid": 0.9964061987612935,
        "Rank ICIR": 0.1939278185180157,
        "l2.train": 0.9938588619265584,
        "1day.excess_return_with_cost.information_ratio": 0.5465745641946833,
        "1day.excess_return_with_cost.mean": 0.0001536282590341
      },
      "feedback": {
        "observations": "The experiment successfully tested three variations of the Informed Institutional Absorption (IIA) framework. The current iteration achieved a significant performance breakthrough compared to the previous SOTA. Specifically, the Information Ratio (IR) increased from 0.97 to 1.26, and the Annualized Return improved from 5.2% to 8.4%. The Information Coefficient (IC) also showed a robust improvement (0.0087 vs 0.0058). While the Max Drawdown slightly worsened (-0.098 vs -0.072), the substantial gains in risk-adjusted returns (IR) and predictive power (IC) indicate that the core concept of combining idiosyncratic volatility with volume-weighted price efficiency is highly effective.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that idiosyncratic volatility, when normalized by market correlation and adjusted by price-volume efficiency, captures informed institutional activity. The 'Volatility_Filtered_Institutional_Drift' (VFID) and 'Efficiency_Adjusted_Idiosyncratic_Momentum' (EAIM) variants demonstrate that penalizing 'expensive' volume (high volume for small price moves) while rewarding unique information (idiosyncratic moves) provides a superior alpha signal. The success of the RANK-based combination in EAIM suggests that the interaction between these two components is non-linear and benefits from cross-sectional normalization.",
        "decision": true,
        "reason": "While the current factors use volume turnover as a denominator, they might be capturing high-volatility noise. By focusing on the 'Stealth' phasewhere idiosyncratic returns are positive but volume is lower than the stock's own 20-day averagewe can better isolate informed accumulation from retail-driven spikes. Additionally, using a 'Relative Volume' (Current Volume / 20-day Mean Volume) instead of raw turnover will normalize for liquidity differences across instruments, and adding a signal for 'Price Tightness' (low daily range) during the idiosyncratic move could further filter for institutional control."
      },
      "cache_location": null
    },
    "2c4861a330741aed": {
      "factor_id": "2c4861a330741aed",
      "factor_name": "Volatility_Filtered_Institutional_Drift",
      "factor_expression": "(DELTA($close, 10) / (TS_MEAN($volume, 10) + 1e-8)) / (TS_STD(REGRESI($return, MEAN($return), 20), 20) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(DELTA($close, 10) / (TS_MEAN($volume, 10) + 1e-8)) / (TS_STD(REGRESI(TS_PCTCHANGE($close, 1), MEAN(TS_PCTCHANGE($close, 1)), 20), 20) + 1e-8)\" # Your output factor expression will be filled in here\n    name = \"Volatility_Filtered_Institutional_Drift\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor isolates 'informed' volatility by penalizing idiosyncratic volatility that is highly correlated with market noise. It uses the ratio of 20-day idiosyncratic standard deviation to the 10-day volume-weighted price change, emphasizing stocks where price moves are 'cheap' in terms of volume but 'rich' in unique information.",
      "factor_formulation": "VFID = \\frac{DELTA(close, 10) / TS\\_MEAN(volume, 10)}{TS\\_STD(REGRESI(return, MEAN(return), 20), 20) + 1e-8}",
      "metadata": {
        "experiment_id": "2026-01-18_21-40-12-932281",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "7564b0f41caa",
        "parent_trajectory_ids": [
          "b40908e50d0b",
          "1b5246b65285"
        ],
        "hypothesis": "Hypothesis: The Informed Institutional Absorption (IIA) factor, defined as the ratio of 20-day idiosyncratic volatility to market correlation (IAD) multiplied by the 10-day price change efficiency relative to volume turnover, identifies stocks where high information asymmetry is validated by efficient institutional accumulation.\n                Concise Observation: Parent 1 (IAD) captures alpha from information asymmetry but suffers from high-volatility noise, while Parent 2 (AISVM) identifies structural support but lacks a catalyst; combining them filters for high-conviction idiosyncratic moves.\n                Concise Justification: By using volume-price efficiency as a quality gate for idiosyncratic drift, the factor isolates 'informed' volatility from 'noisy' volatility, ensuring that the momentum is backed by structural institutional support rather than random market fluctuations.\n                Concise Knowledge: If a stock exhibits high idiosyncratic volatility alongside low market correlation, it indicates private information flow; when this is accompanied by high price velocity per unit of volume, it suggests institutional absorption rather than retail speculation.\n                concise Specification: Calculate IAD as std(residuals of price on market)/corr(price, market) over 20 days; calculate Efficiency as (close - close[10]) / sum(volume, 10); the IIA factor is the product of IAD and Efficiency, using a 20-day lookback for volatility and 10-day for velocity.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T14:03:34.773074"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1064154781006655,
        "ICIR": 0.0608110665284537,
        "1day.excess_return_without_cost.std": 0.0043342005262172,
        "1day.excess_return_with_cost.annualized_return": 0.0365635256501168,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003536781023877,
        "1day.excess_return_without_cost.annualized_return": 0.0841753883682867,
        "1day.excess_return_with_cost.std": 0.0043362086392587,
        "Rank IC": 0.026392827058542,
        "IC": 0.0086813080464508,
        "1day.excess_return_without_cost.max_drawdown": -0.0988060104232491,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.2588896116302553,
        "1day.pa": 0.0,
        "l2.valid": 0.9964061987612935,
        "Rank ICIR": 0.1939278185180157,
        "l2.train": 0.9938588619265584,
        "1day.excess_return_with_cost.information_ratio": 0.5465745641946833,
        "1day.excess_return_with_cost.mean": 0.0001536282590341
      },
      "feedback": {
        "observations": "The experiment successfully tested three variations of the Informed Institutional Absorption (IIA) framework. The current iteration achieved a significant performance breakthrough compared to the previous SOTA. Specifically, the Information Ratio (IR) increased from 0.97 to 1.26, and the Annualized Return improved from 5.2% to 8.4%. The Information Coefficient (IC) also showed a robust improvement (0.0087 vs 0.0058). While the Max Drawdown slightly worsened (-0.098 vs -0.072), the substantial gains in risk-adjusted returns (IR) and predictive power (IC) indicate that the core concept of combining idiosyncratic volatility with volume-weighted price efficiency is highly effective.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that idiosyncratic volatility, when normalized by market correlation and adjusted by price-volume efficiency, captures informed institutional activity. The 'Volatility_Filtered_Institutional_Drift' (VFID) and 'Efficiency_Adjusted_Idiosyncratic_Momentum' (EAIM) variants demonstrate that penalizing 'expensive' volume (high volume for small price moves) while rewarding unique information (idiosyncratic moves) provides a superior alpha signal. The success of the RANK-based combination in EAIM suggests that the interaction between these two components is non-linear and benefits from cross-sectional normalization.",
        "decision": true,
        "reason": "While the current factors use volume turnover as a denominator, they might be capturing high-volatility noise. By focusing on the 'Stealth' phasewhere idiosyncratic returns are positive but volume is lower than the stock's own 20-day averagewe can better isolate informed accumulation from retail-driven spikes. Additionally, using a 'Relative Volume' (Current Volume / 20-day Mean Volume) instead of raw turnover will normalize for liquidity differences across instruments, and adding a signal for 'Price Tightness' (low daily range) during the idiosyncratic move could further filter for institutional control."
      },
      "cache_location": null
    },
    "d947f769b7c533e0": {
      "factor_id": "d947f769b7c533e0",
      "factor_name": "Inst_Liquidity_Gap_Capture_5D",
      "factor_expression": "TS_MEAN(ABS($open - DELAY($close, 1)) / ($high - $low + 1e-8), 5) * TS_ZSCORE(($low - MIN($open, $close)) / ($volume + 1e-8), 10)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_MEAN(ABS($open - DELAY($close, 1)) / ($high - $low + 1e-8), 5) * TS_ZSCORE(($low - MIN($open, $close)) / ($volume + 1e-8), 10)\" # Your output factor expression will be filled in here\n    name = \"Inst_Liquidity_Gap_Capture_5D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies mean-reversion opportunities by combining overnight sentiment gaps with institutional absorption patterns. It multiplies the rolling mean of the overnight-to-intraday range ratio by the standardized lower shadow intensity relative to volume, capturing cases where price gaps are met with strong buying support.",
      "factor_formulation": "\\text{TS_MEAN}\\left(\\frac{|\\text{open} - \\text{delay}(\\text{close}, 1)|}{\\text{high} - \\text{low} + 1e-8}, 5\\right) \\times \\text{TS_ZSCORE}\\left(\\frac{\\text{low} - \\min(\\text{open}, \\text{close})}{\\text{volume} + 1e-8}, 10\\right)",
      "metadata": {
        "experiment_id": "2026-01-18_14-15-29-053563",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "5e035f26c88f",
        "parent_trajectory_ids": [
          "d160973b29d1",
          "3a4d3d97b0d5"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Liquidity-Gap Capture' factor, defined as the 5-day rolling mean of the product between the overnight-to-intraday volatility ratio and the volume-weighted lower shadow intensity, identifies high-probability mean-reversion opportunities where retail-driven price gaps are absorbed by institutional support.\n                Concise Observation: Parent 1 showed that overnight sentiment reversals carry alpha (RankIC 0.0226), while Parent 2 demonstrated that volume-validated price floors (lower shadows) identify institutional conviction (RankIC 0.0247).\n                Concise Justification: Combining the overnight gap anomaly with structural support metrics filters out weak-handed momentum trades, ensuring that mean-reversion signals are only executed when there is evidence of institutional 'floor-building' through price compression and volume absorption.\n                Concise Knowledge: If an overnight price gap occurs with low intraday volatility but high lower-shadow-to-volume ratios, it indicates institutional absorption of retail selling; when these conditions coincide, the short-term reversal probability increases as the liquidity gap is filled.\n                concise Specification: The factor is calculated by multiplying the 5-day moving average of (abs(Open - PrevClose) / (High - Low + eps)) by the 10-day Z-score of ((Low - min(Open, Close)) / Volume). It targets a 5-day lookback for sentiment and 10-day for structural volume validation.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T04:21:08.636221"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1311121097559886,
        "ICIR": 0.0388859289492544,
        "1day.excess_return_without_cost.std": 0.0045334402783585,
        "1day.excess_return_with_cost.annualized_return": -0.0024479468097223,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001884122715648,
        "1day.excess_return_without_cost.annualized_return": 0.0448421206324407,
        "1day.excess_return_with_cost.std": 0.0045346689125997,
        "Rank IC": 0.0257644619465009,
        "IC": 0.0059361915504061,
        "1day.excess_return_without_cost.max_drawdown": -0.1207126894231002,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.6411649383511376,
        "1day.pa": 0.0,
        "l2.valid": 0.9964824510699042,
        "Rank ICIR": 0.1680478646182159,
        "l2.train": 0.9939019235523752,
        "1day.excess_return_with_cost.information_ratio": -0.0349919314442293,
        "1day.excess_return_with_cost.mean": -1.0285490797152764e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Institutional Liquidity-Gap Capture' hypothesis. The current iteration achieved a higher Information Coefficient (IC: 0.0059 vs SOTA: 0.0058), indicating a stronger linear relationship between the factor and future returns. However, the risk-adjusted performance (Information Ratio: 0.64 vs 0.97) and annualized return (4.48% vs 5.20%) lagged behind the SOTA, while the Max Drawdown significantly worsened (-0.12 vs -0.07). This suggests that while the signal has predictive power, the current construction introduces significant volatility and tail risk.",
        "hypothesis_evaluation": "The hypothesis that overnight gaps combined with lower shadow intensity identify mean-reversion is partially supported by the positive IC. However, the 'Gap_Reversion_Institutional_Conviction' factor and its peers seem to suffer from noise. The interaction between the gap magnitude and the lower shadow (the 'floor') is a valid signal, but the current multiplicative forms might be amplifying outliers, leading to the observed increase in Max Drawdown.",
        "decision": false,
        "reason": "1. Complexity Control: The current factors use up to 5 raw features ($open, $close, $high, $low, $volume). Reducing reliance on $volume (which is often noisy) and focusing on price action ratios (Shadow/Range) will improve robustness. 2. Directionality: Using the absolute difference |open - delay(close, 1)| ignores whether the gap was up or down. Mean reversion is typically stronger after downward gaps (liquidity traps). 3. Stability: Replacing the 5-day mean of a product with a product of means, or a simple rank-based combination, may reduce the impact of single-day price spikes that currently degrade the Information Ratio."
      },
      "cache_location": {
        "workspace_suffix": "exp_20260118_221528",
        "workspace_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221528",
        "factor_dir": "4ac1a4b07b004d29b2418da73795660b",
        "result_h5_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221528/4ac1a4b07b004d29b2418da73795660b/result.h5"
      }
    },
    "b4465ddbf507efa8": {
      "factor_id": "b4465ddbf507efa8",
      "factor_name": "Institutional_Floor_Absorption_10D",
      "factor_expression": "RANK((MIN($open, $close) - $low) / ($volume + 1e-8)) * RANK(ABS($open - DELAY($close, 1)) / (TS_STD($close, 10) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK((MIN($open, $close) - $low) / ($volume + 1e-8)) * RANK(ABS($open - DELAY($close, 1)) / (TS_STD($close, 10) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Institutional_Floor_Absorption_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A simplified version of the institutional capture hypothesis focusing on the cross-sectional rank of lower shadow strength when normalized by volume, adjusted by the overnight gap magnitude. It targets stocks where the intraday 'floor' is being built by institutional volume following a gap.",
      "factor_formulation": "\\text{RANK}\\left(\\frac{\\min(\\text{open}, \\text{close}) - \\text{low}}{\\text{volume} + 1e-8}\\right) \\times \\text{RANK}\\left(\\frac{|\\text{open} - \\text{delay}(\\text{close}, 1)|}{\\text{TS_STD}(\\text{close}, 10) + 1e-8}\\right)",
      "metadata": {
        "experiment_id": "2026-01-18_14-15-29-053563",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "5e035f26c88f",
        "parent_trajectory_ids": [
          "d160973b29d1",
          "3a4d3d97b0d5"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Liquidity-Gap Capture' factor, defined as the 5-day rolling mean of the product between the overnight-to-intraday volatility ratio and the volume-weighted lower shadow intensity, identifies high-probability mean-reversion opportunities where retail-driven price gaps are absorbed by institutional support.\n                Concise Observation: Parent 1 showed that overnight sentiment reversals carry alpha (RankIC 0.0226), while Parent 2 demonstrated that volume-validated price floors (lower shadows) identify institutional conviction (RankIC 0.0247).\n                Concise Justification: Combining the overnight gap anomaly with structural support metrics filters out weak-handed momentum trades, ensuring that mean-reversion signals are only executed when there is evidence of institutional 'floor-building' through price compression and volume absorption.\n                Concise Knowledge: If an overnight price gap occurs with low intraday volatility but high lower-shadow-to-volume ratios, it indicates institutional absorption of retail selling; when these conditions coincide, the short-term reversal probability increases as the liquidity gap is filled.\n                concise Specification: The factor is calculated by multiplying the 5-day moving average of (abs(Open - PrevClose) / (High - Low + eps)) by the 10-day Z-score of ((Low - min(Open, Close)) / Volume). It targets a 5-day lookback for sentiment and 10-day for structural volume validation.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T04:21:08.636221"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1311121097559886,
        "ICIR": 0.0388859289492544,
        "1day.excess_return_without_cost.std": 0.0045334402783585,
        "1day.excess_return_with_cost.annualized_return": -0.0024479468097223,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001884122715648,
        "1day.excess_return_without_cost.annualized_return": 0.0448421206324407,
        "1day.excess_return_with_cost.std": 0.0045346689125997,
        "Rank IC": 0.0257644619465009,
        "IC": 0.0059361915504061,
        "1day.excess_return_without_cost.max_drawdown": -0.1207126894231002,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.6411649383511376,
        "1day.pa": 0.0,
        "l2.valid": 0.9964824510699042,
        "Rank ICIR": 0.1680478646182159,
        "l2.train": 0.9939019235523752,
        "1day.excess_return_with_cost.information_ratio": -0.0349919314442293,
        "1day.excess_return_with_cost.mean": -1.0285490797152764e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Institutional Liquidity-Gap Capture' hypothesis. The current iteration achieved a higher Information Coefficient (IC: 0.0059 vs SOTA: 0.0058), indicating a stronger linear relationship between the factor and future returns. However, the risk-adjusted performance (Information Ratio: 0.64 vs 0.97) and annualized return (4.48% vs 5.20%) lagged behind the SOTA, while the Max Drawdown significantly worsened (-0.12 vs -0.07). This suggests that while the signal has predictive power, the current construction introduces significant volatility and tail risk.",
        "hypothesis_evaluation": "The hypothesis that overnight gaps combined with lower shadow intensity identify mean-reversion is partially supported by the positive IC. However, the 'Gap_Reversion_Institutional_Conviction' factor and its peers seem to suffer from noise. The interaction between the gap magnitude and the lower shadow (the 'floor') is a valid signal, but the current multiplicative forms might be amplifying outliers, leading to the observed increase in Max Drawdown.",
        "decision": false,
        "reason": "1. Complexity Control: The current factors use up to 5 raw features ($open, $close, $high, $low, $volume). Reducing reliance on $volume (which is often noisy) and focusing on price action ratios (Shadow/Range) will improve robustness. 2. Directionality: Using the absolute difference |open - delay(close, 1)| ignores whether the gap was up or down. Mean reversion is typically stronger after downward gaps (liquidity traps). 3. Stability: Replacing the 5-day mean of a product with a product of means, or a simple rank-based combination, may reduce the impact of single-day price spikes that currently degrade the Information Ratio."
      },
      "cache_location": {
        "workspace_suffix": "exp_20260118_221528",
        "workspace_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221528",
        "factor_dir": "8256640bbd874fff9558484a0b57c055",
        "result_h5_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221528/8256640bbd874fff9558484a0b57c055/result.h5"
      }
    },
    "44493e63c1664a11": {
      "factor_id": "44493e63c1664a11",
      "factor_name": "Gap_Reversion_Institutional_Conviction",
      "factor_expression": "TS_MEAN(ABS($open - DELAY($close, 1)) / ($close + 1e-8), 5) * ((MIN($open, $close) - $low) / ($high - $low + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_MEAN(ABS($open - DELAY($close, 1)) / ($close + 1e-8), 5) * ((MIN($open, $close) - $low) / ($high - $low + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Gap_Reversion_Institutional_Conviction\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor measures the conviction of a reversal by looking at the ratio of the lower shadow to the total daily range, weighted by the 5-day average of the overnight gap. High values suggest that despite a gap, price was pushed back up significantly, indicating institutional support.",
      "factor_formulation": "\\text{TS_MEAN}\\left(\\frac{|\\text{open} - \\text{delay}(\\text{close}, 1)|}{\\text{delay}(\\text{close}, 1) + 1e-8}, 5\\right) * \\left(\\frac{\\min(\\text{open}, \\text{close}) - \\text{low}}{\\text{high} - \\text{low} + 1e-8}\\right)",
      "metadata": {
        "experiment_id": "2026-01-18_14-15-29-053563",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "5e035f26c88f",
        "parent_trajectory_ids": [
          "d160973b29d1",
          "3a4d3d97b0d5"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Liquidity-Gap Capture' factor, defined as the 5-day rolling mean of the product between the overnight-to-intraday volatility ratio and the volume-weighted lower shadow intensity, identifies high-probability mean-reversion opportunities where retail-driven price gaps are absorbed by institutional support.\n                Concise Observation: Parent 1 showed that overnight sentiment reversals carry alpha (RankIC 0.0226), while Parent 2 demonstrated that volume-validated price floors (lower shadows) identify institutional conviction (RankIC 0.0247).\n                Concise Justification: Combining the overnight gap anomaly with structural support metrics filters out weak-handed momentum trades, ensuring that mean-reversion signals are only executed when there is evidence of institutional 'floor-building' through price compression and volume absorption.\n                Concise Knowledge: If an overnight price gap occurs with low intraday volatility but high lower-shadow-to-volume ratios, it indicates institutional absorption of retail selling; when these conditions coincide, the short-term reversal probability increases as the liquidity gap is filled.\n                concise Specification: The factor is calculated by multiplying the 5-day moving average of (abs(Open - PrevClose) / (High - Low + eps)) by the 10-day Z-score of ((Low - min(Open, Close)) / Volume). It targets a 5-day lookback for sentiment and 10-day for structural volume validation.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T04:21:08.636221"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1311121097559886,
        "ICIR": 0.0388859289492544,
        "1day.excess_return_without_cost.std": 0.0045334402783585,
        "1day.excess_return_with_cost.annualized_return": -0.0024479468097223,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001884122715648,
        "1day.excess_return_without_cost.annualized_return": 0.0448421206324407,
        "1day.excess_return_with_cost.std": 0.0045346689125997,
        "Rank IC": 0.0257644619465009,
        "IC": 0.0059361915504061,
        "1day.excess_return_without_cost.max_drawdown": -0.1207126894231002,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.6411649383511376,
        "1day.pa": 0.0,
        "l2.valid": 0.9964824510699042,
        "Rank ICIR": 0.1680478646182159,
        "l2.train": 0.9939019235523752,
        "1day.excess_return_with_cost.information_ratio": -0.0349919314442293,
        "1day.excess_return_with_cost.mean": -1.0285490797152764e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Institutional Liquidity-Gap Capture' hypothesis. The current iteration achieved a higher Information Coefficient (IC: 0.0059 vs SOTA: 0.0058), indicating a stronger linear relationship between the factor and future returns. However, the risk-adjusted performance (Information Ratio: 0.64 vs 0.97) and annualized return (4.48% vs 5.20%) lagged behind the SOTA, while the Max Drawdown significantly worsened (-0.12 vs -0.07). This suggests that while the signal has predictive power, the current construction introduces significant volatility and tail risk.",
        "hypothesis_evaluation": "The hypothesis that overnight gaps combined with lower shadow intensity identify mean-reversion is partially supported by the positive IC. However, the 'Gap_Reversion_Institutional_Conviction' factor and its peers seem to suffer from noise. The interaction between the gap magnitude and the lower shadow (the 'floor') is a valid signal, but the current multiplicative forms might be amplifying outliers, leading to the observed increase in Max Drawdown.",
        "decision": false,
        "reason": "1. Complexity Control: The current factors use up to 5 raw features ($open, $close, $high, $low, $volume). Reducing reliance on $volume (which is often noisy) and focusing on price action ratios (Shadow/Range) will improve robustness. 2. Directionality: Using the absolute difference |open - delay(close, 1)| ignores whether the gap was up or down. Mean reversion is typically stronger after downward gaps (liquidity traps). 3. Stability: Replacing the 5-day mean of a product with a product of means, or a simple rank-based combination, may reduce the impact of single-day price spikes that currently degrade the Information Ratio."
      },
      "cache_location": {
        "workspace_suffix": "exp_20260118_221528",
        "workspace_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221528",
        "factor_dir": "69c45a9c4dfc4b179344301830f5c3f9",
        "result_h5_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221528/69c45a9c4dfc4b179344301830f5c3f9/result.h5"
      }
    },
    "068442c47d3c48c4": {
      "factor_id": "068442c47d3c48c4",
      "factor_name": "Institutional_Stealth_Conviction_Fusion",
      "factor_expression": "RANK(TS_MEAN(($close - $open) / ($high - $low + 1e-8), 10)) * RANK((($close / DELAY($close, 1)) - ($close / $open)) * TS_CORR($return, DELAY($volume, 1) / ($volume + 1e-8), 20))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(TS_MEAN(($close - $open) / ($high - $low + 1e-8), 10)) * RANK((($open / DELAY($close, 1)) - 1) * TS_CORR(TS_PCTCHANGE($close, 1), TS_PCTCHANGE($volume, 1), 20))\" # Your output factor expression will be filled in here\n    name = \"Institutional_Stealth_Conviction_Fusion\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor combines intraday price efficiency (stealth accumulation) with inter-day conviction (overnight gaps and volume-return synergy). It identifies the transition from quiet institutional accumulation to overt momentum by multiplying the 10-day average intraday efficiency by the 20-day correlation between returns and volume changes, scaled by the overnight gap.",
      "factor_formulation": "Rank(TS\\_MEAN(\\frac{close - open}{high - low + 1e-8}, 10)) \\times Rank((\\frac{close}{delay(close, 1)} - \\frac{close}{open}) \\times TS\\_CORR(return, \\frac{volume - delay(volume, 1)}{delay(volume, 1) + 1e-8}, 20))",
      "metadata": {
        "experiment_id": "2026-01-18_13-34-30-274463",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "59b0dff7176c",
        "parent_trajectory_ids": [
          "22145381325f",
          "a452d2c1c177"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Stealth-Conviction Fusion' factor, calculated as the product of the 10-day average intraday price efficiency (VWAP-to-Close ratio divided by intraday range) and the 20-day return-volume correlation scaled by the overnight gap, identifies superior risk-adjusted returns by capturing the transition from quiet accumulation to overt institutional momentum.\n                Concise Observation: Parent 1 (RankIC 0.023) captures low-noise accumulation through intraday structure, while Parent 2 (RankIC 0.029) identifies institutional conviction via overnight gaps and return-volume correlation; both capture different phases of the institutional trade cycle.\n                Concise Justification: Combining intraday efficiency (Parent 1) with inter-day conviction (Parent 2) filters out speculative gaps (noise) by requiring a prior state of 'quiet accumulation,' ensuring the factor only triggers when 'Smart Money' transitions from building a position to driving a trend.\n                Concise Knowledge: If a stock exhibits high intraday price efficiency with low volatility (stealth accumulation) followed by a high-conviction overnight gap that aligns with return-volume synergy, then the resulting momentum is more persistent than signals derived from price gaps or volume spikes alone.\n                concise Specification: The factor is defined as: Rank(Mean((Close - Open) / (High - Low), 10)) * Rank(((Close / Delay(Close, 1)) - 1 - (Close / Open - 1)) * Correlation(Return, Volume_Change, 20)). It uses a 10-day window for accumulation and a 20-day window for conviction correlation.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T05:53:57.508799"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.094379469257435,
        "ICIR": 0.057423571875225,
        "1day.excess_return_without_cost.std": 0.0042460316862205,
        "1day.excess_return_with_cost.annualized_return": 0.0143517930831041,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002594860349479,
        "1day.excess_return_without_cost.annualized_return": 0.0617576763176081,
        "1day.excess_return_with_cost.std": 0.0042473536201055,
        "Rank IC": 0.0252251661818718,
        "IC": 0.008068681908638,
        "1day.excess_return_without_cost.max_drawdown": -0.0741089242261757,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.94279927012592,
        "1day.pa": 0.0,
        "l2.valid": 0.9964186220181058,
        "Rank ICIR": 0.1907819922970675,
        "l2.train": 0.9934815968097204,
        "1day.excess_return_with_cost.information_ratio": 0.2190278123319337,
        "1day.excess_return_with_cost.mean": 6.030165160968145e-05
      },
      "feedback": {
        "observations": "The experiment tested the 'Institutional Stealth-Conviction Fusion' hypothesis by breaking it down into its composite parts and a combined version. The combined factor 'Institutional_Stealth_Conviction_Fusion' achieved a higher IC (0.008069 vs 0.005798) and a higher Annualized Return (0.061758 vs 0.052010) compared to the previous SOTA. However, the Information Ratio and Max Drawdown slightly deteriorated, suggesting that while the predictive power (IC) and absolute returns increased, the volatility of the excess returns also rose. The complexity of the fusion factor is moderate but manageable, though the use of multiple 'Rank' and 'TS_CORR' operations across different windows (10D and 20D) adds structural depth.",
        "hypothesis_evaluation": "The results support the hypothesis that combining intraday efficiency (stealth) with inter-day conviction (gaps and volume correlation) captures superior returns. The significant jump in IC indicates that the interaction between 'clean' price movement and volume-backed gaps is a strong predictor. The lower Information Ratio compared to SOTA suggests that the 'Conviction' component (overnight gaps) might be introducing higher idiosyncratic risk or noise that needs better filtering.",
        "decision": true,
        "reason": "The current 'Institutional_Stealth_Conviction_Fusion' uses a simple (Close-Open)/(High-Low) ratio which can be noisy in low-volatility regimes. By normalizing the intraday progress by the ATR or a rolling standard deviation, and ensuring the overnight gap is significant relative to recent volume (Volume-Weighted Gap), we aim to improve the Information Ratio. Additionally, keeping the window sizes consistent (e.g., both at 15 days) may reduce the complexity of the temporal interactions."
      },
      "cache_location": null
    },
    "fae69de7090e0e5a": {
      "factor_id": "fae69de7090e0e5a",
      "factor_name": "Stealth_Accumulation_Efficiency_10D",
      "factor_expression": "RANK(TS_MEAN(($close - $open) / ($high - $low + 1e-8), 10))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(TS_MEAN(($close - $open) / ($high - $low + 1e-8), 10))\" # Your output factor expression will be filled in here\n    name = \"Stealth_Accumulation_Efficiency_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A simplified component of the institutional conviction hypothesis, focusing on 'Stealth Accumulation'. It measures the average intraday price progress relative to the total range over a 10-day window, identifying stocks where price movement is consistent and 'clean' rather than volatile.",
      "factor_formulation": "Rank(TS\\_MEAN(\\frac{close - open}{high - low + 1e-8}, 10))",
      "metadata": {
        "experiment_id": "2026-01-18_13-34-30-274463",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "59b0dff7176c",
        "parent_trajectory_ids": [
          "22145381325f",
          "a452d2c1c177"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Stealth-Conviction Fusion' factor, calculated as the product of the 10-day average intraday price efficiency (VWAP-to-Close ratio divided by intraday range) and the 20-day return-volume correlation scaled by the overnight gap, identifies superior risk-adjusted returns by capturing the transition from quiet accumulation to overt institutional momentum.\n                Concise Observation: Parent 1 (RankIC 0.023) captures low-noise accumulation through intraday structure, while Parent 2 (RankIC 0.029) identifies institutional conviction via overnight gaps and return-volume correlation; both capture different phases of the institutional trade cycle.\n                Concise Justification: Combining intraday efficiency (Parent 1) with inter-day conviction (Parent 2) filters out speculative gaps (noise) by requiring a prior state of 'quiet accumulation,' ensuring the factor only triggers when 'Smart Money' transitions from building a position to driving a trend.\n                Concise Knowledge: If a stock exhibits high intraday price efficiency with low volatility (stealth accumulation) followed by a high-conviction overnight gap that aligns with return-volume synergy, then the resulting momentum is more persistent than signals derived from price gaps or volume spikes alone.\n                concise Specification: The factor is defined as: Rank(Mean((Close - Open) / (High - Low), 10)) * Rank(((Close / Delay(Close, 1)) - 1 - (Close / Open - 1)) * Correlation(Return, Volume_Change, 20)). It uses a 10-day window for accumulation and a 20-day window for conviction correlation.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T05:53:57.508799"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.094379469257435,
        "ICIR": 0.057423571875225,
        "1day.excess_return_without_cost.std": 0.0042460316862205,
        "1day.excess_return_with_cost.annualized_return": 0.0143517930831041,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002594860349479,
        "1day.excess_return_without_cost.annualized_return": 0.0617576763176081,
        "1day.excess_return_with_cost.std": 0.0042473536201055,
        "Rank IC": 0.0252251661818718,
        "IC": 0.008068681908638,
        "1day.excess_return_without_cost.max_drawdown": -0.0741089242261757,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.94279927012592,
        "1day.pa": 0.0,
        "l2.valid": 0.9964186220181058,
        "Rank ICIR": 0.1907819922970675,
        "l2.train": 0.9934815968097204,
        "1day.excess_return_with_cost.information_ratio": 0.2190278123319337,
        "1day.excess_return_with_cost.mean": 6.030165160968145e-05
      },
      "feedback": {
        "observations": "The experiment tested the 'Institutional Stealth-Conviction Fusion' hypothesis by breaking it down into its composite parts and a combined version. The combined factor 'Institutional_Stealth_Conviction_Fusion' achieved a higher IC (0.008069 vs 0.005798) and a higher Annualized Return (0.061758 vs 0.052010) compared to the previous SOTA. However, the Information Ratio and Max Drawdown slightly deteriorated, suggesting that while the predictive power (IC) and absolute returns increased, the volatility of the excess returns also rose. The complexity of the fusion factor is moderate but manageable, though the use of multiple 'Rank' and 'TS_CORR' operations across different windows (10D and 20D) adds structural depth.",
        "hypothesis_evaluation": "The results support the hypothesis that combining intraday efficiency (stealth) with inter-day conviction (gaps and volume correlation) captures superior returns. The significant jump in IC indicates that the interaction between 'clean' price movement and volume-backed gaps is a strong predictor. The lower Information Ratio compared to SOTA suggests that the 'Conviction' component (overnight gaps) might be introducing higher idiosyncratic risk or noise that needs better filtering.",
        "decision": true,
        "reason": "The current 'Institutional_Stealth_Conviction_Fusion' uses a simple (Close-Open)/(High-Low) ratio which can be noisy in low-volatility regimes. By normalizing the intraday progress by the ATR or a rolling standard deviation, and ensuring the overnight gap is significant relative to recent volume (Volume-Weighted Gap), we aim to improve the Information Ratio. Additionally, keeping the window sizes consistent (e.g., both at 15 days) may reduce the complexity of the temporal interactions."
      },
      "cache_location": {
        "workspace_suffix": "exp_20260118_213430",
        "workspace_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_213430",
        "factor_dir": "1b75370889d1408d9936ca5999ae754f",
        "result_h5_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_213430/1b75370889d1408d9936ca5999ae754f/result.h5"
      }
    },
    "8367e5692e56f9d3": {
      "factor_id": "8367e5692e56f9d3",
      "factor_name": "Institutional_Gap_Conviction_20D",
      "factor_expression": "RANK((($open / DELAY($close, 1)) - 1) * TS_CORR($return, $volume, 20))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK((($open / DELAY($close, 1)) - 1) * TS_CORR(TS_PCTCHANGE($close, 1), $volume, 20))\" # Your output factor expression will be filled in here\n    name = \"Institutional_Gap_Conviction_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor isolates the 'Conviction' phase of the hypothesis. It calculates the product of the overnight price gap and the 20-day correlation between returns and volume, identifying stocks where institutional players are driving price through gaps supported by volume-price synergy.",
      "factor_formulation": "Rank((\\frac{open}{delay(close, 1)} - 1) \\times TS\\_CORR(return, volume, 20))",
      "metadata": {
        "experiment_id": "2026-01-18_13-34-30-274463",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "59b0dff7176c",
        "parent_trajectory_ids": [
          "22145381325f",
          "a452d2c1c177"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Stealth-Conviction Fusion' factor, calculated as the product of the 10-day average intraday price efficiency (VWAP-to-Close ratio divided by intraday range) and the 20-day return-volume correlation scaled by the overnight gap, identifies superior risk-adjusted returns by capturing the transition from quiet accumulation to overt institutional momentum.\n                Concise Observation: Parent 1 (RankIC 0.023) captures low-noise accumulation through intraday structure, while Parent 2 (RankIC 0.029) identifies institutional conviction via overnight gaps and return-volume correlation; both capture different phases of the institutional trade cycle.\n                Concise Justification: Combining intraday efficiency (Parent 1) with inter-day conviction (Parent 2) filters out speculative gaps (noise) by requiring a prior state of 'quiet accumulation,' ensuring the factor only triggers when 'Smart Money' transitions from building a position to driving a trend.\n                Concise Knowledge: If a stock exhibits high intraday price efficiency with low volatility (stealth accumulation) followed by a high-conviction overnight gap that aligns with return-volume synergy, then the resulting momentum is more persistent than signals derived from price gaps or volume spikes alone.\n                concise Specification: The factor is defined as: Rank(Mean((Close - Open) / (High - Low), 10)) * Rank(((Close / Delay(Close, 1)) - 1 - (Close / Open - 1)) * Correlation(Return, Volume_Change, 20)). It uses a 10-day window for accumulation and a 20-day window for conviction correlation.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T05:53:57.508799"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.094379469257435,
        "ICIR": 0.057423571875225,
        "1day.excess_return_without_cost.std": 0.0042460316862205,
        "1day.excess_return_with_cost.annualized_return": 0.0143517930831041,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002594860349479,
        "1day.excess_return_without_cost.annualized_return": 0.0617576763176081,
        "1day.excess_return_with_cost.std": 0.0042473536201055,
        "Rank IC": 0.0252251661818718,
        "IC": 0.008068681908638,
        "1day.excess_return_without_cost.max_drawdown": -0.0741089242261757,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.94279927012592,
        "1day.pa": 0.0,
        "l2.valid": 0.9964186220181058,
        "Rank ICIR": 0.1907819922970675,
        "l2.train": 0.9934815968097204,
        "1day.excess_return_with_cost.information_ratio": 0.2190278123319337,
        "1day.excess_return_with_cost.mean": 6.030165160968145e-05
      },
      "feedback": {
        "observations": "The experiment tested the 'Institutional Stealth-Conviction Fusion' hypothesis by breaking it down into its composite parts and a combined version. The combined factor 'Institutional_Stealth_Conviction_Fusion' achieved a higher IC (0.008069 vs 0.005798) and a higher Annualized Return (0.061758 vs 0.052010) compared to the previous SOTA. However, the Information Ratio and Max Drawdown slightly deteriorated, suggesting that while the predictive power (IC) and absolute returns increased, the volatility of the excess returns also rose. The complexity of the fusion factor is moderate but manageable, though the use of multiple 'Rank' and 'TS_CORR' operations across different windows (10D and 20D) adds structural depth.",
        "hypothesis_evaluation": "The results support the hypothesis that combining intraday efficiency (stealth) with inter-day conviction (gaps and volume correlation) captures superior returns. The significant jump in IC indicates that the interaction between 'clean' price movement and volume-backed gaps is a strong predictor. The lower Information Ratio compared to SOTA suggests that the 'Conviction' component (overnight gaps) might be introducing higher idiosyncratic risk or noise that needs better filtering.",
        "decision": true,
        "reason": "The current 'Institutional_Stealth_Conviction_Fusion' uses a simple (Close-Open)/(High-Low) ratio which can be noisy in low-volatility regimes. By normalizing the intraday progress by the ATR or a rolling standard deviation, and ensuring the overnight gap is significant relative to recent volume (Volume-Weighted Gap), we aim to improve the Information Ratio. Additionally, keeping the window sizes consistent (e.g., both at 15 days) may reduce the complexity of the temporal interactions."
      },
      "cache_location": null
    },
    "e919e9853947a535": {
      "factor_id": "e919e9853947a535",
      "factor_name": "IEEF_Compression_Exhaustion_60D",
      "factor_expression": "RANK(TS_MEAN($volume / ($high - $low + 1e-8), 10) * TS_MEAN(ABS($close - $open) / ($high - $low + 1e-8), 20)) * SIGN(TS_PCTCHANGE($close, 60))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(TS_MEAN($volume / ($high - $low + 1e-8), 10) * TS_MEAN(ABS($close - $open) / ($high - $low + 1e-8), 20)) * SIGN(TS_PCTCHANGE($close, 60))\" # Your output factor expression will be filled in here\n    name = \"IEEF_Compression_Exhaustion_60D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor implements the Institutional Equilibrium-Exhaustion Framework. It calculates the product of 10-day volume-to-range compression and 20-day intraday efficiency, then interacts it with the 60-day price momentum. High compression and efficiency suggest trend continuation, while extreme momentum combined with high compression suggests institutional exhaustion and potential reversal.",
      "factor_formulation": "\\text{RANK}(\\text{TS_MEAN}(\\frac{volume}{high - low + 1e-8}, 10) * \\text{TS_MEAN}(\\frac{ABS(close - open)}{high - low + 1e-8}, 20)) * \\text{SIGN}(\\text{TS_PCTCHANGE}(close, 60))",
      "metadata": {
        "experiment_id": "2026-01-19_04-13-15-519909",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "1d824f157fea",
        "parent_trajectory_ids": [
          "bf7e4eaedd9c",
          "46dfd7f039b9"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Equilibrium-Exhaustion Framework' (IEEF) predicts asset returns by identifying the 'Compression-Efficiency' state, where the product of the 10-day volume-to-price-range ratio and the 20-day intraday efficiency ratio signals trend continuation when macro-momentum is moderate, but signals reversal when macro-momentum is extreme.\n                Concise Observation: Parent 1 captures institutional accumulation through price-volume compression (RankIC 0.0236), while Parent 2 identifies macro-exhaustion through price-volume divergence (RankIC 0.0259), suggesting a non-linear interaction between absorption and fatigue.\n                Concise Justification: Institutional absorption creates low-volatility volume clusters that fuel trends, but when these clusters appear after extended price moves with declining efficiency, they represent 'hitting a wall' rather than 'building energy'.\n                Concise Knowledge: If volume-to-range compression is high while intraday efficiency remains elevated, the trend is likely to continue; if this compression occurs alongside extreme price-volume divergence (exhaustion), a trend reversal is imminent.\n                concise Specification: Calculate the factor as (Volume / (High - Low + epsilon)) over 10 days multiplied by (Abs(Close - Open) / (High - Low + epsilon)) over 20 days, then interact this product with the 60-day Rate of Change to determine the directional signal.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T19:50:55.144851"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1474870544872942,
        "ICIR": 0.0547580612916717,
        "1day.excess_return_without_cost.std": 0.003916768930777,
        "1day.excess_return_with_cost.annualized_return": 0.0153291440075032,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.000262588708171,
        "1day.excess_return_without_cost.annualized_return": 0.0624961125447176,
        "1day.excess_return_with_cost.std": 0.0039174128047621,
        "Rank IC": 0.0251719585117828,
        "IC": 0.0073564999432143,
        "1day.excess_return_without_cost.max_drawdown": -0.1239299675451282,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.0342763020994392,
        "1day.pa": 0.0,
        "l2.valid": 0.9962923118766976,
        "Rank ICIR": 0.1987372776295059,
        "l2.train": 0.9935915294221304,
        "1day.excess_return_with_cost.information_ratio": 0.2536472084956626,
        "1day.excess_return_with_cost.mean": 6.440816809875314e-05
      },
      "feedback": {
        "observations": "The current iteration of the 'Institutional Equilibrium-Exhaustion Framework' (IEEF) has successfully improved upon the State of the Art (SOTA) in terms of predictive power and risk-adjusted returns. The Information Ratio (IR) increased from 0.97 to 1.03, and the Information Coefficient (IC) improved from 0.0058 to 0.0074. The annualized return also saw a notable increase to 6.25%. However, the Max Drawdown (MDD) significantly worsened from -0.072 to -0.124, suggesting that while the signal is stronger, it may be introducing higher volatility or tail risk during regime shifts, likely due to the 'exhaustion' component triggering prematurely or the interaction with macro-momentum being too binary.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that combining volume-to-price-range compression with intraday efficiency and long-term momentum creates a robust alpha signal. The 'IEEF_Compression_Exhaustion_60D' factor effectively captures the transition between accumulation and exhaustion. The improvement in IC suggests that the 'Compression-Efficiency' state is a valid predictor of returns. However, the increased drawdown indicates that the 'reversal' logic (exhaustion) needs a more nuanced threshold than a simple SIGN function of 60-day returns to avoid false positives in strong trending markets.",
        "decision": true,
        "reason": "The current implementation uses SIGN(TS_PCTCHANGE(close, 60)), which treats all positive trends identically. In reality, institutional exhaustion typically occurs after a period of accelerating returns (convexity) rather than steady growth. By incorporating a measure of momentum acceleration (e.g., the difference between short-term and long-term momentum) or a Z-score of the momentum itself, we can better identify the 'extreme' macro-momentum mentioned in the original hypothesis. This should help in smoothing the transition between the continuation and reversal signals, addressing the current Max Drawdown issue."
      },
      "cache_location": {
        "workspace_suffix": "exp_20260118_221443",
        "workspace_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221443",
        "factor_dir": "5d28f76e2b1142e4a5845b2b45c6f072",
        "result_h5_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221443/5d28f76e2b1142e4a5845b2b45c6f072/result.h5"
      }
    },
    "693c393ecd19e4b1": {
      "factor_id": "693c393ecd19e4b1",
      "factor_name": "IEEF_Efficiency_Momentum_Interaction",
      "factor_expression": "TS_ZSCORE(ABS($close - $open) / ($high - $low + 1e-8), 20) * SIGN(TS_MEAN($return, 60)) * RANK(TS_MEAN($volume, 10))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_ZSCORE(ABS($close - $open) / ($high - $low + 1e-8), 20) * SIGN(TS_PCTCHANGE($close, 60)) * RANK(TS_MEAN($volume, 10))\" # Your output factor expression will be filled in here\n    name = \"IEEF_Efficiency_Momentum_Interaction\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A simplified version of the IEEF focusing on the interaction between intraday price efficiency and long-term momentum. It identifies whether high-efficiency price moves are supported by volume compression relative to the 60-day return direction, aiming to distinguish between accumulation and exhaustion phases.",
      "factor_formulation": "\\text{TS_ZSCORE}(\\frac{ABS(close - open)}{high - low + 1e-8}, 20) * \\text{SIGN}(\\text{TS_MEAN}(return, 60)) * \\text{RANK}(\\text{TS_MEAN}(volume, 10))",
      "metadata": {
        "experiment_id": "2026-01-19_04-13-15-519909",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "1d824f157fea",
        "parent_trajectory_ids": [
          "bf7e4eaedd9c",
          "46dfd7f039b9"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Equilibrium-Exhaustion Framework' (IEEF) predicts asset returns by identifying the 'Compression-Efficiency' state, where the product of the 10-day volume-to-price-range ratio and the 20-day intraday efficiency ratio signals trend continuation when macro-momentum is moderate, but signals reversal when macro-momentum is extreme.\n                Concise Observation: Parent 1 captures institutional accumulation through price-volume compression (RankIC 0.0236), while Parent 2 identifies macro-exhaustion through price-volume divergence (RankIC 0.0259), suggesting a non-linear interaction between absorption and fatigue.\n                Concise Justification: Institutional absorption creates low-volatility volume clusters that fuel trends, but when these clusters appear after extended price moves with declining efficiency, they represent 'hitting a wall' rather than 'building energy'.\n                Concise Knowledge: If volume-to-range compression is high while intraday efficiency remains elevated, the trend is likely to continue; if this compression occurs alongside extreme price-volume divergence (exhaustion), a trend reversal is imminent.\n                concise Specification: Calculate the factor as (Volume / (High - Low + epsilon)) over 10 days multiplied by (Abs(Close - Open) / (High - Low + epsilon)) over 20 days, then interact this product with the 60-day Rate of Change to determine the directional signal.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T19:50:55.144851"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1474870544872942,
        "ICIR": 0.0547580612916717,
        "1day.excess_return_without_cost.std": 0.003916768930777,
        "1day.excess_return_with_cost.annualized_return": 0.0153291440075032,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.000262588708171,
        "1day.excess_return_without_cost.annualized_return": 0.0624961125447176,
        "1day.excess_return_with_cost.std": 0.0039174128047621,
        "Rank IC": 0.0251719585117828,
        "IC": 0.0073564999432143,
        "1day.excess_return_without_cost.max_drawdown": -0.1239299675451282,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.0342763020994392,
        "1day.pa": 0.0,
        "l2.valid": 0.9962923118766976,
        "Rank ICIR": 0.1987372776295059,
        "l2.train": 0.9935915294221304,
        "1day.excess_return_with_cost.information_ratio": 0.2536472084956626,
        "1day.excess_return_with_cost.mean": 6.440816809875314e-05
      },
      "feedback": {
        "observations": "The current iteration of the 'Institutional Equilibrium-Exhaustion Framework' (IEEF) has successfully improved upon the State of the Art (SOTA) in terms of predictive power and risk-adjusted returns. The Information Ratio (IR) increased from 0.97 to 1.03, and the Information Coefficient (IC) improved from 0.0058 to 0.0074. The annualized return also saw a notable increase to 6.25%. However, the Max Drawdown (MDD) significantly worsened from -0.072 to -0.124, suggesting that while the signal is stronger, it may be introducing higher volatility or tail risk during regime shifts, likely due to the 'exhaustion' component triggering prematurely or the interaction with macro-momentum being too binary.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that combining volume-to-price-range compression with intraday efficiency and long-term momentum creates a robust alpha signal. The 'IEEF_Compression_Exhaustion_60D' factor effectively captures the transition between accumulation and exhaustion. The improvement in IC suggests that the 'Compression-Efficiency' state is a valid predictor of returns. However, the increased drawdown indicates that the 'reversal' logic (exhaustion) needs a more nuanced threshold than a simple SIGN function of 60-day returns to avoid false positives in strong trending markets.",
        "decision": true,
        "reason": "The current implementation uses SIGN(TS_PCTCHANGE(close, 60)), which treats all positive trends identically. In reality, institutional exhaustion typically occurs after a period of accelerating returns (convexity) rather than steady growth. By incorporating a measure of momentum acceleration (e.g., the difference between short-term and long-term momentum) or a Z-score of the momentum itself, we can better identify the 'extreme' macro-momentum mentioned in the original hypothesis. This should help in smoothing the transition between the continuation and reversal signals, addressing the current Max Drawdown issue."
      },
      "cache_location": null
    },
    "915072890e0a178e": {
      "factor_id": "915072890e0a178e",
      "factor_name": "IEEF_Trend_Fatigue_Indicator",
      "factor_expression": "RANK(TS_MEAN($volume / ($high - $low + 1e-8), 10)) * TS_ZSCORE(TS_PCTCHANGE($close, 60), 60)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(TS_MEAN($volume / ($high - $low + 1e-8), 10)) * TS_ZSCORE(TS_PCTCHANGE($close, 60), 60)\" # Your output factor expression will be filled in here\n    name = \"IEEF_Trend_Fatigue_Indicator\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor captures 'hitting a wall' by measuring the divergence between price range and volume. It uses the 10-day average volume-to-range ratio as a proxy for absorption and scales it by the 60-day price trend to identify exhaustion points in extended moves.",
      "factor_formulation": "\\text{RANK}(\\text{TS_MEAN}(\\frac{volume}{high - low + 1e-8}, 10)) * \\text{TS_ZSCORE}(\\text{TS_PCTCHANGE}(close, 60), 60)",
      "metadata": {
        "experiment_id": "2026-01-19_04-13-15-519909",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "1d824f157fea",
        "parent_trajectory_ids": [
          "bf7e4eaedd9c",
          "46dfd7f039b9"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Equilibrium-Exhaustion Framework' (IEEF) predicts asset returns by identifying the 'Compression-Efficiency' state, where the product of the 10-day volume-to-price-range ratio and the 20-day intraday efficiency ratio signals trend continuation when macro-momentum is moderate, but signals reversal when macro-momentum is extreme.\n                Concise Observation: Parent 1 captures institutional accumulation through price-volume compression (RankIC 0.0236), while Parent 2 identifies macro-exhaustion through price-volume divergence (RankIC 0.0259), suggesting a non-linear interaction between absorption and fatigue.\n                Concise Justification: Institutional absorption creates low-volatility volume clusters that fuel trends, but when these clusters appear after extended price moves with declining efficiency, they represent 'hitting a wall' rather than 'building energy'.\n                Concise Knowledge: If volume-to-range compression is high while intraday efficiency remains elevated, the trend is likely to continue; if this compression occurs alongside extreme price-volume divergence (exhaustion), a trend reversal is imminent.\n                concise Specification: Calculate the factor as (Volume / (High - Low + epsilon)) over 10 days multiplied by (Abs(Close - Open) / (High - Low + epsilon)) over 20 days, then interact this product with the 60-day Rate of Change to determine the directional signal.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T19:50:55.144851"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1474870544872942,
        "ICIR": 0.0547580612916717,
        "1day.excess_return_without_cost.std": 0.003916768930777,
        "1day.excess_return_with_cost.annualized_return": 0.0153291440075032,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.000262588708171,
        "1day.excess_return_without_cost.annualized_return": 0.0624961125447176,
        "1day.excess_return_with_cost.std": 0.0039174128047621,
        "Rank IC": 0.0251719585117828,
        "IC": 0.0073564999432143,
        "1day.excess_return_without_cost.max_drawdown": -0.1239299675451282,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.0342763020994392,
        "1day.pa": 0.0,
        "l2.valid": 0.9962923118766976,
        "Rank ICIR": 0.1987372776295059,
        "l2.train": 0.9935915294221304,
        "1day.excess_return_with_cost.information_ratio": 0.2536472084956626,
        "1day.excess_return_with_cost.mean": 6.440816809875314e-05
      },
      "feedback": {
        "observations": "The current iteration of the 'Institutional Equilibrium-Exhaustion Framework' (IEEF) has successfully improved upon the State of the Art (SOTA) in terms of predictive power and risk-adjusted returns. The Information Ratio (IR) increased from 0.97 to 1.03, and the Information Coefficient (IC) improved from 0.0058 to 0.0074. The annualized return also saw a notable increase to 6.25%. However, the Max Drawdown (MDD) significantly worsened from -0.072 to -0.124, suggesting that while the signal is stronger, it may be introducing higher volatility or tail risk during regime shifts, likely due to the 'exhaustion' component triggering prematurely or the interaction with macro-momentum being too binary.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that combining volume-to-price-range compression with intraday efficiency and long-term momentum creates a robust alpha signal. The 'IEEF_Compression_Exhaustion_60D' factor effectively captures the transition between accumulation and exhaustion. The improvement in IC suggests that the 'Compression-Efficiency' state is a valid predictor of returns. However, the increased drawdown indicates that the 'reversal' logic (exhaustion) needs a more nuanced threshold than a simple SIGN function of 60-day returns to avoid false positives in strong trending markets.",
        "decision": true,
        "reason": "The current implementation uses SIGN(TS_PCTCHANGE(close, 60)), which treats all positive trends identically. In reality, institutional exhaustion typically occurs after a period of accelerating returns (convexity) rather than steady growth. By incorporating a measure of momentum acceleration (e.g., the difference between short-term and long-term momentum) or a Z-score of the momentum itself, we can better identify the 'extreme' macro-momentum mentioned in the original hypothesis. This should help in smoothing the transition between the continuation and reversal signals, addressing the current Max Drawdown issue."
      },
      "cache_location": {
        "workspace_suffix": "exp_20260118_221443",
        "workspace_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221443",
        "factor_dir": "f0f22060ff7b4ed8b7358093764fd02d",
        "result_h5_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221443/f0f22060ff7b4ed8b7358093764fd02d/result.h5"
      }
    },
    "57a7be2a05ed5cc7": {
      "factor_id": "57a7be2a05ed5cc7",
      "factor_name": "AIFLE_Efficiency_Decoupling_60D",
      "factor_expression": "(DELTA($close, 60) / (TS_SUM(ABS(DELTA($close, 1)), 60) + 1e-8)) * (-1 * ZSCORE(TS_CORR($close, $volume, 5) - TS_CORR($close, $volume, 20)))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(DELTA($close, 60) / (TS_SUM(ABS(DELTA($close, 1)), 60) + 1e-8)) * (-1 * ZSCORE(TS_CORR($close, $volume, 5) - TS_CORR($close, $volume, 20)))\" # Your output factor expression will be filled in here\n    name = \"AIFLE_Efficiency_Decoupling_60D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor implements the Adaptive Institutional Flow & Liquidity Exhaustion (AIFLE) hypothesis. It combines 60-day path efficiency (structural trend quality) with the negative Z-score of the difference between short-term (5-day) and medium-term (20-day) price-volume correlation. A drop in short-term correlation within a high-efficiency trend suggests a 'smart money' re-accumulation phase where price moves efficiently with less volume noise.",
      "factor_formulation": "\\text{PathEff} = \\frac{\\text{DELTA}(\\text{close}, 60)}{\\text{TS_SUM}(\\text{ABS}(\\text{DELTA}(\\text{close}, 1)), 60)}, \\quad \\text{SPVD} = \\text{TS_CORR}(\\text{close}, \\text{volume}, 5) - \\text{TS_CORR}(\\text{close}, \\text{volume}, 20), \\quad \\text{Factor} = \\text{PathEff} * -\\text{ZSCORE}(\\text{SPVD})",
      "metadata": {
        "experiment_id": "2026-01-18_14-14-43-683963",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "09313479b8f9",
        "parent_trajectory_ids": [
          "612e4ce1768f",
          "162c358f4159"
        ],
        "hypothesis": "Hypothesis: The Adaptive Institutional Flow & Liquidity Exhaustion (AIFLE) factor predicts that stocks with high 60-day path efficiency (price change divided by sum of absolute returns) will yield higher returns when their 5-day price-volume correlation significantly drops below their 20-day average, signaling a tactical 'smart money' re-accumulation phase within a structural trend.\n                Concise Observation: Parent 1 (SPVD) identified alpha in price-volume decoupling but suffered from noise, while Parent 2 (IRDC) identified high-quality trends via path efficiency; combining them targets decoupling specifically within institutional-grade trends.\n                Concise Justification: High path efficiency filters for stocks with low volatility-to-trend ratios, ensuring the price-volume decoupling is not merely a result of random noise or low liquidity, but rather a strategic shift in how 'smart money' interacts with the order book.\n                Concise Knowledge: If a stock maintains high path efficiency over a long horizon, it indicates institutional control; when this is coupled with a short-term breakdown in price-volume correlation, it suggests a liquidity-efficient entry point where price moves without the noise of mass-market volume.\n                concise Specification: Calculate Path Efficiency as (Close[t]-Close[t-60])/Sum(Abs(Close[i]-Close[i-1])) for i=t-59 to t; calculate SPVD as the difference between 5-day and 20-day Pearson correlation of price and volume; the final factor is the product of Path Efficiency and the negative SPVD Z-score.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T07:15:46.368946"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0828162227819485,
        "ICIR": 0.0609023667795142,
        "1day.excess_return_without_cost.std": 0.004161461677343,
        "1day.excess_return_with_cost.annualized_return": 0.0312347403191692,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003296669512782,
        "1day.excess_return_without_cost.annualized_return": 0.0784607344042297,
        "1day.excess_return_with_cost.std": 0.0041623618689118,
        "Rank IC": 0.0245029174975092,
        "IC": 0.0080837130286005,
        "1day.excess_return_without_cost.max_drawdown": -0.0663228089329671,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.2221316483666411,
        "1day.pa": 0.0,
        "l2.valid": 0.9965590999721222,
        "Rank ICIR": 0.1902465227017235,
        "l2.train": 0.9937839207973368,
        "1day.excess_return_with_cost.information_ratio": 0.4864179429061405,
        "1day.excess_return_with_cost.mean": 0.0001312384047023
      },
      "feedback": {
        "observations": "The current iteration of the Adaptive Institutional Flow & Liquidity Exhaustion (AIFLE) framework has yielded significantly improved results. The Information Ratio (IR) increased from 0.97 to 1.22, and the Annualized Return rose from 5.2% to 7.8%. The IC also showed a healthy improvement to 0.008. The most successful implementation involved combining long-term path efficiency with the negative Z-score of the price-volume correlation difference (SPVD). This suggests that the 'decoupling' of price and volume within a strong structural trend is indeed a potent signal for identifying re-accumulation phases.",
        "hypothesis_evaluation": "The results strongly support the hypothesis. The interaction between 60-day path efficiency and the short-term drop in price-volume correlation (relative to the 20-day baseline) effectively captures high-quality entries. The use of the negative Z-score for the correlation difference (SPVD) confirms that a tactical 'quieting' of volume relative to price movement within an efficient trend is a bullish signal.",
        "decision": true,
        "reason": "While the current correlation-based decoupling works well, it might be susceptible to noise in high-volatility regimes. By specifically measuring if price efficiency (PathEff) persists or increases while the relative volume Z-score drops, we can more precisely isolate the 'exhaustion' of selling pressure (liquidity exhaustion) without relying solely on the linear correlation between price and volume, which can sometimes be unstable."
      },
      "cache_location": {
        "workspace_suffix": "exp_20260118_221443",
        "workspace_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221443",
        "factor_dir": "4f267a44808548f1a54893b93a635e21",
        "result_h5_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221443/4f267a44808548f1a54893b93a635e21/result.h5"
      }
    },
    "1ded28fc85f2b042": {
      "factor_id": "1ded28fc85f2b042",
      "factor_name": "Institutional_Trend_Liquidity_Exhaustion",
      "factor_expression": "RANK(DELTA($close, 60) / (TS_SUM(ABS(DELTA($close, 1)), 60) + 1e-8)) * RANK(TS_CORR($close, $volume, 20) - TS_CORR($close, $volume, 5))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(DELTA($close, 60) / (TS_SUM(ABS(DELTA($close, 1)), 60) + 1e-8)) * RANK(TS_CORR($close, $volume, 20) - TS_CORR($close, $volume, 5))\" # Your output factor expression will be filled in here\n    name = \"Institutional_Trend_Liquidity_Exhaustion\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A simplified version of the AIFLE hypothesis focusing on the interaction between long-term trend efficiency and the sudden exhaustion of price-volume coupling. It identifies stocks where the institutional trend (60-day efficiency) is strong, but the recent 5-day volume-price relationship has decoupled, indicating a tactical entry point.",
      "factor_formulation": "\\text{Factor} = \\text{RANK}(\\frac{\\text{DELTA}(\\text{close}, 60)}{\\text{TS_SUM}(\\text{ABS}(\\text{DELTA}(\\text{close}, 1)), 60)}) * \\text{RANK}(\\text{TS_CORR}(\\text{close}, \\text{volume}, 20) - TS_CORR(\\text{close}, \\text{volume}, 5))",
      "metadata": {
        "experiment_id": "2026-01-18_14-14-43-683963",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "09313479b8f9",
        "parent_trajectory_ids": [
          "612e4ce1768f",
          "162c358f4159"
        ],
        "hypothesis": "Hypothesis: The Adaptive Institutional Flow & Liquidity Exhaustion (AIFLE) factor predicts that stocks with high 60-day path efficiency (price change divided by sum of absolute returns) will yield higher returns when their 5-day price-volume correlation significantly drops below their 20-day average, signaling a tactical 'smart money' re-accumulation phase within a structural trend.\n                Concise Observation: Parent 1 (SPVD) identified alpha in price-volume decoupling but suffered from noise, while Parent 2 (IRDC) identified high-quality trends via path efficiency; combining them targets decoupling specifically within institutional-grade trends.\n                Concise Justification: High path efficiency filters for stocks with low volatility-to-trend ratios, ensuring the price-volume decoupling is not merely a result of random noise or low liquidity, but rather a strategic shift in how 'smart money' interacts with the order book.\n                Concise Knowledge: If a stock maintains high path efficiency over a long horizon, it indicates institutional control; when this is coupled with a short-term breakdown in price-volume correlation, it suggests a liquidity-efficient entry point where price moves without the noise of mass-market volume.\n                concise Specification: Calculate Path Efficiency as (Close[t]-Close[t-60])/Sum(Abs(Close[i]-Close[i-1])) for i=t-59 to t; calculate SPVD as the difference between 5-day and 20-day Pearson correlation of price and volume; the final factor is the product of Path Efficiency and the negative SPVD Z-score.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T07:15:46.368946"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0828162227819485,
        "ICIR": 0.0609023667795142,
        "1day.excess_return_without_cost.std": 0.004161461677343,
        "1day.excess_return_with_cost.annualized_return": 0.0312347403191692,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003296669512782,
        "1day.excess_return_without_cost.annualized_return": 0.0784607344042297,
        "1day.excess_return_with_cost.std": 0.0041623618689118,
        "Rank IC": 0.0245029174975092,
        "IC": 0.0080837130286005,
        "1day.excess_return_without_cost.max_drawdown": -0.0663228089329671,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.2221316483666411,
        "1day.pa": 0.0,
        "l2.valid": 0.9965590999721222,
        "Rank ICIR": 0.1902465227017235,
        "l2.train": 0.9937839207973368,
        "1day.excess_return_with_cost.information_ratio": 0.4864179429061405,
        "1day.excess_return_with_cost.mean": 0.0001312384047023
      },
      "feedback": {
        "observations": "The current iteration of the Adaptive Institutional Flow & Liquidity Exhaustion (AIFLE) framework has yielded significantly improved results. The Information Ratio (IR) increased from 0.97 to 1.22, and the Annualized Return rose from 5.2% to 7.8%. The IC also showed a healthy improvement to 0.008. The most successful implementation involved combining long-term path efficiency with the negative Z-score of the price-volume correlation difference (SPVD). This suggests that the 'decoupling' of price and volume within a strong structural trend is indeed a potent signal for identifying re-accumulation phases.",
        "hypothesis_evaluation": "The results strongly support the hypothesis. The interaction between 60-day path efficiency and the short-term drop in price-volume correlation (relative to the 20-day baseline) effectively captures high-quality entries. The use of the negative Z-score for the correlation difference (SPVD) confirms that a tactical 'quieting' of volume relative to price movement within an efficient trend is a bullish signal.",
        "decision": true,
        "reason": "While the current correlation-based decoupling works well, it might be susceptible to noise in high-volatility regimes. By specifically measuring if price efficiency (PathEff) persists or increases while the relative volume Z-score drops, we can more precisely isolate the 'exhaustion' of selling pressure (liquidity exhaustion) without relying solely on the linear correlation between price and volume, which can sometimes be unstable."
      },
      "cache_location": {
        "workspace_suffix": "exp_20260118_221443",
        "workspace_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221443",
        "factor_dir": "60a42b8082354a16a539a206e84423e5",
        "result_h5_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221443/60a42b8082354a16a539a206e84423e5/result.h5"
      }
    },
    "d3c9d4040d5a3e79": {
      "factor_id": "d3c9d4040d5a3e79",
      "factor_name": "Path_Efficiency_Volume_Divergence_Z",
      "factor_expression": "TS_ZSCORE(DELTA($close, 60) / (TS_SUM(ABS(DELTA($close, 1)), 60) + 1e-8), 20) - ZSCORE(TS_CORR($close, $volume, 5))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_ZSCORE(DELTA($close, 60) / (TS_SUM(ABS(DELTA($close, 1)), 60) + 1e-8), 20) - ZSCORE(TS_CORR($close, $volume, 5))\" # Your output factor expression will be filled in here\n    name = \"Path_Efficiency_Volume_Divergence_Z\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor captures the divergence between price trend efficiency and volume support. It uses a 60-day window for path efficiency and identifies periods where the 5-day price-volume correlation is significantly lower than its 20-day historical average, normalized by cross-sectional Z-scores to ensure comparability.",
      "factor_formulation": "\\text{Factor} = \\text{TS_ZSCORE}(\\frac{\\text{DELTA}(\\text{close}, 60)}{\\text{TS_SUM}(\\text{ABS}(\\text{DELTA}(\\text{close}, 1)), 60)}, 20) - \\text{ZSCORE}(\\text{TS_CORR}(\\text{close}, \\text{volume}, 5))",
      "metadata": {
        "experiment_id": "2026-01-18_14-14-43-683963",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "09313479b8f9",
        "parent_trajectory_ids": [
          "612e4ce1768f",
          "162c358f4159"
        ],
        "hypothesis": "Hypothesis: The Adaptive Institutional Flow & Liquidity Exhaustion (AIFLE) factor predicts that stocks with high 60-day path efficiency (price change divided by sum of absolute returns) will yield higher returns when their 5-day price-volume correlation significantly drops below their 20-day average, signaling a tactical 'smart money' re-accumulation phase within a structural trend.\n                Concise Observation: Parent 1 (SPVD) identified alpha in price-volume decoupling but suffered from noise, while Parent 2 (IRDC) identified high-quality trends via path efficiency; combining them targets decoupling specifically within institutional-grade trends.\n                Concise Justification: High path efficiency filters for stocks with low volatility-to-trend ratios, ensuring the price-volume decoupling is not merely a result of random noise or low liquidity, but rather a strategic shift in how 'smart money' interacts with the order book.\n                Concise Knowledge: If a stock maintains high path efficiency over a long horizon, it indicates institutional control; when this is coupled with a short-term breakdown in price-volume correlation, it suggests a liquidity-efficient entry point where price moves without the noise of mass-market volume.\n                concise Specification: Calculate Path Efficiency as (Close[t]-Close[t-60])/Sum(Abs(Close[i]-Close[i-1])) for i=t-59 to t; calculate SPVD as the difference between 5-day and 20-day Pearson correlation of price and volume; the final factor is the product of Path Efficiency and the negative SPVD Z-score.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T07:15:46.368946"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0828162227819485,
        "ICIR": 0.0609023667795142,
        "1day.excess_return_without_cost.std": 0.004161461677343,
        "1day.excess_return_with_cost.annualized_return": 0.0312347403191692,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003296669512782,
        "1day.excess_return_without_cost.annualized_return": 0.0784607344042297,
        "1day.excess_return_with_cost.std": 0.0041623618689118,
        "Rank IC": 0.0245029174975092,
        "IC": 0.0080837130286005,
        "1day.excess_return_without_cost.max_drawdown": -0.0663228089329671,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.2221316483666411,
        "1day.pa": 0.0,
        "l2.valid": 0.9965590999721222,
        "Rank ICIR": 0.1902465227017235,
        "l2.train": 0.9937839207973368,
        "1day.excess_return_with_cost.information_ratio": 0.4864179429061405,
        "1day.excess_return_with_cost.mean": 0.0001312384047023
      },
      "feedback": {
        "observations": "The current iteration of the Adaptive Institutional Flow & Liquidity Exhaustion (AIFLE) framework has yielded significantly improved results. The Information Ratio (IR) increased from 0.97 to 1.22, and the Annualized Return rose from 5.2% to 7.8%. The IC also showed a healthy improvement to 0.008. The most successful implementation involved combining long-term path efficiency with the negative Z-score of the price-volume correlation difference (SPVD). This suggests that the 'decoupling' of price and volume within a strong structural trend is indeed a potent signal for identifying re-accumulation phases.",
        "hypothesis_evaluation": "The results strongly support the hypothesis. The interaction between 60-day path efficiency and the short-term drop in price-volume correlation (relative to the 20-day baseline) effectively captures high-quality entries. The use of the negative Z-score for the correlation difference (SPVD) confirms that a tactical 'quieting' of volume relative to price movement within an efficient trend is a bullish signal.",
        "decision": true,
        "reason": "While the current correlation-based decoupling works well, it might be susceptible to noise in high-volatility regimes. By specifically measuring if price efficiency (PathEff) persists or increases while the relative volume Z-score drops, we can more precisely isolate the 'exhaustion' of selling pressure (liquidity exhaustion) without relying solely on the linear correlation between price and volume, which can sometimes be unstable."
      },
      "cache_location": {
        "workspace_suffix": "exp_20260118_221443",
        "workspace_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221443",
        "factor_dir": "6e0c97ee5f0f4f42a6567e002a4c2650",
        "result_h5_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221443/6e0c97ee5f0f4f42a6567e002a4c2650/result.h5"
      }
    },
    "90efb609fac841cb": {
      "factor_id": "90efb609fac841cb",
      "factor_name": "Liquidity_Gated_Diffusion_60D",
      "factor_expression": "(-1 * TS_PCTCHANGE($close, 60)) * TS_MEAN(LOG($open / DELAY($close, 1)) - MEAN(LOG($open / DELAY($close, 1))), 5) * TS_MEAN(ABS($return) / ($volume + 1e-8), 20)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(-1 * TS_PCTCHANGE($close, 60)) * TS_MEAN(LOG($open / DELAY($close, 1)) - MEAN(LOG($open / DELAY($close, 1))), 5) * TS_MEAN(ABS(TS_PCTCHANGE($close, 1)) / ($volume * $close), 20)\" # Your output factor expression will be filled in here\n    name = \"Liquidity_Gated_Diffusion_60D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies alpha by combining 60-day price exhaustion (reversal) with a 5-day mean of cross-sectionally adjusted overnight returns, scaled by the 20-day Amihud illiquidity ratio. It targets structural turning points where overnight gaps confirm a reversal in illiquid stocks.",
      "factor_formulation": "LGD_{60D} = -TS\\_PCTCHANGE(close, 60) \\times TS\\_MEAN(LOG(open/DELAY(close, 1)) - MEAN(LOG(open/DELAY(close, 1))), 5) \\times TS\\_MEAN(ABS(return)/(volume + 1e-8), 20)",
      "metadata": {
        "experiment_id": "2026-01-19_04-13-15-519909",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "be5a59e60dd2",
        "parent_trajectory_ids": [
          "782f03351721",
          "4dd6b1bfce05"
        ],
        "hypothesis": "Hypothesis: The 'Liquidity-Gated Information Diffusion' factor identifies alpha by combining 60-day price exhaustion with 5-day overnight-intraday decoupling, scaled by the Amihud illiquidity ratio.\n                Concise Observation: Parent 1 (RankIC 0.026) captures short-term overnight alpha while Parent 2 (RankIC 0.024) captures macro exhaustion; combining them addresses the 'early entry' risk of reversals by using overnight gaps as a timing confirmation.\n                Concise Justification: The overnight gap represents the reaction of informed traders to non-trading hour news; when this occurs after a period of price exhaustion, it signals a structural turning point rather than a noise-driven bounce, especially when liquidity is scarce.\n                Concise Knowledge: If a stock exhibits medium-term price exhaustion (ROC60 reversal) and shows a significant cross-sectional overnight gap relative to its peers, the subsequent return is likely positive; this effect is amplified in stocks with higher illiquidity where information diffusion is slower.\n                concise Specification: Calculate the 60-day price reversal (ROC60 * -1), multiply it by the 5-day mean of the overnight return (log(Open/PrevClose)) adjusted by the cross-sectional mean, and scale the result by the 20-day Amihud Illiquidity ratio (mean(|return|/volume)).\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T19:47:29.355692"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0832983482402784,
        "ICIR": 0.0420551284911851,
        "1day.excess_return_without_cost.std": 0.0039852477707944,
        "1day.excess_return_with_cost.annualized_return": 0.0237192159113539,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002972112100153,
        "1day.excess_return_without_cost.annualized_return": 0.0707362679836495,
        "1day.excess_return_with_cost.std": 0.0039847719341787,
        "Rank IC": 0.0238841243194446,
        "IC": 0.0056153453516531,
        "1day.excess_return_without_cost.max_drawdown": -0.0760427409749391,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.1505310318019304,
        "1day.pa": 0.0,
        "l2.valid": 0.9963339259630658,
        "Rank ICIR": 0.1826543845701338,
        "l2.train": 0.9940137859103728,
        "1day.excess_return_with_cost.information_ratio": 0.3858410048916917,
        "1day.excess_return_with_cost.mean": 9.966057105610918e-05
      },
      "feedback": {
        "observations": "The experiment compared two implementations of the 'Liquidity-Gated Information Diffusion' hypothesis: a multiplicative interaction model (LGD_60D) and a rank-sum additive model (EOA_Rank). The additive rank-based approach (EOA_Rank) emerged as the current best, significantly improving the Information Ratio (from 0.97 to 1.15) and Annualized Return (from 5.2% to 7.07%) compared to the previous SOTA. While the IC slightly decreased and Max Drawdown marginally increased, the substantial gain in risk-adjusted return (IR) suggests that combining these signals via ranking provides a more robust and monotonic signal than the direct multiplication of raw physics values, which can be prone to outlier distortion.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that combining long-term price exhaustion, short-term overnight sentiment, and liquidity constraints captures alpha. However, the implementation analysis suggests that the interaction is better captured through ordinal ranking rather than a direct product of the three components. The 'Liquidity-Gated' aspect (Amihud ratio) effectively filters for stocks where information diffusion is slower, enhancing the reversal signal from the 60-day window.",
        "decision": true,
        "reason": "The current additive rank model (EOA_Rank) treats the three components as independent contributors. However, the theoretical framework suggests they should act as filters for each other (e.g., reversal is only meaningful if liquidity is low). A Rank-Product approach (RANK * RANK * RANK) or a conditional combination might better capture this 'gating' logic while maintaining the robustness of rank-based transforms. Furthermore, subtracting the intraday return from the overnight return helps isolate the information diffusion that happens while the market is closed, which is more likely to be affected by liquidity constraints."
      },
      "cache_location": null
    },
    "79b545c4372dbc5f": {
      "factor_id": "79b545c4372dbc5f",
      "factor_name": "Exhaustion_Overnight_Amihud_Rank",
      "factor_expression": "RANK(-1 * TS_PCTCHANGE($close, 60)) + RANK(TS_MEAN($open / DELAY($close, 1) - 1, 5)) + RANK(TS_MEAN(ABS($return) / ($volume + 1e-8), 20))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(-1 * TS_PCTCHANGE($close, 60)) + RANK(TS_MEAN(($open / DELAY($close, 1)) - 1, 5)) + RANK(TS_MEAN(ABS(TS_PCTCHANGE($close, 1)) / ($volume * $close), 20))\" # Your output factor expression will be filled in here\n    name = \"Exhaustion_Overnight_Amihud_Rank\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A simplified version of the Liquidity-Gated Information Diffusion hypothesis. It uses the rank of 60-day price reversal, the rank of 5-day average overnight returns, and the rank of the Amihud illiquidity ratio to identify high-conviction reversal signals in illiquid assets.",
      "factor_formulation": "EOA_{Rank} = RANK(-TS\\_PCTCHANGE(close, 60)) + RANK(TS\\_MEAN(open/DELAY(close, 1) - 1, 5)) + RANK(TS\\_MEAN(ABS(return)/(volume + 1e-8), 20))",
      "metadata": {
        "experiment_id": "2026-01-19_04-13-15-519909",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "be5a59e60dd2",
        "parent_trajectory_ids": [
          "782f03351721",
          "4dd6b1bfce05"
        ],
        "hypothesis": "Hypothesis: The 'Liquidity-Gated Information Diffusion' factor identifies alpha by combining 60-day price exhaustion with 5-day overnight-intraday decoupling, scaled by the Amihud illiquidity ratio.\n                Concise Observation: Parent 1 (RankIC 0.026) captures short-term overnight alpha while Parent 2 (RankIC 0.024) captures macro exhaustion; combining them addresses the 'early entry' risk of reversals by using overnight gaps as a timing confirmation.\n                Concise Justification: The overnight gap represents the reaction of informed traders to non-trading hour news; when this occurs after a period of price exhaustion, it signals a structural turning point rather than a noise-driven bounce, especially when liquidity is scarce.\n                Concise Knowledge: If a stock exhibits medium-term price exhaustion (ROC60 reversal) and shows a significant cross-sectional overnight gap relative to its peers, the subsequent return is likely positive; this effect is amplified in stocks with higher illiquidity where information diffusion is slower.\n                concise Specification: Calculate the 60-day price reversal (ROC60 * -1), multiply it by the 5-day mean of the overnight return (log(Open/PrevClose)) adjusted by the cross-sectional mean, and scale the result by the 20-day Amihud Illiquidity ratio (mean(|return|/volume)).\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T19:47:29.355692"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0832983482402784,
        "ICIR": 0.0420551284911851,
        "1day.excess_return_without_cost.std": 0.0039852477707944,
        "1day.excess_return_with_cost.annualized_return": 0.0237192159113539,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002972112100153,
        "1day.excess_return_without_cost.annualized_return": 0.0707362679836495,
        "1day.excess_return_with_cost.std": 0.0039847719341787,
        "Rank IC": 0.0238841243194446,
        "IC": 0.0056153453516531,
        "1day.excess_return_without_cost.max_drawdown": -0.0760427409749391,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.1505310318019304,
        "1day.pa": 0.0,
        "l2.valid": 0.9963339259630658,
        "Rank ICIR": 0.1826543845701338,
        "l2.train": 0.9940137859103728,
        "1day.excess_return_with_cost.information_ratio": 0.3858410048916917,
        "1day.excess_return_with_cost.mean": 9.966057105610918e-05
      },
      "feedback": {
        "observations": "The experiment compared two implementations of the 'Liquidity-Gated Information Diffusion' hypothesis: a multiplicative interaction model (LGD_60D) and a rank-sum additive model (EOA_Rank). The additive rank-based approach (EOA_Rank) emerged as the current best, significantly improving the Information Ratio (from 0.97 to 1.15) and Annualized Return (from 5.2% to 7.07%) compared to the previous SOTA. While the IC slightly decreased and Max Drawdown marginally increased, the substantial gain in risk-adjusted return (IR) suggests that combining these signals via ranking provides a more robust and monotonic signal than the direct multiplication of raw physics values, which can be prone to outlier distortion.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that combining long-term price exhaustion, short-term overnight sentiment, and liquidity constraints captures alpha. However, the implementation analysis suggests that the interaction is better captured through ordinal ranking rather than a direct product of the three components. The 'Liquidity-Gated' aspect (Amihud ratio) effectively filters for stocks where information diffusion is slower, enhancing the reversal signal from the 60-day window.",
        "decision": true,
        "reason": "The current additive rank model (EOA_Rank) treats the three components as independent contributors. However, the theoretical framework suggests they should act as filters for each other (e.g., reversal is only meaningful if liquidity is low). A Rank-Product approach (RANK * RANK * RANK) or a conditional combination might better capture this 'gating' logic while maintaining the robustness of rank-based transforms. Furthermore, subtracting the intraday return from the overnight return helps isolate the information diffusion that happens while the market is closed, which is more likely to be affected by liquidity constraints."
      },
      "cache_location": null
    },
    "debb4434f0ea4af1": {
      "factor_id": "debb4434f0ea4af1",
      "factor_name": "LFGR_Fragility_ZScore_10D",
      "factor_expression": "(($open - DELAY($close, 1)) / (DELAY($close, 1) + 1e-8)) * TS_ZSCORE(($high - $low) / ($volume + 1.0), 10)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(($open - DELAY($close, 1)) / (DELAY($close, 1) + 1e-8)) * TS_ZSCORE(($high - $low) / ($volume + 1.0), 10)\" # Your output factor expression will be filled in here\n    name = \"LFGR_Fragility_ZScore_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "The Liquidity-Filtered Gap Reversion (LFGR) factor identifies whether overnight price gaps are sustainable or likely to revert based on intraday liquidity fragility. It multiplies the overnight gap by the 10-day Z-score of the fragility index (defined as the high-low range relative to volume). A high fragility Z-score suggests the gap occurred on thin liquidity, signaling a potential exhaustion move.",
      "factor_formulation": "\\text{Gap} \\times \\text{TS\\_ZSCORE}(\\frac{\\text{High} - \\text{Low}}{\\text{Volume} + 1}, 10)",
      "metadata": {
        "experiment_id": "2026-01-18_13-34-30-274463",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "bf1ba68732d9",
        "parent_trajectory_ids": [
          "f06010737e9d",
          "4eb4899dd9ce"
        ],
        "hypothesis": "Hypothesis: The 'Liquidity-Filtered Gap Reversion' (LFGR) factor predicts returns by multiplying the overnight gap (relative to the previous close) by the 10-day Z-score of the 'Intraday Fragility Index' (High-Low range divided by volume), identifying whether gaps are backed by liquidity or are fragile exhaustion points.\n                Concise Observation: Parent 1's fragility index captures liquidity-driven exhaustion (RankIC 0.026), while Parent 2's gap analysis captures momentum (RankIC 0.027); combining them addresses the failure of gaps to persist when liquidity is thin.\n                Concise Justification: Gaps represent overnight sentiment shifts, but their sustainability depends on the liquidity density of the subsequent trading session; multiplying the gap by a fragility metric creates a non-linear filter that distinguishes between 'hollow' moves and 'solid' breakouts.\n                Concise Knowledge: If a price gap is accompanied by high intraday fragility (large price range on low volume), it is likely an exhaustion move prone to mean-reversion; conversely, gaps with low fragility suggest high liquidity conviction and trend persistence.\n                concise Specification: Define Gap as (Open - Prev_Close) / Prev_Close; define Fragility as (High - Low) / (Volume + 1); calculate the 10-day Z-score of Fragility; the final factor is Gap * TS_ZScore(Fragility, 10).\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T05:41:58.229757"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1034721626114325,
        "ICIR": 0.0469349090081919,
        "1day.excess_return_without_cost.std": 0.0040249253435017,
        "1day.excess_return_with_cost.annualized_return": -0.019148502012501,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001169857695943,
        "1day.excess_return_without_cost.annualized_return": 0.0278426131634455,
        "1day.excess_return_with_cost.std": 0.0040249983207598,
        "Rank IC": 0.023546877961026,
        "IC": 0.0061332751124687,
        "1day.excess_return_without_cost.max_drawdown": -0.0687070346653664,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.4483980194839131,
        "1day.pa": 0.0,
        "l2.valid": 0.9965721065565132,
        "Rank ICIR": 0.182657285270466,
        "l2.train": 0.993536085013449,
        "1day.excess_return_with_cost.information_ratio": -0.3083760368527557,
        "1day.excess_return_with_cost.mean": -8.045589080882806e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Liquidity-Filtered Gap Reversion' (LFGR) hypothesis. The results show a mixed performance: while the Information Ratio (0.448) and Annualized Return (0.0278) of the current best implementation are significantly lower than the SOTA (IR 0.972, Return 0.052), the current result achieved a higher Information Coefficient (IC) of 0.0061 and a better Max Drawdown (-0.0687). This suggests that while the signal has a slightly stronger linear correlation with returns (higher IC), it lacks the consistency or magnitude required to generate superior risk-adjusted returns compared to the previous SOTA.",
        "hypothesis_evaluation": "The hypothesis that overnight gaps backed by 'fragile' liquidity (high range/low volume) lead to mean reversion is partially supported by the positive IC. However, the drop in Information Ratio suggests that the current mathematical formulations (Z-scores and Rankings over 5-10 days) might be introducing noise or failing to capture the timing of the reversion accurately. The 'Fragility' index (High-Low/Volume) is a strong proxy for illiquidity, but its interaction with the Gap may be non-linear or regime-dependent.",
        "decision": false,
        "reason": "Current implementations use short windows (5-10 days) which may capture normal noise rather than true liquidity exhaustion. By extending the lookback for the Fragility Z-score to 20 days and normalizing the Gap by a 20-day ATR, we can better isolate 'extreme' exhaustion events. Furthermore, using the product of signed Gap and Fragility assumes a linear relationship; a conditional approach or a non-linear transformation (like a sigmoid or clipped Z-score) might reduce the impact of outliers and improve the Information Ratio."
      },
      "cache_location": {
        "workspace_suffix": "exp_20260118_213430",
        "workspace_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_213430",
        "factor_dir": "fda520c1abc444ec8cbe71545d18b54d",
        "result_h5_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_213430/fda520c1abc444ec8cbe71545d18b54d/result.h5"
      }
    }
  }
}
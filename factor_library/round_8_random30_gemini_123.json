{
  "metadata": {
    "created_at": "2026-01-20T03:17:42.785593",
    "last_updated": "2026-01-20T03:17:42.785597",
    "total_factors": 30,
    "version": "1.0",
    "note": "Round 8 random 30 factors from gemini_123"
  },
  "factors": {
    "3c0507cd96718c06": {
      "factor_id": "3c0507cd96718c06",
      "factor_name": "Informed_Gap_Persistence_Factor",
      "factor_expression": "RANK(($open - DELAY($close, 1)) / (DELAY($close, 1) + 1e-8)) * (RANK(DELAY(($high - $low) / ($close + 1e-8), 1) * DELAY($volume, 1)) > 0.5 ? 1 : -1)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(($open - DELAY($close, 1)) / (DELAY($close, 1) + 1e-8)) * (RANK(DELAY(($high - $low) / ($close + 1e-8), 1) * DELAY($volume, 1)) > 0.5 ? 1 : -1)\" # Your output factor expression will be filled in here\n    name = \"Informed_Gap_Persistence_Factor\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A simplified version of the CFGF focusing on the interaction between the overnight gap and the prior day's range-volume product. It uses RANK to normalize the gap and the intensity filter, identifying 'informed' gaps that are likely to trend rather than revert.",
      "factor_formulation": "\\text{NormGap} = \\text{RANK}(\\frac{\\text{open} - \\text{delay}(\\text{close}, 1)}{\\text{delay}(\\text{close}, 1)}), \\text{Intensity} = \\text{RANK}(\\text{delay}(\\frac{\\text{high}-\\text{low}}{\\text{close}}, 1) \\times \\text{delay}(\\text{volume}, 1)), \\text{Factor} = (\\text{Intensity} > 0.5) ? \\text{NormGap} : -\\text{NormGap}",
      "metadata": {
        "experiment_id": "2026-01-18_14-14-43-683963",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "2ab6e13d675c",
        "parent_trajectory_ids": [
          "00a780111b41",
          "411e26730cb8"
        ],
        "hypothesis": "Hypothesis: The Conviction-Filtered Gap Factor (CFGF) predicts that overnight price gaps mean-revert when they lack prior-day intraday volatility concentration, but continue in the gap direction when the prior day's final hour shows high price-volume intensity aligned with the gap.\n                Concise Observation: Parent 2's reversal logic (RankIC=0.028) performs well on average, but Parent 1 (RankIC=0.023) suggests that late-day volume and price range concentration can identify 'informed' price moves that resist mean-reversion.\n                Concise Justification: By using the prior day's closing intensity as a regime filter, we can distinguish between 'exhaustion gaps' (low late-day intensity) which revert, and 'breakout gaps' (high late-day intensity) which trend, thereby reducing the false signals inherent in static reversal strategies.\n                Concise Knowledge: If an overnight price gap is preceded by high intraday volatility concentration (IVC) in the same direction, it likely represents institutional flow and will persist; if the gap occurs without such late-day conviction, it likely represents noise or liquidity imbalances and will mean-revert.\n                concise Specification: Define IVC as the ratio of the last hour's (High-Low)/Close multiplied by volume z-score; define the Gap as (Open - Prev_Close) normalized by 20-day ATR. The factor is calculated as the Gap multiplied by -1 if IVC is below its 10-day median, and multiplied by +1 if IVC is above its 10-day median.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T06:38:35.217877"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1404119887611172,
        "ICIR": 0.0374769188122441,
        "1day.excess_return_without_cost.std": 0.0043888159873289,
        "1day.excess_return_with_cost.annualized_return": -0.0170587559459222,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001263967318259,
        "1day.excess_return_without_cost.annualized_return": 0.030082422174567,
        "1day.excess_return_with_cost.std": 0.0043899177563109,
        "Rank IC": 0.0217300560399937,
        "IC": 0.0051487212514944,
        "1day.excess_return_without_cost.max_drawdown": -0.0961605370603185,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.444300652461164,
        "1day.pa": 0.0,
        "l2.valid": 0.996670208341131,
        "Rank ICIR": 0.1642381024992195,
        "l2.train": 0.9942984786234278,
        "1day.excess_return_with_cost.information_ratio": -0.2518851089503491,
        "1day.excess_return_with_cost.mean": -7.167544515093401e-05
      },
      "feedback": {
        "observations": "The experimental results for the Conviction-Filtered Gap Factor (CFGF) framework show that while the theoretical concept of using prior-day intensity to filter overnight gaps is promising, the current implementations underperform compared to the SOTA. The Information Ratio (0.444) and Annualized Return (0.030) are significantly lower than the SOTA benchmarks (0.972 and 0.052 respectively). The IC of 0.0051 also lags behind the SOTA's 0.0058, suggesting that the conditional logic (switching between momentum and reversal) may be introducing noise or misidentifying the 'conviction' threshold.",
        "hypothesis_evaluation": "The hypothesis that overnight gaps mean-revert without conviction but persist with it is partially supported by the positive IC, but the implementation is likely too binary. The 'Conviction_Filtered_Gap_Factor_10D' uses a 10-day median which might be too short and volatile, leading to frequent signal flipping. The 'Informed_Gap_Persistence_Factor' uses cross-sectional RANK for intensity, which is a better approach for normalization but may still fail if the 'informed' threshold (0.5) is not optimized for different market regimes.",
        "decision": false,
        "reason": "Current factors use raw volume or simple Z-scores which can be skewed by outliers. By using ATR for gap normalization, we account for broader volatility regimes. Furthermore, replacing the binary 'Intensity > 0.5' filter with a continuous weighting function or a more stringent 'High-Conviction' threshold (e.g., top 20% of volume-price product) may reduce the noise from 'ambiguous' days where the gap behavior is unpredictable."
      },
      "cache_location": {
        "workspace_suffix": "exp_20260118_221443",
        "workspace_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221443",
        "factor_dir": "682ad29247434095b585da5281a5175a",
        "result_h5_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221443/682ad29247434095b585da5281a5175a/result.h5"
      }
    },
    "44f12d21fd38fd1b": {
      "factor_id": "44f12d21fd38fd1b",
      "factor_name": "Shadow_Volume_Decoupling_ZScore",
      "factor_expression": "TS_ZSCORE(($high - MAX($open, $close) + MIN($open, $close) - $low) / ($high - $low + 1e-8), 10) * (1 - TS_CORR($return, $volume, 20))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_ZSCORE(($high - ($open > $close ? $open : $close) + ($open < $close ? $open : $close) - $low) / ($high - $low + 0.00000001), 10) * (1 - TS_CORR(TS_PCTCHANGE($close, 1), $volume, 20))\" # Your output factor expression will be filled in here\n    name = \"Shadow_Volume_Decoupling_ZScore\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "Measures the intensity of intraday rejection (shadows) relative to its recent history, multiplied by the inverse of price-volume trend conviction. A high value suggests that the price rejection is occurring during a period of low institutional conviction, increasing the likelihood of a snap-back.",
      "factor_formulation": "SVD = TS\\_ZSCORE(\\frac{High - \\max(Open, Close) + \\min(Open, Close) - Low}{High - Low + 1e-8}, 10) * (1 - TS\\_CORR($return, $volume, 20))",
      "metadata": {
        "experiment_id": "2026-01-18_13-34-30-274463",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "a604d5b39fb0",
        "parent_trajectory_ids": [
          "a2d2dc6b6049",
          "d4edaf8f4937"
        ],
        "hypothesis": "Hypothesis: The 'Liquidity-Validated Rejection' factor identifies high-probability mean reversion by multiplying the Intraday Shadow-to-Range ratio (10-day inverse-volatility weighted) by the inverse of the 20-day Volume-Price Correlation, specifically targeting overnight gaps that lack structural volume support.\n                Concise Observation: Parent 1 (RankIC 0.0253) captures intraday exhaustion via wicks, while Parent 2 (RankIC 0.0277) identifies trend conviction via price-volume correlation; however, neither alone distinguishes between a healthy trend consolidation and a false breakout.\n                Concise Justification: Fusing these strategies targets the 'False Breakthrough' scenario: an opening gap (sentiment) followed by intraday wicks (rejection) and low volume-price correlation (lack of institutional conviction) creates a synergistic signal for price snap-back.\n                Concise Knowledge: If intraday price rejection (long shadows) occurs alongside a decoupling of price and volume (low correlation), then the current price movement is likely an exhausted thrust rather than a sustainable trend; when overnight gaps lack volume-price synchronicity, they are more prone to mean reversion.\n                concise Specification: The factor is defined as (Shadow_Ratio / ATR_10D) * (1 - Correlation(Returns, Volume_Change, 20D)), where Shadow_Ratio is (High - Max(Open, Close) + Min(Open, Close) - Low) / (High - Low + 1e-6), applied to days with significant overnight gaps.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T05:48:52.905667"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.104849862862603,
        "ICIR": 0.0530452876557956,
        "1day.excess_return_without_cost.std": 0.0042377340217745,
        "1day.excess_return_with_cost.annualized_return": 0.0026568787618365,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002100901713907,
        "1day.excess_return_without_cost.annualized_return": 0.0500014607910087,
        "1day.excess_return_with_cost.std": 0.0042386307124834,
        "Rank IC": 0.0293661735778227,
        "IC": 0.0079938059935349,
        "1day.excess_return_without_cost.max_drawdown": -0.0883393070374991,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7648222588119782,
        "1day.pa": 0.0,
        "l2.valid": 0.9962004608547262,
        "Rank ICIR": 0.1948114961572588,
        "l2.train": 0.9931248433825322,
        "1day.excess_return_with_cost.information_ratio": 0.0406310156102293,
        "1day.excess_return_with_cost.mean": 1.116335614217035e-05
      },
      "feedback": {
        "observations": "The current iteration tested three variations of the 'Liquidity-Validated Rejection' framework. The 'Shadow_Volume_Decoupling_ZScore' and 'Gap_Exhaustion_Reversion_15D' factors were implemented to capture mean reversion. While the current results achieved a significantly higher Information Coefficient (IC) of 0.007994 compared to the SOTA's 0.005798, the risk-adjusted returns (Information Ratio) and drawdown metrics deteriorated. This suggests that while the signal's predictive power for the cross-section of returns has improved (higher IC), the stability of the signal over time or its concentration in volatile regimes has introduced higher risk (larger drawdown).",
        "hypothesis_evaluation": "The hypothesis that price rejection (shadows) combined with low volume-price correlation identifies mean reversion is supported by the improved IC. However, the 'overnight gap' component in GER and the 'volatility weighting' in LVR might be introducing noise or excessive turnover. The SVD (Z-Score) approach seems more robust for capturing the 'intensity' of rejection relative to history, but the overall strategy currently suffers from higher drawdowns compared to the SOTA.",
        "decision": false,
        "reason": "The current SVD factor uses a 10-day Z-score, which might be too sensitive to short-term spikes. By using a ratio of current shadow to a 20-day moving average, we can identify 'abnormal' rejection more cleanly. Furthermore, the current volume-price correlation (TS_CORR) is a symmetric measure; replacing it with a specific condition where volume is decreasing (indicating exhaustion) while the shadow is increasing should provide a cleaner signal and reduce the drawdown observed in the current results."
      },
      "cache_location": null
    },
    "3fc45423c54ad6f0": {
      "factor_id": "3fc45423c54ad6f0",
      "factor_name": "Gap_Exhaustion_Reversion_15D",
      "factor_expression": "RANK(($open - DELAY($close, 1)) / DELAY($close, 1)) * RANK(($high - MAX($open, $close)) / ($high - $low + 1e-8)) * (1 - TS_CORR($return, $volume, 15))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(($open - DELAY($close, 1)) / DELAY($close, 1)) * RANK(($high - (($open > $close) ? $open : $close)) / ($high - $low + 0.000001)) * (1 - TS_CORR(($close - DELAY($close, 1)) / DELAY($close, 1), $volume, 15))\" # Your output factor expression will be filled in here\n    name = \"Gap_Exhaustion_Reversion_15D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "Focuses on the 'False Breakthrough' scenario by identifying days with significant overnight gaps where the intraday price action results in a reversal shadow, validated by a lack of volume-return synchronicity. It uses RANK to normalize the rejection signal and the decoupling of price and volume.",
      "factor_formulation": "GER = RANK(\\frac{Open - Delay(Close, 1)}{Delay(Close, 1)}) \\cdot RANK(\\frac{High - \\max(Open, Close)}{High - Low + 1e-8}) \\cdot (1 - TS\\_CORR(return, volume, 15))",
      "metadata": {
        "experiment_id": "2026-01-18_13-34-30-274463",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "a604d5b39fb0",
        "parent_trajectory_ids": [
          "a2d2dc6b6049",
          "d4edaf8f4937"
        ],
        "hypothesis": "Hypothesis: The 'Liquidity-Validated Rejection' factor identifies high-probability mean reversion by multiplying the Intraday Shadow-to-Range ratio (10-day inverse-volatility weighted) by the inverse of the 20-day Volume-Price Correlation, specifically targeting overnight gaps that lack structural volume support.\n                Concise Observation: Parent 1 (RankIC 0.0253) captures intraday exhaustion via wicks, while Parent 2 (RankIC 0.0277) identifies trend conviction via price-volume correlation; however, neither alone distinguishes between a healthy trend consolidation and a false breakout.\n                Concise Justification: Fusing these strategies targets the 'False Breakthrough' scenario: an opening gap (sentiment) followed by intraday wicks (rejection) and low volume-price correlation (lack of institutional conviction) creates a synergistic signal for price snap-back.\n                Concise Knowledge: If intraday price rejection (long shadows) occurs alongside a decoupling of price and volume (low correlation), then the current price movement is likely an exhausted thrust rather than a sustainable trend; when overnight gaps lack volume-price synchronicity, they are more prone to mean reversion.\n                concise Specification: The factor is defined as (Shadow_Ratio / ATR_10D) * (1 - Correlation(Returns, Volume_Change, 20D)), where Shadow_Ratio is (High - Max(Open, Close) + Min(Open, Close) - Low) / (High - Low + 1e-6), applied to days with significant overnight gaps.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T05:48:52.905667"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.104849862862603,
        "ICIR": 0.0530452876557956,
        "1day.excess_return_without_cost.std": 0.0042377340217745,
        "1day.excess_return_with_cost.annualized_return": 0.0026568787618365,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002100901713907,
        "1day.excess_return_without_cost.annualized_return": 0.0500014607910087,
        "1day.excess_return_with_cost.std": 0.0042386307124834,
        "Rank IC": 0.0293661735778227,
        "IC": 0.0079938059935349,
        "1day.excess_return_without_cost.max_drawdown": -0.0883393070374991,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7648222588119782,
        "1day.pa": 0.0,
        "l2.valid": 0.9962004608547262,
        "Rank ICIR": 0.1948114961572588,
        "l2.train": 0.9931248433825322,
        "1day.excess_return_with_cost.information_ratio": 0.0406310156102293,
        "1day.excess_return_with_cost.mean": 1.116335614217035e-05
      },
      "feedback": {
        "observations": "The current iteration tested three variations of the 'Liquidity-Validated Rejection' framework. The 'Shadow_Volume_Decoupling_ZScore' and 'Gap_Exhaustion_Reversion_15D' factors were implemented to capture mean reversion. While the current results achieved a significantly higher Information Coefficient (IC) of 0.007994 compared to the SOTA's 0.005798, the risk-adjusted returns (Information Ratio) and drawdown metrics deteriorated. This suggests that while the signal's predictive power for the cross-section of returns has improved (higher IC), the stability of the signal over time or its concentration in volatile regimes has introduced higher risk (larger drawdown).",
        "hypothesis_evaluation": "The hypothesis that price rejection (shadows) combined with low volume-price correlation identifies mean reversion is supported by the improved IC. However, the 'overnight gap' component in GER and the 'volatility weighting' in LVR might be introducing noise or excessive turnover. The SVD (Z-Score) approach seems more robust for capturing the 'intensity' of rejection relative to history, but the overall strategy currently suffers from higher drawdowns compared to the SOTA.",
        "decision": false,
        "reason": "The current SVD factor uses a 10-day Z-score, which might be too sensitive to short-term spikes. By using a ratio of current shadow to a 20-day moving average, we can identify 'abnormal' rejection more cleanly. Furthermore, the current volume-price correlation (TS_CORR) is a symmetric measure; replacing it with a specific condition where volume is decreasing (indicating exhaustion) while the shadow is increasing should provide a cleaner signal and reduce the drawdown observed in the current results."
      },
      "cache_location": null
    },
    "ba67ad25b4c6b6f6": {
      "factor_id": "ba67ad25b4c6b6f6",
      "factor_name": "IEE_Institutional_Equilibrium_Factor",
      "factor_expression": "RANK(TS_MEAN($volume / ($high - $low + 1e-8), 10)) * RANK(-1 * TS_PCTCHANGE($close, 60)) * RANK(TS_MEAN(ABS($return) / ($volume * $close + 1e-8), 20))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(TS_MEAN($volume / ($high - $low + 1e-8), 10)) * RANK(-1 * TS_PCTCHANGE($close, 60)) * RANK(TS_MEAN(ABS(TS_PCTCHANGE($close, 1)) / ($volume * $close + 1e-8), 20))\" # Your output factor expression will be filled in here\n    name = \"IEE_Institutional_Equilibrium_Factor\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies high-conviction turning points by combining short-term institutional absorption (volume-to-price-range density), medium-term price reversal (60-day ROC), and liquidity exhaustion (Amihud illiquidity ratio). It aims to capture the synergy between smart-money accumulation and macro-trend exhaustion.",
      "factor_formulation": "IEE = RANK(TS\\_MEAN(\\frac{volume}{high - low + 1e-8}, 10)) * RANK(-1 * TS\\_PCTCHANGE(close, 60)) * RANK(TS\\_MEAN(\\frac{ABS(return)}{volume * close + 1e-8}, 20))",
      "metadata": {
        "experiment_id": "2026-01-19_04-13-15-519909",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "9377cc99761e",
        "parent_trajectory_ids": [
          "bf7e4eaedd9c",
          "4dd6b1bfce05"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Equilibrium-Exhaustion' (IEE) factor identifies high-conviction turning points by multiplying the 10-day volume-to-price-range density (Institutional Absorption) with the 60-day price reversal and 20-day Amihud illiquidity ratio, capturing the synergy between smart-money accumulation and macro-trend exhaustion.\n                Concise Observation: Parent 1 (IAI) captures short-term volume-price compression (RankIC 0.0236), while Parent 2 captures medium-term reversal and liquidity exhaustion (RankIC 0.0248); combining these addresses the 'false breakout' problem by requiring both structural exhaustion and institutional footprint.\n                Concise Justification: Institutional players use high-liquidity events to absorb or distribute large positions; by scaling the absorption ratio by the Amihud illiquidity metric, we can distinguish between meaningful institutional positioning and noise-driven volatility at macro-reversal points.\n                Concise Knowledge: If a stock exhibits high volume relative to its price range (absorption) during a period of significant medium-term price exhaustion and high illiquidity, then the probability of a robust trend reversal or continuation increases; high-density trading at price extremes suggests institutional floor-setting or ceiling-smashing.\n                concise Specification: The factor is defined as the cross-sectional rank product of: (1) 10-day Mean(Volume / (High - Low + epsilon)), (2) 60-day Price ROC * -1, and (3) 20-day Mean(Abs(Return) / (Volume * Close)); all components are normalized cross-sectionally before multiplication.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T20:11:30.640344"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1561678889151928,
        "ICIR": 0.0219466843975909,
        "1day.excess_return_without_cost.std": 0.003444054165834,
        "1day.excess_return_with_cost.annualized_return": -0.0141917240285506,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001402917004591,
        "1day.excess_return_without_cost.annualized_return": 0.0333894247092875,
        "1day.excess_return_with_cost.std": 0.003444589046338,
        "Rank IC": 0.0170674959171407,
        "IC": 0.0028508508592083,
        "1day.excess_return_without_cost.max_drawdown": -0.0789202711489786,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.6284207036733275,
        "1day.pa": 0.0,
        "l2.valid": 0.9963526205059874,
        "Rank ICIR": 0.1312392907582894,
        "l2.train": 0.9937613889776786,
        "1day.excess_return_with_cost.information_ratio": -0.2670602569763959,
        "1day.excess_return_with_cost.mean": -5.962909255693538e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Institutional Equilibrium-Exhaustion' (IEE) framework. While the theoretical construction is sound, the current implementation (IEE_Institutional_Equilibrium_Factor) failed to surpass the SOTA result across all key metrics, including IC (0.0028 vs 0.0058) and Information Ratio (0.628 vs 0.972). The multi-component approach (combining absorption, reversal, and illiquidity) likely introduced noise or signal cancellation, as the current annualized return (3.34%) is significantly lower than the SOTA (5.20%). The complexity of the primary factor (multiplying three distinct RANK functions) may be leading to a loss of signal granularity.",
        "hypothesis_evaluation": "The hypothesis that multiplying three distinct market states (Absorption, Reversal, and Illiquidity) identifies high-conviction turning points is partially supported by the positive IC, but the execution is suboptimal. The current 'product of ranks' method assumes all three conditions must peak simultaneously, which might be too restrictive or lead to extreme values that don't generalize well. The 'Liquidity_Exhaustion_Density' (LED) and 'Institutional_Absorption_Reversal' (IAR) sub-components suggest that the interaction between volume density and price movement is the core driver, but the 60-day reversal window might be too lagging compared to the 10-day absorption window.",
        "decision": false,
        "reason": "The previous results suggest that combining too many long-term and short-term signals (10, 20, and 60 days) degrades the signal-to-noise ratio. By narrowing the focus to 'Volume Climax' (high volume in narrow price ranges) and simplifying the mathematical structure to a Z-score or ratio rather than a triple rank product, we reduce complexity (SL and PC) and better capture the immediate 'exhaustion' effect. A shorter look-back for the reversal component (e.g., 20 days instead of 60) will better align with the 10-day absorption cycle."
      },
      "cache_location": null
    },
    "b91a61c396c96af9": {
      "factor_id": "b91a61c396c96af9",
      "factor_name": "ZScored_Accumulation_Trough",
      "factor_expression": "(-1 * TS_ZSCORE(TS_STD($return, 10), 20)) * TS_ZSCORE(TS_MEAN(($open - $low) / ($volume + 1e-8), 10), 20)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(-1 * TS_ZSCORE(TS_STD($close / DELAY($close, 1) - 1, 10), 20)) * TS_ZSCORE(TS_MEAN(($open - $low) / ($volume + 0.00000001), 10), 20)\" # Your output factor expression will be filled in here\n    name = \"ZScored_Accumulation_Trough\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor uses Z-scores to identify extreme outliers where volatility is significantly lower than its own history while the support-to-volume ratio is high, indicating a 'coiled spring' effect where institutional buyers are absorbing supply at a fixed floor.",
      "factor_formulation": "-\\text{TS_ZSCORE}(\\text{TS_STD}(\\text{return}, 10), 20) \\times \\text{TS_ZSCORE}(\\text{TS_MEAN}(\\frac{\\text{open} - \\text{low}}{\\text{volume}}, 10), 20)",
      "metadata": {
        "experiment_id": "2026-01-18_21-40-12-932281",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "063a2e97708d",
        "parent_trajectory_ids": [
          "62f090f9e159",
          "1b5246b65285"
        ],
        "hypothesis": "Hypothesis: The 'Supported Quiet Accumulation' factor, defined as the product of a 10-day volatility compression z-score and a 20-day volume-weighted price rejection floor, identifies stocks where institutional absorption occurs during low-volatility phases prior to trend initiation.\n                Concise Observation: Parent 1 successfully captured pre-trade quiet periods (RankIC 0.026), while Parent 2 identified institutional support levels (RankIC 0.023); however, both lacked a mechanism to distinguish between mere stagnation and active price absorption.\n                Concise Justification: Combining volatility troughs with price rejection logic ensures that the 'quietness' is not due to lack of interest but due to controlled accumulation where sellers are met by a consistent floor, creating a coiled spring effect for future returns.\n                Concise Knowledge: If a stock exhibits low price volatility alongside high volume-per-unit-range while maintaining price levels above an open-low support floor, then it indicates institutional accumulation; when these conditions converge, the probability of a high-velocity breakout increases.\n                concise Specification: The factor is calculated as the 10-day standard deviation of returns (inverted) multiplied by the 10-day average of (Open - Low) / Volume, further scaled by the 20-day price change efficiency (Close_t - Close_{t-20}) / Sum(Abs(Returns)).\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T14:27:16.381505"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1170517954339143,
        "ICIR": 0.0391819544694748,
        "1day.excess_return_without_cost.std": 0.0043616906122669,
        "1day.excess_return_with_cost.annualized_return": 0.0136401833683365,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002566639932778,
        "1day.excess_return_without_cost.annualized_return": 0.0610860304001336,
        "1day.excess_return_with_cost.std": 0.0043630275840836,
        "Rank IC": 0.0228915357767909,
        "IC": 0.0054438804053502,
        "1day.excess_return_without_cost.max_drawdown": -0.1073945757156735,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.9078175387090962,
        "1day.pa": 0.0,
        "l2.valid": 0.9965274553244216,
        "Rank ICIR": 0.1670591958475286,
        "l2.train": 0.9938165808400816,
        "1day.excess_return_with_cost.information_ratio": 0.2026486763811516,
        "1day.excess_return_with_cost.mean": 5.731169482494343e-05
      },
      "feedback": {
        "observations": "The current iteration focused on 'Supported Quiet Accumulation' by testing three variations: a multiplicative interaction (V1), a rank-based ensemble (Institutional_Absorption_Efficiency), and a double Z-score outlier approach (ZScored_Accumulation_Trough). The results show that while the Information Ratio (0.908) and IC (0.0054) are slightly lower than the SOTA, the Annualized Return has improved from 5.2% to 6.1%. The 'ZScored_Accumulation_Trough' likely contributed to capturing extreme 'coiled spring' states, though the increased Max Drawdown suggests that these outlier-based signals may carry higher tail risk or sensitivity to market regimes.",
        "hypothesis_evaluation": "The hypothesis that institutional absorption occurs during low-volatility phases with price rejection is partially supported. The improvement in annualized return suggests that the 'rejection floor' (Open-Low) normalized by volume is a valid signal for identifying support. However, the lower IC and higher drawdown indicate that the current multiplicative and Z-score formulations might be too noisy or sensitive to extreme volume spikes, requiring a more robust normalization method.",
        "decision": true,
        "reason": "The current 'Open-Low / Volume' metric may be distorted by absolute volume levels across different stocks. By using a ratio of 'Open-Low' to 'Average True Range' (ATR) and filtering for 'Volume / TS_MEAN(Volume, 20)', we can better isolate significant absorption. Furthermore, replacing the 20-day price efficiency ratio with a simpler 'Relative Strength Index' (RSI) at low levels or a 'Close-to-Low' position within the daily range may reduce complexity and improve the Information Ratio by focusing on the quality of the support floor."
      },
      "cache_location": null
    },
    "f9708f6c173d40ae": {
      "factor_id": "f9708f6c173d40ae",
      "factor_name": "ZScore_Conviction_Density_10D",
      "factor_expression": "TS_ZSCORE(TS_CORR($return, $volume, 10), 20) * ($volume / (TS_MEAN($high - $low, 10) + 1e-8))",
      "factor_implementation_code": "",
      "factor_description": "This factor measures the conviction signal using the Z-score of the return-volume correlation and scales it by the relative intraday liquidity density. By using TS_ZSCORE, it identifies periods where the institutional conviction is significantly higher than its own historical average, validated by current intraday volume support.",
      "factor_formulation": "ZCD = TS\\_ZSCORE(TS\\_CORR(Return, Volume, 10), 20) \\times \\frac{Volume_t}{TS\\_MEAN(High - Low, 10) + 1e-8}",
      "metadata": {
        "experiment_id": "2026-01-18_13-34-30-274463",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "3004f5839db8",
        "parent_trajectory_ids": [
          "f06010737e9d",
          "a452d2c1c177"
        ],
        "hypothesis": "Hypothesis: The 'Liquidity-Validated Conviction Index' (LVCI) predicts asset returns by multiplying the Institutional Conviction Synergy (20-day return-volume correlation times overnight gap) with the inverse of the Intraday Fragility Index (volume divided by the high-low range), thereby amplifying signals where overnight momentum is confirmed by dense intraday liquidity.\n                Concise Observation: Parent 2's conviction metric (RankIC=0.0297) identifies trend potential but ignores intraday liquidity health, while Parent 1's fragility index (RankIC=0.0262) identifies mean-reversion but lacks a directional anchor; combining them addresses the 'hollow gap' problem where price moves without volume support.\n                Concise Justification: The LVCI utilizes a non-linear interaction where the Intraday Fragility Index acts as a 'quality multiplier' for the conviction signal; high volume density (low fragility) reduces the risk of liquidity-driven price exhaustion, ensuring that the momentum identified by the overnight gap and return-volume synergy is fundamentally robust.\n                Concise Knowledge: If an overnight price gap is supported by a high correlation between returns and volume over a 20-day window, it indicates institutional conviction; when this conviction is further validated by high intraday volume density relative to price volatility, the resulting trend is more sustainable than gaps occurring in low-liquidity environments.\n                concise Specification: The factor is calculated as: [(Close_t / Open_t-1) * Corr(Return_20d, Volume_20d)] * [Volume_t / (High_t - Low_t + epsilon)], where the first term represents institutional conviction and the second term represents the inverse of intraday fragility (liquidity density).\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T05:22:02.682624"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1350554592937512,
        "ICIR": 0.0399956029703423,
        "1day.excess_return_without_cost.std": 0.0043100017330622,
        "1day.excess_return_with_cost.annualized_return": 0.0116293268773575,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002483369798042,
        "1day.excess_return_without_cost.annualized_return": 0.0591042011934198,
        "1day.excess_return_with_cost.std": 0.0043109194326477,
        "Rank IC": 0.0226285249292853,
        "IC": 0.00557236237951,
        "1day.excess_return_without_cost.max_drawdown": -0.0960531748135841,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.8888990228765068,
        "1day.pa": 0.0,
        "l2.valid": 0.9964933293312416,
        "Rank ICIR": 0.1648107847560876,
        "l2.train": 0.9940085511459134,
        "1day.excess_return_with_cost.information_ratio": 0.1748623026266708,
        "1day.excess_return_with_cost.mean": 4.886271797209047e-05
      },
      "feedback": {
        "observations": "The experiment tested two variations of the 'Liquidity-Validated Conviction Index' (LVCI). The current iteration achieved a higher annualized return (0.0591 vs 0.0520) compared to the SOTA, although it showed a slight decline in Information Ratio (0.8889 vs 0.9726) and IC (0.00557 vs 0.00579), alongside a deeper maximum drawdown. The 'Ranked_Liquidity_Synergy_15D' factor likely contributed to the improved return by normalizing the conviction signals across the cross-section, which mitigates the impact of outliers in raw volume and price range data.",
        "hypothesis_evaluation": "The results generally support the hypothesis that combining institutional conviction (return-volume correlation) with liquidity density (volume/range) captures alpha. However, the drop in Information Ratio suggests that while the 'multiplier' effect increases return potential, it also introduces higher volatility or tail risk. The success of the annualized return metric indicates that the interaction between overnight gaps and intraday liquidity is a valid source of excess return, but the implementation needs better risk-adjustment.",
        "decision": true,
        "reason": "The current implementation uses point-in-time liquidity (Volume/(High-Low)), which can be extremely noisy on a daily basis, leading to the observed increase in drawdown. By using a short-term moving average (e.g., 5 days) for the liquidity density component, we can identify stocks with sustained 'dense' liquidity. Additionally, scaling the conviction signal by the rolling standard deviation of returns will likely improve the Information Ratio by penalizing high-volatility signals that currently inflate the drawdown."
      },
      "cache_location": null
    },
    "2c4861a330741aed": {
      "factor_id": "2c4861a330741aed",
      "factor_name": "Volatility_Filtered_Institutional_Drift",
      "factor_expression": "(DELTA($close, 10) / (TS_MEAN($volume, 10) + 1e-8)) / (TS_STD(REGRESI($return, MEAN($return), 20), 20) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(DELTA($close, 10) / (TS_MEAN($volume, 10) + 1e-8)) / (TS_STD(REGRESI(TS_PCTCHANGE($close, 1), MEAN(TS_PCTCHANGE($close, 1)), 20), 20) + 1e-8)\" # Your output factor expression will be filled in here\n    name = \"Volatility_Filtered_Institutional_Drift\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor isolates 'informed' volatility by penalizing idiosyncratic volatility that is highly correlated with market noise. It uses the ratio of 20-day idiosyncratic standard deviation to the 10-day volume-weighted price change, emphasizing stocks where price moves are 'cheap' in terms of volume but 'rich' in unique information.",
      "factor_formulation": "VFID = \\frac{DELTA(close, 10) / TS\\_MEAN(volume, 10)}{TS\\_STD(REGRESI(return, MEAN(return), 20), 20) + 1e-8}",
      "metadata": {
        "experiment_id": "2026-01-18_21-40-12-932281",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "7564b0f41caa",
        "parent_trajectory_ids": [
          "b40908e50d0b",
          "1b5246b65285"
        ],
        "hypothesis": "Hypothesis: The Informed Institutional Absorption (IIA) factor, defined as the ratio of 20-day idiosyncratic volatility to market correlation (IAD) multiplied by the 10-day price change efficiency relative to volume turnover, identifies stocks where high information asymmetry is validated by efficient institutional accumulation.\n                Concise Observation: Parent 1 (IAD) captures alpha from information asymmetry but suffers from high-volatility noise, while Parent 2 (AISVM) identifies structural support but lacks a catalyst; combining them filters for high-conviction idiosyncratic moves.\n                Concise Justification: By using volume-price efficiency as a quality gate for idiosyncratic drift, the factor isolates 'informed' volatility from 'noisy' volatility, ensuring that the momentum is backed by structural institutional support rather than random market fluctuations.\n                Concise Knowledge: If a stock exhibits high idiosyncratic volatility alongside low market correlation, it indicates private information flow; when this is accompanied by high price velocity per unit of volume, it suggests institutional absorption rather than retail speculation.\n                concise Specification: Calculate IAD as std(residuals of price on market)/corr(price, market) over 20 days; calculate Efficiency as (close - close[10]) / sum(volume, 10); the IIA factor is the product of IAD and Efficiency, using a 20-day lookback for volatility and 10-day for velocity.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T14:03:34.773074"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1064154781006655,
        "ICIR": 0.0608110665284537,
        "1day.excess_return_without_cost.std": 0.0043342005262172,
        "1day.excess_return_with_cost.annualized_return": 0.0365635256501168,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003536781023877,
        "1day.excess_return_without_cost.annualized_return": 0.0841753883682867,
        "1day.excess_return_with_cost.std": 0.0043362086392587,
        "Rank IC": 0.026392827058542,
        "IC": 0.0086813080464508,
        "1day.excess_return_without_cost.max_drawdown": -0.0988060104232491,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.2588896116302553,
        "1day.pa": 0.0,
        "l2.valid": 0.9964061987612935,
        "Rank ICIR": 0.1939278185180157,
        "l2.train": 0.9938588619265584,
        "1day.excess_return_with_cost.information_ratio": 0.5465745641946833,
        "1day.excess_return_with_cost.mean": 0.0001536282590341
      },
      "feedback": {
        "observations": "The experiment successfully tested three variations of the Informed Institutional Absorption (IIA) framework. The current iteration achieved a significant performance breakthrough compared to the previous SOTA. Specifically, the Information Ratio (IR) increased from 0.97 to 1.26, and the Annualized Return improved from 5.2% to 8.4%. The Information Coefficient (IC) also showed a robust improvement (0.0087 vs 0.0058). While the Max Drawdown slightly worsened (-0.098 vs -0.072), the substantial gains in risk-adjusted returns (IR) and predictive power (IC) indicate that the core concept of combining idiosyncratic volatility with volume-weighted price efficiency is highly effective.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that idiosyncratic volatility, when normalized by market correlation and adjusted by price-volume efficiency, captures informed institutional activity. The 'Volatility_Filtered_Institutional_Drift' (VFID) and 'Efficiency_Adjusted_Idiosyncratic_Momentum' (EAIM) variants demonstrate that penalizing 'expensive' volume (high volume for small price moves) while rewarding unique information (idiosyncratic moves) provides a superior alpha signal. The success of the RANK-based combination in EAIM suggests that the interaction between these two components is non-linear and benefits from cross-sectional normalization.",
        "decision": true,
        "reason": "While the current factors use volume turnover as a denominator, they might be capturing high-volatility noise. By focusing on the 'Stealth' phase—where idiosyncratic returns are positive but volume is lower than the stock's own 20-day average—we can better isolate informed accumulation from retail-driven spikes. Additionally, using a 'Relative Volume' (Current Volume / 20-day Mean Volume) instead of raw turnover will normalize for liquidity differences across instruments, and adding a signal for 'Price Tightness' (low daily range) during the idiosyncratic move could further filter for institutional control."
      },
      "cache_location": null
    },
    "6cdad84224676380": {
      "factor_id": "6cdad84224676380",
      "factor_name": "LFGR_Volatility_Adjusted_Gap_5D",
      "factor_expression": "(($open - DELAY($close, 1)) / (DELAY($close, 1) + 1e-8)) * ((($high - $low) / ($volume + 1.0)) / (TS_MEDIAN(($high - $low) / ($volume + 1.0), 5) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(($open - DELAY($close, 1)) / (DELAY($close, 1) + 1e-8)) * ((($high - $low) / ($volume + 1.0)) / (TS_MEDIAN(($high - $low) / ($volume + 1.0), 5) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"LFGR_Volatility_Adjusted_Gap_5D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor refines the LFGR hypothesis by focusing on the short-term (5-day) fragility trend. It scales the overnight gap by the ratio of current fragility to its 5-day median, highlighting gaps that occur during sudden spikes in 'hollow' price movement (high range, low volume).",
      "factor_formulation": "\\frac{\\text{Open} - \\text{Prev\\_Close}}{\\text{Prev\\_Close}} \\times \\frac{\\text{Fragility}}{\\text{TS\\_MEDIAN}(\\text{Fragility}, 5)}",
      "metadata": {
        "experiment_id": "2026-01-18_13-34-30-274463",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "bf1ba68732d9",
        "parent_trajectory_ids": [
          "f06010737e9d",
          "4eb4899dd9ce"
        ],
        "hypothesis": "Hypothesis: The 'Liquidity-Filtered Gap Reversion' (LFGR) factor predicts returns by multiplying the overnight gap (relative to the previous close) by the 10-day Z-score of the 'Intraday Fragility Index' (High-Low range divided by volume), identifying whether gaps are backed by liquidity or are fragile exhaustion points.\n                Concise Observation: Parent 1's fragility index captures liquidity-driven exhaustion (RankIC 0.026), while Parent 2's gap analysis captures momentum (RankIC 0.027); combining them addresses the failure of gaps to persist when liquidity is thin.\n                Concise Justification: Gaps represent overnight sentiment shifts, but their sustainability depends on the liquidity density of the subsequent trading session; multiplying the gap by a fragility metric creates a non-linear filter that distinguishes between 'hollow' moves and 'solid' breakouts.\n                Concise Knowledge: If a price gap is accompanied by high intraday fragility (large price range on low volume), it is likely an exhaustion move prone to mean-reversion; conversely, gaps with low fragility suggest high liquidity conviction and trend persistence.\n                concise Specification: Define Gap as (Open - Prev_Close) / Prev_Close; define Fragility as (High - Low) / (Volume + 1); calculate the 10-day Z-score of Fragility; the final factor is Gap * TS_ZScore(Fragility, 10).\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T05:41:58.229757"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1034721626114325,
        "ICIR": 0.0469349090081919,
        "1day.excess_return_without_cost.std": 0.0040249253435017,
        "1day.excess_return_with_cost.annualized_return": -0.019148502012501,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001169857695943,
        "1day.excess_return_without_cost.annualized_return": 0.0278426131634455,
        "1day.excess_return_with_cost.std": 0.0040249983207598,
        "Rank IC": 0.023546877961026,
        "IC": 0.0061332751124687,
        "1day.excess_return_without_cost.max_drawdown": -0.0687070346653664,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.4483980194839131,
        "1day.pa": 0.0,
        "l2.valid": 0.9965721065565132,
        "Rank ICIR": 0.182657285270466,
        "l2.train": 0.993536085013449,
        "1day.excess_return_with_cost.information_ratio": -0.3083760368527557,
        "1day.excess_return_with_cost.mean": -8.045589080882806e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Liquidity-Filtered Gap Reversion' (LFGR) hypothesis. The results show a mixed performance: while the Information Ratio (0.448) and Annualized Return (0.0278) of the current best implementation are significantly lower than the SOTA (IR 0.972, Return 0.052), the current result achieved a higher Information Coefficient (IC) of 0.0061 and a better Max Drawdown (-0.0687). This suggests that while the signal has a slightly stronger linear correlation with returns (higher IC), it lacks the consistency or magnitude required to generate superior risk-adjusted returns compared to the previous SOTA.",
        "hypothesis_evaluation": "The hypothesis that overnight gaps backed by 'fragile' liquidity (high range/low volume) lead to mean reversion is partially supported by the positive IC. However, the drop in Information Ratio suggests that the current mathematical formulations (Z-scores and Rankings over 5-10 days) might be introducing noise or failing to capture the timing of the reversion accurately. The 'Fragility' index (High-Low/Volume) is a strong proxy for illiquidity, but its interaction with the Gap may be non-linear or regime-dependent.",
        "decision": false,
        "reason": "Current implementations use short windows (5-10 days) which may capture normal noise rather than true liquidity exhaustion. By extending the lookback for the Fragility Z-score to 20 days and normalizing the Gap by a 20-day ATR, we can better isolate 'extreme' exhaustion events. Furthermore, using the product of signed Gap and Fragility assumes a linear relationship; a conditional approach or a non-linear transformation (like a sigmoid or clipped Z-score) might reduce the impact of outliers and improve the Information Ratio."
      },
      "cache_location": {
        "workspace_suffix": "exp_20260118_213430",
        "workspace_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_213430",
        "factor_dir": "97bb1b6b00234088bdc89f92503257fe",
        "result_h5_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_213430/97bb1b6b00234088bdc89f92503257fe/result.h5"
      }
    },
    "5e747d6eacabe7ce": {
      "factor_id": "5e747d6eacabe7ce",
      "factor_name": "ALGE_Exhaustion_Factor_5D",
      "factor_expression": "(($open - DELAY($close, 1)) / (TS_MAX($high, 20) - TS_MIN($low, 20) + 1e-8)) * TS_MEAN(ABS($return) / ($volume + 1e-8), 5) * (-1 * TS_CORR($return, $volume, 5))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(($open - DELAY($close, 1)) / (TS_MAX($high, 20) - TS_MIN($low, 20) + 0.00000001)) * TS_MEAN(ABS(TS_PCTCHANGE($close, 1)) / ($volume + 0.00000001), 5) * (-1 * TS_CORR(TS_PCTCHANGE($close, 1), $volume, 5))\" # Your output factor expression will be filled in here\n    name = \"ALGE_Exhaustion_Factor_5D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "The Asymmetric Liquidity-Gap Exhaustion (ALGE) factor identifies mean-reversion by multiplying the volatility-normalized overnight gap by the Amihud illiquidity measure, adjusted by the sign of the price-volume correlation. High values indicate a gap driven by liquidity friction rather than structural strength, signaling a likely reversal.",
      "factor_formulation": "ALGE = \\frac{open - \\text{delay}(close, 1)}{\\text{TS_MAX}(high, 20) - \\text{TS_MIN}(low, 20)} \\times \\text{TS_MEAN}(\\frac{|return|}{volume}, 5) \\times (-\\text{TS_CORR}(return, volume, 5))",
      "metadata": {
        "experiment_id": "2026-01-18_14-14-43-683963",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "e9f4f55ac63b",
        "parent_trajectory_ids": [
          "e93b4b41ae00",
          "411e26730cb8"
        ],
        "hypothesis": "Hypothesis: The Asymmetric Liquidity-Gap Exhaustion (ALGE) factor identifies mean-reversion opportunities by selecting overnight price gaps that exceed historical volatility (20-day range) and are accompanied by high illiquidity (5-day Amihud spike) and negative price-volume correlation.\n                Concise Observation: Parent 1 (LER) captures short-term friction-based reversals (RankIC 0.0207), while Parent 2 (SRI) identifies volatility-normalized gap reversals (RankIC 0.0281); combining them addresses the weakness of gaps being mistaken for sustainable trends by requiring a 'liquidity exhaustion' confirmation.\n                Concise Justification: Large gaps require significant liquidity to sustain; if a gap is 'expensive' to create (high Amihud) and lacks persistent volume-price agreement, the price is likely to revert as the temporary liquidity imbalance clears, especially when the gap magnitude is extreme relative to recent volatility.\n                Concise Knowledge: If an overnight price gap occurs under conditions of high trading friction (Amihud) and low volume support, it is likely a liquidity-driven overextension rather than an informed structural breakout; when price-volume correlation is negative during these spikes, it signals retail-driven exhaustion prone to reversal.\n                concise Specification: Define ALGE as the product of (Overnight Gap / 20-day High-Low Range) and (5-day average of absolute return divided by volume), filtered by the 5-day correlation between daily returns and volume; high positive values indicate strong reversal candidates.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T06:50:50.809633"
      },
      "backtest_results": {},
      "feedback": {
        "observations": "The experiment aimed to test the Asymmetric Liquidity-Gap Exhaustion (ALGE) hypothesis using two distinct implementations: one based on raw volatility-normalized gaps and another using cross-sectional ranking. However, the 'Current Result' column shows 'NaN' for all key performance metrics (IC, Annualized Return, IR, and Max Drawdown). This indicates that while the factors were implemented, they failed to generate valid signals or the resulting values were not compatible with the evaluation pipeline (potentially due to scale issues, excessive NaNs in the Amihud measure, or zero-division in the volatility normalization).",
        "hypothesis_evaluation": "The hypothesis that liquidity-driven overnight gaps lead to mean reversion remains unverified due to the lack of valid performance metrics in the current run. The formulation of 'ALGE_Exhaustion_Factor_5D' uses a range-based denominator (TS_MAX - TS_MIN) which can be zero for illiquid stocks, potentially leading to the NaN results observed. Furthermore, the Amihud measure (|return|/volume) is often extremely small, which might require scaling or ranking to be effective in a multi-factor model.",
        "decision": false,
        "reason": "The current failure (NaNs) suggests numerical instability. By using a Z-score (gap / TS_STD) instead of a range-based denominator, we reduce the impact of outliers and avoid zero-division. Transforming the Amihud illiquidity measure into a percentile rank ensures that the 'liquidity spike' is relative to the stock's own history, making the exhaustion signal more reliable across different market regimes and liquidity profiles. This also addresses potential scale mismatches when multiplying gap magnitude by illiquidity."
      },
      "cache_location": null
    },
    "20b30fb65ce71e44": {
      "factor_id": "20b30fb65ce71e44",
      "factor_name": "Exhaustion_Overnight_Diffusion_20D",
      "factor_expression": "((TS_PCTCHANGE($close, 60) < 0) && (TS_CORR($close, $volume, 20) < 0.2)) ? (($open / DELAY($close, 1) - 1 - MEDIAN($open / DELAY($close, 1) - 1)) * TS_MEAN(($high - $low) / ($volume + 1e-8), 20)) : 0",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"((TS_PCTCHANGE($close, 60) < 0) && (TS_CORR($close, $volume, 20) < 0.2)) ? (($open / DELAY($close, 1) - 1 - MEDIAN($open / DELAY($close, 1) - 1)) * TS_MEAN(($high - $low) / ($volume + 1e-8), 20)) : 0\" # Your output factor expression will be filled in here\n    name = \"Exhaustion_Overnight_Diffusion_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "Identifies alpha in stocks showing structural exhaustion (60-day price decline and low price-volume correlation) by measuring the overnight gap relative to the market median, scaled by a proxy for illiquidity (price range over volume).",
      "factor_formulation": "\\text{Gap} = \\frac{\\text{open}}{\\text{delay}(\\text{close}, 1)} - 1, \\text{Illiq} = \\text{TS_MEAN}(\\frac{\\text{high}-\\text{low}}{\\text{volume}+1e-8}, 20), \\text{Factor} = (\\text{Gap} - \\text{MEDIAN}(\\text{Gap})) * \\text{Illiq} \\text{ if } (\\text{ROC}_{60} < 0 \\text{ and } \\text{Corr}_{20} < 0.2) \\text{ else } 0",
      "metadata": {
        "experiment_id": "2026-01-19_04-13-15-519909",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "eb27b49cc06c",
        "parent_trajectory_ids": [
          "782f03351721",
          "555835c42279"
        ],
        "hypothesis": "Hypothesis: The 'Exhaustion-Buffered Overnight Diffusion' factor identifies alpha by selecting stocks with a 60-day price collapse (ROC < 0) and low price-volume correlation, then measuring their overnight gap relative to the cross-sectional median to capture laggard recovery in liquidity-constrained regimes.\n                Concise Observation: Parent 1's overnight momentum and Parent 2's 60-day structural reversal both show significant RankIC, but combining them filters out false momentum signals in healthy stocks and avoids 'falling knives' in liquid sell-offs.\n                Concise Justification: Stocks in a state of structural exhaustion (low ROC and low price-volume correlation) are sensitive to price discovery; a positive overnight gap relative to the market median in these stocks signals the start of a liquidity-driven reversal.\n                Concise Knowledge: If a stock exhibits long-term price decay and price-volume decoupling, it enters a 'liquidity exhaustion' state where overnight price gaps relative to sector peers become highly predictive of mean-reversion alpha.\n                concise Specification: Define exhaustion as ROC(close, 60) < 0 and Correlation(close, volume, 20) < 0.2; within this subset, calculate the factor as (Open/PrevClose - 1) minus the CrossSectionalMedian(Open/PrevClose - 1), scaled by the 20-day Amihud illiquidity ratio.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T19:43:52.617249"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1543915192613072,
        "ICIR": 0.0279378412888847,
        "1day.excess_return_without_cost.std": 0.0054544782015434,
        "1day.excess_return_with_cost.annualized_return": 0.0130039766308768,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002532820707168,
        "1day.excess_return_without_cost.annualized_return": 0.060281132830604,
        "1day.excess_return_with_cost.std": 0.005455650053801,
        "Rank IC": 0.0213702357540416,
        "IC": 0.0045837899809332,
        "1day.excess_return_without_cost.max_drawdown": -0.1416980951308396,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7163738366335973,
        "1day.pa": 0.0,
        "l2.valid": 0.9972533130965828,
        "Rank ICIR": 0.134334483709745,
        "l2.train": 0.9932931149199704,
        "1day.excess_return_with_cost.information_ratio": 0.1545045226507314,
        "1day.excess_return_with_cost.mean": 5.463855727259161e-05
      },
      "feedback": {
        "observations": "The current iteration focused on the 'Exhaustion-Buffered Overnight Diffusion' hypothesis, exploring three variations: an illiquidity-scaled gap, a rank-based structural reversal, and a volatility-normalized Z-score. The 'Exhaustion_Overnight_Diffusion_20D' implementation achieved an annualized return of 6.03%, which surpasses the SOTA result of 5.20%. however, this came at the cost of a significantly higher maximum drawdown (-0.1417 vs -0.0726) and a lower Information Ratio (0.716 vs 0.973). The IC also remains lower than the SOTA (0.0046 vs 0.0058). The current results suggest that while the 'exhaustion' filter (ROC < 0 and low Corr) effectively captures higher magnitude returns, it introduces substantial volatility and tail risk.",
        "hypothesis_evaluation": "The hypothesis that overnight gaps in 'exhausted' stocks capture alpha is supported by the improvement in annualized return. However, the 'Illiq' scaling (price range over volume) appears to amplify noise or specific risk rather than just providing a liquidity buffer, leading to the observed drawdown. The filtering mechanism (ROC60 < 0 and Corr20 < 0.2) is effective but may be too binary, causing abrupt entries/exits that degrade the Information Ratio.",
        "decision": true,
        "reason": "The current 'Illiq' measure (high-low/volume) is highly volatile. By using a time-series relative Amihud ratio, we can better identify periods of *unusual* illiquidity for a specific stock. Furthermore, replacing the hard 'if-else' filters with a multiplicative rank-based approach (as seen in the Structural_Reversal_Liquidity_Factor) should smooth the factor distribution and improve the Information Ratio and IC by reducing the number of zero-value observations."
      },
      "cache_location": {
        "workspace_suffix": "exp_20260118_221443",
        "workspace_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221443",
        "factor_dir": "ea70d72090b9492eaecc5ad2ba89b1d8",
        "result_h5_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221443/ea70d72090b9492eaecc5ad2ba89b1d8/result.h5"
      }
    },
    "c65d6ce42b8022c4": {
      "factor_id": "c65d6ce42b8022c4",
      "factor_name": "Exhaustion_Volume_Intensity_Reversal",
      "factor_expression": "RANK(-1 * TS_SUM($return, 60)) * RANK(TS_STD($close, 5) / (TS_MEAN($volume, 5) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(-1 * TS_PCTCHANGE($close, 60)) * RANK(TS_STD($close, 5) / (TS_MEAN($volume, 5) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Exhaustion_Volume_Intensity_Reversal\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor captures the exhaustion of a downward trend by looking for a high dispersion between price decline and volume intensity. It specifically looks for cases where the 60-day return is deeply negative but the recent 5-day volume-weighted price range suggests a floor is being established through absorption.",
      "factor_formulation": "Rank( -TS\\_SUM(return, 60) ) \\times Rank( TS\\_STD(close, 5) / (TS\\_MEAN(volume, 5) + 1e-8) )",
      "metadata": {
        "experiment_id": "2026-01-19_04-13-15-519909",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "ec683063bb59",
        "parent_trajectory_ids": [
          "91665942fad5",
          "4dd6b1bfce05"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Absorption & Exhaustion Reversal' (IAER) factor identifies high-probability reversals by multiplying the rank of a 60-day price-volume exhaustion signal (Parent 2) with the rank of a 5-day intraday accumulation efficiency score (Parent 1), specifically targeting assets where structural selling washout meets immediate smart-money absorption.\n                Concise Observation: Parent 1 (ISAF) captures intraday efficiency (RankIC 0.023) and Parent 2 (Macro Exhaustion) captures long-term reversal (RankIC 0.024); combining them addresses the timing weakness of long-term reversals and the noise inherent in intraday signals.\n                Concise Justification: Long-term price exhaustion (ROC60 reversal) identifies the 'where' of a trade, while intraday efficiency (price-range-to-volume ratio) identifies the 'when' by signaling institutional absorption; multiplying their ranks ensures the factor only triggers when both structural and tactical conditions are optimal.\n                Concise Knowledge: If a long-term price decline is accompanied by high illiquidity and followed by narrow-range, high-volume intraday consolidation with positive overnight gaps, then the probability of a structural trend reversal is significantly enhanced; When macro exhaustion and micro accumulation align, the signal reliability exceeds that of either component alone.\n                concise Specification: The factor is defined as Rank( -ROC(close, 60) * Correlation(close, volume, 20) / Mean(volume, 20) ) * Rank( (open - delay(close, 1)) / ( (high - low) / volume ) ) using a 5-day window for the intraday efficiency component and a 60-day window for the macro exhaustion component.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T20:21:23.616621"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1404357126930604,
        "ICIR": 0.0302655430966541,
        "1day.excess_return_without_cost.std": 0.0047712956270778,
        "1day.excess_return_with_cost.annualized_return": 0.0230627347674815,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002958391976421,
        "1day.excess_return_without_cost.annualized_return": 0.0704097290388227,
        "1day.excess_return_with_cost.std": 0.0047724091908669,
        "Rank IC": 0.0200340168012946,
        "IC": 0.0042484205233583,
        "1day.excess_return_without_cost.max_drawdown": -0.0956938565368666,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.9565504237098702,
        "1day.pa": 0.0,
        "l2.valid": 0.9966185126987142,
        "Rank ICIR": 0.1454298917567074,
        "l2.train": 0.9937148843993902,
        "1day.excess_return_with_cost.information_ratio": 0.3132453642111494,
        "1day.excess_return_with_cost.mean": 9.690224692219134e-05
      },
      "feedback": {
        "observations": "The experiment tested two implementations of the 'Institutional Absorption & Exhaustion Reversal' (IAER) framework: 'Structural_Washout_Efficiency_Factor' and 'Exhaustion_Volume_Intensity_Reversal'. The current results show a significant improvement in Annualized Return (0.0704 vs 0.0520) compared to the SOTA, although the Information Ratio (IR) and Information Coefficient (IC) are slightly lower, and the Max Drawdown has increased. This suggests that the current factors are capturing higher-magnitude return events (tails) but with increased volatility and less consistency across the cross-section compared to the previous SOTA.",
        "hypothesis_evaluation": "The results partially support the hypothesis. The 'Structural_Washout_Efficiency_Factor' successfully demonstrates that combining a long-term price-series rank (60-day washout) with a short-term liquidity-adjusted gap (5-day absorption) generates superior annualized returns. However, the drop in IC suggests that the linear correlation of the factor with future returns is weak, implying that the 'absorption' signal might be non-linear or only effective at extreme values. The complexity of the 'Structural_Washout' factor is well-managed (ER=5), but the interaction between the two parent ranks may be introducing noise.",
        "decision": true,
        "reason": "The current 'Structural_Washout' factor uses a simple price gap (open - delay(close, 1)). While effective, it doesn't account for where that gap sits within the recent volatility context. By using a 'Price Location' (where the current price is relative to the 5-day high/low) weighted by volume, we can more accurately identify 'smart money' positioning. Furthermore, replacing TS_RANK(close, 60) with a divergence measure will help distinguish between a healthy downtrend and a terminal exhaustion phase, potentially improving the IC and reducing the Max Drawdown."
      },
      "cache_location": null
    },
    "c819c4dc5b36bfc5": {
      "factor_id": "c819c4dc5b36bfc5",
      "factor_name": "Gap_Exhaustion_Liquidity_Floor_15D",
      "factor_expression": "RANK(($open - DELAY($close, 1)) / (DELAY($close, 1) + 1e-8)) * RANK(TS_MEAN((MIN($open, $close) - $low) / ($high - $low + 1e-8), 5))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(($open - DELAY($close, 1)) / (DELAY($close, 1) + 1e-8)) * RANK(TS_MEAN((MIN($open, $close) - $low) / ($high - $low + 1e-8), 5))\" # Your output factor expression will be filled in here\n    name = \"Gap_Exhaustion_Liquidity_Floor_15D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A simplified version of the institutional absorption hypothesis focusing on the cross-sectional rank of overnight gaps and the consistency of lower shadow support. It filters for stocks where the overnight gap is extreme but met with significant intraday buying pressure relative to the total range.",
      "factor_formulation": "Factor = \\text{RANK}(\\frac{open - prev\\_close}{prev\\_close}) \\times \\text{RANK}(\\text{TS_MEAN}(\\frac{min(open, close) - low}{high - low + 1e-8}, 5))",
      "metadata": {
        "experiment_id": "2026-01-18_14-15-29-053563",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "d3b0bf8eb678",
        "parent_trajectory_ids": [
          "2589556dccc8",
          "3a4d3d97b0d5"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Counter-Sentiment Absorption' factor, defined as the product of the Z-scored overnight gap exhaustion (Parent 1) and the 10-day rolling institutional floor compression (Parent 2), identifies high-probability mean-reversion entries where retail-driven price gaps are met with structural liquidity support.\n                Concise Observation: Parent 1 captures sentiment exhaustion via gap-to-drift ratios (RankIC 0.023), while Parent 2 identifies institutional support through volume-price compression (RankIC 0.025); combining them filters out 'falling knife' scenarios where gaps lack liquidity backing.\n                Concise Justification: Retail investors often overreact in the overnight session, but these moves only reverse reliably if institutional players provide liquidity at the extremes; the interaction between the gap magnitude and the shadow-volume ratio quantifies this absorption process.\n                Concise Knowledge: If an overnight price gap is large relative to recent volatility but occurs simultaneously with high volume-to-range ratios and significant lower shadows, then the price is likely at a structural floor; when retail sentiment exhausts itself against institutional limit orders, the probability of a reversal increases.\n                concise Specification: Calculate the overnight gap ratio (open - prev_close) / (prev_high - prev_low), Z-score it over 20 days, and multiply by the 10-day mean of ((volume / (high - low)) * ((min(open, close) - low) / volume)) to isolate validated reversal signals.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T04:18:21.175636"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.0962890576922765,
        "ICIR": 0.0456223884740897,
        "1day.excess_return_without_cost.std": 0.0042063514331209,
        "1day.excess_return_with_cost.annualized_return": 0.0325098907179722,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0003361908114936,
        "1day.excess_return_without_cost.annualized_return": 0.080013413135486,
        "1day.excess_return_with_cost.std": 0.0042072221809913,
        "Rank IC": 0.0212121161754978,
        "IC": 0.0060277417718598,
        "1day.excess_return_without_cost.max_drawdown": -0.0794934428996714,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 1.2330161460156024,
        "1day.pa": 0.0,
        "l2.valid": 0.99641869281754,
        "Rank ICIR": 0.1629445745224532,
        "l2.train": 0.9938680275793697,
        "1day.excess_return_with_cost.information_ratio": 0.5008775697863972,
        "1day.excess_return_with_cost.mean": 0.0001365961794872
      },
      "feedback": {
        "observations": "The current experiment focused on the 'Institutional Counter-Sentiment Absorption' hypothesis by testing three variations: a Z-scored gap exhaustion combined with a support proxy, a rank-based version, and a volume-weighted shadow compression factor. The results show a significant improvement in predictive power and risk-adjusted returns compared to the previous SOTA. Specifically, the Information Ratio (IR) increased from 0.97 to 1.23, and the Annualized Return rose from 5.2% to 8.0%. The IC also showed a marginal improvement. While the Max Drawdown slightly deepened, the overall return-to-risk profile is substantially superior.",
        "hypothesis_evaluation": "The results strongly support the hypothesis that combining overnight gap exhaustion with intraday structural support (lower shadows) identifies profitable mean-reversion entries. The 'Shadow_Volume_Compression_Factor' implementation suggests that volume density within the lower shadow is a potent proxy for institutional absorption. The success of the 10-day and 20-day window sizes indicates that this structural support has a medium-term persistence that filters out noise better than single-day observations.",
        "decision": true,
        "reason": "The current SOTA uses a simple ratio of shadow to range. However, institutional absorption is most credible when high volume occurs at price extremes without further downward progression. By incorporating a volume-density component (Volume / Shadow Length) and normalizing it against the stock's own recent volume profile, we can better distinguish between 'low-conviction' price drifting and 'high-conviction' institutional accumulation. Furthermore, reducing the complexity by focusing on the interaction between volume and shadow (Parent 2) while simplifying the Gap (Parent 1) to a simple percentage change should improve generalization."
      },
      "cache_location": {
        "workspace_suffix": "exp_20260118_221528",
        "workspace_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221528",
        "factor_dir": "020228826c4641c682baebdb9ed8f7f8",
        "result_h5_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221528/020228826c4641c682baebdb9ed8f7f8/result.h5"
      }
    },
    "b384fe5d194ea232": {
      "factor_id": "b384fe5d194ea232",
      "factor_name": "Institutional_Absorption_Efficiency",
      "factor_expression": "RANK(INV(TS_STD($return, 10) + 1e-8)) + RANK(DELTA($close, 20) / (TS_SUM(ABS($return), 20) + 1e-8)) + RANK(($open - $low) / ($volume + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(INV(TS_STD(TS_PCTCHANGE($close, 1), 10) + 0.000001)) + RANK(DELTA($close, 20) / (TS_SUM(ABS(TS_PCTCHANGE($close, 1)), 20) + 0.000001)) + RANK(($open - $low) / ($volume + 0.000001))\" # Your output factor expression will be filled in here\n    name = \"Institutional_Absorption_Efficiency\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A simplified version of the accumulation hypothesis focusing on the cross-sectional rank of price stability relative to volume-driven support. It captures stocks with high price efficiency (low path-dependency) and high support-to-volume ratios during periods of low relative volatility.",
      "factor_formulation": "\\text{RANK}(\\text{INV}(\\text{TS_STD}(\\text{return}, 10))) + \\text{RANK}(\\frac{\\text{DELTA}(\\text{close}, 20)}{\\text{TS_SUM}(\\text{ABS}(\\text{return}), 20)}) + \\text{RANK}(\\frac{\\text{open} - \\text{low}}{\\text{volume}})",
      "metadata": {
        "experiment_id": "2026-01-18_21-40-12-932281",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "063a2e97708d",
        "parent_trajectory_ids": [
          "62f090f9e159",
          "1b5246b65285"
        ],
        "hypothesis": "Hypothesis: The 'Supported Quiet Accumulation' factor, defined as the product of a 10-day volatility compression z-score and a 20-day volume-weighted price rejection floor, identifies stocks where institutional absorption occurs during low-volatility phases prior to trend initiation.\n                Concise Observation: Parent 1 successfully captured pre-trade quiet periods (RankIC 0.026), while Parent 2 identified institutional support levels (RankIC 0.023); however, both lacked a mechanism to distinguish between mere stagnation and active price absorption.\n                Concise Justification: Combining volatility troughs with price rejection logic ensures that the 'quietness' is not due to lack of interest but due to controlled accumulation where sellers are met by a consistent floor, creating a coiled spring effect for future returns.\n                Concise Knowledge: If a stock exhibits low price volatility alongside high volume-per-unit-range while maintaining price levels above an open-low support floor, then it indicates institutional accumulation; when these conditions converge, the probability of a high-velocity breakout increases.\n                concise Specification: The factor is calculated as the 10-day standard deviation of returns (inverted) multiplied by the 10-day average of (Open - Low) / Volume, further scaled by the 20-day price change efficiency (Close_t - Close_{t-20}) / Sum(Abs(Returns)).\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T14:27:16.381505"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1170517954339143,
        "ICIR": 0.0391819544694748,
        "1day.excess_return_without_cost.std": 0.0043616906122669,
        "1day.excess_return_with_cost.annualized_return": 0.0136401833683365,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002566639932778,
        "1day.excess_return_without_cost.annualized_return": 0.0610860304001336,
        "1day.excess_return_with_cost.std": 0.0043630275840836,
        "Rank IC": 0.0228915357767909,
        "IC": 0.0054438804053502,
        "1day.excess_return_without_cost.max_drawdown": -0.1073945757156735,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.9078175387090962,
        "1day.pa": 0.0,
        "l2.valid": 0.9965274553244216,
        "Rank ICIR": 0.1670591958475286,
        "l2.train": 0.9938165808400816,
        "1day.excess_return_with_cost.information_ratio": 0.2026486763811516,
        "1day.excess_return_with_cost.mean": 5.731169482494343e-05
      },
      "feedback": {
        "observations": "The current iteration focused on 'Supported Quiet Accumulation' by testing three variations: a multiplicative interaction (V1), a rank-based ensemble (Institutional_Absorption_Efficiency), and a double Z-score outlier approach (ZScored_Accumulation_Trough). The results show that while the Information Ratio (0.908) and IC (0.0054) are slightly lower than the SOTA, the Annualized Return has improved from 5.2% to 6.1%. The 'ZScored_Accumulation_Trough' likely contributed to capturing extreme 'coiled spring' states, though the increased Max Drawdown suggests that these outlier-based signals may carry higher tail risk or sensitivity to market regimes.",
        "hypothesis_evaluation": "The hypothesis that institutional absorption occurs during low-volatility phases with price rejection is partially supported. The improvement in annualized return suggests that the 'rejection floor' (Open-Low) normalized by volume is a valid signal for identifying support. However, the lower IC and higher drawdown indicate that the current multiplicative and Z-score formulations might be too noisy or sensitive to extreme volume spikes, requiring a more robust normalization method.",
        "decision": true,
        "reason": "The current 'Open-Low / Volume' metric may be distorted by absolute volume levels across different stocks. By using a ratio of 'Open-Low' to 'Average True Range' (ATR) and filtering for 'Volume / TS_MEAN(Volume, 20)', we can better isolate significant absorption. Furthermore, replacing the 20-day price efficiency ratio with a simpler 'Relative Strength Index' (RSI) at low levels or a 'Close-to-Low' position within the daily range may reduce complexity and improve the Information Ratio by focusing on the quality of the support floor."
      },
      "cache_location": null
    },
    "7f3c124c16683dee": {
      "factor_id": "7f3c124c16683dee",
      "factor_name": "ICD_Simplified_Flow_20D",
      "factor_expression": "LOG($open / (DELAY($close, 1) + 1e-8)) * RANK(TS_MEAN($volume / ($high - $low + 1e-8), 20))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"LOG($open / (DELAY($close, 1) + 1e-8)) * RANK(TS_MEAN($volume / ($high - $low + 1e-8), 20))\" # Your output factor expression will be filled in here\n    name = \"ICD_Simplified_Flow_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A simplified version of the Institutional Conviction Divergence factor that focuses on the ratio of volume intensity to price volatility to scale the overnight gap. It uses cross-sectional ranking to normalize the flow quality before interacting with the overnight log-return.",
      "factor_formulation": "ICD_S = \\log(\\frac{Open_t}{Close_{t-1}}) \\times \\text{RANK}(\\text{TS_MEAN}(\\frac{Volume}{High - Low}, 20))",
      "metadata": {
        "experiment_id": "2026-01-18_14-15-29-053563",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "3717aba70f96",
        "parent_trajectory_ids": [
          "04e9dff23a61",
          "37b2c5626b11"
        ],
        "hypothesis": "Hypothesis: The Institutional Conviction Divergence (ICD) factor, calculated as the interaction between the Overnight Sentiment Gap (log-return from yesterday's close to today's open) and the 20-day Institutional Flow Quality (ratio of volume intensity to price range), identifies sustainable trends when high-quality absorption validates the gap and mean reversion when the gap lacks institutional support.\n                Concise Observation: Parent 1's overnight sentiment (RankIC 0.0208) captures short-term noise, while Parent 2's institutional flow (RankIC 0.0265) captures structural demand; combining them resolves the ambiguity of whether a price gap is a breakout or a trap.\n                Concise Justification: By scaling the overnight gap by the Institutional Absorption Ratio, we create a dynamic signal that switches from momentum to mean-reversion based on the 'quality' of the liquidity consumed during the price move.\n                Concise Knowledge: If an overnight price gap is accompanied by high institutional absorption (high volume relative to price range), it signals a sustainable trend; conversely, if the gap occurs with low absorption efficiency, it represents retail-driven exhaustion likely to mean-revert.\n                concise Specification: The ICD factor is defined as (Open_t / Close_{t-1} - 1) multiplied by the 20-day moving average of [(Volume_zscore / (High - Low)_zscore) * (Low - min(Open, Close)) / (High - Low)], using a 20-day lookback for Z-scores and averages.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T04:23:54.369037"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1130022654550585,
        "ICIR": 0.031360404382992,
        "1day.excess_return_without_cost.std": 0.004015285198692,
        "1day.excess_return_with_cost.annualized_return": 0.0071608761736011,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002281012940859,
        "1day.excess_return_without_cost.annualized_return": 0.0542881079924552,
        "1day.excess_return_with_cost.std": 0.0040166914944114,
        "Rank IC": 0.0194117567258094,
        "IC": 0.0041606192051525,
        "1day.excess_return_without_cost.max_drawdown": -0.0874595709155283,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.8763948761790076,
        "1day.pa": 0.0,
        "l2.valid": 0.9965009422926444,
        "Rank ICIR": 0.148635212842705,
        "l2.train": 0.9940742529947784,
        "1day.excess_return_with_cost.information_ratio": 0.1155604458565564,
        "1day.excess_return_with_cost.mean": 3.008771501513084e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the Institutional Conviction Divergence (ICD) framework. The 'ICD_Absorption_Momentum_20D' factor attempted a complex interaction using Z-scores and shadow-based absorption, while 'ICD_Simplified_Flow_20D' used a cleaner Rank-based approach. The 'Institutional_Absorption_Ratio_10D' isolated the flow component. The current results show an improvement in Annualized Return (0.0543 vs 0.0520) compared to the SOTA, although the Information Ratio and IC slightly lagged behind the previous best. The complexity of the first factor (ICD_Absorption_Momentum_20D) is a concern due to multiple Z-scores and nested ratios, which likely contributed to the higher drawdown (-0.0875) and lower IC compared to SOTA.",
        "hypothesis_evaluation": "The results partially support the hypothesis. The interaction between the overnight gap and institutional flow quality (volume/price range) generates positive annualized excess returns. However, the drop in IC and IR suggests that the current 'Absorption' formulation (using Z-scores of volume relative to Z-scores of range) might be too noisy or over-engineered. The simplified version (ICD_S) suggests that the core logic of scaling gaps by volume intensity is sound, but the mathematical representation needs to be more robust and less sensitive to outliers.",
        "decision": true,
        "reason": "The current 'ICD_Absorption_Momentum_20D' has high complexity (multiple Z-scores and nested divisions), which can lead to instability. By replacing Z-scores with simple relative ratios (Volume / MA_Volume) and normalizing by a smoother ATR-like denominator, we reduce the 'Symbol Length' and 'Free Parameters' while preserving the signal's intent. This should improve the Information Ratio and reduce the Max Drawdown by providing a more stable scaling factor for the overnight gap."
      },
      "cache_location": {
        "workspace_suffix": "exp_20260118_221528",
        "workspace_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221528",
        "factor_dir": "5090b46b26e24242bd2d38de4bd08c32",
        "result_h5_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221528/5090b46b26e24242bd2d38de4bd08c32/result.h5"
      }
    },
    "0772078704d0d4bc": {
      "factor_id": "0772078704d0d4bc",
      "factor_name": "Informed_Liquidity_Absorption_20D",
      "factor_expression": "TS_MEAN(((DELAY($close, 1) - $open) / ($high - $low + 1e-8)) * (TS_ZSCORE($volume, 20) / (TS_ZSCORE($high - $low, 20) + 1e-8)), 20)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_MEAN(((DELAY($close, 1) - $open) / ($high - $low + 1e-8)) * (TS_ZSCORE($volume, 20) / (TS_ZSCORE($high - $low, 20) + 1e-8)), 20)\" # Your output factor expression will be filled in here\n    name = \"Informed_Liquidity_Absorption_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "The ILA factor identifies persistent price trends by multiplying the Overnight-to-Range Ratio (SIP) with the Institutional Absorption Ratio (Volume Z-score / True Range Z-score). It captures instances where overnight information gaps are validated by efficient intraday volume support, suggesting institutional accumulation.",
      "factor_formulation": "ILA_{20D} = TS\\_MEAN\\left(\\frac{DELAY(close, 1) - open}{high - low + 1e-8} \\times \\frac{TS\\_ZSCORE(volume, 20)}{TS\\_ZSCORE(high - low, 20) + 1e-8}, 20\\right)",
      "metadata": {
        "experiment_id": "2026-01-18_14-15-29-053563",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "14c17e62e683",
        "parent_trajectory_ids": [
          "5fcd01a65f7f",
          "37b2c5626b11"
        ],
        "hypothesis": "Hypothesis: The Informed Liquidity Absorption (ILA) factor, calculated as the 20-day average of the product of the Overnight-to-Range Ratio and the Institutional Absorption Ratio (Volume Z-score divided by True Range Z-score), identifies persistent price trends driven by institutional accumulation.\n                Concise Observation: Parent 1 (SIP) captures information asymmetry via overnight gaps, while Parent 2 (Institutional Flow Quality) identifies efficient volume support; combining them addresses the risk of overnight noise being unvalidated by intraday capital.\n                Concise Justification: Multiplying the stealth signal by an absorption metric ensures that only those assets exhibiting both informed positioning and low-volatility institutional support are selected, filtering out retail-driven volatility.\n                Concise Knowledge: If overnight price gaps (information) are followed by intraday periods of high volume relative to price volatility (absorption), the resulting price trend is more likely to be persistent due to institutional commitment minimizing market impact.\n                concise Specification: Calculate SIP as (Close_t-1 - Open_t) / (High_t - Low_t), calculate Absorption as (Volume Z-score / True Range Z-score), and define ILA as the 20-day moving average of their product to capture sustained institutional validation.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T04:10:05.947883"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1112261533772497,
        "ICIR": 0.0214382152735498,
        "1day.excess_return_without_cost.std": 0.0040017562653845,
        "1day.excess_return_with_cost.annualized_return": -0.0052386790092693,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.000177698347514,
        "1day.excess_return_without_cost.annualized_return": 0.0422922067083505,
        "1day.excess_return_with_cost.std": 0.0040028064727478,
        "Rank IC": 0.0167698198850229,
        "IC": 0.0028937949519936,
        "1day.excess_return_without_cost.max_drawdown": -0.0815595090149335,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.6850483649572428,
        "1day.pa": 0.0,
        "l2.valid": 0.9966089253136404,
        "Rank ICIR": 0.1258246245664526,
        "l2.train": 0.9942566898024968,
        "1day.excess_return_with_cost.information_ratio": -0.0848337600986199,
        "1day.excess_return_with_cost.mean": -2.201125634146796e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the Informed Liquidity Absorption (ILA) framework. The 'Informed_Liquidity_Absorption_20D' factor directly implemented the core hypothesis, while 'Cross_Sectional_Institutional_Validation' and 'Smoothed_Absorption_Momentum' explored cross-sectional ranking and EMA smoothing respectively. The combined results show an Information Ratio of 0.685 and an IC of 0.0029, which are positive but significantly underperform compared to the current SOTA (IR 0.972, IC 0.0058). The high maximum drawdown (-0.081) compared to SOTA (-0.072) suggests that the current construction of the 'Institutional Absorption Ratio' might be too volatile or sensitive to noise in the Z-score calculations.",
        "hypothesis_evaluation": "The results partially support the hypothesis that combining overnight gaps with volume-to-range efficiency captures alpha, as the metrics are positive. However, the performance gap relative to SOTA suggests that the 'Institutional Absorption Ratio' (Volume Z-score / True Range Z-score) may be mathematically unstable. Specifically, when the True Range Z-score is near zero, the factor value explodes, leading to noise. The 20-day window might also be too long, lagging behind the actual institutional accumulation phase.",
        "decision": false,
        "reason": "The current ILA factor uses a double Z-score ratio which is prone to extreme outliers and high complexity. By switching to a simpler 'Volume-weighted price movement' (e.g., (Close-Open)*Volume) normalized by the ATR or a simple range, we reduce the 'free parameters' and 'symbol length' issues inherent in nested Z-score functions. A 10-day window (instead of 20) is proposed to increase the factor's responsiveness to institutional 'footprints' which often manifest in short, intense bursts rather than month-long averages."
      },
      "cache_location": {
        "workspace_suffix": "exp_20260118_221528",
        "workspace_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221528",
        "factor_dir": "d8419214ef1345e5879b8c570f0593cb",
        "result_h5_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221528/d8419214ef1345e5879b8c570f0593cb/result.h5"
      }
    },
    "3d334e367a540374": {
      "factor_id": "3d334e367a540374",
      "factor_name": "IASE_Factor_20D",
      "factor_expression": "(($open - DELAY($close, 1)) / (DELAY($high, 1) - DELAY($low, 1) + 1e-8)) * TS_MEAN(TS_ZSCORE($volume, 20) / (TS_ZSCORE($high - $low, 20) + 1e-8), 20)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(($open - DELAY($close, 1)) / (DELAY($high, 1) - DELAY($low, 1) + 1e-8)) * TS_MEAN(TS_ZSCORE($volume, 20) / (TS_ZSCORE($high - $low, 20) + 1e-8), 20)\" # Your output factor expression will be filled in here\n    name = \"IASE_Factor_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "The Institutional Absorption of Sentiment Exhaustion (IASE) factor identifies mean-reversion signals by scaling the overnight price gap by an institutional absorption ratio. The ratio compares volume intensity to price range volatility, where high volume relative to range suggests institutional 'absorption' of the retail-driven gap.",
      "factor_formulation": "IASE = \\frac{open_t - close_{t-1}}{high_{t-1} - low_{t-1} + 1e-8} \\times \\text{TS\\_MEAN}\\left(\\frac{\\text{TS\\_ZSCORE}(volume, 20)}{\\text{TS\\_ZSCORE}(high - low, 20) + 1e-8}, 20\\right)",
      "metadata": {
        "experiment_id": "2026-01-18_14-15-29-053563",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "9c31ba95ec7b",
        "parent_trajectory_ids": [
          "2589556dccc8",
          "37b2c5626b11"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Absorption of Sentiment Exhaustion' (IASE) factor, calculated as the product of the 1-day Overnight Gap Ratio and the 20-day average Institutional Absorption Ratio (Volume Z-score / True Range Z-score), identifies high-conviction mean-reversion signals where retail sentiment gaps are validated by institutional liquidity support.\n                Concise Observation: Parent 1 captures sentiment-driven gaps but suffers from noise in low-liquidity environments, while Parent 2 identifies institutional presence but lacks a specific timing trigger; combining them addresses the 'fake-out' problem in gap reversals.\n                Concise Justification: Retail-driven gaps often overextend prices, but mean reversion requires institutional liquidity to absorb the imbalance; by scaling the gap magnitude by an institutional flow quality metric, we filter for reversals backed by significant capital commitment.\n                Concise Knowledge: If an overnight price gap is driven by retail sentiment, its reversal is more likely to be profitable when intraday volume efficiency is high and price volatility is low; when institutional absorption (high volume relative to range) confirms a price floor, the mean-reversion signal gains structural validity.\n                concise Specification: The factor is defined as: [($open - $close.shift(1)) / ($high.shift(1) - $low.shift(1))] * SMA((Volume_Z20 / TrueRange_Z20), 20), where Z-scores are calculated over a 20-day rolling window to normalize for instrument-specific volatility and liquidity levels.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T04:00:47.638939"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1036564340080007,
        "ICIR": 0.0496031398740759,
        "1day.excess_return_without_cost.std": 0.0038480566304433,
        "1day.excess_return_with_cost.annualized_return": 0.0071506813991791,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002294082899805,
        "1day.excess_return_without_cost.annualized_return": 0.0545991730153729,
        "1day.excess_return_with_cost.std": 0.0038496262352832,
        "Rank IC": 0.0215806630442247,
        "IC": 0.0065450968352714,
        "1day.excess_return_without_cost.max_drawdown": -0.0780394960801824,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.9197210605332532,
        "1day.pa": 0.0,
        "l2.valid": 0.9962665088498412,
        "Rank ICIR": 0.1673698450468315,
        "l2.train": 0.9932624777035652,
        "1day.excess_return_with_cost.information_ratio": 0.1204038528831899,
        "1day.excess_return_with_cost.mean": 3.0044879828483725e-05
      },
      "feedback": {
        "observations": "The current iteration focused on the 'Institutional Absorption of Sentiment Exhaustion' (IASE) framework. The results show a trade-off between return and risk-adjusted performance. The current best factor achieved a higher IC (0.006545 vs 0.005798) and a higher annualized return (0.054599 vs 0.052010) compared to the SOTA, but suffered from a higher maximum drawdown and a lower Information Ratio. This suggests that while the signal strength (IC) improved, the volatility of the excess returns also increased, potentially due to the sensitivity of the Z-score normalization in volatile regimes.",
        "hypothesis_evaluation": "The hypothesis that combining overnight gaps with an institutional absorption ratio (Volume/Range) identifies mean-reversion signals is supported by the improvement in IC and Annualized Return. However, the 'IASE_Factor_20D' implementation, which uses nested Z-scores and means, may be introducing noise. The 'Institutional_Gap_Reversal_V2' (IGR) approach of using cross-sectional ranks seems more robust for capturing the 'absorption' effect without being overly sensitive to outlier price ranges.",
        "decision": true,
        "reason": "The current results show that while the core concept is valid, the complexity of using double Z-scores (Volume Z-score / Range Z-score) might be too sensitive to days with extremely small price ranges (denominator risk). By shifting to a rank-based approach (as hinted in V2) and shortening the window for 'absorption' to 5 days, we can capture more immediate institutional reactions to sentiment gaps. Additionally, using a 10-day volatility scaler (like ATR or Standard Deviation) instead of a 20-day mean will help normalize the gap magnitude across different market regimes, improving the Information Ratio and reducing Drawdown."
      },
      "cache_location": {
        "workspace_suffix": "exp_20260118_221528",
        "workspace_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221528",
        "factor_dir": "c728a4b1c55748a18d012639c57b5b33",
        "result_h5_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221528/c728a4b1c55748a18d012639c57b5b33/result.h5"
      }
    },
    "44493e63c1664a11": {
      "factor_id": "44493e63c1664a11",
      "factor_name": "Gap_Reversion_Institutional_Conviction",
      "factor_expression": "TS_MEAN(ABS($open - DELAY($close, 1)) / ($close + 1e-8), 5) * ((MIN($open, $close) - $low) / ($high - $low + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_MEAN(ABS($open - DELAY($close, 1)) / ($close + 1e-8), 5) * ((MIN($open, $close) - $low) / ($high - $low + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"Gap_Reversion_Institutional_Conviction\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor measures the conviction of a reversal by looking at the ratio of the lower shadow to the total daily range, weighted by the 5-day average of the overnight gap. High values suggest that despite a gap, price was pushed back up significantly, indicating institutional support.",
      "factor_formulation": "\\text{TS_MEAN}\\left(\\frac{|\\text{open} - \\text{delay}(\\text{close}, 1)|}{\\text{delay}(\\text{close}, 1) + 1e-8}, 5\\right) * \\left(\\frac{\\min(\\text{open}, \\text{close}) - \\text{low}}{\\text{high} - \\text{low} + 1e-8}\\right)",
      "metadata": {
        "experiment_id": "2026-01-18_14-15-29-053563",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "5e035f26c88f",
        "parent_trajectory_ids": [
          "d160973b29d1",
          "3a4d3d97b0d5"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Liquidity-Gap Capture' factor, defined as the 5-day rolling mean of the product between the overnight-to-intraday volatility ratio and the volume-weighted lower shadow intensity, identifies high-probability mean-reversion opportunities where retail-driven price gaps are absorbed by institutional support.\n                Concise Observation: Parent 1 showed that overnight sentiment reversals carry alpha (RankIC 0.0226), while Parent 2 demonstrated that volume-validated price floors (lower shadows) identify institutional conviction (RankIC 0.0247).\n                Concise Justification: Combining the overnight gap anomaly with structural support metrics filters out weak-handed momentum trades, ensuring that mean-reversion signals are only executed when there is evidence of institutional 'floor-building' through price compression and volume absorption.\n                Concise Knowledge: If an overnight price gap occurs with low intraday volatility but high lower-shadow-to-volume ratios, it indicates institutional absorption of retail selling; when these conditions coincide, the short-term reversal probability increases as the liquidity gap is filled.\n                concise Specification: The factor is calculated by multiplying the 5-day moving average of (abs(Open - PrevClose) / (High - Low + eps)) by the 10-day Z-score of ((Low - min(Open, Close)) / Volume). It targets a 5-day lookback for sentiment and 10-day for structural volume validation.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T04:21:08.636221"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1311121097559886,
        "ICIR": 0.0388859289492544,
        "1day.excess_return_without_cost.std": 0.0045334402783585,
        "1day.excess_return_with_cost.annualized_return": -0.0024479468097223,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001884122715648,
        "1day.excess_return_without_cost.annualized_return": 0.0448421206324407,
        "1day.excess_return_with_cost.std": 0.0045346689125997,
        "Rank IC": 0.0257644619465009,
        "IC": 0.0059361915504061,
        "1day.excess_return_without_cost.max_drawdown": -0.1207126894231002,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.6411649383511376,
        "1day.pa": 0.0,
        "l2.valid": 0.9964824510699042,
        "Rank ICIR": 0.1680478646182159,
        "l2.train": 0.9939019235523752,
        "1day.excess_return_with_cost.information_ratio": -0.0349919314442293,
        "1day.excess_return_with_cost.mean": -1.0285490797152764e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Institutional Liquidity-Gap Capture' hypothesis. The current iteration achieved a higher Information Coefficient (IC: 0.0059 vs SOTA: 0.0058), indicating a stronger linear relationship between the factor and future returns. However, the risk-adjusted performance (Information Ratio: 0.64 vs 0.97) and annualized return (4.48% vs 5.20%) lagged behind the SOTA, while the Max Drawdown significantly worsened (-0.12 vs -0.07). This suggests that while the signal has predictive power, the current construction introduces significant volatility and tail risk.",
        "hypothesis_evaluation": "The hypothesis that overnight gaps combined with lower shadow intensity identify mean-reversion is partially supported by the positive IC. However, the 'Gap_Reversion_Institutional_Conviction' factor and its peers seem to suffer from noise. The interaction between the gap magnitude and the lower shadow (the 'floor') is a valid signal, but the current multiplicative forms might be amplifying outliers, leading to the observed increase in Max Drawdown.",
        "decision": false,
        "reason": "1. Complexity Control: The current factors use up to 5 raw features ($open, $close, $high, $low, $volume). Reducing reliance on $volume (which is often noisy) and focusing on price action ratios (Shadow/Range) will improve robustness. 2. Directionality: Using the absolute difference |open - delay(close, 1)| ignores whether the gap was up or down. Mean reversion is typically stronger after downward gaps (liquidity traps). 3. Stability: Replacing the 5-day mean of a product with a product of means, or a simple rank-based combination, may reduce the impact of single-day price spikes that currently degrade the Information Ratio."
      },
      "cache_location": {
        "workspace_suffix": "exp_20260118_221528",
        "workspace_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221528",
        "factor_dir": "69c45a9c4dfc4b179344301830f5c3f9",
        "result_h5_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221528/69c45a9c4dfc4b179344301830f5c3f9/result.h5"
      }
    },
    "b72d2cede760bccc": {
      "factor_id": "b72d2cede760bccc",
      "factor_name": "Gated_Institutional_Exhaustion_V1",
      "factor_expression": "RANK(TS_CORR($return, $volume, 20) - TS_CORR($return, $volume, 5)) * ZSCORE(($open - DELAY($close, 1)) / (DELAY($close, 1) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(TS_CORR(TS_PCTCHANGE($close, 1), $volume, 20) - TS_CORR(TS_PCTCHANGE($close, 1), $volume, 5)) * ZSCORE(($open - DELAY($close, 1)) / DELAY($close, 1)) * (TS_MEAN(TS_PCTCHANGE($close, 1), 10) > 0 ? 1 : -1)\" # Your output factor expression will be filled in here\n    name = \"Gated_Institutional_Exhaustion_V1\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "Captures the 'liquidity vacuum' effect by measuring the divergence between long-term and short-term price-volume synergy. It scales the overnight gap by the magnitude of correlation decay. It includes a trend filter (TS_MEAN of returns) to focus on reversals within an established context.",
      "factor_formulation": "\\text{GIE} = \\text{RANK}(\\text{TS\\_CORR}(r, v, 20) - \\text{TS\\_CORR}(r, v, 5)) \\times \\text{ZSCORE}(\\frac{\\text{open} - \\text{delay}(\\text{close}, 1)}{\\text{delay}(\\text{close}, 1)})",
      "metadata": {
        "experiment_id": "2026-01-18_14-14-43-683963",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "9e8db3224de7",
        "parent_trajectory_ids": [
          "612e4ce1768f",
          "411e26730cb8"
        ],
        "hypothesis": "Hypothesis: The 'Exhaustion-Gated Gap Reversal' factor predicts that overnight price gaps are most likely to mean-revert when they occur following a significant breakdown in the 5-day price-volume correlation relative to a 20-day baseline, indicating institutional distribution.\n                Concise Observation: Parent 1 (SPVD) captures trend fragility through price-volume decoupling (RankIC 0.0248), while Parent 2 identifies mean-reversion opportunities in overnight gaps (RankIC 0.0281); combining them addresses the risk of trading 'healthy' gaps that are actually supported by volume.\n                Concise Justification: By multiplying the Z-score of the price-volume correlation decay with the volatility-normalized overnight gap, we isolate gaps that lack 'smart money' conviction, thereby filtering out momentum-driven gaps and focusing on structural reversals.\n                Concise Knowledge: If price-volume correlation decays rapidly, it signals a loss of institutional support; when this exhaustion is followed by an overnight gap that is large relative to recent volatility, the gap is likely a 'liquidity vacuum' rather than a trend continuation, leading to a high-probability mean-reversion.\n                concise Specification: Define the factor as the product of (1) the 20-day minus 5-day rolling correlation of daily returns and volume, and (2) the overnight gap (open/prev_close - 1) divided by the 20-day ATR or standard deviation, applied only when the 60-day trend is positive to capture exhaustion-based reversals.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T06:27:14.102358"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1067595148514479,
        "ICIR": 0.0254315611480566,
        "1day.excess_return_without_cost.std": 0.0043092383908834,
        "1day.excess_return_with_cost.annualized_return": 0.0022343971994566,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002078027891669,
        "1day.excess_return_without_cost.annualized_return": 0.0494570638217226,
        "1day.excess_return_with_cost.std": 0.0043101142340454,
        "Rank IC": 0.0189665739114091,
        "IC": 0.0034520412222043,
        "1day.excess_return_without_cost.max_drawdown": -0.0990680156898383,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7439424329138893,
        "1day.pa": 0.0,
        "l2.valid": 0.9965268148998112,
        "Rank ICIR": 0.1404646343661629,
        "l2.train": 0.994614299569658,
        "1day.excess_return_with_cost.information_ratio": 0.0336033920665473,
        "1day.excess_return_with_cost.mean": 9.388223527128956e-06
      },
      "feedback": {
        "observations": "The experiment evaluated three variations of the 'Exhaustion-Gated Gap Reversal' hypothesis. The current results, represented by the 'Trend_Filtered_Gap_Decoupling' and its counterparts, show a deterioration across all key performance metrics compared to the SOTA result. Specifically, the Information Ratio dropped from 0.97 to 0.74, and the IC decreased from 0.0058 to 0.0034. The Max Drawdown also worsened significantly. While the core logic of using price-volume decoupling to gate gap reversals remains theoretically sound, the current mathematical implementations (scaling the gap by the difference in correlations) appear to produce a noisy signal that lacks the predictive power of the previous SOTA.",
        "hypothesis_evaluation": "The hypothesis that a breakdown in price-volume correlation (institutional distribution) acts as a reliable gate for gap reversals is partially supported in theory but poorly captured by the current linear differencing of correlations (TS_CORR(20) - TS_CORR(5)). The results suggest that simply subtracting these correlations might not sufficiently isolate 'exhaustion' and instead might be introducing noise from short-term volatility. The deterioration in IC suggests the interaction between the 'gate' and the 'gap' needs a more robust non-linear or conditional structure.",
        "decision": false,
        "reason": "The current approach uses the difference in correlation, which can be unstable. A more robust measure of 'institutional exhaustion' or 'liquidity vacuum' is the decoupling of volume energy from price movement. By using the ratio of Volume Volatility (e.g., TS_STD(volume, 5)) to Price Volatility (e.g., TS_STD(returns, 5)), we can identify periods where high activity fails to move prices efficiently. Gating the overnight gap with this ratio, rather than a simple correlation difference, should provide a cleaner signal. Additionally, standardizing the gap by ATR (Average True Range) instead of a simple standard deviation may better account for varying market regimes."
      },
      "cache_location": null
    },
    "021e9e098534a67a": {
      "factor_id": "021e9e098534a67a",
      "factor_name": "LVSI_Conviction_Factor_20D",
      "factor_expression": "(($open / DELAY($close, 1) - 1) * TS_CORR($return, TS_PCTCHANGE($volume, 1), 20)) / (TS_MEAN(($high - $low) / ($volume + 1e-8), 5) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(($open / DELAY($close, 1) - 1) * TS_CORR(($close / DELAY($close, 1) - 1), TS_PCTCHANGE($volume, 1), 20)) / (TS_MEAN(($high - $low) / ($volume + 0.00000001), 5) + 0.00000001)\" # Your output factor expression will be filled in here\n    name = \"LVSI_Conviction_Factor_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "The Liquidity-Validated Structural Inflection (LVSI) factor identifies high-conviction breakthroughs by scaling the overnight gap and price-volume correlation by the inverse of the intraday fragility index. It penalizes price moves occurring on low liquidity density (high range relative to volume).",
      "factor_formulation": "LVSI = \\frac{((\\text{open} / \\text{delay}(\\text{close}, 1)) - 1) \\times \\text{TS_CORR}(\\text{return}, \\text{TS_PCTCHANGE}(\\text{volume}, 1), 20)}{\\text{TS_MEAN}((\\text{high} - \\text{low}) / (\\text{volume} + 1e-8), 5)}",
      "metadata": {
        "experiment_id": "2026-01-18_13-34-30-274463",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "43c26ab31ba8",
        "parent_trajectory_ids": [
          "f06010737e9d",
          "d4edaf8f4937"
        ],
        "hypothesis": "Hypothesis: The 'Liquidity-Validated Structural Inflection' (LVSI) factor, calculated as the product of the overnight gap and the 20-day price-volume correlation, scaled inversely by the 5-day average of the High-Low range relative to volume, predicts returns by distinguishing between high-conviction breakthroughs and liquidity-exhaustion traps.\n                Concise Observation: Parent 1's fragility index identifies liquidity voids (high range/low volume), while Parent 2's conviction gap captures momentum; combining them addresses the failure of momentum signals during 'hollow' price moves that lack sufficient trading depth to sustain a trend.\n                Concise Justification: The fusion uses the Intraday Fragility Index as a denominator to penalize momentum signals that occur with low liquidity density, ensuring that only 'efficient' price moves—where high volume supports price change without excessive volatility—are flagged as high-conviction signals.\n                Concise Knowledge: If a price gap is supported by high price-volume correlation but occurs within a regime of high volume density (low range-to-volume ratio), the trend is likely to persist; conversely, gaps occurring during 'fragile' liquidity regimes with high price dispersion relative to volume are prone to mean-reversion.\n                concise Specification: Define Gap as (Open/Close[t-1] - 1); Conviction as 20-day correlation(Returns, Volume Change); Fragility as 5-day SMA((High-Low)/Volume); Factor = (Gap * Conviction) / Fragility. This targets a 1-day to 5-day prediction horizon using daily price-volume data.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T05:39:07.351715"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1000451079193583,
        "ICIR": 0.0327376657975628,
        "1day.excess_return_without_cost.std": 0.0041949703958238,
        "1day.excess_return_with_cost.annualized_return": 0.0071754298176192,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002282012704333,
        "1day.excess_return_without_cost.annualized_return": 0.0543119023631302,
        "1day.excess_return_with_cost.std": 0.0041956504849266,
        "Rank IC": 0.0205376640987484,
        "IC": 0.0044636026454102,
        "1day.excess_return_without_cost.max_drawdown": -0.0898837203167415,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.8392234991700986,
        "1day.pa": 0.0,
        "l2.valid": 0.9965333194299664,
        "Rank ICIR": 0.1563047390318681,
        "l2.train": 0.9945621472086958,
        "1day.excess_return_with_cost.information_ratio": 0.1108562389211833,
        "1day.excess_return_with_cost.mean": 3.014886477991294e-05
      },
      "feedback": {
        "observations": "The experiment evaluated two variations of the 'Liquidity-Validated Structural Inflection' (LVSI) hypothesis. The current iteration achieved a higher annualized return (5.43% vs 5.20%) compared to the SOTA, although it showed a slight deterioration in Information Ratio (0.839 vs 0.972) and IC (0.0044 vs 0.0057). The results suggest that while the core idea of scaling price momentum by liquidity density is effective for capturing returns, the current implementation introduces higher volatility or drawdown, as seen in the increased max drawdown (-0.089 vs -0.072).",
        "hypothesis_evaluation": "The hypothesis that distinguishing breakthroughs from exhaustion traps via price-volume synergy is supported by the positive annualized return. However, the 'fragility index' (High-Low/Volume) appears to be highly sensitive. The current implementation of the overnight gap as a raw multiplier might be adding noise; the Z_LVSI_Efficiency_Rank's approach of using the sign of the gap suggests that the direction of the gap is more important than its magnitude when validating structural inflections.",
        "decision": true,
        "reason": "The current results show a drop in Information Ratio, suggesting the signal is inconsistent. By using a 3-day gap momentum instead of a 1-day gap, we reduce the impact of overnight noise. Furthermore, replacing the Pearson correlation (TS_CORR) with a volume-weighted measure specifically targets the 'conviction' aspect of the hypothesis more directly, while reducing the look-back from 20 to 10 days may capture structural shifts faster, potentially improving the IC and IR."
      },
      "cache_location": null
    },
    "8367e5692e56f9d3": {
      "factor_id": "8367e5692e56f9d3",
      "factor_name": "Institutional_Gap_Conviction_20D",
      "factor_expression": "RANK((($open / DELAY($close, 1)) - 1) * TS_CORR($return, $volume, 20))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK((($open / DELAY($close, 1)) - 1) * TS_CORR(TS_PCTCHANGE($close, 1), $volume, 20))\" # Your output factor expression will be filled in here\n    name = \"Institutional_Gap_Conviction_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor isolates the 'Conviction' phase of the hypothesis. It calculates the product of the overnight price gap and the 20-day correlation between returns and volume, identifying stocks where institutional players are driving price through gaps supported by volume-price synergy.",
      "factor_formulation": "Rank((\\frac{open}{delay(close, 1)} - 1) \\times TS\\_CORR(return, volume, 20))",
      "metadata": {
        "experiment_id": "2026-01-18_13-34-30-274463",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "59b0dff7176c",
        "parent_trajectory_ids": [
          "22145381325f",
          "a452d2c1c177"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Stealth-Conviction Fusion' factor, calculated as the product of the 10-day average intraday price efficiency (VWAP-to-Close ratio divided by intraday range) and the 20-day return-volume correlation scaled by the overnight gap, identifies superior risk-adjusted returns by capturing the transition from quiet accumulation to overt institutional momentum.\n                Concise Observation: Parent 1 (RankIC 0.023) captures low-noise accumulation through intraday structure, while Parent 2 (RankIC 0.029) identifies institutional conviction via overnight gaps and return-volume correlation; both capture different phases of the institutional trade cycle.\n                Concise Justification: Combining intraday efficiency (Parent 1) with inter-day conviction (Parent 2) filters out speculative gaps (noise) by requiring a prior state of 'quiet accumulation,' ensuring the factor only triggers when 'Smart Money' transitions from building a position to driving a trend.\n                Concise Knowledge: If a stock exhibits high intraday price efficiency with low volatility (stealth accumulation) followed by a high-conviction overnight gap that aligns with return-volume synergy, then the resulting momentum is more persistent than signals derived from price gaps or volume spikes alone.\n                concise Specification: The factor is defined as: Rank(Mean((Close - Open) / (High - Low), 10)) * Rank(((Close / Delay(Close, 1)) - 1 - (Close / Open - 1)) * Correlation(Return, Volume_Change, 20)). It uses a 10-day window for accumulation and a 20-day window for conviction correlation.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T05:53:57.508799"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.094379469257435,
        "ICIR": 0.057423571875225,
        "1day.excess_return_without_cost.std": 0.0042460316862205,
        "1day.excess_return_with_cost.annualized_return": 0.0143517930831041,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002594860349479,
        "1day.excess_return_without_cost.annualized_return": 0.0617576763176081,
        "1day.excess_return_with_cost.std": 0.0042473536201055,
        "Rank IC": 0.0252251661818718,
        "IC": 0.008068681908638,
        "1day.excess_return_without_cost.max_drawdown": -0.0741089242261757,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.94279927012592,
        "1day.pa": 0.0,
        "l2.valid": 0.9964186220181058,
        "Rank ICIR": 0.1907819922970675,
        "l2.train": 0.9934815968097204,
        "1day.excess_return_with_cost.information_ratio": 0.2190278123319337,
        "1day.excess_return_with_cost.mean": 6.030165160968145e-05
      },
      "feedback": {
        "observations": "The experiment tested the 'Institutional Stealth-Conviction Fusion' hypothesis by breaking it down into its composite parts and a combined version. The combined factor 'Institutional_Stealth_Conviction_Fusion' achieved a higher IC (0.008069 vs 0.005798) and a higher Annualized Return (0.061758 vs 0.052010) compared to the previous SOTA. However, the Information Ratio and Max Drawdown slightly deteriorated, suggesting that while the predictive power (IC) and absolute returns increased, the volatility of the excess returns also rose. The complexity of the fusion factor is moderate but manageable, though the use of multiple 'Rank' and 'TS_CORR' operations across different windows (10D and 20D) adds structural depth.",
        "hypothesis_evaluation": "The results support the hypothesis that combining intraday efficiency (stealth) with inter-day conviction (gaps and volume correlation) captures superior returns. The significant jump in IC indicates that the interaction between 'clean' price movement and volume-backed gaps is a strong predictor. The lower Information Ratio compared to SOTA suggests that the 'Conviction' component (overnight gaps) might be introducing higher idiosyncratic risk or noise that needs better filtering.",
        "decision": true,
        "reason": "The current 'Institutional_Stealth_Conviction_Fusion' uses a simple (Close-Open)/(High-Low) ratio which can be noisy in low-volatility regimes. By normalizing the intraday progress by the ATR or a rolling standard deviation, and ensuring the overnight gap is significant relative to recent volume (Volume-Weighted Gap), we aim to improve the Information Ratio. Additionally, keeping the window sizes consistent (e.g., both at 15 days) may reduce the complexity of the temporal interactions."
      },
      "cache_location": null
    },
    "f08d468527e46b3b": {
      "factor_id": "f08d468527e46b3b",
      "factor_name": "Conviction_Filtered_Gap_Factor_10D",
      "factor_expression": "(($open - DELAY($close, 1)) / (TS_STD($close, 20) + 1e-8)) * (( (DELAY($high - $low, 1) / (DELAY($close, 1) + 1e-8)) * TS_ZSCORE(DELAY($volume, 1), 20) ) > TS_MEDIAN( (DELAY($high - $low, 1) / (DELAY($close, 1) + 1e-8)) * TS_ZSCORE(DELAY($volume, 1), 20), 10 ) ? 1 : -1)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(($open - DELAY($close, 1)) / (TS_STD($close, 20) + 1e-8)) * (( (DELAY($high - $low, 1) / (DELAY($close, 1) + 1e-8)) * TS_ZSCORE(DELAY($volume, 1), 20) ) > TS_MEDIAN( (DELAY($high - $low, 1) / (DELAY($close, 1) + 1e-8)) * TS_ZSCORE(DELAY($volume, 1), 20), 10 ) ? 1 : -1)\" # Your output factor expression will be filled in here\n    name = \"Conviction_Filtered_Gap_Factor_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor implements the Conviction-Filtered Gap hypothesis. It calculates the overnight gap normalized by volatility and filters it based on the prior day's closing intensity (IVC). If the prior day's price-volume intensity is high (above its 10-day median), the gap is expected to persist (momentum); otherwise, it is expected to mean-revert (reversal).",
      "factor_formulation": "\\text{Gap} = \\frac{\\text{open} - \\text{delay}(\\text{close}, 1)}{\\text{TS_STD}(\\text{close}, 20)}, \\text{IVC} = \\frac{\\text{delay}(\\text{high} - \\text{low}, 1)}{\\text{delay}(\\text{close}, 1)} \\times \\text{TS_ZSCORE}(\\text{delay}(\\text{volume}, 1), 20), \\text{Factor} = (\\text{IVC} > \\text{TS_MEDIAN}(\\text{IVC}, 10)) ? \\text{Gap} : -\\text{Gap}",
      "metadata": {
        "experiment_id": "2026-01-18_14-14-43-683963",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "2ab6e13d675c",
        "parent_trajectory_ids": [
          "00a780111b41",
          "411e26730cb8"
        ],
        "hypothesis": "Hypothesis: The Conviction-Filtered Gap Factor (CFGF) predicts that overnight price gaps mean-revert when they lack prior-day intraday volatility concentration, but continue in the gap direction when the prior day's final hour shows high price-volume intensity aligned with the gap.\n                Concise Observation: Parent 2's reversal logic (RankIC=0.028) performs well on average, but Parent 1 (RankIC=0.023) suggests that late-day volume and price range concentration can identify 'informed' price moves that resist mean-reversion.\n                Concise Justification: By using the prior day's closing intensity as a regime filter, we can distinguish between 'exhaustion gaps' (low late-day intensity) which revert, and 'breakout gaps' (high late-day intensity) which trend, thereby reducing the false signals inherent in static reversal strategies.\n                Concise Knowledge: If an overnight price gap is preceded by high intraday volatility concentration (IVC) in the same direction, it likely represents institutional flow and will persist; if the gap occurs without such late-day conviction, it likely represents noise or liquidity imbalances and will mean-revert.\n                concise Specification: Define IVC as the ratio of the last hour's (High-Low)/Close multiplied by volume z-score; define the Gap as (Open - Prev_Close) normalized by 20-day ATR. The factor is calculated as the Gap multiplied by -1 if IVC is below its 10-day median, and multiplied by +1 if IVC is above its 10-day median.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T06:38:35.217877"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1404119887611172,
        "ICIR": 0.0374769188122441,
        "1day.excess_return_without_cost.std": 0.0043888159873289,
        "1day.excess_return_with_cost.annualized_return": -0.0170587559459222,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001263967318259,
        "1day.excess_return_without_cost.annualized_return": 0.030082422174567,
        "1day.excess_return_with_cost.std": 0.0043899177563109,
        "Rank IC": 0.0217300560399937,
        "IC": 0.0051487212514944,
        "1day.excess_return_without_cost.max_drawdown": -0.0961605370603185,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.444300652461164,
        "1day.pa": 0.0,
        "l2.valid": 0.996670208341131,
        "Rank ICIR": 0.1642381024992195,
        "l2.train": 0.9942984786234278,
        "1day.excess_return_with_cost.information_ratio": -0.2518851089503491,
        "1day.excess_return_with_cost.mean": -7.167544515093401e-05
      },
      "feedback": {
        "observations": "The experimental results for the Conviction-Filtered Gap Factor (CFGF) framework show that while the theoretical concept of using prior-day intensity to filter overnight gaps is promising, the current implementations underperform compared to the SOTA. The Information Ratio (0.444) and Annualized Return (0.030) are significantly lower than the SOTA benchmarks (0.972 and 0.052 respectively). The IC of 0.0051 also lags behind the SOTA's 0.0058, suggesting that the conditional logic (switching between momentum and reversal) may be introducing noise or misidentifying the 'conviction' threshold.",
        "hypothesis_evaluation": "The hypothesis that overnight gaps mean-revert without conviction but persist with it is partially supported by the positive IC, but the implementation is likely too binary. The 'Conviction_Filtered_Gap_Factor_10D' uses a 10-day median which might be too short and volatile, leading to frequent signal flipping. The 'Informed_Gap_Persistence_Factor' uses cross-sectional RANK for intensity, which is a better approach for normalization but may still fail if the 'informed' threshold (0.5) is not optimized for different market regimes.",
        "decision": false,
        "reason": "Current factors use raw volume or simple Z-scores which can be skewed by outliers. By using ATR for gap normalization, we account for broader volatility regimes. Furthermore, replacing the binary 'Intensity > 0.5' filter with a continuous weighting function or a more stringent 'High-Conviction' threshold (e.g., top 20% of volume-price product) may reduce the noise from 'ambiguous' days where the gap behavior is unpredictable."
      },
      "cache_location": {
        "workspace_suffix": "exp_20260118_221443",
        "workspace_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221443",
        "factor_dir": "01c35f0dc94145839d2e2c585fc4014d",
        "result_h5_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221443/01c35f0dc94145839d2e2c585fc4014d/result.h5"
      }
    },
    "108f41f10801c4bd": {
      "factor_id": "108f41f10801c4bd",
      "factor_name": "Trend_Filtered_Gap_Decoupling",
      "factor_expression": "(TS_CORR($return, $volume, 20) - TS_CORR($return, $volume, 5)) * TS_ZSCORE(($open / DELAY($close, 1) - 1), 20)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(TS_CORR(TS_PCTCHANGE($close, 1), $volume, 20) - TS_CORR(TS_PCTCHANGE($close, 1), $volume, 5)) * TS_ZSCORE(($open / DELAY($close, 1) - 1), 20)\" # Your output factor expression will be filled in here\n    name = \"Trend_Filtered_Gap_Decoupling\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor targets mean-reversion of overnight gaps specifically when the 5-day price-volume correlation is significantly lower than its 20-day average, indicating a loss of conviction. The expression is simplified to focus on the interaction between decoupling and the standardized gap.",
      "factor_formulation": "\\text{TFGD} = (\\text{TS\\_CORR}(r, v, 20) - TS\\_CORR(r, v, 5)) * \\text{TS\\_ZSCORE}(\\text{open}/\\text{delay}(\\text{close}, 1) - 1, 20)",
      "metadata": {
        "experiment_id": "2026-01-18_14-14-43-683963",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "9e8db3224de7",
        "parent_trajectory_ids": [
          "612e4ce1768f",
          "411e26730cb8"
        ],
        "hypothesis": "Hypothesis: The 'Exhaustion-Gated Gap Reversal' factor predicts that overnight price gaps are most likely to mean-revert when they occur following a significant breakdown in the 5-day price-volume correlation relative to a 20-day baseline, indicating institutional distribution.\n                Concise Observation: Parent 1 (SPVD) captures trend fragility through price-volume decoupling (RankIC 0.0248), while Parent 2 identifies mean-reversion opportunities in overnight gaps (RankIC 0.0281); combining them addresses the risk of trading 'healthy' gaps that are actually supported by volume.\n                Concise Justification: By multiplying the Z-score of the price-volume correlation decay with the volatility-normalized overnight gap, we isolate gaps that lack 'smart money' conviction, thereby filtering out momentum-driven gaps and focusing on structural reversals.\n                Concise Knowledge: If price-volume correlation decays rapidly, it signals a loss of institutional support; when this exhaustion is followed by an overnight gap that is large relative to recent volatility, the gap is likely a 'liquidity vacuum' rather than a trend continuation, leading to a high-probability mean-reversion.\n                concise Specification: Define the factor as the product of (1) the 20-day minus 5-day rolling correlation of daily returns and volume, and (2) the overnight gap (open/prev_close - 1) divided by the 20-day ATR or standard deviation, applied only when the 60-day trend is positive to capture exhaustion-based reversals.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T06:27:14.102358"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1067595148514479,
        "ICIR": 0.0254315611480566,
        "1day.excess_return_without_cost.std": 0.0043092383908834,
        "1day.excess_return_with_cost.annualized_return": 0.0022343971994566,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002078027891669,
        "1day.excess_return_without_cost.annualized_return": 0.0494570638217226,
        "1day.excess_return_with_cost.std": 0.0043101142340454,
        "Rank IC": 0.0189665739114091,
        "IC": 0.0034520412222043,
        "1day.excess_return_without_cost.max_drawdown": -0.0990680156898383,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7439424329138893,
        "1day.pa": 0.0,
        "l2.valid": 0.9965268148998112,
        "Rank ICIR": 0.1404646343661629,
        "l2.train": 0.994614299569658,
        "1day.excess_return_with_cost.information_ratio": 0.0336033920665473,
        "1day.excess_return_with_cost.mean": 9.388223527128956e-06
      },
      "feedback": {
        "observations": "The experiment evaluated three variations of the 'Exhaustion-Gated Gap Reversal' hypothesis. The current results, represented by the 'Trend_Filtered_Gap_Decoupling' and its counterparts, show a deterioration across all key performance metrics compared to the SOTA result. Specifically, the Information Ratio dropped from 0.97 to 0.74, and the IC decreased from 0.0058 to 0.0034. The Max Drawdown also worsened significantly. While the core logic of using price-volume decoupling to gate gap reversals remains theoretically sound, the current mathematical implementations (scaling the gap by the difference in correlations) appear to produce a noisy signal that lacks the predictive power of the previous SOTA.",
        "hypothesis_evaluation": "The hypothesis that a breakdown in price-volume correlation (institutional distribution) acts as a reliable gate for gap reversals is partially supported in theory but poorly captured by the current linear differencing of correlations (TS_CORR(20) - TS_CORR(5)). The results suggest that simply subtracting these correlations might not sufficiently isolate 'exhaustion' and instead might be introducing noise from short-term volatility. The deterioration in IC suggests the interaction between the 'gate' and the 'gap' needs a more robust non-linear or conditional structure.",
        "decision": false,
        "reason": "The current approach uses the difference in correlation, which can be unstable. A more robust measure of 'institutional exhaustion' or 'liquidity vacuum' is the decoupling of volume energy from price movement. By using the ratio of Volume Volatility (e.g., TS_STD(volume, 5)) to Price Volatility (e.g., TS_STD(returns, 5)), we can identify periods where high activity fails to move prices efficiently. Gating the overnight gap with this ratio, rather than a simple correlation difference, should provide a cleaner signal. Additionally, standardizing the gap by ATR (Average True Range) instead of a simple standard deviation may better account for varying market regimes."
      },
      "cache_location": null
    },
    "3dac5b630f5cf810": {
      "factor_id": "3dac5b630f5cf810",
      "factor_name": "VFIA_Support_Absorption_5D",
      "factor_expression": "(TS_CORR($volume, ($high - $low) / ($close + 1e-8), 20) * TS_MEAN(($close - MIN($open, $close)) / ($high - $low + 1e-8), 5)) * (TS_STD($return, 5) / (MEDIAN(TS_STD($return, 5)) + 1e-8))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"(TS_CORR($volume, ($high - $low) / $close, 20) * TS_MEAN(($close - ($open < $close ? $open : $close)) / ($high - $low + 1e-8), 5)) * (TS_STD(TS_PCTCHANGE($close, 1), 5) / (MEDIAN(TS_STD(TS_PCTCHANGE($close, 1), 5)) + 1e-8))\" # Your output factor expression will be filled in here\n    name = \"VFIA_Support_Absorption_5D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "The Volatility-Filtered Institutional Absorption (VFIA) factor identifies mean-reversion entries by combining volume-volatility correlation (weighted by lower shadow persistence) with idiosyncratic volatility relative to the cross-section. High values suggest institutional absorption of selling pressure during periods of high idiosyncratic stress.",
      "factor_formulation": "\\text{VFIA} = \\left( \\text{TS\\_CORR}\\left(\\$volume, \\frac{\\$high-\\$low}{\\$close}, 20\\right) \\times \\text{TS\\_MEAN}\\left(\\frac{\\$close-\\text{MIN}(\\$open,\\$close)}{\\$high-\\$low+1e-8}, 5\\right) \\right) \\times \\frac{\\text{TS\\_STD}(\\$return, 5)}{\\text{MEDIAN}(\\text{TS\\_STD}(\\$return, 5))}",
      "metadata": {
        "experiment_id": "2026-01-18_14-15-29-053563",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "9999071d117a",
        "parent_trajectory_ids": [
          "3ebab6ae1f71",
          "227295256adc"
        ],
        "hypothesis": "Hypothesis: The Volatility-Filtered Institutional Absorption (VFIA) factor, defined as the product of a stock's 20-day volume-volatility correlation (weighted by lower-shadow persistence) and its 5-day idiosyncratic volatility relative to the cross-sectional median, identifies high-probability mean-reversion entries where institutional support stabilizes price extremes.\n                Concise Observation: Parent 1 (SAIVP) captures statistical volatility extremes but lacks price-level validation, while Parent 2 (Institutional Floor) identifies support but may fail in high-volatility regimes; combining them targets structural support during idiosyncratic stress.\n                Concise Justification: By multiplying relative volatility (Parent 1) with an institutional support metric (Parent 2), the factor amplifies signals where high-risk volatility is met with structural buying, effectively filtering out 'falling knives' that lack volume-supported floors.\n                Concise Knowledge: If a stock's idiosyncratic volatility is significantly higher than the sector median, it indicates a potential mean-reversion exhaustion point; when this exhaustion coincides with high volume-volatility decoupling and persistent lower shadows, it confirms institutional absorption of selling pressure.\n                concise Specification: The factor is the product of: (A) the 20-day rolling correlation between $volume and ($high-$low)/$close, weighted by the 5-day mean of ($close-min($open,$close))/($high-$low), and (B) the ratio of the 5-day return standard deviation to the cross-sectional median 5-day return standard deviation.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T04:29:14.677016"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1858775601898822,
        "ICIR": 0.0236063747617564,
        "1day.excess_return_without_cost.std": 0.0045721077149085,
        "1day.excess_return_with_cost.annualized_return": 0.0040416412160896,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002160879771814,
        "1day.excess_return_without_cost.annualized_return": 0.0514289385691944,
        "1day.excess_return_with_cost.std": 0.0045733430096016,
        "Rank IC": 0.017729868575436,
        "IC": 0.0031821390646401,
        "1day.excess_return_without_cost.max_drawdown": -0.1305204663734378,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7291260739589596,
        "1day.pa": 0.0,
        "l2.valid": 0.9964934268514436,
        "Rank ICIR": 0.1332252037154444,
        "l2.train": 0.9939211205304712,
        "1day.excess_return_with_cost.information_ratio": 0.0572842859158173,
        "1day.excess_return_with_cost.mean": 1.698168578188949e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the Volatility-Filtered Institutional Absorption (VFIA) hypothesis. The primary factor, 'VFIA_Support_Absorption_5D', attempted to capture the interaction between volume-volatility correlation, lower shadow persistence, and idiosyncratic risk. However, the current results (IC 0.0032, IR 0.729) underperform compared to the SOTA (IC 0.0058, IR 0.972). The 'Institutional_Floor_Intensity_10D' and 'Vol_Volume_Decoupling_Rank' factors simplified the logic but did not surpass the benchmark. The high drawdown (-0.1305 vs -0.0725) suggests that the current construction of 'absorption' might be catching falling knives rather than stabilized entries.",
        "hypothesis_evaluation": "The hypothesis that institutional absorption can be identified via volume-volatility correlation weighted by lower shadows is partially supported but lacks precision. The current formulation of VFIA_Support_Absorption_5D uses 6 base features ($open, $close, $high, $low, $volume, $return), reaching the upper limit of the recommended feature count (ER). The complexity of multiplying three distinct components (correlation, mean shadow, and relative volatility) likely introduces noise and reduces the information ratio compared to the SOTA.",
        "decision": false,
        "reason": "The current VFIA factor is approaching the complexity limit. By simplifying the 'absorption' signal to a ratio of volume to price range (High-Low) during days of negative returns, we can isolate where high liquidity is provided to halt price declines. Reducing the base features and focusing on a 10-day window for both volume and price stability should improve the signal-to-noise ratio and reduce the drawdown observed in the current iteration."
      },
      "cache_location": null
    },
    "b4588111943a558d": {
      "factor_id": "b4588111943a558d",
      "factor_name": "Simplified_IAD_Breakout_Factor",
      "factor_expression": "RANK(TS_STD($return, 20) / (ABS(TS_CORR($return, MEAN($return), 20)) + 0.01)) * TS_CORR($return, $volume, 10) * TS_RANK($low, 20)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(TS_STD(TS_PCTCHANGE($close, 1), 20) / (ABS(TS_CORR(TS_PCTCHANGE($close, 1), MEAN(TS_PCTCHANGE($close, 1)), 20)) + 0.01)) * TS_CORR(TS_PCTCHANGE($close, 1), $volume, 10) * TS_RANK($low, 20)\" # Your output factor expression will be filled in here\n    name = \"Simplified_IAD_Breakout_Factor\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A simplified version of the IEM factor focusing on the interaction between idiosyncratic risk and liquidity validation. It uses the ratio of return volatility to market-wide return correlation, scaled by the price-volume trend and a support-level filter.",
      "factor_formulation": "SIAD = RANK(TS\\_STD(return, 20) / (ABS(TS\\_CORR(return, MEAN(return), 20)) + 0.01)) * TS\\_CORR(return, volume, 10) * TS\\_RANK(low, 20)",
      "metadata": {
        "experiment_id": "2026-01-18_21-40-12-932281",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "7d7e4863f0d1",
        "parent_trajectory_ids": [
          "b40908e50d0b",
          "e1a555864ea8"
        ],
        "hypothesis": "Hypothesis: The Informed Efficiency Multiplier (IEM) factor, which combines the ratio of 20-day idiosyncratic volatility to market correlation with the 10-day price-volume correlation and a structural support floor, identifies high-conviction institutional trends by filtering information-driven price drifts through liquidity-validated breakout signals.\n                Concise Observation: Parent 1 successfully captured informed drifts (RankIC 0.0268) but suffered from volatility noise, while Parent 2 identified quality breakouts (RankIC 0.0236) but lacked a filter for information asymmetry; combining them targets stocks where 'effortless' price movement aligns with unique information.\n                Concise Justification: By multiplying the Information Asymmetry Decay ratio with price-volume coordination and anchoring it to a 20-day structural low percentile, the factor ensures that idiosyncratic alpha is only harvested when supported by efficient liquidity and price stability.\n                Concise Knowledge: If a stock exhibits high idiosyncratic volatility relative to market correlation while maintaining high price-volume efficiency near structural support, it indicates informed institutional accumulation; when these conditions coincide, the resulting price trend is more persistent and less prone to speculative reversals.\n                concise Specification: Define IAD as (Std(Residuals, 20) / Corr(Asset, Market, 20)); define Efficiency as Corr(Close, Volume, 10); define Support as Percentile(Low/Open, 20, 0.95); the final factor is IAD * Efficiency * Support, calculated daily per instrument.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T14:18:05.970525"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1576714810929428,
        "ICIR": 0.0705464649535498,
        "1day.excess_return_without_cost.std": 0.0050185936199742,
        "1day.excess_return_with_cost.annualized_return": 0.0088938295136385,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002370137250818,
        "1day.excess_return_without_cost.annualized_return": 0.0564092665694759,
        "1day.excess_return_with_cost.std": 0.005020271203024,
        "Rank IC": 0.0311116428387593,
        "IC": 0.0112960177889078,
        "1day.excess_return_without_cost.max_drawdown": -0.1299395488001697,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.7285845278974563,
        "1day.pa": 0.0,
        "l2.valid": 0.9965206118613202,
        "Rank ICIR": 0.2028142197799375,
        "l2.train": 0.9936341907341188,
        "1day.excess_return_with_cost.information_ratio": 0.1148347006413909,
        "1day.excess_return_with_cost.mean": 3.736903156990977e-05
      },
      "feedback": {
        "observations": "The current experiment demonstrates a significant improvement in Information Coefficient (IC) and Annualized Return compared to the previous SOTA, although the Information Ratio (IR) and Max Drawdown (MDD) have deteriorated. The 'Informed_Efficiency_Multiplier_V1' and its variants successfully capture predictive signals, as evidenced by the IC doubling from 0.0058 to 0.0113. However, the increased drawdown suggests that while the signal is more predictive on average, it introduces higher volatility or tail risk, possibly due to the interaction between the idiosyncratic volatility ratio and the price-volume correlation component.",
        "hypothesis_evaluation": "The results generally support the hypothesis that combining idiosyncratic volatility (relative to market) with price-volume validation identifies profitable trends. The high IC confirms that the 'Informed Efficiency' concept has strong predictive power. However, the 'structural support floor' component (using high quantiles of low/open or TS_MIN) might be contributing to the increased drawdown by keeping the model in positions during regime shifts. The complexity of the V1 formulation (using multiple nested functions like TS_QUANTILE and TS_CORR) is high, which may explain the lower Information Ratio compared to the SOTA.",
        "decision": true,
        "reason": "The current 'support' components (TS_QUANTILE or low/TS_MIN) are sensitive to outliers and can create 'all-or-nothing' signals that increase drawdown. By using a more stable measure of price location (e.g., distance from a 20-day MA) and simplifying the idiosyncratic volatility ratio to a basic residual-based measure, we can reduce the symbol length and parameter count. This follows the 'Complexity Control' principle, aiming to maintain the predictive power of the price-volume correlation while making the risk-adjustment more robust across different market regimes."
      },
      "cache_location": null
    },
    "fae69de7090e0e5a": {
      "factor_id": "fae69de7090e0e5a",
      "factor_name": "Stealth_Accumulation_Efficiency_10D",
      "factor_expression": "RANK(TS_MEAN(($close - $open) / ($high - $low + 1e-8), 10))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(TS_MEAN(($close - $open) / ($high - $low + 1e-8), 10))\" # Your output factor expression will be filled in here\n    name = \"Stealth_Accumulation_Efficiency_10D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A simplified component of the institutional conviction hypothesis, focusing on 'Stealth Accumulation'. It measures the average intraday price progress relative to the total range over a 10-day window, identifying stocks where price movement is consistent and 'clean' rather than volatile.",
      "factor_formulation": "Rank(TS\\_MEAN(\\frac{close - open}{high - low + 1e-8}, 10))",
      "metadata": {
        "experiment_id": "2026-01-18_13-34-30-274463",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "59b0dff7176c",
        "parent_trajectory_ids": [
          "22145381325f",
          "a452d2c1c177"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Stealth-Conviction Fusion' factor, calculated as the product of the 10-day average intraday price efficiency (VWAP-to-Close ratio divided by intraday range) and the 20-day return-volume correlation scaled by the overnight gap, identifies superior risk-adjusted returns by capturing the transition from quiet accumulation to overt institutional momentum.\n                Concise Observation: Parent 1 (RankIC 0.023) captures low-noise accumulation through intraday structure, while Parent 2 (RankIC 0.029) identifies institutional conviction via overnight gaps and return-volume correlation; both capture different phases of the institutional trade cycle.\n                Concise Justification: Combining intraday efficiency (Parent 1) with inter-day conviction (Parent 2) filters out speculative gaps (noise) by requiring a prior state of 'quiet accumulation,' ensuring the factor only triggers when 'Smart Money' transitions from building a position to driving a trend.\n                Concise Knowledge: If a stock exhibits high intraday price efficiency with low volatility (stealth accumulation) followed by a high-conviction overnight gap that aligns with return-volume synergy, then the resulting momentum is more persistent than signals derived from price gaps or volume spikes alone.\n                concise Specification: The factor is defined as: Rank(Mean((Close - Open) / (High - Low), 10)) * Rank(((Close / Delay(Close, 1)) - 1 - (Close / Open - 1)) * Correlation(Return, Volume_Change, 20)). It uses a 10-day window for accumulation and a 20-day window for conviction correlation.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T05:53:57.508799"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.094379469257435,
        "ICIR": 0.057423571875225,
        "1day.excess_return_without_cost.std": 0.0042460316862205,
        "1day.excess_return_with_cost.annualized_return": 0.0143517930831041,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002594860349479,
        "1day.excess_return_without_cost.annualized_return": 0.0617576763176081,
        "1day.excess_return_with_cost.std": 0.0042473536201055,
        "Rank IC": 0.0252251661818718,
        "IC": 0.008068681908638,
        "1day.excess_return_without_cost.max_drawdown": -0.0741089242261757,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.94279927012592,
        "1day.pa": 0.0,
        "l2.valid": 0.9964186220181058,
        "Rank ICIR": 0.1907819922970675,
        "l2.train": 0.9934815968097204,
        "1day.excess_return_with_cost.information_ratio": 0.2190278123319337,
        "1day.excess_return_with_cost.mean": 6.030165160968145e-05
      },
      "feedback": {
        "observations": "The experiment tested the 'Institutional Stealth-Conviction Fusion' hypothesis by breaking it down into its composite parts and a combined version. The combined factor 'Institutional_Stealth_Conviction_Fusion' achieved a higher IC (0.008069 vs 0.005798) and a higher Annualized Return (0.061758 vs 0.052010) compared to the previous SOTA. However, the Information Ratio and Max Drawdown slightly deteriorated, suggesting that while the predictive power (IC) and absolute returns increased, the volatility of the excess returns also rose. The complexity of the fusion factor is moderate but manageable, though the use of multiple 'Rank' and 'TS_CORR' operations across different windows (10D and 20D) adds structural depth.",
        "hypothesis_evaluation": "The results support the hypothesis that combining intraday efficiency (stealth) with inter-day conviction (gaps and volume correlation) captures superior returns. The significant jump in IC indicates that the interaction between 'clean' price movement and volume-backed gaps is a strong predictor. The lower Information Ratio compared to SOTA suggests that the 'Conviction' component (overnight gaps) might be introducing higher idiosyncratic risk or noise that needs better filtering.",
        "decision": true,
        "reason": "The current 'Institutional_Stealth_Conviction_Fusion' uses a simple (Close-Open)/(High-Low) ratio which can be noisy in low-volatility regimes. By normalizing the intraday progress by the ATR or a rolling standard deviation, and ensuring the overnight gap is significant relative to recent volume (Volume-Weighted Gap), we aim to improve the Information Ratio. Additionally, keeping the window sizes consistent (e.g., both at 15 days) may reduce the complexity of the temporal interactions."
      },
      "cache_location": {
        "workspace_suffix": "exp_20260118_213430",
        "workspace_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_213430",
        "factor_dir": "1b75370889d1408d9936ca5999ae754f",
        "result_h5_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_213430/1b75370889d1408d9936ca5999ae754f/result.h5"
      }
    },
    "759befea49ae8869": {
      "factor_id": "759befea49ae8869",
      "factor_name": "ILA_Factor_V1",
      "factor_expression": "EMA(($open / DELAY($close, 1) - 1) / ($high / $low - 1 + 1e-8), 5) * TS_QUANTILE($low / $open, 20, 0.95)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"EMA(($open / DELAY($close, 1) - 1) / ($high / $low - 1 + 1e-8), 5) * TS_QUANTILE($low / $open, 20, 0.95)\" # Your output factor expression will be filled in here\n    name = \"ILA_Factor_V1\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "Informed Liquidity Absorption (ILA) factor: Identifies institutional accumulation by multiplying the 5-day EMA of the overnight-to-intraday return ratio (Information Asymmetry) by the 20-day 95th percentile of the low-to-open ratio (Structural Support). It captures assets where price gaps are supported by intraday floors.",
      "factor_formulation": "\\text{EMA}\\left(\\frac{(\\text{open} / \\text{delay}(\\text{close}, 1) - 1)}{(\\text{high} / \\text{low} - 1) + 1e-8}, 5\\right) \\times \\text{TS\\_QUANTILE}\\left(\\frac{\\text{low}}{\\text{open}}, 20, 0.95\\right)",
      "metadata": {
        "experiment_id": "2026-01-18_21-40-12-932281",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "230ba16dc492",
        "parent_trajectory_ids": [
          "5c45e715cea0",
          "4ae49b0b0395"
        ],
        "hypothesis": "Hypothesis: The Informed Liquidity Absorption (ILA) factor identifies high-conviction accumulation by multiplying the 5-day exponential moving average of overnight-to-intraday return ratios (Information Asymmetry) by the 20-day 95th percentile of the low-to-open price ratio (Structural Support), conditioned on declining 5-day volume volatility.\n                Concise Observation: Parent 1 (RankIC 0.0257) captures stealth accumulation through overnight returns, while Parent 2 (RankIC 0.0245) identifies price floors; combining them filters out false breakouts that lack either institutional positioning or structural stability.\n                Concise Justification: Informed traders often move prices overnight to minimize impact, while market makers provide liquidity at intraday lows; the product of these two signals isolates assets where stealth buying meets firm price support, creating a synergistic alpha source.\n                Concise Knowledge: If overnight gaps are positive while intraday ranges compress, informed accumulation is likely occurring; when this coincides with a high low-to-open ratio (price rejection at the floor), the structural support is validated for a breakout.\n                concise Specification: The factor is defined as (EMA((Open/Close[t-1]-1)/(High/Low-1), 5)) * (Percentile(Low/Open, 20, 0.95)), where the first term represents the intensity of the overnight gap relative to intraday volatility and the second term identifies the structural floor.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T14:30:27.627035"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1209184834140403,
        "ICIR": 0.046831587449,
        "1day.excess_return_without_cost.std": 0.0041569652992358,
        "1day.excess_return_with_cost.annualized_return": 0.0076991360194655,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002307397467063,
        "1day.excess_return_without_cost.annualized_return": 0.0549160597161117,
        "1day.excess_return_with_cost.std": 0.0041577777671722,
        "Rank IC": 0.0234601052413504,
        "IC": 0.0061635736481541,
        "1day.excess_return_without_cost.max_drawdown": -0.1105889321722075,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.8563168520396357,
        "1day.pa": 0.0,
        "l2.valid": 0.9967373565832488,
        "Rank ICIR": 0.1786782170629935,
        "l2.train": 0.9942924297137335,
        "1day.excess_return_with_cost.information_ratio": 0.1200306730041103,
        "1day.excess_return_with_cost.mean": 3.2349311006157776e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the Informed Liquidity Absorption (ILA) hypothesis. The current results show a slight improvement in Annualized Return (0.0549 vs 0.0520) and IC (0.0061 vs 0.0057) compared to the previous SOTA, although the Information Ratio and Max Drawdown have deteriorated. The core ILA_Factor_V1 and its volume-conditioned variant ILA_Vol_Conditioned_V2 successfully captured alpha by combining overnight information asymmetry with intraday price floors. However, the increased drawdown suggests that while the signal is stronger (higher IC), it may be more volatile or sensitive to specific market regimes.",
        "hypothesis_evaluation": "The hypothesis that combining overnight-to-intraday ratios with structural support (low-to-open) identifies accumulation is supported by the improved IC and Annualized Return. The 'Structural_Support_Intensity' factor confirms that the intraday floor (low/open) is a valid predictive component. The volume conditioning in V2 (using RANK ratios) effectively normalized the signal across different liquidity profiles, contributing to the higher IC. However, the deterioration in IR suggests the interaction between the 'Information Asymmetry' and 'Structural Support' components might be too noisy in its current multiplicative form.",
        "decision": true,
        "reason": "The current use of TS_QUANTILE(0.95) for structural support may be capturing extreme price movements that lead to higher drawdowns. By replacing the 95th percentile with a measure of price stability (like a scaled ATR) and smoothing the overnight gap signal, we can create a more robust factor. Additionally, the current V2 uses a RANK/RANK structure which is good for IC but can be unstable; a Z-score normalization or a simple additive combination of ranked components might provide a better risk-adjusted return (Information Ratio)."
      },
      "cache_location": {
        "workspace_suffix": "exp_20260118_221528",
        "workspace_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221528",
        "factor_dir": "3205244eff0e4c7a87505c646e5ee618",
        "result_h5_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221528/3205244eff0e4c7a87505c646e5ee618/result.h5"
      }
    },
    "ecc447caccad276b": {
      "factor_id": "ecc447caccad276b",
      "factor_name": "Retail_Gap_Reversion_Efficiency_Factor",
      "factor_expression": "RANK(TS_MEAN(ABS($open - DELAY($close, 1)) / ($high - $low + 1e-8), 5)) * RANK(INV(TS_MEAN($volume / (TS_STD($close, 20) + 1e-8), 20)))",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"RANK(TS_MEAN(ABS($open - DELAY($close, 1)) / ($high - $low + 1e-8), 5)) * RANK(INV(TS_MEAN($volume / (TS_STD($close, 20) + 1e-8), 20)))\" # Your output factor expression will be filled in here\n    name = \"Retail_Gap_Reversion_Efficiency_Factor\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "A simplified version of the exhaustion hypothesis focusing on the inverse relationship between overnight price jumps and institutional volume efficiency. It targets stocks where the overnight gap is large relative to the intraday range, and where volume intensity (Z-score) is low compared to price volatility, signaling a lack of informed participation.",
      "factor_formulation": "Factor = RANK(TS\\_MEAN(\\frac{ABS(open - DELAY(close, 1))}{high - low + 1e-8}, 5)) * RANK(INV(TS\\_MEAN(volume / TS\\_STD(close, 20), 20)))",
      "metadata": {
        "experiment_id": "2026-01-18_14-15-29-053563",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "a1d318498158",
        "parent_trajectory_ids": [
          "d160973b29d1",
          "37b2c5626b11"
        ],
        "hypothesis": "Hypothesis: The 'Institutional-Filtered Overnight Exhaustion' factor identifies superior mean-reversion opportunities by selecting stocks with high overnight-to-intraday volatility ratios (5-day window) specifically when institutional absorption efficiency and lower shadow support (20-day window) are low, indicating retail-driven noise rather than informed trend-following.\n                Concise Observation: Parent 1 (RankIC=0.0226) captures short-term sentiment exhaustion but suffers from 'falling knives' during institutional trends, while Parent 2 (RankIC=0.0265) identifies medium-term flow quality; combining them allows for a conditional reversal signal that filters out high-conviction institutional moves.\n                Concise Justification: By multiplying the Overnight-Intraday Exhaustion ratio with the inverse of Institutional Absorption Quality, we isolate price shocks that lack fundamental or institutional backing, thereby increasing the probability that the subsequent intraday or multi-day price action will mean-revert.\n                Concise Knowledge: If overnight price gaps are driven by retail sentiment without institutional volume support or structural price protection (shadows), they are more likely to revert; when high volume efficiency accompanies a gap, it signifies institutional participation and a higher probability of trend continuation.\n                concise Specification: Define the factor as (5-day MA of [Overnight Return / Intraday Range]) divided by (20-day MA of [(Volume Z-score / True Range Z-score) * (Lower Shadow / (High - Low))]); high values indicate high-exhaustion, low-support scenarios primed for reversal.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T04:04:13.492841"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1089610485498489,
        "ICIR": 0.0354251743571861,
        "1day.excess_return_without_cost.std": 0.0038555530014925,
        "1day.excess_return_with_cost.annualized_return": 0.0034701841509782,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002128650276836,
        "1day.excess_return_without_cost.annualized_return": 0.0506618765887187,
        "1day.excess_return_with_cost.std": 0.003856384038225,
        "Rank IC": 0.0198439307514092,
        "IC": 0.0046571564541568,
        "1day.excess_return_without_cost.max_drawdown": -0.0916257650476355,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.851738182155321,
        "1day.pa": 0.0,
        "l2.valid": 0.9964450366829346,
        "Rank ICIR": 0.1532617095075264,
        "l2.train": 0.993941433601921,
        "1day.excess_return_with_cost.information_ratio": 0.058328897375872,
        "1day.excess_return_with_cost.mean": 1.4580605676379138e-05
      },
      "feedback": {
        "observations": "The current iteration explored three variations of the 'Institutional-Filtered Overnight Exhaustion' hypothesis. The primary factor, 'Overnight_Exhaustion_Institutional_Filter_5D_20D', utilized a complex interaction between Z-scores of volume and price ranges combined with shadow ratios. While the theoretical framework of identifying retail-driven gaps is sound, the current results (IC: 0.0046, IR: 0.8517) underperform the SOTA (IC: 0.0058, IR: 0.9725). The complexity of the formulations, particularly the use of nested Z-scores and multiple raw features ($open, $close, $high, $low, $volume), likely contributed to a lack of robustness and potential overfitting on the training data, leading to inferior test performance compared to the SOTA.",
        "hypothesis_evaluation": "The hypothesis that overnight exhaustion filtered by institutional support identifies mean-reversion is partially supported in direction but requires significant refinement in execution. The 'Institutional_Absorption_Shadow_Ratio' and 'Retail_Gap_Reversion_Efficiency_Factor' suggest that the interaction between gap size and volume efficiency is a valid signal, but the current mathematical representations are too noisy. Specifically, using the ratio of two Z-scores (as seen in the first factor) creates extreme values that destabilize the signal. The 'lower shadow' component might be redundant if volume efficiency is already captured.",
        "decision": false,
        "reason": "To improve upon the SOTA, we must reduce complexity and focus on the most 'pure' signal of exhaustion. The previous factors were too complex (high SL and ER). By simplifying the 'institutional filter' to a straightforward ratio of Gap-to-Volume and focusing on the relationship between the gap and the 20-day average range, we can create a more robust indicator. Removing the lower shadow component and the nested Z-scores will reduce the parameter count (PC) and improve generalization. We will use a simpler 'Gap / (Volume_MA / Volume)' structure to identify low-conviction price moves."
      },
      "cache_location": {
        "workspace_suffix": "exp_20260118_221528",
        "workspace_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221528",
        "factor_dir": "2ea0e8d60e734ea88cf77fcc687dee94",
        "result_h5_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221528/2ea0e8d60e734ea88cf77fcc687dee94/result.h5"
      }
    },
    "d947f769b7c533e0": {
      "factor_id": "d947f769b7c533e0",
      "factor_name": "Inst_Liquidity_Gap_Capture_5D",
      "factor_expression": "TS_MEAN(ABS($open - DELAY($close, 1)) / ($high - $low + 1e-8), 5) * TS_ZSCORE(($low - MIN($open, $close)) / ($volume + 1e-8), 10)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_MEAN(ABS($open - DELAY($close, 1)) / ($high - $low + 1e-8), 5) * TS_ZSCORE(($low - MIN($open, $close)) / ($volume + 1e-8), 10)\" # Your output factor expression will be filled in here\n    name = \"Inst_Liquidity_Gap_Capture_5D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor identifies mean-reversion opportunities by combining overnight sentiment gaps with institutional absorption patterns. It multiplies the rolling mean of the overnight-to-intraday range ratio by the standardized lower shadow intensity relative to volume, capturing cases where price gaps are met with strong buying support.",
      "factor_formulation": "\\text{TS_MEAN}\\left(\\frac{|\\text{open} - \\text{delay}(\\text{close}, 1)|}{\\text{high} - \\text{low} + 1e-8}, 5\\right) \\times \\text{TS_ZSCORE}\\left(\\frac{\\text{low} - \\min(\\text{open}, \\text{close})}{\\text{volume} + 1e-8}, 10\\right)",
      "metadata": {
        "experiment_id": "2026-01-18_14-15-29-053563",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "5e035f26c88f",
        "parent_trajectory_ids": [
          "d160973b29d1",
          "3a4d3d97b0d5"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Liquidity-Gap Capture' factor, defined as the 5-day rolling mean of the product between the overnight-to-intraday volatility ratio and the volume-weighted lower shadow intensity, identifies high-probability mean-reversion opportunities where retail-driven price gaps are absorbed by institutional support.\n                Concise Observation: Parent 1 showed that overnight sentiment reversals carry alpha (RankIC 0.0226), while Parent 2 demonstrated that volume-validated price floors (lower shadows) identify institutional conviction (RankIC 0.0247).\n                Concise Justification: Combining the overnight gap anomaly with structural support metrics filters out weak-handed momentum trades, ensuring that mean-reversion signals are only executed when there is evidence of institutional 'floor-building' through price compression and volume absorption.\n                Concise Knowledge: If an overnight price gap occurs with low intraday volatility but high lower-shadow-to-volume ratios, it indicates institutional absorption of retail selling; when these conditions coincide, the short-term reversal probability increases as the liquidity gap is filled.\n                concise Specification: The factor is calculated by multiplying the 5-day moving average of (abs(Open - PrevClose) / (High - Low + eps)) by the 10-day Z-score of ((Low - min(Open, Close)) / Volume). It targets a 5-day lookback for sentiment and 10-day for structural volume validation.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T04:21:08.636221"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1311121097559886,
        "ICIR": 0.0388859289492544,
        "1day.excess_return_without_cost.std": 0.0045334402783585,
        "1day.excess_return_with_cost.annualized_return": -0.0024479468097223,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0001884122715648,
        "1day.excess_return_without_cost.annualized_return": 0.0448421206324407,
        "1day.excess_return_with_cost.std": 0.0045346689125997,
        "Rank IC": 0.0257644619465009,
        "IC": 0.0059361915504061,
        "1day.excess_return_without_cost.max_drawdown": -0.1207126894231002,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.6411649383511376,
        "1day.pa": 0.0,
        "l2.valid": 0.9964824510699042,
        "Rank ICIR": 0.1680478646182159,
        "l2.train": 0.9939019235523752,
        "1day.excess_return_with_cost.information_ratio": -0.0349919314442293,
        "1day.excess_return_with_cost.mean": -1.0285490797152764e-05
      },
      "feedback": {
        "observations": "The experiment tested three variations of the 'Institutional Liquidity-Gap Capture' hypothesis. The current iteration achieved a higher Information Coefficient (IC: 0.0059 vs SOTA: 0.0058), indicating a stronger linear relationship between the factor and future returns. However, the risk-adjusted performance (Information Ratio: 0.64 vs 0.97) and annualized return (4.48% vs 5.20%) lagged behind the SOTA, while the Max Drawdown significantly worsened (-0.12 vs -0.07). This suggests that while the signal has predictive power, the current construction introduces significant volatility and tail risk.",
        "hypothesis_evaluation": "The hypothesis that overnight gaps combined with lower shadow intensity identify mean-reversion is partially supported by the positive IC. However, the 'Gap_Reversion_Institutional_Conviction' factor and its peers seem to suffer from noise. The interaction between the gap magnitude and the lower shadow (the 'floor') is a valid signal, but the current multiplicative forms might be amplifying outliers, leading to the observed increase in Max Drawdown.",
        "decision": false,
        "reason": "1. Complexity Control: The current factors use up to 5 raw features ($open, $close, $high, $low, $volume). Reducing reliance on $volume (which is often noisy) and focusing on price action ratios (Shadow/Range) will improve robustness. 2. Directionality: Using the absolute difference |open - delay(close, 1)| ignores whether the gap was up or down. Mean reversion is typically stronger after downward gaps (liquidity traps). 3. Stability: Replacing the 5-day mean of a product with a product of means, or a simple rank-based combination, may reduce the impact of single-day price spikes that currently degrade the Information Ratio."
      },
      "cache_location": {
        "workspace_suffix": "exp_20260118_221528",
        "workspace_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221528",
        "factor_dir": "4ac1a4b07b004d29b2418da73795660b",
        "result_h5_path": "/mnt/DATA/quantagent/AlphaAgent/RD-Agent_workspace_exp_20260118_221528/4ac1a4b07b004d29b2418da73795660b/result.h5"
      }
    },
    "1ace02e186b401ca": {
      "factor_id": "1ace02e186b401ca",
      "factor_name": "IAER_Exhaustion_Absorption_5D_60D",
      "factor_expression": "RANK(-1 * TS_PCTCHANGE($close, 60) * TS_CORR($close, $volume, 20) / (TS_MEAN($volume, 20) + 1e-8)) * RANK(($open - DELAY($close, 1)) / (($high - $low) / ($volume + 1e-8) + 1e-8))",
      "factor_implementation_code": "",
      "factor_description": "This factor identifies structural reversals by combining long-term price-volume exhaustion with short-term intraday absorption. It multiplies the rank of a 60-day bearish exhaustion signal (negative ROC and low volume-price correlation) with the rank of a 5-day accumulation efficiency score (overnight gap relative to intraday range-per-volume).",
      "factor_formulation": "Rank( -TS\\_PCTCHANGE(close, 60) \\times \\frac{TS\\_CORR(close, volume, 20)}{TS\\_MEAN(volume, 20)} ) \\times Rank( \\frac{open - delay(close, 1)}{(high - low) / volume} )",
      "metadata": {
        "experiment_id": "2026-01-19_04-13-15-519909",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "ec683063bb59",
        "parent_trajectory_ids": [
          "91665942fad5",
          "4dd6b1bfce05"
        ],
        "hypothesis": "Hypothesis: The 'Institutional Absorption & Exhaustion Reversal' (IAER) factor identifies high-probability reversals by multiplying the rank of a 60-day price-volume exhaustion signal (Parent 2) with the rank of a 5-day intraday accumulation efficiency score (Parent 1), specifically targeting assets where structural selling washout meets immediate smart-money absorption.\n                Concise Observation: Parent 1 (ISAF) captures intraday efficiency (RankIC 0.023) and Parent 2 (Macro Exhaustion) captures long-term reversal (RankIC 0.024); combining them addresses the timing weakness of long-term reversals and the noise inherent in intraday signals.\n                Concise Justification: Long-term price exhaustion (ROC60 reversal) identifies the 'where' of a trade, while intraday efficiency (price-range-to-volume ratio) identifies the 'when' by signaling institutional absorption; multiplying their ranks ensures the factor only triggers when both structural and tactical conditions are optimal.\n                Concise Knowledge: If a long-term price decline is accompanied by high illiquidity and followed by narrow-range, high-volume intraday consolidation with positive overnight gaps, then the probability of a structural trend reversal is significantly enhanced; When macro exhaustion and micro accumulation align, the signal reliability exceeds that of either component alone.\n                concise Specification: The factor is defined as Rank( -ROC(close, 60) * Correlation(close, volume, 20) / Mean(volume, 20) ) * Rank( (open - delay(close, 1)) / ( (high - low) / volume ) ) using a 5-day window for the intraday efficiency component and a 60-day window for the macro exhaustion component.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T20:21:23.616621"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1404357126930604,
        "ICIR": 0.0302655430966541,
        "1day.excess_return_without_cost.std": 0.0047712956270778,
        "1day.excess_return_with_cost.annualized_return": 0.0230627347674815,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.0002958391976421,
        "1day.excess_return_without_cost.annualized_return": 0.0704097290388227,
        "1day.excess_return_with_cost.std": 0.0047724091908669,
        "Rank IC": 0.0200340168012946,
        "IC": 0.0042484205233583,
        "1day.excess_return_without_cost.max_drawdown": -0.0956938565368666,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.9565504237098702,
        "1day.pa": 0.0,
        "l2.valid": 0.9966185126987142,
        "Rank ICIR": 0.1454298917567074,
        "l2.train": 0.9937148843993902,
        "1day.excess_return_with_cost.information_ratio": 0.3132453642111494,
        "1day.excess_return_with_cost.mean": 9.690224692219134e-05
      },
      "feedback": {
        "observations": "The experiment tested two implementations of the 'Institutional Absorption & Exhaustion Reversal' (IAER) framework: 'Structural_Washout_Efficiency_Factor' and 'Exhaustion_Volume_Intensity_Reversal'. The current results show a significant improvement in Annualized Return (0.0704 vs 0.0520) compared to the SOTA, although the Information Ratio (IR) and Information Coefficient (IC) are slightly lower, and the Max Drawdown has increased. This suggests that the current factors are capturing higher-magnitude return events (tails) but with increased volatility and less consistency across the cross-section compared to the previous SOTA.",
        "hypothesis_evaluation": "The results partially support the hypothesis. The 'Structural_Washout_Efficiency_Factor' successfully demonstrates that combining a long-term price-series rank (60-day washout) with a short-term liquidity-adjusted gap (5-day absorption) generates superior annualized returns. However, the drop in IC suggests that the linear correlation of the factor with future returns is weak, implying that the 'absorption' signal might be non-linear or only effective at extreme values. The complexity of the 'Structural_Washout' factor is well-managed (ER=5), but the interaction between the two parent ranks may be introducing noise.",
        "decision": true,
        "reason": "The current 'Structural_Washout' factor uses a simple price gap (open - delay(close, 1)). While effective, it doesn't account for where that gap sits within the recent volatility context. By using a 'Price Location' (where the current price is relative to the 5-day high/low) weighted by volume, we can more accurately identify 'smart money' positioning. Furthermore, replacing TS_RANK(close, 60) with a divergence measure will help distinguish between a healthy downtrend and a terminal exhaustion phase, potentially improving the IC and reducing the Max Drawdown."
      },
      "cache_location": null
    },
    "400fc4daf7300470": {
      "factor_id": "400fc4daf7300470",
      "factor_name": "IVVS_Absorption_Ratio_20D",
      "factor_expression": "TS_STD($return, 5) / (TS_MEAN(TS_ZSCORE($volume, 20) / (TS_ZSCORE($high - $low, 20) + 1e-8), 20) + 1e-8)",
      "factor_implementation_code": "File: factor.py\n\nimport pandas as pd\nimport numpy as np\nimport os\nfrom alphaagent.components.coder.factor_coder.expr_parser import parse_expression, parse_symbol\nfrom alphaagent.components.coder.factor_coder.function_lib import *\n\n\ndef calculate_factor(expr: str, name: str):\n    # stock dataframe\n    df = pd.read_hdf('./daily_pv.h5', key='data')\n    \n    expr = parse_symbol(expr, df.columns)\n    expr = parse_expression(expr)\n\n    # replace '$var' by 'df['var'] to extract var's actual values\n    for col in df.columns:\n        expr = expr.replace(col[1:], f\"df[\\'{col}\\']\")\n\n    df[name] = eval(expr)\n    result = df[name].astype(np.float64)\n\n    if os.path.exists('result.h5'):\n        os.remove('result.h5')\n    result.to_hdf('result.h5', key='data')\n\nif __name__ == '__main__':\n    # Input factor expression. Do NOT use the variable format like \"df['$xxx']\" in factor expressions. Instead, you should use \"$xxx\". \n    expr = \"TS_STD(TS_PCTCHANGE($close, 1), 5) / (TS_MEAN(TS_ZSCORE($volume, 20) / (TS_ZSCORE($high - $low, 20) + 1e-8), 20) + 1e-8)\" # Your output factor expression will be filled in here\n    name = \"IVVS_Absorption_Ratio_20D\" # Your output factor name will be filled in here\n    calculate_factor(expr, name)\n",
      "factor_description": "This factor implements the Institutional-Validated Volatility Signal (IVVS) by dividing short-term idiosyncratic volatility (5-day standard deviation of returns) by a 20-day average Institutional Absorption Ratio. The Absorption Ratio is defined as the ratio of Volume Z-score to True Range Z-score. A high factor value suggests retail-driven exhaustion (high volatility with low volume efficiency), while a low value suggests institutional conviction.",
      "factor_formulation": "\\frac{TS\\_STD(return, 5)}{TS\\_MEAN(\\frac{TS\\_ZSCORE(volume, 20)}{TS\\_ZSCORE(high - low, 20)}, 20)}",
      "metadata": {
        "experiment_id": "2026-01-18_14-15-29-053563",
        "round_number": 8,
        "evolution_phase": "crossover",
        "trajectory_id": "a348d9ebfe49",
        "parent_trajectory_ids": [
          "3ebab6ae1f71",
          "37b2c5626b11"
        ],
        "hypothesis": "Hypothesis: The 'Institutional-Validated Volatility Signal' (IVVS) factor, defined as the 5-day idiosyncratic volatility divided by the 20-day Institutional Absorption Ratio, identifies overextended retail-driven price spikes prone to mean reversion when the ratio is high, and institutional-led price discovery when the ratio is low.\n                Concise Observation: Parent 1 (SAIVP) captures volatility extremes but lacks quality filters, while Parent 2 (Institutional Flow) identifies accumulation but misses short-term exhaustion points; combining them addresses the 'fake breakout' problem.\n                Concise Justification: Volatility without volume-price efficiency (high ratio) indicates retail-driven exhaustion, whereas volatility backed by high absorption (low ratio) suggests institutional conviction, allowing the factor to distinguish between noise and signal.\n                Concise Knowledge: If short-term idiosyncratic volatility is high while institutional absorption (volume-to-range efficiency) is low, price movements are likely noise-driven and prone to reversal; conversely, high absorption validates volatility as informed momentum.\n                concise Specification: Calculate the 5-day standard deviation of daily returns (SAIVP) and the 20-day average of the ratio between Volume Z-score and True Range Z-score (Absorption); the final factor is the quotient of SAIVP and the Absorption Ratio.\n                ",
        "initial_direction": null,
        "planning_direction": null,
        "created_at": "2026-01-19T03:57:23.414704"
      },
      "backtest_results": {
        "1day.excess_return_with_cost.max_drawdown": -0.1169486810369787,
        "ICIR": 0.0211269842457032,
        "1day.excess_return_without_cost.std": 0.0041458775876714,
        "1day.excess_return_with_cost.annualized_return": -0.0157214679816457,
        "1day.ffr": 1.0,
        "1day.excess_return_without_cost.mean": 0.000133928049468,
        "1day.excess_return_without_cost.annualized_return": 0.0318748757733921,
        "1day.excess_return_with_cost.std": 0.0041479841253098,
        "Rank IC": 0.0155665800656571,
        "IC": 0.0027555034887819,
        "1day.excess_return_without_cost.max_drawdown": -0.0789407374877414,
        "1day.pos": 0.0,
        "1day.excess_return_without_cost.information_ratio": 0.4983604249560066,
        "1day.pa": 0.0,
        "l2.valid": 0.99652599269601,
        "Rank ICIR": 0.120875920951161,
        "l2.train": 0.9940262495838412,
        "1day.excess_return_with_cost.information_ratio": -0.2456787147093432,
        "1day.excess_return_with_cost.mean": -6.605658815817527e-05
      },
      "feedback": {
        "observations": "The experimental results for the 'Institutional-Validated Volatility Signal' (IVVS) and its variants show a significant performance gap compared to the current SOTA. The Information Ratio (0.498) and IC (0.0027) are substantially lower than the SOTA benchmarks (0.972 and 0.0058 respectively). Among the implemented factors, the complex formulation in 'IVVS_Absorption_Ratio_20D' (using nested Z-scores and means) likely introduced noise or over-parameterization, while the 'Cross_Sectional_IVVS_Rank' attempted to normalize the signal but failed to capture the absolute intensity of the institutional absorption required for predictive power.",
        "hypothesis_evaluation": "The hypothesis that the ratio of short-term volatility to institutional absorption identifies mean reversion is partially supported in theory, but the current implementations are either too noisy or too complex. The use of Z-scores within the denominator (IVVS_Absorption_Ratio_20D) creates a 'ratio of ratios' which is mathematically unstable. The 'Institutional_Efficiency_Signal_15D' is the most robust direction due to its simplicity, but it lacks a proper look-back alignment between the numerator and denominator.",
        "decision": false,
        "reason": "Current factors suffered from complexity (Z-scores of ratios) and scale mismatch. By simplifying the core 'Efficiency' metric to a direct ratio of Range/Volume and then using a Long-term/Short-term comparison (5D vs 20D), we reduce the Symbol Length and the number of free parameters. This aligns with the complexity control requirements while maintaining the core theoretical framework of identifying retail-driven spikes versus institutional conviction."
      },
      "cache_location": null
    }
  }
}